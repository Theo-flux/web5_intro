"use strict";var Web5Credentials=(()=>{var S7=Object.create;var Qy=Object.defineProperty;var A7=Object.getOwnPropertyDescriptor;var x7=Object.getOwnPropertyNames;var D7=Object.getPrototypeOf,C7=Object.prototype.hasOwnProperty;var xP=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var DP=(t,e)=>()=>(t&&(e=t(t=0)),e);var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wo=(t,e)=>{for(var r in e)Qy(t,r,{get:e[r],enumerable:!0})},CP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of x7(e))!C7.call(t,s)&&s!==r&&Qy(t,s,{get:()=>e[s],enumerable:!(n=A7(e,s))||n.enumerable});return t};var Xn=(t,e,r)=>(r=t!=null?S7(D7(t)):{},CP(e||!t||!t.__esModule?Qy(r,"default",{value:t,enumerable:!0}):r,t)),PP=t=>CP(Qy({},"__esModule",{value:!0}),t);var m1=w((G0e,OP)=>{var P7=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,em=()=>P7.now(),O7=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),h1=t=>t===1/0||O7(t),y1=class t{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:s=!1,noUpdateTTL:i=!1,dispose:o,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!h1(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!h1(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!s,this.noUpdateTTL=!!i,this.noDisposeOnSet=!!a,o!==void 0){if(typeof o!="function")throw new TypeError("dispose must be function if set");this.dispose=o}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let s in this.expirations){this.setTimer(s,s-em());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==t.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let s=this.expirations[n];!s||s.length<=1?delete this.expirations[n]:this.expirations[n]=s.filter(i=>i!==e)}if(r!==1/0){let s=Math.floor(em()+r);this.expirationMap.set(e,s),this.expirations[s]||(this.expirations[s]=[],this.setTimer(s,r)),this.expirations[s].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:s=this.noUpdateTTL,noDisposeOnSet:i=this.noDisposeOnSet}={}){if(!h1(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){s||this.setTTL(e,n);let o=this.data.get(e);o!==r&&(this.data.set(e,r),i||this.dispose(o,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-em())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:s=this.checkAgeOnGet}={}){let i=this.data.get(e);if(s&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),i}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let s=this.expirations[r];return s&&(s.length<=1?delete this.expirations[r]:this.expirations[r]=s.filter(i=>i!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let s of r)n.push([s,this.data.get(s)]),this.data.delete(s),this.expirationMap.delete(s);for(let[s,i]of n)this.dispose(i,s,"evict")}else{let n=this.size-this.max,s=[];for(let i of r.splice(0,n))s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(em());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],s=[];delete this.expirations[r];for(let i of n)s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};OP.exports=y1});var zP=w(HP=>{"use strict";HP.supports=function(...e){let r=e.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var Li=w((zge,WP)=>{"use strict";WP.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var ZP=w(rm=>{"use strict";rm.byteLength=uK;rm.toByteArray=lK;rm.fromByteArray=pK;var _s=[],di=[],aK=typeof Uint8Array<"u"?Uint8Array:Array,O1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for($u=0,JP=O1.length;$u<JP;++$u)_s[$u]=O1[$u],di[O1.charCodeAt($u)]=$u;var $u,JP;di[45]=62;di[95]=63;function GP(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function uK(t){var e=GP(t),r=e[0],n=e[1];return(r+n)*3/4-n}function cK(t,e,r){return(e+r)*3/4-r}function lK(t){var e,r=GP(t),n=r[0],s=r[1],i=new aK(cK(t,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)e=di[t.charCodeAt(u)]<<18|di[t.charCodeAt(u+1)]<<12|di[t.charCodeAt(u+2)]<<6|di[t.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=di[t.charCodeAt(u)]<<2|di[t.charCodeAt(u+1)]>>4,i[o++]=e&255),s===1&&(e=di[t.charCodeAt(u)]<<10|di[t.charCodeAt(u+1)]<<4|di[t.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function fK(t){return _s[t>>18&63]+_s[t>>12&63]+_s[t>>6&63]+_s[t&63]}function dK(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(fK(n));return s.join("")}function pK(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(dK(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(_s[e>>2]+_s[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(_s[e>>10]+_s[e>>4&63]+_s[e<<2&63]+"=")),s.join("")}});var XP=w(B1=>{B1.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?s-1:0,p=r?-1:1,d=t[e+f];for(f+=p,i=d&(1<<-l)-1,d>>=-l,l+=a;l>0;i=i*256+t[e+f],f+=p,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+f],f+=p,l-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-c}return(d?-1:1)*o*Math.pow(2,i-n)};B1.write=function(t,e,r,n,s,i){var o,a,u,c=i*8-s-1,l=(1<<c)-1,f=l>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,h=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+f>=1?e+=p/u:e+=p*Math.pow(2,1-f),e*u>=2&&(o++,u/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(e*u-1)*Math.pow(2,s),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,s),o=0));s>=8;t[r+d]=a&255,d+=h,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[r+d]=o&255,d+=h,o/=256,c-=8);t[r+d-h]|=m*128}});var pi=w(Il=>{"use strict";var T1=ZP(),Bl=XP(),YP=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Il.Buffer=H;Il.SlowBuffer=bK;Il.INSPECT_MAX_BYTES=50;var nm=2147483647;Il.kMaxLength=nm;H.TYPED_ARRAY_SUPPORT=hK();!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function hK(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.buffer}});Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.byteOffset}});function Eo(t){if(t>nm)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,H.prototype),e}function H(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R1(t)}return rO(t,e,r)}H.poolSize=8192;function rO(t,e,r){if(typeof t=="string")return mK(t,e);if(ArrayBuffer.isView(t))return gK(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Es(t,ArrayBuffer)||t&&Es(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Es(t,SharedArrayBuffer)||t&&Es(t.buffer,SharedArrayBuffer)))return F1(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return H.from(n,e,r);let s=vK(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return H.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}H.from=function(t,e,r){return rO(t,e,r)};Object.setPrototypeOf(H.prototype,Uint8Array.prototype);Object.setPrototypeOf(H,Uint8Array);function nO(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function yK(t,e,r){return nO(t),t<=0?Eo(t):e!==void 0?typeof r=="string"?Eo(t).fill(e,r):Eo(t).fill(e):Eo(t)}H.alloc=function(t,e,r){return yK(t,e,r)};function R1(t){return nO(t),Eo(t<0?0:$1(t)|0)}H.allocUnsafe=function(t){return R1(t)};H.allocUnsafeSlow=function(t){return R1(t)};function mK(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!H.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=iO(t,e)|0,n=Eo(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function I1(t){let e=t.length<0?0:$1(t.length)|0,r=Eo(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function gK(t){if(Es(t,Uint8Array)){let e=new Uint8Array(t);return F1(e.buffer,e.byteOffset,e.byteLength)}return I1(t)}function F1(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,H.prototype),n}function vK(t){if(H.isBuffer(t)){let e=$1(t.length)|0,r=Eo(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||M1(t.length)?Eo(0):I1(t);if(t.type==="Buffer"&&Array.isArray(t.data))return I1(t.data)}function $1(t){if(t>=nm)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+nm.toString(16)+" bytes");return t|0}function bK(t){return+t!=t&&(t=0),H.alloc(+t)}H.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==H.prototype};H.compare=function(e,r){if(Es(e,Uint8Array)&&(e=H.from(e,e.offset,e.byteLength)),Es(r,Uint8Array)&&(r=H.from(r,r.offset,r.byteLength)),!H.isBuffer(e)||!H.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==r[i]){n=e[i],s=r[i];break}return n<s?-1:s<n?1:0};H.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};H.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return H.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let s=H.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let o=e[n];if(Es(o,Uint8Array))i+o.length>s.length?(H.isBuffer(o)||(o=H.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(H.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function iO(t,e){if(H.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Es(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return k1(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return pO(t).length;default:if(s)return n?-1:k1(t).length;e=(""+e).toLowerCase(),s=!0}}H.byteLength=iO;function wK(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return BK(this,e,r);case"utf8":case"utf-8":return oO(this,e,r);case"ascii":return PK(this,e,r);case"latin1":case"binary":return OK(this,e,r);case"base64":return DK(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return TK(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}H.prototype._isBuffer=!0;function Nu(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}H.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Nu(this,r,r+1);return this};H.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Nu(this,r,r+3),Nu(this,r+1,r+2);return this};H.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Nu(this,r,r+7),Nu(this,r+1,r+6),Nu(this,r+2,r+5),Nu(this,r+3,r+4);return this};H.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?oO(this,0,e):wK.apply(this,arguments)};H.prototype.toLocaleString=H.prototype.toString;H.prototype.equals=function(e){if(!H.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:H.compare(this,e)===0};H.prototype.inspect=function(){let e="",r=Il.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};YP&&(H.prototype[YP]=H.prototype.inspect);H.prototype.compare=function(e,r,n,s,i){if(Es(e,Uint8Array)&&(e=H.from(e,e.offset,e.byteLength)),!H.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),r<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;let o=i-s,a=n-r,u=Math.min(o,a),c=this.slice(s,i),l=e.slice(r,n);for(let f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0};function sO(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,M1(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=H.from(e,n)),H.isBuffer(e))return e.length===0?-1:QP(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):QP(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function QP(t,e,r,n,s){let i=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,o/=2,a/=2,r/=2}function u(l,f){return i===1?l[f]:l.readUInt16BE(f*i)}let c;if(s){let l=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===a)return l*i}else l!==-1&&(c-=c-l),l=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let l=!0;for(let f=0;f<a;f++)if(u(t,c+f)!==u(e,f)){l=!1;break}if(l)return c}return-1}H.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};H.prototype.indexOf=function(e,r,n){return sO(this,e,r,n,!0)};H.prototype.lastIndexOf=function(e,r,n){return sO(this,e,r,n,!1)};function _K(t,e,r,n){r=Number(r)||0;let s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;let i=e.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(M1(a))return o;t[r+o]=a}return o}function EK(t,e,r,n){return im(k1(e,t.length-r),t,r,n)}function SK(t,e,r,n){return im(RK(e),t,r,n)}function AK(t,e,r,n){return im(pO(e),t,r,n)}function xK(t,e,r,n){return im($K(e,t.length-r),t,r,n)}H.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return _K(this,e,r,n);case"utf8":case"utf-8":return EK(this,e,r,n);case"ascii":case"latin1":case"binary":return SK(this,e,r,n);case"base64":return AK(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xK(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function DK(t,e,r){return e===0&&r===t.length?T1.fromByteArray(t):T1.fromByteArray(t.slice(e,r))}function oO(t,e,r){r=Math.min(t.length,r);let n=[],s=e;for(;s<r;){let i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=r){let u,c,l,f;switch(a){case 1:i<128&&(o=i);break;case 2:u=t[s+1],(u&192)===128&&(f=(i&31)<<6|u&63,f>127&&(o=f));break;case 3:u=t[s+1],c=t[s+2],(u&192)===128&&(c&192)===128&&(f=(i&15)<<12|(u&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:u=t[s+1],c=t[s+2],l=t[s+3],(u&192)===128&&(c&192)===128&&(l&192)===128&&(f=(i&15)<<18|(u&63)<<12|(c&63)<<6|l&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return CK(n)}var eO=4096;function CK(t){let e=t.length;if(e<=eO)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=eO));return r}function PK(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function OK(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function BK(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let i=e;i<r;++i)s+=NK[t[i]];return s}function TK(t,e,r){let n=t.slice(e,r),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}H.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let s=this.subarray(e,r);return Object.setPrototypeOf(s,H.prototype),s};function Rr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Rr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return s};H.prototype.readUintBE=H.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Rr(e,r,this.length);let s=this[e+--r],i=1;for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s};H.prototype.readUint8=H.prototype.readUInt8=function(e,r){return e=e>>>0,r||Rr(e,1,this.length),this[e]};H.prototype.readUint16LE=H.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Rr(e,2,this.length),this[e]|this[e+1]<<8};H.prototype.readUint16BE=H.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Rr(e,2,this.length),this[e]<<8|this[e+1]};H.prototype.readUint32LE=H.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Rr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};H.prototype.readUint32BE=H.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Rr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};H.prototype.readBigUInt64LE=Sa(function(e){e=e>>>0,Tl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vd(e,this.length-8);let s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});H.prototype.readBigUInt64BE=Sa(function(e){e=e>>>0,Tl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vd(e,this.length-8);let s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});H.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Rr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};H.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Rr(e,r,this.length);let s=r,i=1,o=this[e+--s];for(;s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};H.prototype.readInt8=function(e,r){return e=e>>>0,r||Rr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};H.prototype.readInt16LE=function(e,r){e=e>>>0,r||Rr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};H.prototype.readInt16BE=function(e,r){e=e>>>0,r||Rr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};H.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Rr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};H.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Rr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};H.prototype.readBigInt64LE=Sa(function(e){e=e>>>0,Tl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vd(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});H.prototype.readBigInt64BE=Sa(function(e){e=e>>>0,Tl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vd(e,this.length-8);let s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});H.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Rr(e,4,this.length),Bl.read(this,e,!0,23,4)};H.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Rr(e,4,this.length),Bl.read(this,e,!1,23,4)};H.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Rr(e,8,this.length),Bl.read(this,e,!0,52,8)};H.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Rr(e,8,this.length),Bl.read(this,e,!1,52,8)};function $n(t,e,r,n,s,i){if(!H.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;$n(this,e,r,n,a,0)}let i=1,o=0;for(this[r]=e&255;++o<n&&(i*=256);)this[r+o]=e/i&255;return r+n};H.prototype.writeUintBE=H.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;$n(this,e,r,n,a,0)}let i=n-1,o=1;for(this[r+i]=e&255;--i>=0&&(o*=256);)this[r+i]=e/o&255;return r+n};H.prototype.writeUint8=H.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,1,255,0),this[r]=e&255,r+1};H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function aO(t,e,r,n,s){dO(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function uO(t,e,r,n,s){dO(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}H.prototype.writeBigUInt64LE=Sa(function(e,r=0){return aO(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeBigUInt64BE=Sa(function(e,r=0){return uO(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);$n(this,e,r,n,u-1,-u)}let i=0,o=1,a=0;for(this[r]=e&255;++i<n&&(o*=256);)e<0&&a===0&&this[r+i-1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};H.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);$n(this,e,r,n,u-1,-u)}let i=n-1,o=1,a=0;for(this[r+i]=e&255;--i>=0&&(o*=256);)e<0&&a===0&&this[r+i+1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};H.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};H.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};H.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};H.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};H.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||$n(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};H.prototype.writeBigInt64LE=Sa(function(e,r=0){return aO(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});H.prototype.writeBigInt64BE=Sa(function(e,r=0){return uO(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function cO(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function lO(t,e,r,n,s){return e=+e,r=r>>>0,s||cO(t,e,r,4,34028234663852886e22,-34028234663852886e22),Bl.write(t,e,r,n,23,4),r+4}H.prototype.writeFloatLE=function(e,r,n){return lO(this,e,r,!0,n)};H.prototype.writeFloatBE=function(e,r,n){return lO(this,e,r,!1,n)};function fO(t,e,r,n,s){return e=+e,r=r>>>0,s||cO(t,e,r,8,17976931348623157e292,-17976931348623157e292),Bl.write(t,e,r,n,52,8),r+8}H.prototype.writeDoubleLE=function(e,r,n){return fO(this,e,r,!0,n)};H.prototype.writeDoubleBE=function(e,r,n){return fO(this,e,r,!1,n)};H.prototype.copy=function(e,r,n,s){if(!H.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);let i=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),i};H.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!H.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let o=e.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let o=H.isBuffer(e)?e:H.from(e,s),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=o[i%a]}return this};var Ol={};function N1(t,e,r){Ol[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}N1("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);N1("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);N1("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=tO(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=tO(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function tO(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function IK(t,e,r){Tl(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Vd(e,t.length-(r+1))}function dO(t,e,r,n,s,i){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw i>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:a=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Ol.ERR_OUT_OF_RANGE("value",a,t)}IK(n,s,i)}function Tl(t,e){if(typeof t!="number")throw new Ol.ERR_INVALID_ARG_TYPE(e,"number",t)}function Vd(t,e,r){throw Math.floor(t)!==t?(Tl(t,r),new Ol.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Ol.ERR_BUFFER_OUT_OF_BOUNDS:new Ol.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var FK=/[^+/0-9A-Za-z-_]/g;function kK(t){if(t=t.split("=")[0],t=t.trim().replace(FK,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function k1(t,e){e=e||1/0;let r,n=t.length,s=null,i=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function RK(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function $K(t,e){let r,n,s,i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function pO(t){return T1.toByteArray(kK(t))}function im(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function Es(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function M1(t){return t!==t}var NK=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function Sa(t){return typeof BigInt>"u"?MK:t}function MK(){throw new Error("BigInt not supported")}});var q1=w((Xge,hO)=>{"use strict";var j1=null;hO.exports=function(){return j1===null&&(j1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),j1}});var K1=w(yO=>{"use strict";var U1=Li(),jK=new Set(["buffer","view","utf8"]),L1=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!jK.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new U1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new U1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new U1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};yO.Encoding=L1});var W1=w(sm=>{"use strict";var{Buffer:H1}=pi()||{},{Encoding:z1}=K1(),qK=q1(),Hd=class extends z1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new zd({encode:this.encode,decode:e=>this.decode(H1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},zd=class extends z1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Hd({encode:e=>{let r=this.encode(e);return H1.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},V1=class extends z1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Hd({encode:e=>H1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=qK();return new zd({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};sm.BufferFormat=Hd;sm.ViewFormat=zd;sm.UTF8Format=V1});var bO=w(Mu=>{"use strict";var{Buffer:fn}=pi()||{Buffer:{isBuffer:()=>!1}},{textEncoder:gO,textDecoder:mO}=q1()(),{BufferFormat:Wd,ViewFormat:J1,UTF8Format:vO}=W1(),om=t=>t;Mu.utf8=new vO({encode:function(t){return fn.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?mO.decode(t):String(t)},decode:om,name:"utf8",createViewTranscoder(){return new J1({encode:function(t){return ArrayBuffer.isView(t)?t:gO.encode(t)},decode:function(t){return mO.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new Wd({encode:function(t){return fn.isBuffer(t)?t:ArrayBuffer.isView(t)?fn.from(t.buffer,t.byteOffset,t.byteLength):fn.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});Mu.json=new vO({encode:JSON.stringify,decode:JSON.parse,name:"json"});Mu.buffer=new Wd({encode:function(t){return fn.isBuffer(t)?t:ArrayBuffer.isView(t)?fn.from(t.buffer,t.byteOffset,t.byteLength):fn.from(String(t),"utf8")},decode:om,name:"buffer",createViewTranscoder(){return new J1({encode:function(t){return ArrayBuffer.isView(t)?t:fn.from(String(t),"utf8")},decode:function(t){return fn.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});Mu.view=new J1({encode:function(t){return ArrayBuffer.isView(t)?t:gO.encode(t)},decode:om,name:"view",createBufferTranscoder(){return new Wd({encode:function(t){return fn.isBuffer(t)?t:ArrayBuffer.isView(t)?fn.from(t.buffer,t.byteOffset,t.byteLength):fn.from(String(t),"utf8")},decode:om,name:`${this.name}+buffer`})}});Mu.hex=new Wd({encode:function(t){return fn.isBuffer(t)?t:fn.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});Mu.base64=new Wd({encode:function(t){return fn.isBuffer(t)?t:fn.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var EO=w(_O=>{"use strict";var wO=Li(),um=bO(),{Encoding:UK}=K1(),{BufferFormat:LK,ViewFormat:KK,UTF8Format:VK}=W1(),Jd=Symbol("formats"),am=Symbol("encodings"),HK=new Set(["buffer","view","utf8"]),G1=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>HK.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[am]=new Map,this[Jd]=new Set(e);for(let r in um)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[am].values()))}encoding(e){let r=this[am].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=GK[e],!r)throw new wO(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=zK(e)}let{name:n,format:s}=r;if(!this[Jd].has(s))if(this[Jd].has("view"))r=r.createViewTranscoder();else if(this[Jd].has("buffer"))r=r.createBufferTranscoder();else if(this[Jd].has("utf8"))r=r.createUTF8Transcoder();else throw new wO(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let i of[e,n,r.name,r.commonName])this[am].set(i,r)}return r}};_O.Transcoder=G1;function zK(t){if(t instanceof UK)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${ZK++}`;switch(WK(t)){case"view":return new KK({...t,name:r});case"utf8":return new VK({...t,name:r});case"buffer":return new LK({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function WK(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var JK={binary:um.buffer,"utf-8":um.utf8},GK={...um,...JK},ZK=0});var Gd=w((rve,Z1)=>{"use strict";var Fl=typeof Reflect=="object"?Reflect:null,SO=Fl&&typeof Fl.apply=="function"?Fl.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},cm;Fl&&typeof Fl.ownKeys=="function"?cm=Fl.ownKeys:Object.getOwnPropertySymbols?cm=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:cm=function(e){return Object.getOwnPropertyNames(e)};function XK(t){console&&console.warn&&console.warn(t)}var xO=Number.isNaN||function(e){return e!==e};function kt(){kt.init.call(this)}Z1.exports=kt;Z1.exports.once=tV;kt.EventEmitter=kt;kt.prototype._events=void 0;kt.prototype._eventsCount=0;kt.prototype._maxListeners=void 0;var AO=10;function lm(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(kt,"defaultMaxListeners",{enumerable:!0,get:function(){return AO},set:function(t){if(typeof t!="number"||t<0||xO(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");AO=t}});kt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};kt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||xO(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function DO(t){return t._maxListeners===void 0?kt.defaultMaxListeners:t._maxListeners}kt.prototype.getMaxListeners=function(){return DO(this)};kt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")SO(u,this,r);else for(var c=u.length,l=TO(u,c),n=0;n<c;++n)SO(l[n],this,r);return!0};function CO(t,e,r,n){var s,i,o;if(lm(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=DO(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,XK(a)}return t}kt.prototype.addListener=function(e,r){return CO(this,e,r,!1)};kt.prototype.on=kt.prototype.addListener;kt.prototype.prependListener=function(e,r){return CO(this,e,r,!0)};function YK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function PO(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=YK.bind(n);return s.listener=r,n.wrapFn=s,s}kt.prototype.once=function(e,r){return lm(r),this.on(e,PO(this,e,r)),this};kt.prototype.prependOnceListener=function(e,r){return lm(r),this.prependListener(e,PO(this,e,r)),this};kt.prototype.removeListener=function(e,r){var n,s,i,o,a;if(lm(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():QK(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};kt.prototype.off=kt.prototype.removeListener;kt.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function OO(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?eV(s):TO(s,s.length)}kt.prototype.listeners=function(e){return OO(this,e,!0)};kt.prototype.rawListeners=function(e){return OO(this,e,!1)};kt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):BO.call(t,e)};kt.prototype.listenerCount=BO;function BO(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}kt.prototype.eventNames=function(){return this._eventsCount>0?cm(this._events):[]};function TO(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function QK(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function eV(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function tV(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}IO(t,e,i,{once:!0}),e!=="error"&&rV(t,s,{once:!0})})}function rV(t,e,r){typeof t.on=="function"&&IO(t,"error",e,r)}function IO(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var kO=w((nve,FO)=>{FO.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var Zd=w(X1=>{"use strict";var RO=kO();X1.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,s){t=function(i,o){i?s(i):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};X1.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){RO(()=>e(null,r))}).catch(function(r){RO(()=>e(r))})}});var fm=w(Y1=>{"use strict";Y1.getCallback=function(t,e){return typeof t=="function"?t:e};Y1.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var Oa=w(ym=>{"use strict";var{fromCallback:Q1}=Zd(),Yn=Li(),{getOptions:ew,getCallback:$O}=fm(),ju=Symbol("promise"),kl=Symbol("callback"),Ss=Symbol("working"),qu=Symbol("handleOne"),So=Symbol("handleMany"),tw=Symbol("autoClose"),Ca=Symbol("finishWork"),As=Symbol("returnMany"),Aa=Symbol("closing"),Xd=Symbol("handleClose"),dm=Symbol("closed"),Yd=Symbol("closeCallbacks"),Da=Symbol("keyEncoding"),Uu=Symbol("valueEncoding"),rw=Symbol("abortOnClose"),pm=Symbol("legacy"),nw=Symbol("keys"),iw=Symbol("values"),xa=Symbol("limit"),hi=Symbol("count"),hm=Object.freeze({}),nV=()=>{},NO=!1,Qd=class{constructor(e,r,n){if(typeof e!="object"||e===null){let s=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[dm]=!1,this[Yd]=[],this[Ss]=!1,this[Aa]=!1,this[tw]=!1,this[kl]=null,this[qu]=this[qu].bind(this),this[So]=this[So].bind(this),this[Xd]=this[Xd].bind(this),this[Da]=r[Da],this[Uu]=r[Uu],this[pm]=n,this[xa]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[hi]=0,this[rw]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[hi]}get limit(){return this[xa]}next(e){let r;if(e===void 0)r=new Promise((n,s)=>{e=(i,o,a)=>{i?s(i):this[pm]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Aa]?this.nextTick(e,new Yn("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ss]?this.nextTick(e,new Yn("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ss]=!0,this[kl]=e,this[hi]>=this[xa]?this.nextTick(this[qu],null):this._next(this[qu])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=$O(r,n),n=Q1(n,ju),r=ew(r,hm),Number.isInteger(e)?(this[Aa]?this.nextTick(n,new Yn("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ss]?this.nextTick(n,new Yn("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[xa]<1/0&&(e=Math.min(e,this[xa]-this[hi])),this[Ss]=!0,this[kl]=n,e<=0?this.nextTick(this[So],null,[]):this._nextv(e,r,this[So])),n[ju]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[ju])}_nextv(e,r,n){let s=[],i=(o,a,u)=>{if(o)return n(o);if(this[pm]?a===void 0&&u===void 0:a===void 0)return n(null,s);s.push(this[pm]?[a,u]:a),s.length===e?n(null,s):this._next(i)};this._next(i)}all(e,r){return r=$O(e,r),r=Q1(r,ju),e=ew(e,hm),this[Aa]?this.nextTick(r,new Yn("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ss]?this.nextTick(r,new Yn("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ss]=!0,this[kl]=r,this[tw]=!0,this[hi]>=this[xa]?this.nextTick(this[So],null,[]):this._all(e,this[So])),r[ju]}_all(e,r){let n=this[hi],s=[],i=()=>{let a=this[xa]<1/0?Math.min(1e3,this[xa]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,hm,o)},o=(a,u)=>{a?r(a):u.length===0?r(null,s):(s.push.apply(s,u),n+=u.length,i())};i()}[Ca](){let e=this[kl];return this[rw]&&e===null?nV:(this[Ss]=!1,this[kl]=null,this[Aa]&&this._close(this[Xd]),e)}[As](e,r,n){this[tw]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=ew(r,hm),!this[Aa]){if(this[Ss])throw new Yn("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[Da]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});let i=this.db.prefixKey(n.encode(e),s);this._seek(i,r)}}}_seek(e,r){throw new Yn("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=Q1(e,ju),this[dm]?this.nextTick(e):this[Aa]?this[Yd].push(e):(this[Aa]=!0,this[Yd].push(e),this[Ss]?this[rw]&&this[Ca]()(new Yn("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Xd])),e[ju]}_close(e){this.nextTick(e)}[Xd](){this[dm]=!0,this.db.detachResource(this);let e=this[Yd];this[Yd]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[dm]||await this.close()}}},Rl=class extends Qd{constructor(e,r){super(e,r,!0),this[nw]=r.keys!==!1,this[iw]=r.values!==!1}[qu](e,r,n){let s=this[Ca]();if(e)return s(e);try{r=this[nw]&&r!==void 0?this[Da].decode(r):void 0,n=this[iw]&&n!==void 0?this[Uu].decode(n):void 0}catch(i){return s(new Pa("entry",i))}r===void 0&&n===void 0||this[hi]++,s(null,r,n)}[So](e,r){let n=this[Ca]();if(e)return this[As](n,e);try{for(let s of r){let i=s[0],o=s[1];s[0]=this[nw]&&i!==void 0?this[Da].decode(i):void 0,s[1]=this[iw]&&o!==void 0?this[Uu].decode(o):void 0}}catch(s){return this[As](n,new Pa("entries",s))}this[hi]+=r.length,this[As](n,null,r)}end(e){return!NO&&typeof console<"u"&&(NO=!0,console.warn(new Yn("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},sw=class extends Qd{constructor(e,r){super(e,r,!1)}[qu](e,r){let n=this[Ca]();if(e)return n(e);try{r=r!==void 0?this[Da].decode(r):void 0}catch(s){return n(new Pa("key",s))}r!==void 0&&this[hi]++,n(null,r)}[So](e,r){let n=this[Ca]();if(e)return this[As](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[Da].decode(i):void 0}}catch(s){return this[As](n,new Pa("keys",s))}this[hi]+=r.length,this[As](n,null,r)}},ow=class extends Qd{constructor(e,r){super(e,r,!1)}[qu](e,r){let n=this[Ca]();if(e)return n(e);try{r=r!==void 0?this[Uu].decode(r):void 0}catch(s){return n(new Pa("value",s))}r!==void 0&&this[hi]++,n(null,r)}[So](e,r){let n=this[Ca]();if(e)return this[As](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[Uu].decode(i):void 0}}catch(s){return this[As](n,new Pa("values",s))}this[hi]+=r.length,this[As](n,null,r)}},Pa=class extends Yn{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(Rl.prototype,t.split(" ")[0],{get(){throw new Yn(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Yn(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});Rl.keyEncoding=Da;Rl.valueEncoding=Uu;ym.AbstractIterator=Rl;ym.AbstractKeyIterator=sw;ym.AbstractValueIterator=ow});var MO=w(aw=>{"use strict";var{AbstractKeyIterator:iV,AbstractValueIterator:sV}=Oa(),Lu=Symbol("iterator"),ep=Symbol("callback"),$l=Symbol("handleOne"),Ku=Symbol("handleMany"),tp=class extends iV{constructor(e,r){super(e,r),this[Lu]=e.iterator({...r,keys:!0,values:!1}),this[$l]=this[$l].bind(this),this[Ku]=this[Ku].bind(this)}},mm=class extends sV{constructor(e,r){super(e,r),this[Lu]=e.iterator({...r,keys:!1,values:!0}),this[$l]=this[$l].bind(this),this[Ku]=this[Ku].bind(this)}};for(let t of[tp,mm]){let e=t===tp,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[ep]=n,this[Lu].next(this[$l])},t.prototype[$l]=function(n,s,i){let o=this[ep];n?o(n):o(null,e?s:i)},t.prototype._nextv=function(n,s,i){this[ep]=i,this[Lu].nextv(n,s,this[Ku])},t.prototype._all=function(n,s){this[ep]=s,this[Lu].all(n,this[Ku])},t.prototype[Ku]=function(n,s){let i=this[ep];n?i(n):i(null,s.map(r))},t.prototype._seek=function(n,s){this[Lu].seek(n,s)},t.prototype._close=function(n){this[Lu].close(n)}}aw.DefaultKeyIterator=tp;aw.DefaultValueIterator=mm});var jO=w(Em=>{"use strict";var{AbstractIterator:oV,AbstractKeyIterator:aV,AbstractValueIterator:uV}=Oa(),uw=Li(),Nn=Symbol("nut"),wm=Symbol("undefer"),_m=Symbol("factory"),gm=class extends oV{constructor(e,r){super(e,r),this[Nn]=null,this[_m]=()=>e.iterator(r),this.db.defer(()=>this[wm]())}},vm=class extends aV{constructor(e,r){super(e,r),this[Nn]=null,this[_m]=()=>e.keys(r),this.db.defer(()=>this[wm]())}},bm=class extends uV{constructor(e,r){super(e,r),this[Nn]=null,this[_m]=()=>e.values(r),this.db.defer(()=>this[wm]())}};for(let t of[gm,vm,bm])t.prototype[wm]=function(){this.db.status==="open"&&(this[Nn]=this[_m]())},t.prototype._next=function(e){this[Nn]!==null?this[Nn].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new uw("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Nn]!==null?this[Nn].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new uw("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Nn]!==null?this[Nn].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new uw("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Nn]!==null?this[Nn]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Nn]!==null?this[Nn].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Em.DeferredIterator=gm;Em.DeferredKeyIterator=vm;Em.DeferredValueIterator=bm});var lw=w(UO=>{"use strict";var{fromCallback:qO}=Zd(),Sm=Li(),{getCallback:cV,getOptions:lV}=fm(),Am=Symbol("promise"),yi=Symbol("status"),Nl=Symbol("operations"),rp=Symbol("finishClose"),Ml=Symbol("closeCallbacks"),cw=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[Nl]=[],this[Ml]=[],this[yi]="open",this[rp]=this[rp].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Nl].length}put(e,r,n){if(this[yi]!=="open")throw new Sm("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let s=this.db._checkKey(e)||this.db._checkValue(r);if(s)throw s;let i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),u=i.valueEncoding(n&&n.valueEncoding),c=a.format;n={...n,keyEncoding:c,valueEncoding:u.format},i!==this.db&&(n.sublevel=null);let l=i.prefixKey(a.encode(e),c),f=u.encode(r);return this._put(l,f,n),this[Nl].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[yi]!=="open")throw new Sm("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(e),a),r),this[Nl].push({...i,type:"del",key:e}),this}_del(e,r){}clear(){if(this[yi]!=="open")throw new Sm("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Nl]=[],this}_clear(){}write(e,r){return r=cV(e,r),r=qO(r,Am),e=lV(e),this[yi]!=="open"?this.nextTick(r,new Sm("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[yi]="writing",this._write(e,n=>{this[yi]="closing",this[Ml].push(()=>r(n)),n||this.db.emit("batch",this[Nl]),this._close(this[rp])})),r[Am]}_write(e,r){}close(e){return e=qO(e,Am),this[yi]==="closing"?this[Ml].push(e):this[yi]==="closed"?this.nextTick(e):(this[Ml].push(e),this[yi]!=="writing"&&(this[yi]="closing",this._close(this[rp]))),e[Am]}_close(e){this.nextTick(e)}[rp](){this[yi]="closed",this.db.detachResource(this);let e=this[Ml];this[Ml]=[];for(let r of e)r()}};UO.AbstractChainedBatch=cw});var KO=w(LO=>{"use strict";var{AbstractChainedBatch:fV}=lw(),dV=Li(),jl=Symbol("encoded"),fw=class extends fV{constructor(e){super(e),this[jl]=[]}_put(e,r,n){this[jl].push({...n,type:"put",key:e,value:r})}_del(e,r){this[jl].push({...r,type:"del",key:e})}_clear(){this[jl]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[jl].length===0?this.nextTick(r):this.db._batch(this[jl],e,r):this.nextTick(r,new dV("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};LO.DefaultChainedBatch=fw});var zO=w((fve,HO)=>{"use strict";var VO=Li(),pV=Object.prototype.hasOwnProperty,hV=new Set(["lt","lte","gt","gte"]);HO.exports=function(t,e){let r={};for(let n in t)if(pV.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new VO(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new VO("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});hV.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var dw=w((dve,JO)=>{var WO;JO.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(WO||(WO=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var XO=w((pve,ZO)=>{"use strict";var GO=dw();ZO.exports=function(t,...e){e.length===0?GO(t):GO(()=>t(...e))}});var YO=w(xm=>{"use strict";var{AbstractIterator:yV,AbstractKeyIterator:mV,AbstractValueIterator:gV}=Oa(),ql=Symbol("unfix"),Ki=Symbol("iterator"),Vu=Symbol("handleOne"),Ba=Symbol("handleMany"),Ao=Symbol("callback"),np=class extends yV{constructor(e,r,n,s){super(e,r),this[Ki]=n,this[ql]=s,this[Vu]=this[Vu].bind(this),this[Ba]=this[Ba].bind(this),this[Ao]=null}[Vu](e,r,n){let s=this[Ao];if(e)return s(e);r!==void 0&&(r=this[ql](r)),s(e,r,n)}[Ba](e,r){let n=this[Ao];if(e)return n(e);for(let s of r){let i=s[0];i!==void 0&&(s[0]=this[ql](i))}n(e,r)}},ip=class extends mV{constructor(e,r,n,s){super(e,r),this[Ki]=n,this[ql]=s,this[Vu]=this[Vu].bind(this),this[Ba]=this[Ba].bind(this),this[Ao]=null}[Vu](e,r){let n=this[Ao];if(e)return n(e);r!==void 0&&(r=this[ql](r)),n(e,r)}[Ba](e,r){let n=this[Ao];if(e)return n(e);for(let s=0;s<r.length;s++){let i=r[s];i!==void 0&&(r[s]=this[ql](i))}n(e,r)}},sp=class extends gV{constructor(e,r,n){super(e,r),this[Ki]=n}};for(let t of[np,ip])t.prototype._next=function(e){this[Ao]=e,this[Ki].next(this[Vu])},t.prototype._nextv=function(e,r,n){this[Ao]=n,this[Ki].nextv(e,r,this[Ba])},t.prototype._all=function(e,r){this[Ao]=r,this[Ki].all(e,this[Ba])};for(let t of[sp])t.prototype._next=function(e){this[Ki].next(e)},t.prototype._nextv=function(e,r,n){this[Ki].nextv(e,r,n)},t.prototype._all=function(e,r){this[Ki].all(e,r)};for(let t of[np,ip,sp])t.prototype._seek=function(e,r){this[Ki].seek(e,r)},t.prototype._close=function(e){this[Ki].close(e)};xm.AbstractSublevelIterator=np;xm.AbstractSublevelKeyIterator=ip;xm.AbstractSublevelValueIterator=sp});var rB=w((yve,tB)=>{"use strict";var pw=Li(),{Buffer:mw}=pi()||{},{AbstractSublevelIterator:vV,AbstractSublevelKeyIterator:bV,AbstractSublevelValueIterator:wV}=YO(),xo=Symbol("prefix"),QO=Symbol("upperBound"),op=Symbol("prefixRange"),Qn=Symbol("parent"),hw=Symbol("unfix"),eB=new TextEncoder,_V={separator:"!"};tB.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new pw("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new pw("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?_V:n.separator?n:{...n,separator:"!"}}constructor(n,s,i){let{separator:o,manifest:a,...u}=e.defaults(i);s=SV(s,o);let c=o.charCodeAt(0)+1,l=n[Qn]||n;if(!eB.encode(s).every(d=>d>c&&d<127))throw new pw(`Prefix must use bytes > ${c} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(EV(l,a),u);let f=(n.prefix||"")+o+s+o,p=f.slice(0,-1)+String.fromCharCode(c);this[Qn]=l,this[xo]=new Dm(f),this[QO]=new Dm(p),this[hw]=new gw,this.nextTick=l.nextTick}prefixKey(n,s){if(s==="utf8")return this[xo].utf8+n;if(n.byteLength===0)return this[xo][s];if(s==="view"){let i=this[xo].view,o=new Uint8Array(i.byteLength+n.byteLength);return o.set(i,0),o.set(n,i.byteLength),o}else{let i=this[xo].buffer;return mw.concat([i,n],i.byteLength+n.byteLength)}}[op](n,s){n.gte!==void 0?n.gte=this.prefixKey(n.gte,s):n.gt!==void 0?n.gt=this.prefixKey(n.gt,s):n.gte=this[xo][s],n.lte!==void 0?n.lte=this.prefixKey(n.lte,s):n.lt!==void 0?n.lt=this.prefixKey(n.lt,s):n.lte=this[QO][s]}get prefix(){return this[xo].utf8}get db(){return this[Qn]}_open(n,s){this[Qn].open({passive:!0},s)}_put(n,s,i,o){this[Qn].put(n,s,i,o)}_get(n,s,i){this[Qn].get(n,s,i)}_getMany(n,s,i){this[Qn].getMany(n,s,i)}_del(n,s,i){this[Qn].del(n,s,i)}_batch(n,s,i){this[Qn].batch(n,s,i)}_clear(n,s){this[op](n,n.keyEncoding),this[Qn].clear(n,s)}_iterator(n){this[op](n,n.keyEncoding);let s=this[Qn].iterator(n),i=this[hw].get(this[xo].utf8.length,n.keyEncoding);return new vV(this,n,s,i)}_keys(n){this[op](n,n.keyEncoding);let s=this[Qn].keys(n),i=this[hw].get(this[xo].utf8.length,n.keyEncoding);return new bV(this,n,s,i)}_values(n){this[op](n,n.keyEncoding);let s=this[Qn].values(n);return new wV(this,n,s)}}return{AbstractSublevel:e}};var EV=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:yw(t,"utf8"),buffer:yw(t,"buffer"),view:yw(t,"view")}}},yw=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},Dm=class{constructor(e){this.utf8=e,this.view=eB.encode(e),this.buffer=mw?mw.from(this.view.buffer,0,this.view.byteLength):{}}},gw=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=(function(s,i){return i.subarray(s)}).bind(null,e):n=(function(s,i){return i.slice(s)}).bind(null,e),this.cache.set(r,n)),n}},SV=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var Ew=w(_w=>{"use strict";var{supports:AV}=zP(),{Transcoder:xV}=EO(),{EventEmitter:DV}=Gd(),{fromCallback:Ta}=Zd(),Vi=Li(),{AbstractIterator:Hu}=Oa(),{DefaultKeyIterator:CV,DefaultValueIterator:PV}=MO(),{DeferredIterator:OV,DeferredKeyIterator:BV,DeferredValueIterator:TV}=jO(),{DefaultChainedBatch:nB}=KO(),{getCallback:zu,getOptions:Ia}=fm(),Cm=zO(),Ze=Symbol("promise"),Do=Symbol("landed"),Wu=Symbol("resources"),vw=Symbol("closeResources"),ap=Symbol("operations"),up=Symbol("undefer"),Pm=Symbol("deferOpen"),iB=Symbol("options"),ut=Symbol("status"),Ju=Symbol("defaultOptions"),Ul=Symbol("transcoder"),Om=Symbol("keyEncoding"),bw=Symbol("valueEncoding"),IV=()=>{},cp=class extends DV{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=Ia(r);let{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[Wu]=new Set,this[ap]=[],this[Pm]=!0,this[iB]=o,this[ut]="opening",this.supports=AV(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Ul]=new xV(FV(this)),this[Om]=this[Ul].encoding(n||"utf8"),this[bw]=this[Ul].encoding(s||"utf8");for(let a of this[Ul].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[Ju]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Om].commonName,valueEncoding:this[bw].commonName}),key:Object.freeze({keyEncoding:this[Om].commonName})},this.nextTick(()=>{this[Pm]&&this.open({passive:!1},IV)})}get status(){return this[ut]}keyEncoding(e){return this[Ul].encoding(e??this[Om])}valueEncoding(e){return this[Ul].encoding(e??this[bw])}open(e,r){r=zu(e,r),r=Ta(r,Ze),e={...this[iB],...Ia(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=s=>{this[ut]==="closing"||this[ut]==="opening"?this.once(Do,s?()=>n(s):n):this[ut]!=="open"?r(new Vi("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return e.passive?this[ut]==="opening"?this.once(Do,n):this.nextTick(n):this[ut]==="closed"||this[Pm]?(this[Pm]=!1,this[ut]="opening",this.emit("opening"),this._open(e,s=>{if(s){this[ut]="closed",this[vw](()=>{this.emit(Do),n(s)}),this[up]();return}this[ut]="open",this[up](),this.emit(Do),this[ut]==="open"&&this.emit("open"),this[ut]==="open"&&this.emit("ready"),n()})):this[ut]==="open"?this.nextTick(n):this.once(Do,()=>this.open(e,r)),r[Ze]}_open(e,r){this.nextTick(r)}close(e){e=Ta(e,Ze);let r=n=>{this[ut]==="opening"||this[ut]==="closing"?this.once(Do,n?r(n):r):this[ut]!=="closed"?e(new Vi("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[ut]==="open"){this[ut]="closing",this.emit("closing");let n=s=>{this[ut]="open",this[up](),this.emit(Do),r(s)};this[vw](()=>{this._close(s=>{if(s)return n(s);this[ut]="closed",this[up](),this.emit(Do),this[ut]==="closed"&&this.emit("closed"),r()})})}else this[ut]==="closed"?this.nextTick(r):this.once(Do,()=>this.close(e));return e[Ze]}[vw](e){if(this[Wu].size===0)return this.nextTick(e);let r=this[Wu].size,n=!0,s=()=>{--r===0&&(n?this.nextTick(e):e())};for(let i of this[Wu])i.close(s);n=!1,this[Wu].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=zu(r,n),n=Ta(n,Ze),r=Ia(r,this[Ju].entry),this[ut]==="opening")return this.defer(()=>this.get(e,r,n)),n[Ze];if(Ll(this,n))return n[Ze];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Ze];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,u=o.format;return(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),a),r,(c,l)=>{if(c)return(c.code==="LEVEL_NOT_FOUND"||c.notFound||/NotFound/i.test(c))&&(c.code||(c.code="LEVEL_NOT_FOUND"),c.notFound||(c.notFound=!0),c.status||(c.status=404)),n(c);try{l=o.decode(l)}catch(f){return n(new Vi("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}n(null,l)}),n[Ze]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=zu(r,n),n=Ta(n,Ze),r=Ia(r,this[Ju].entry),this[ut]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[Ze];if(Ll(this,n))return n[Ze];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Ze];if(e.length===0)return this.nextTick(n,null,[]),n[Ze];let s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));let u=new Array(e.length);for(let c=0;c<e.length;c++){let l=e[c],f=this._checkKey(l);if(f)return this.nextTick(n,f),n[Ze];u[c]=this.prefixKey(s.encode(l),o)}return this._getMany(u,r,(c,l)=>{if(c)return n(c);try{for(let f=0;f<l.length;f++)l[f]!==void 0&&(l[f]=i.decode(l[f]))}catch(f){return n(new Vi(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}n(null,l)}),n[Ze]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,s){if(s=zu(n,s),s=Ta(s,Ze),n=Ia(n,this[Ju].entry),this[ut]==="opening")return this.defer(()=>this.put(e,r,n,s)),s[Ze];if(Ll(this,s))return s[Ze];let i=this._checkKey(e)||this._checkValue(r);if(i)return this.nextTick(s,i),s[Ze];let o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),u=o.format,c=a.format;(n.keyEncoding!==u||n.valueEncoding!==c)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:c}));let l=this.prefixKey(o.encode(e),u),f=a.encode(r);return this._put(l,f,n,p=>{if(p)return s(p);this.emit("put",e,r),s()}),s[Ze]}_put(e,r,n,s){this.nextTick(s)}del(e,r,n){if(n=zu(r,n),n=Ta(n,Ze),r=Ia(r,this[Ju].key),this[ut]==="opening")return this.defer(()=>this.del(e,r,n)),n[Ze];if(Ll(this,n))return n[Ze];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Ze];let i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[Ze]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[ut]==="opening")return new nB(this);if(this[ut]!=="open")throw new Vi("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=zu(r,n),n=Ta(n,Ze),r=Ia(r,this[Ju].empty),this[ut]==="opening")return this.defer(()=>this.batch(e,r,n)),n[Ze];if(Ll(this,n))return n[Ze];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Ze];if(e.length===0)return this.nextTick(n),n[Ze];let s=new Array(e.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Ze];let c=Object.assign({},e[u]);if(c.type!=="put"&&c.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Ze];let l=this._checkKey(c.key);if(l)return this.nextTick(n,l),n[Ze];let f=c.sublevel!=null?c.sublevel:this,p=f.keyEncoding(c.keyEncoding||i),d=p.format;if(c.key=f.prefixKey(p.encode(c.key),d),c.keyEncoding=d,c.type==="put"){let h=this._checkValue(c.value);if(h)return this.nextTick(n,h),n[Ze];let m=f.valueEncoding(c.valueEncoding||o);c.value=m.encode(c.value),c.valueEncoding=m.format}f!==this&&(c.sublevel=null),s[u]=c}return this._batch(s,a,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[Ze]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,ww.defaults(r))}_sublevel(e,r){return new ww(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=zu(e,r),r=Ta(r,Ze),e=Ia(e,this[Ju].empty),this[ut]==="opening")return this.defer(()=>this.clear(e,r)),r[Ze];if(Ll(this,r))return r[Ze];let n=e,s=this.keyEncoding(e.keyEncoding);return e=Cm(e,s),e.keyEncoding=s.format,e.limit===0?this.nextTick(r):this._clear(e,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[Ze]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Cm(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Hu.keyEncoding]=r,e[Hu.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new OV(this,e);if(this[ut]!=="open")throw new Vi("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Hu(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Cm(e,r),e[Hu.keyEncoding]=r,e[Hu.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new BV(this,e);if(this[ut]!=="open")throw new Vi("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new CV(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Cm(e,r),e[Hu.keyEncoding]=r,e[Hu.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new TV(this,e);if(this[ut]!=="open")throw new Vi("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new PV(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[ap].push(e)}[up](){if(this[ap].length===0)return;let e=this[ap];this[ap]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Wu].add(e)}detachResource(e){this[Wu].delete(e)}_chainedBatch(){return new nB(this)}_checkKey(e){if(e==null)return new Vi("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Vi("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};cp.prototype.nextTick=XO();var{AbstractSublevel:ww}=rB()({AbstractLevel:cp});_w.AbstractLevel=cp;_w.AbstractSublevel=ww;var Ll=function(t,e){return t[ut]!=="open"?(t.nextTick(e,new Vi("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},FV=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var Sw=w(Gu=>{"use strict";Gu.AbstractLevel=Ew().AbstractLevel;Gu.AbstractSublevel=Ew().AbstractSublevel;Gu.AbstractIterator=Oa().AbstractIterator;Gu.AbstractKeyIterator=Oa().AbstractKeyIterator;Gu.AbstractValueIterator=Oa().AbstractValueIterator;Gu.AbstractChainedBatch=lw().AbstractChainedBatch});var oB=w((vve,sB)=>{sB.exports=RV;var kV=dw();function RV(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,u=!0,c;Array.isArray(t)?(n=[],i=s=t.length):(o=Object.keys(t),n={},i=s=o.length);function l(p){function d(){r&&r(p,n),r=null}u?kV(d):d()}function f(p,d,h){if(n[p]=h,d&&(a=!0),--i===0||d)l(d);else if(!a&&c<s){let m;o?(m=o[c],c+=1,t[m](function(g,_){f(m,g,_)})):(m=c,c+=1,t[m](function(g,_){f(m,g,_)}))}}c=e,i?o?o.some(function(p,d){return t[p](function(h,m){f(p,h,m)}),d===e-1}):t.some(function(p,d){return p(function(h,m){f(d,h,m)}),d===e-1}):l(null),u=!1}});var Aw=w((bve,aB)=>{"use strict";aB.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null}});var xw=w((wve,uB)=>{"use strict";var $V=new TextEncoder;uB.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):$V.encode(t)}});var pB=w(dB=>{"use strict";var{AbstractIterator:NV}=Sw(),cB=Aw(),Bm=xw(),xs=Symbol("cache"),Co=Symbol("finished"),ei=Symbol("options"),Po=Symbol("currentOptions"),Zu=Symbol("position"),Dw=Symbol("location"),Kl=Symbol("first"),lB={},Cw=class extends NV{constructor(e,r,n){super(e,n),this[xs]=[],this[Co]=this.limit===0,this[ei]=n,this[Po]={...n},this[Zu]=void 0,this[Dw]=r,this[Kl]=!0}_nextv(e,r,n){if(this[Kl]=!1,this[Co])return this.nextTick(n,null,[]);if(this[xs].length>0)return e=Math.min(e,this[xs].length),this.nextTick(n,null,this[xs].splice(0,e));this[Zu]!==void 0&&(this[ei].reverse?(this[Po].lt=this[Zu],this[Po].lte=void 0):(this[Po].gt=this[Zu],this[Po].gte=void 0));let s;try{s=cB(this[Po])}catch{return this[Co]=!0,this.nextTick(n,null,[])}let i=this.db.db.transaction([this[Dw]],"readonly"),o=i.objectStore(this[Dw]),a=[];if(this[ei].reverse){let u=!this[ei].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](s,"prev").onsuccess=c=>{let l=c.target.result;if(l){let{key:f,value:p}=l;this[Zu]=f,a.push([this[ei].keys&&f!==void 0?Bm(f):void 0,this[ei].values&&p!==void 0?Bm(p):void 0]),a.length<e?l.continue():fB(i)}else this[Co]=!0}}else{let u,c,l=()=>{if(u===void 0||c===void 0)return;let f=Math.max(u.length,c.length);f===0||e===1/0?this[Co]=!0:this[Zu]=u[f-1],a.length=f;for(let p=0;p<f;p++){let d=u[p],h=c[p];a[p]=[this[ei].keys&&d!==void 0?Bm(d):void 0,this[ei].values&&h!==void 0?Bm(h):void 0]}fB(i)};this[ei].keys||e<1/0?o.getAllKeys(s,e<1/0?e:void 0).onsuccess=f=>{u=f.target.result,l()}:(u=[],this.nextTick(l)),this[ei].values?o.getAll(s,e<1/0?e:void 0).onsuccess=f=>{c=f.target.result,l()}:(c=[],this.nextTick(l))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[xs].length>0){let[r,n]=this[xs].shift();this.nextTick(e,null,r,n)}else if(this[Co])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[Kl]&&(this[Kl]=!1,r=1),this._nextv(r,lB,(n,s)=>{if(n)return e(n);this[xs]=s,this._next(e)})}}_all(e,r){this[Kl]=!1;let n=this[xs].splice(0,this[xs].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,lB,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[Kl]=!0,this[xs]=[],this[Co]=!1,this[Zu]=void 0,this[Po]={...this[ei]};let n;try{n=cB(this[ei])}catch{this[Co]=!0;return}n!==null&&!n.includes(e)?this[Co]=!0:this[ei].reverse?this[Po].lte=e:this[Po].gte=e}};dB.Iterator=Cw;function fB(t){typeof t.commit=="function"&&t.commit()}});var yB=w((Eve,hB)=>{"use strict";hB.exports=function(e,r,n,s,i){if(s.limit===0)return e.nextTick(i);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),u=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};let c=a.openKeyCursor?"openKeyCursor":"openCursor",l=s.reverse?"prev":"next";a[c](n,l).onsuccess=function(f){let p=f.target.result;p&&(a.delete(p.key).onsuccess=function(){(s.limit<=0||++u<s.limit)&&p.continue()})}}});var Bw=w(wB=>{"use strict";var{AbstractLevel:MV}=Sw(),mB=Li(),jV=oB(),{fromCallback:qV}=Zd(),{Iterator:UV}=pB(),gB=xw(),LV=yB(),KV=Aw(),bB="level-js-",lp=Symbol("idb"),Pw=Symbol("namePrefix"),Oo=Symbol("location"),Ow=Symbol("version"),Xu=Symbol("store"),fp=Symbol("onComplete"),vB=Symbol("promise"),Tm=class extends MV{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new mB("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[Oo]=e,this[Pw]=s??bB,this[Ow]=parseInt(i||1,10),this[lp]=null}get location(){return this[Oo]}get namePrefix(){return this[Pw]}get version(){return this[Ow]}get db(){return this[lp]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[Pw]+this[Oo],this[Ow]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[lp]=n.result,r()},n.onupgradeneeded=s=>{let i=s.target.result;i.objectStoreNames.contains(this[Oo])||i.createObjectStore(this[Oo])}}[Xu](e){return this[lp].transaction([this[Oo]],e).objectStore(this[Oo])}[fp](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let s=this[Xu]("readonly"),i;try{i=s.get(e)}catch(o){return this.nextTick(n,o)}this[fp](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new mB("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,gB(a))})}_getMany(e,r,n){let s=this[Xu]("readonly"),i=e.map(o=>a=>{let u;try{u=s.get(o)}catch(c){return a(c)}u.onsuccess=()=>{let c=u.result;a(null,c===void 0?c:gB(c))},u.onerror=c=>{c.stopPropagation(),a(u.error)}});jV(i,16,n)}_del(e,r,n){let s=this[Xu]("readwrite"),i;try{i=s.delete(e)}catch(o){return this.nextTick(n,o)}this[fp](i,n)}_put(e,r,n,s){let i=this[Xu]("readwrite"),o;try{o=i.put(r,e)}catch(a){return this.nextTick(s,a)}this[fp](o,s)}_iterator(e){return new UV(this,this[Oo],e)}_batch(e,r,n){let s=this[Xu]("readwrite"),i=s.transaction,o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function u(){let c=e[o++],l=c.key,f;try{f=c.type==="del"?s.delete(l):s.put(c.value,l)}catch(p){a=p,i.abort();return}o<e.length?f.onsuccess=u:typeof i.commit=="function"&&i.commit()}u()}_clear(e,r){let n,s;try{n=KV(e)}catch{return this.nextTick(r)}if(e.limit>=0)return LV(this,this[Oo],n,e,r);try{let i=this[Xu]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[fp](s,r)}_close(e){this[lp].close(),this.nextTick(e)}};Tm.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=bB),r=qV(r,vB);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[vB]};wB.BrowserLevel=Tm});var Tw=w(_B=>{_B.Level=Bw().BrowserLevel});var wr=w((Pve,EB)=>{"use strict";EB.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var Ds=w((Ove,Fw)=>{"use strict";var HV=pi(),zV=Object.getPrototypeOf(async function(){}).constructor,SB=globalThis.Blob||HV.Blob,WV=typeof SB<"u"?function(e){return e instanceof SB}:function(e){return!1},Iw=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Fw.exports={AggregateError:Iw,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...s)=>n?r(n):e(...s))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let s=e.shift();return n==="f"?s.toFixed(6):n==="j"?JSON.stringify(s):n==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof zV},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:WV};Fw.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Fm=w((Bve,Im)=>{"use strict";var{AbortController:AB,AbortSignal:JV}=typeof self<"u"?self:typeof window<"u"?window:void 0;Im.exports=AB;Im.exports.AbortSignal=JV;Im.exports.default=AB});var _n=w((Tve,CB)=>{"use strict";var{format:GV,inspect:km,AggregateError:ZV}=Ds(),XV=globalThis.AggregateError||ZV,YV=Symbol("kIsNodeError"),QV=["string","function","number","object","Function","Object","boolean","bigint","symbol"],eH=/^([A-Z][a-z0-9]*)+$/,tH="__node_internal_",Rm={};function Yu(t,e){if(!t)throw new Rm.ERR_INTERNAL_ASSERTION(e)}function xB(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function rH(t,e,r){if(typeof e=="function")return Yu(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Yu(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:GV(e,...r)}function zr(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(rH(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[YV]=!0,Rm[t]=n}function DB(t){let e=tH+t.name;return Object.defineProperty(t,"name",{value:e}),t}function nH(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new XV([e,t],e.message);return r.code=e.code,r}return t||e}var kw=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Rm.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};zr("ERR_ASSERTION","%s",Error);zr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Yu(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let s=[],i=[],o=[];for(let u of e)Yu(typeof u=="string","All expected entries have to be of type string"),QV.includes(u)?s.push(u.toLowerCase()):eH.test(u)?i.push(u):(Yu(u!=="object",'The value "object" should be written as "Object"'),o.push(u));if(i.length>0){let u=s.indexOf("object");u!==-1&&(s.splice(s,u,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of type ${s.join(", ")}, or ${u}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`an instance of ${i.join(", ")}, or ${u}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`one of ${o.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=km(r,{depth:-1});n+=`. Received ${u}`}}else{let u=km(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);zr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=km(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);zr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError);zr("ERR_MISSING_ARGS",(...t)=>{Yu(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);zr("ERR_OUT_OF_RANGE",(t,e,r)=>{Yu(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=xB(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=xB(n)),n+="n"):n=km(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);zr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);zr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);zr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);zr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);zr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);zr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);zr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);zr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);zr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);zr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);zr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);CB.exports={AbortError:kw,aggregateTwoErrors:DB(nH),hideStackFrames:DB,codes:Rm}});var dp=w((Ive,$B)=>{"use strict";var{ArrayIsArray:$w,ArrayPrototypeIncludes:TB,ArrayPrototypeJoin:IB,ArrayPrototypeMap:iH,NumberIsInteger:Nw,NumberIsNaN:sH,NumberMAX_SAFE_INTEGER:oH,NumberMIN_SAFE_INTEGER:aH,NumberParseInt:uH,ObjectPrototypeHasOwnProperty:cH,RegExpPrototypeExec:FB,String:lH,StringPrototypeToUpperCase:fH,StringPrototypeTrim:dH}=wr(),{hideStackFrames:mi,codes:{ERR_SOCKET_BAD_PORT:pH,ERR_INVALID_ARG_TYPE:En,ERR_INVALID_ARG_VALUE:Vl,ERR_OUT_OF_RANGE:Qu,ERR_UNKNOWN_SIGNAL:PB}}=_n(),{normalizeEncoding:hH}=Ds(),{isAsyncFunction:yH,isArrayBufferView:mH}=Ds().types,OB={};function gH(t){return t===(t|0)}function vH(t){return t===t>>>0}var bH=/^[0-7]+$/,wH="must be a 32-bit unsigned integer or an octal string";function _H(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(FB(bH,t)===null)throw new Vl(e,t,wH);t=uH(t,8)}return kB(t,e),t}var EH=mi((t,e,r=aH,n=oH)=>{if(typeof t!="number")throw new En(e,"number",t);if(!Nw(t))throw new Qu(e,"an integer",t);if(t<r||t>n)throw new Qu(e,`>= ${r} && <= ${n}`,t)}),SH=mi((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new En(e,"number",t);if(!Nw(t))throw new Qu(e,"an integer",t);if(t<r||t>n)throw new Qu(e,`>= ${r} && <= ${n}`,t)}),kB=mi((t,e,r=!1)=>{if(typeof t!="number")throw new En(e,"number",t);if(!Nw(t))throw new Qu(e,"an integer",t);let n=r?1:0,s=4294967295;if(t<n||t>s)throw new Qu(e,`>= ${n} && <= ${s}`,t)});function Mw(t,e){if(typeof t!="string")throw new En(e,"string",t)}function AH(t,e,r=void 0,n){if(typeof t!="number")throw new En(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&sH(t))throw new Qu(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var xH=mi((t,e,r)=>{if(!TB(r,t)){let s="must be one of: "+IB(iH(r,i=>typeof i=="string"?`'${i}'`:lH(i)),", ");throw new Vl(e,t,s)}});function RB(t,e){if(typeof t!="boolean")throw new En(e,"boolean",t)}function Rw(t,e,r){return t==null||!cH(t,e)?r:t[e]}var DH=mi((t,e,r=null)=>{let n=Rw(r,"allowArray",!1),s=Rw(r,"allowFunction",!1);if(!Rw(r,"nullable",!1)&&t===null||!n&&$w(t)||typeof t!="object"&&(!s||typeof t!="function"))throw new En(e,"Object",t)}),CH=mi((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new En(e,"a dictionary",t)}),jw=mi((t,e,r=0)=>{if(!$w(t))throw new En(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Vl(e,t,n)}});function PH(t,e){jw(t,e);for(let r=0;r<t.length;r++)Mw(t[r],`${e}[${r}]`)}function OH(t,e){jw(t,e);for(let r=0;r<t.length;r++)RB(t[r],`${e}[${r}]`)}function BH(t,e="signal"){if(Mw(t,e),OB[t]===void 0)throw OB[fH(t)]!==void 0?new PB(t+" (signals must use all capital letters)"):new PB(t)}var TH=mi((t,e="buffer")=>{if(!mH(t))throw new En(e,["Buffer","TypedArray","DataView"],t)});function IH(t,e){let r=hH(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Vl("encoding",e,`is invalid for data of length ${n}`)}function FH(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&dH(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new pH(e,t,r);return t|0}var kH=mi((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new En(e,"AbortSignal",t)}),RH=mi((t,e)=>{if(typeof t!="function")throw new En(e,"Function",t)}),$H=mi((t,e)=>{if(typeof t!="function"||yH(t))throw new En(e,"Function",t)}),NH=mi((t,e)=>{if(t!==void 0)throw new En(e,"undefined",t)});function MH(t,e,r){if(!TB(r,t))throw new En(e,`('${IB(r,"|")}')`,t)}var jH=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function BB(t,e){if(typeof t>"u"||!FB(jH,t))throw new Vl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function qH(t){if(typeof t=="string")return BB(t,"hints"),t;if($w(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let s=t[n];BB(s,"hints"),r+=s,n!==e-1&&(r+=", ")}return r}throw new Vl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}$B.exports={isInt32:gH,isUint32:vH,parseFileMode:_H,validateArray:jw,validateStringArray:PH,validateBooleanArray:OH,validateBoolean:RB,validateBuffer:TH,validateDictionary:CH,validateEncoding:IH,validateFunction:RH,validateInt32:SH,validateInteger:EH,validateNumber:AH,validateObject:DH,validateOneOf:xH,validatePlainFunction:$H,validatePort:FH,validateSignalName:BH,validateString:Mw,validateUint32:kB,validateUndefined:NH,validateUnion:MH,validateAbortSignal:kH,validateLinkHeaderValue:qH}});var Fa=w((Fve,qB)=>{var pr=qB.exports={},Cs,Ps;function qw(){throw new Error("setTimeout has not been defined")}function Uw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Cs=setTimeout:Cs=qw}catch{Cs=qw}try{typeof clearTimeout=="function"?Ps=clearTimeout:Ps=Uw}catch{Ps=Uw}})();function NB(t){if(Cs===setTimeout)return setTimeout(t,0);if((Cs===qw||!Cs)&&setTimeout)return Cs=setTimeout,setTimeout(t,0);try{return Cs(t,0)}catch{try{return Cs.call(null,t,0)}catch{return Cs.call(this,t,0)}}}function UH(t){if(Ps===clearTimeout)return clearTimeout(t);if((Ps===Uw||!Ps)&&clearTimeout)return Ps=clearTimeout,clearTimeout(t);try{return Ps(t)}catch{try{return Ps.call(null,t)}catch{return Ps.call(this,t)}}}var Bo=[],Hl=!1,ec,$m=-1;function LH(){!Hl||!ec||(Hl=!1,ec.length?Bo=ec.concat(Bo):$m=-1,Bo.length&&MB())}function MB(){if(!Hl){var t=NB(LH);Hl=!0;for(var e=Bo.length;e;){for(ec=Bo,Bo=[];++$m<e;)ec&&ec[$m].run();$m=-1,e=Bo.length}ec=null,Hl=!1,UH(t)}}pr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Bo.push(new jB(t,e)),Bo.length===1&&!Hl&&NB(MB)};function jB(t,e){this.fun=t,this.array=e}jB.prototype.run=function(){this.fun.apply(null,this.array)};pr.title="browser";pr.browser=!0;pr.env={};pr.argv=[];pr.version="";pr.versions={};function To(){}pr.on=To;pr.addListener=To;pr.once=To;pr.off=To;pr.removeListener=To;pr.removeAllListeners=To;pr.emit=To;pr.prependListener=To;pr.prependOnceListener=To;pr.listeners=function(t){return[]};pr.binding=function(t){throw new Error("process.binding is not supported")};pr.cwd=function(){return"/"};pr.chdir=function(t){throw new Error("process.chdir is not supported")};pr.umask=function(){return 0}});var Bs=w((kve,rT)=>{"use strict";var{Symbol:Nm,SymbolAsyncIterator:UB,SymbolIterator:LB,SymbolFor:KB}=wr(),VB=Nm("kDestroyed"),HB=Nm("kIsErrored"),Lw=Nm("kIsReadable"),zB=Nm("kIsDisturbed"),KH=KB("nodejs.webstream.isClosedPromise"),VH=KB("nodejs.webstream.controllerErrorFunction");function Mm(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function jm(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function HH(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Os(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function WB(t){return!!(t&&!Os(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function JB(t){return!!(t&&!Os(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function GB(t){return!!(t&&!Os(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function zH(t){return WB(t)||JB(t)||GB(t)}function WH(t,e){return t==null?!1:e===!0?typeof t[UB]=="function":e===!1?typeof t[LB]=="function":typeof t[UB]=="function"||typeof t[LB]=="function"}function qm(t){if(!Os(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[VB]||n!=null&&n.destroyed)}function ZB(t){if(!jm(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function JH(t,e){if(!jm(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function GH(t){if(!Mm(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function XB(t,e){if(!Mm(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function YB(t){return t&&t[Lw]!=null?t[Lw]:typeof t?.readable!="boolean"?null:qm(t)?!1:Mm(t)&&t.readable&&!XB(t)}function QB(t){return typeof t?.writable!="boolean"?null:qm(t)?!1:jm(t)&&t.writable&&!ZB(t)}function ZH(t,e){return Os(t)?qm(t)?!0:!(e?.readable!==!1&&YB(t)||e?.writable!==!1&&QB(t)):null}function XH(t){var e,r;return Os(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function YH(t){var e,r;return Os(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function QH(t){if(!Os(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&eT(t)?t._closed:null}function eT(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function tT(t){return typeof t._sent100=="boolean"&&eT(t)}function ez(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function tz(t){if(!Os(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&tT(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function rz(t){var e;return!!(t&&((e=t[zB])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function nz(t){var e,r,n,s,i,o,a,u,c,l;return!!(t&&((e=(r=(n=(s=(i=(o=t[HB])!==null&&o!==void 0?o:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&s!==void 0?s:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}rT.exports={kDestroyed:VB,isDisturbed:rz,kIsDisturbed:zB,isErrored:nz,kIsErrored:HB,isReadable:YB,kIsReadable:Lw,kIsClosedPromise:KH,kControllerErrorFunction:VH,isClosed:QH,isDestroyed:qm,isDuplexNodeStream:HH,isFinished:ZH,isIterable:WH,isReadableNodeStream:Mm,isReadableStream:WB,isReadableEnded:GH,isReadableFinished:XB,isReadableErrored:YH,isNodeStream:Os,isWebStream:zH,isWritable:QB,isWritableNodeStream:jm,isWritableStream:JB,isWritableEnded:ZB,isWritableFinished:JH,isWritableErrored:XH,isServerRequest:ez,isServerResponse:tT,willEmitClose:tz,isTransformStream:GB}});var Io=w((Rve,Ww)=>{var ka=Fa(),{AbortError:fT,codes:iz}=_n(),{ERR_INVALID_ARG_TYPE:sz,ERR_STREAM_PREMATURE_CLOSE:nT}=iz,{kEmptyObject:Vw,once:Hw}=Ds(),{validateAbortSignal:oz,validateFunction:az,validateObject:uz,validateBoolean:cz}=dp(),{Promise:lz,PromisePrototypeThen:fz}=wr(),{isClosed:dz,isReadable:iT,isReadableNodeStream:Kw,isReadableStream:pz,isReadableFinished:sT,isReadableErrored:oT,isWritable:aT,isWritableNodeStream:uT,isWritableStream:hz,isWritableFinished:cT,isWritableErrored:lT,isNodeStream:yz,willEmitClose:mz,kIsClosedPromise:gz}=Bs();function vz(t){return t.setHeader&&typeof t.abort=="function"}var zw=()=>{};function dT(t,e,r){var n,s;if(arguments.length===2?(r=e,e=Vw):e==null?e=Vw:uz(e,"options"),az(r,"callback"),oz(e.signal,"options.signal"),r=Hw(r),pz(t)||hz(t))return bz(t,e,r);if(!yz(t))throw new sz("stream",["ReadableStream","WritableStream","Stream"],t);let i=(n=e.readable)!==null&&n!==void 0?n:Kw(t),o=(s=e.writable)!==null&&s!==void 0?s:uT(t),a=t._writableState,u=t._readableState,c=()=>{t.writable||p()},l=mz(t)&&Kw(t)===i&&uT(t)===o,f=cT(t,!1),p=()=>{f=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||i))&&(!i||d)&&r.call(t)},d=sT(t,!1),h=()=>{d=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||o))&&(!o||f)&&r.call(t)},m=x=>{r.call(t,x)},g=dz(t),_=()=>{g=!0;let x=lT(t)||oT(t);if(x&&typeof x!="boolean")return r.call(t,x);if(i&&!d&&Kw(t,!0)&&!sT(t,!1))return r.call(t,new nT);if(o&&!f&&!cT(t,!1))return r.call(t,new nT);r.call(t)},D=()=>{g=!0;let x=lT(t)||oT(t);if(x&&typeof x!="boolean")return r.call(t,x);r.call(t)},v=()=>{t.req.on("finish",p)};vz(t)?(t.on("complete",p),l||t.on("abort",_),t.req?v():t.on("request",v)):o&&!a&&(t.on("end",c),t.on("close",c)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",_),t.on("end",h),t.on("finish",p),e.error!==!1&&t.on("error",m),t.on("close",_),g?ka.nextTick(_):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?l||ka.nextTick(D):(!i&&(!l||iT(t))&&(f||aT(t)===!1)||!o&&(!l||aT(t))&&(d||iT(t)===!1)||u&&t.req&&t.aborted)&&ka.nextTick(D);let A=()=>{r=zw,t.removeListener("aborted",_),t.removeListener("complete",p),t.removeListener("abort",_),t.removeListener("request",v),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",h),t.removeListener("error",m),t.removeListener("close",_)};if(e.signal&&!g){let x=()=>{let B=r;A(),B.call(t,new fT(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)ka.nextTick(x);else{let B=r;r=Hw((...C)=>{e.signal.removeEventListener("abort",x),B.apply(t,C)}),e.signal.addEventListener("abort",x)}}return A}function bz(t,e,r){let n=!1,s=zw;if(e.signal)if(s=()=>{n=!0,r.call(t,new fT(void 0,{cause:e.signal.reason}))},e.signal.aborted)ka.nextTick(s);else{let o=r;r=Hw((...a)=>{e.signal.removeEventListener("abort",s),o.apply(t,a)}),e.signal.addEventListener("abort",s)}let i=(...o)=>{n||ka.nextTick(()=>r.apply(t,o))};return fz(t[gz].promise,i,i),zw}function wz(t,e){var r;let n=!1;return e===null&&(e=Vw),(r=e)!==null&&r!==void 0&&r.cleanup&&(cz(e.cleanup,"cleanup"),n=e.cleanup),new lz((s,i)=>{let o=dT(t,e,a=>{n&&o(),a?i(a):s()})})}Ww.exports=dT;Ww.exports.finished=wz});var tc=w(($ve,wT)=>{"use strict";var Ts=Fa(),{aggregateTwoErrors:_z,codes:{ERR_MULTIPLE_CALLBACK:Ez},AbortError:Sz}=_n(),{Symbol:yT}=wr(),{kDestroyed:Az,isDestroyed:xz,isFinished:Dz,isServerRequest:Cz}=Bs(),mT=yT("kDestroy"),Jw=yT("kConstruct");function gT(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Pz(t,e){let r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(gT(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?pT(this,t,e):this.once(mT,function(i){pT(this,_z(i,t),e)}),this)}function pT(t,e,r){let n=!1;function s(i){if(n)return;n=!0;let o=t._readableState,a=t._writableState;gT(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?Ts.nextTick(Oz,t,i):Ts.nextTick(vT,t)}try{t._destroy(e||null,s)}catch(i){s(i)}}function Oz(t,e){Gw(t,e),vT(t)}function vT(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Gw(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Bz(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Zw(t,e,r){let n=t._readableState,s=t._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?t.destroy(e):e&&(e.stack,s&&!s.errored&&(s.errored=e),n&&!n.errored&&(n.errored=e),r?Ts.nextTick(Gw,t,e):Gw(t,e))}function Tz(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Jw,e),!(t.listenerCount(Jw)>1)&&Ts.nextTick(Iz,t)}function Iz(t){let e=!1;function r(n){if(e){Zw(t,n??new Ez);return}e=!0;let s=t._readableState,i=t._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?t.emit(mT,n):n?Zw(t,n,!0):Ts.nextTick(Fz,t)}try{t._construct(n=>{Ts.nextTick(r,n)})}catch(n){Ts.nextTick(r,n)}}function Fz(t){t.emit(Jw)}function hT(t){return t?.setHeader&&typeof t.abort=="function"}function bT(t){t.emit("close")}function kz(t,e){t.emit("error",e),Ts.nextTick(bT,t)}function Rz(t,e){!t||xz(t)||(!e&&!Dz(t)&&(e=new Sz),Cz(t)?(t.socket=null,t.destroy(e)):hT(t)?t.abort():hT(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ts.nextTick(kz,t,e):Ts.nextTick(bT,t),t.destroyed||(t[Az]=!0))}wT.exports={construct:Tz,destroyer:Rz,destroy:Pz,undestroy:Bz,errorOrDestroy:Zw}});var Km=w((Nve,ET)=>{"use strict";var{ArrayIsArray:$z,ObjectSetPrototypeOf:_T}=wr(),{EventEmitter:Um}=Gd();function Lm(t){Um.call(this,t)}_T(Lm.prototype,Um.prototype);_T(Lm,Um);Lm.prototype.pipe=function(t,e){let r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function u(l){c(),Um.listenerCount(this,"error")===0&&this.emit("error",l)}Xw(r,"error",u),Xw(t,"error",u);function c(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Xw(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):$z(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}ET.exports={Stream:Lm,prependListener:Xw}});var pp=w((Mve,Vm)=>{"use strict";var{AbortError:ST,codes:Nz}=_n(),{isNodeStream:AT,isWebStream:Mz,kControllerErrorFunction:jz}=Bs(),qz=Io(),{ERR_INVALID_ARG_TYPE:xT}=Nz,Uz=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new xT(e,"AbortSignal",t)};Vm.exports.addAbortSignal=function(e,r){if(Uz(e,"signal"),!AT(r)&&!Mz(r))throw new xT("stream",["ReadableStream","WritableStream","Stream"],r);return Vm.exports.addAbortSignalNoValidate(e,r)};Vm.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=AT(e)?()=>{e.destroy(new ST(void 0,{cause:t.reason}))}:()=>{e[jz](new ST(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),qz(e,()=>t.removeEventListener("abort",r))),e}});var PT=w((qve,CT)=>{"use strict";var{StringPrototypeSlice:DT,SymbolIterator:Lz,TypedArrayPrototypeSet:Hm,Uint8Array:Kz}=wr(),{Buffer:Yw}=pi(),{inspect:Vz}=Ds();CT.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Yw.alloc(0);let r=Yw.allocUnsafe(e>>>0),n=this.head,s=0;for(;n;)Hm(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let s=n.slice(0,e);return this.head.data=n.slice(e),s}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Lz](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,s=0;do{let i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=DT(i,0,e),this.head=n,n.data=DT(i,e));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(e){let r=Yw.allocUnsafe(e),n=e,s=this.head,i=0;do{let o=s.data;if(e>o.length)Hm(r,o,n-e),e-=o.length;else{e===o.length?(Hm(r,o,n-e),++i,s.next?this.head=s.next:this.head=this.tail=null):(Hm(r,new Kz(o.buffer,o.byteOffset,e),n-e),this.head=s,s.data=o.slice(e));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Vz(this,{...r,depth:0,customInspect:!1})}}});var zm=w((Uve,BT)=>{"use strict";var{MathFloor:Hz,NumberIsInteger:zz}=wr(),{ERR_INVALID_ARG_VALUE:Wz}=_n().codes;function Jz(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function OT(t){return t?16:16*1024}function Gz(t,e,r,n){let s=Jz(e,n,r);if(s!=null){if(!zz(s)||s<0){let i=n?`options.${r}`:"options.highWaterMark";throw new Wz(i,s)}return Hz(s)}return OT(t.objectMode)}BT.exports={getHighWaterMark:Gz,getDefaultHighWaterMark:OT}});var FT=w((Qw,IT)=>{var Wm=pi(),Is=Wm.Buffer;function TT(t,e){for(var r in t)e[r]=t[r]}Is.from&&Is.alloc&&Is.allocUnsafe&&Is.allocUnsafeSlow?IT.exports=Wm:(TT(Wm,Qw),Qw.Buffer=rc);function rc(t,e,r){return Is(t,e,r)}rc.prototype=Object.create(Is.prototype);TT(Is,rc);rc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Is(t,e,r)};rc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Is(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};rc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Is(t)};rc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Wm.SlowBuffer(t)}});var $T=w(RT=>{"use strict";var t_=FT().Buffer,kT=t_.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Zz(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Xz(t){var e=Zz(t);if(typeof e!="string"&&(t_.isEncoding===kT||!kT(t)))throw new Error("Unknown encoding: "+t);return e||t}RT.StringDecoder=hp;function hp(t){this.encoding=Xz(t);var e;switch(this.encoding){case"utf16le":this.text=nW,this.end=iW,e=4;break;case"utf8":this.fillLast=eW,e=4;break;case"base64":this.text=sW,this.end=oW,e=3;break;default:this.write=aW,this.end=uW;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t_.allocUnsafe(e)}hp.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};hp.prototype.end=rW;hp.prototype.text=tW;hp.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function e_(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Yz(t,e,r){var n=e.length-1;if(n<r)return 0;var s=e_(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=e_(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=e_(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function Qz(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function eW(t){var e=this.lastTotal-this.lastNeed,r=Qz(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function tW(t,e){var r=Yz(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function rW(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function nW(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function iW(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function sW(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function oW(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function aW(t){return t.toString(this.encoding)}function uW(t){return t&&t.length?this.write(t):""}});var r_=w((Kve,qT)=>{"use strict";var NT=Fa(),{PromisePrototypeThen:cW,SymbolAsyncIterator:MT,SymbolIterator:jT}=wr(),{Buffer:lW}=pi(),{ERR_INVALID_ARG_TYPE:fW,ERR_STREAM_NULL_VALUES:dW}=_n().codes;function pW(t,e,r){let n;if(typeof e=="string"||e instanceof lW)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let s;if(e&&e[MT])s=!0,n=e[MT]();else if(e&&e[jT])s=!1,n=e[jT]();else throw new fW("iterable",["Iterable"],e);let i=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;i._read=function(){o||(o=!0,u())},i._destroy=function(c,l){cW(a(c),()=>NT.nextTick(l,c),f=>NT.nextTick(l,f||c))};async function a(c){let l=c!=null,f=typeof n.throw=="function";if(l&&f){let{value:p,done:d}=await n.throw(c);if(await p,d)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function u(){for(;;){try{let{value:c,done:l}=s?await n.next():n.next();if(l)i.push(null);else{let f=c&&typeof c.then=="function"?await c:c;if(f===null)throw o=!1,new dW;if(i.push(f))continue;o=!1}}catch(c){i.destroy(c)}break}}return i}qT.exports=pW});var yp=w((Vve,QT)=>{var Hi=Fa(),{ArrayPrototypeIndexOf:hW,NumberIsInteger:yW,NumberIsNaN:mW,NumberParseInt:gW,ObjectDefineProperties:KT,ObjectKeys:vW,ObjectSetPrototypeOf:VT,Promise:bW,SafeSet:wW,SymbolAsyncIterator:_W,Symbol:EW}=wr();QT.exports=et;et.ReadableState=u_;var{EventEmitter:SW}=Gd(),{Stream:Ra,prependListener:AW}=Km(),{Buffer:n_}=pi(),{addAbortSignal:xW}=pp(),DW=Io(),ct=Ds().debuglog("stream",t=>{ct=t}),CW=PT(),Wl=tc(),{getHighWaterMark:PW,getDefaultHighWaterMark:OW}=zm(),{aggregateTwoErrors:UT,codes:{ERR_INVALID_ARG_TYPE:BW,ERR_METHOD_NOT_IMPLEMENTED:TW,ERR_OUT_OF_RANGE:IW,ERR_STREAM_PUSH_AFTER_EOF:FW,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:kW}}=_n(),{validateObject:RW}=dp(),nc=EW("kPaused"),{StringDecoder:HT}=$T(),$W=r_();VT(et.prototype,Ra.prototype);VT(et,Ra);var i_=()=>{},{errorOrDestroy:zl}=Wl;function u_(t,e,r){typeof r!="boolean"&&(r=e instanceof Fs()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?PW(this,t,"readableHighWaterMark",r):OW(!1),this.buffer=new CW,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[nc]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new HT(t.encoding),this.encoding=t.encoding)}function et(t){if(!(this instanceof et))return new et(t);let e=this instanceof Fs();this._readableState=new u_(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&xW(t.signal,this)),Ra.call(this,t),Wl.construct(this,()=>{this._readableState.needReadable&&Jm(this,this._readableState)})}et.prototype.destroy=Wl.destroy;et.prototype._undestroy=Wl.undestroy;et.prototype._destroy=function(t,e){e(t)};et.prototype[SW.captureRejectionSymbol]=function(t){this.destroy(t)};et.prototype.push=function(t,e){return zT(this,t,e,!1)};et.prototype.unshift=function(t,e){return zT(this,t,e,!0)};function zT(t,e,r,n){ct("readableAddChunk",e);let s=t._readableState,i;if(s.objectMode||(typeof e=="string"?(r=r||s.defaultEncoding,s.encoding!==r&&(n&&s.encoding?e=n_.from(e,r).toString(s.encoding):(e=n_.from(e,r),r=""))):e instanceof n_?r="":Ra._isUint8Array(e)?(e=Ra._uint8ArrayToBuffer(e),r=""):e!=null&&(i=new BW("chunk",["string","Buffer","Uint8Array"],e))),i)zl(t,i);else if(e===null)s.reading=!1,jW(t,s);else if(s.objectMode||e&&e.length>0)if(n)if(s.endEmitted)zl(t,new kW);else{if(s.destroyed||s.errored)return!1;s_(t,s,e,!0)}else if(s.ended)zl(t,new FW);else{if(s.destroyed||s.errored)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?s_(t,s,e,!1):Jm(t,s)):s_(t,s,e,!1)}else n||(s.reading=!1,Jm(t,s));return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function s_(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Gm(t)),Jm(t,e)}et.prototype.isPaused=function(){let t=this._readableState;return t[nc]===!0||t.flowing===!1};et.prototype.setEncoding=function(t){let e=new HT(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let s of r)n+=e.write(s);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var NW=1073741824;function MW(t){if(t>NW)throw new IW("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function LT(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:mW(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}et.prototype.read=function(t){ct("read",t),t===void 0?t=NaN:yW(t)||(t=gW(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=MW(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ct("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?o_(this):Gm(this),null;if(t=LT(t,e),t===0&&e.ended)return e.length===0&&o_(this),null;let n=e.needReadable;if(ct("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ct("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,ct("reading, ended or constructing",n);else if(n){ct("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(i){zl(this,i)}e.sync=!1,e.reading||(t=LT(r,e))}let s;return t>0?s=XT(t,e):s=null,s===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&o_(this)),s!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",s)),s};function jW(t,e){if(ct("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Gm(t):(e.needReadable=!1,e.emittedReadable=!0,WT(t))}}function Gm(t){let e=t._readableState;ct("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ct("emitReadable",e.flowing),e.emittedReadable=!0,Hi.nextTick(WT,t))}function WT(t){let e=t._readableState;ct("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,GT(t)}function Jm(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Hi.nextTick(qW,t,e))}function qW(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(ct("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}et.prototype._read=function(t){throw new TW("_read()")};et.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new wW(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),ct("pipe count=%d opts=%j",n.pipes.length,e);let i=(!e||e.end!==!1)&&t!==Hi.stdout&&t!==Hi.stderr?a:g;n.endEmitted?Hi.nextTick(i):r.once("end",i),t.on("unpipe",o);function o(_,D){ct("onunpipe"),_===r&&D&&D.hasUnpiped===!1&&(D.hasUnpiped=!0,l())}function a(){ct("onend"),t.end()}let u,c=!1;function l(){ct("cleanup"),t.removeListener("close",h),t.removeListener("finish",m),u&&t.removeListener("drain",u),t.removeListener("error",d),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",p),c=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function f(){c||(n.pipes.length===1&&n.pipes[0]===t?(ct("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(ct("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=UW(r,t),t.on("drain",u))}r.on("data",p);function p(_){ct("ondata");let D=t.write(_);ct("dest.write",D),D===!1&&f()}function d(_){if(ct("onerror",_),g(),t.removeListener("error",d),t.listenerCount("error")===0){let D=t._writableState||t._readableState;D&&!D.errorEmitted?zl(t,_):t.emit("error",_)}}AW(t,"error",d);function h(){t.removeListener("finish",m),g()}t.once("close",h);function m(){ct("onfinish"),t.removeListener("close",h),g()}t.once("finish",m);function g(){ct("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&f():n.flowing||(ct("pipe resume"),r.resume()),t};function UW(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(ct("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(ct("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}et.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let s=e.pipes;e.pipes=[],this.pause();for(let i=0;i<s.length;i++)s[i].emit("unpipe",this,{hasUnpiped:!1});return this}let n=hW(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};et.prototype.on=function(t,e){let r=Ra.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ct("on readable",n.length,n.reading),n.length?Gm(this):n.reading||Hi.nextTick(LW,this)),r};et.prototype.addListener=et.prototype.on;et.prototype.removeListener=function(t,e){let r=Ra.prototype.removeListener.call(this,t,e);return t==="readable"&&Hi.nextTick(JT,this),r};et.prototype.off=et.prototype.removeListener;et.prototype.removeAllListeners=function(t){let e=Ra.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Hi.nextTick(JT,this),e};function JT(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[nc]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function LW(t){ct("readable nexttick read 0"),t.read(0)}et.prototype.resume=function(){let t=this._readableState;return t.flowing||(ct("resume"),t.flowing=!t.readableListening,KW(this,t)),t[nc]=!1,this};function KW(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Hi.nextTick(VW,t,e))}function VW(t,e){ct("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),GT(t),e.flowing&&!e.reading&&t.read(0)}et.prototype.pause=function(){return ct("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ct("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[nc]=!0,this};function GT(t){let e=t._readableState;for(ct("flow",e.flowing);e.flowing&&t.read()!==null;);}et.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{zl(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=vW(t);for(let n=1;n<r.length;n++){let s=r[n];this[s]===void 0&&typeof t[s]=="function"&&(this[s]=t[s].bind(t))}return this};et.prototype[_W]=function(){return ZT(this)};et.prototype.iterator=function(t){return t!==void 0&&RW(t,"options"),ZT(this,t)};function ZT(t,e){typeof t.read!="function"&&(t=et.wrap(t,{objectMode:!0}));let r=HW(t,e);return r.stream=t,r}async function*HW(t,e){let r=i_;function n(o){this===t?(r(),r=i_):r=o}t.on("readable",n);let s,i=DW(t,{writable:!1},o=>{s=o?UT(s,o):null,r(),r=i_});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(s)throw s;if(s===null)return;await new bW(n)}}}catch(o){throw s=UT(s,o),s}finally{(s||e?.destroyOnReturn!==!1)&&(s===void 0||t._readableState.autoDestroy)?Wl.destroyer(t,null):(t.off("readable",n),i())}}KT(et.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});KT(u_.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[nc]!==!1},set(t){this[nc]=!!t}}});et._fromList=XT;function XT(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function o_(t){let e=t._readableState;ct("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Hi.nextTick(zW,e,t))}function zW(t,e){if(ct("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Hi.nextTick(WW,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function WW(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}et.from=function(t,e){return $W(et,t,e)};var a_;function YT(){return a_===void 0&&(a_={}),a_}et.fromWeb=function(t,e){return YT().newStreamReadableFromReadableStream(t,e)};et.toWeb=function(t,e){return YT().newReadableStreamFromStreamReadable(t,e)};et.wrap=function(t,e){var r,n;return new et({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(s,i){Wl.destroyer(t,s),i(s)}}).wrap(t)}});var y_=w((Hve,fI)=>{var ic=Fa(),{ArrayPrototypeSlice:rI,Error:JW,FunctionPrototypeSymbolHasInstance:nI,ObjectDefineProperty:iI,ObjectDefineProperties:GW,ObjectSetPrototypeOf:sI,StringPrototypeToLowerCase:ZW,Symbol:XW,SymbolHasInstance:YW}=wr();fI.exports=ir;ir.WritableState=vp;var{EventEmitter:QW}=Gd(),mp=Km().Stream,{Buffer:Zm}=pi(),Qm=tc(),{addAbortSignal:eJ}=pp(),{getHighWaterMark:tJ,getDefaultHighWaterMark:rJ}=zm(),{ERR_INVALID_ARG_TYPE:nJ,ERR_METHOD_NOT_IMPLEMENTED:iJ,ERR_MULTIPLE_CALLBACK:oI,ERR_STREAM_CANNOT_PIPE:sJ,ERR_STREAM_DESTROYED:gp,ERR_STREAM_ALREADY_FINISHED:oJ,ERR_STREAM_NULL_VALUES:aJ,ERR_STREAM_WRITE_AFTER_END:uJ,ERR_UNKNOWN_ENCODING:aI}=_n().codes,{errorOrDestroy:Jl}=Qm;sI(ir.prototype,mp.prototype);sI(ir,mp);function f_(){}var Gl=XW("kOnFinished");function vp(t,e,r){typeof r!="boolean"&&(r=e instanceof Fs()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?tJ(this,t,"writableHighWaterMark",r):rJ(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=lJ.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ym(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Gl]=[]}function Ym(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}vp.prototype.getBuffer=function(){return rI(this.buffered,this.bufferedIndex)};iI(vp.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ir(t){let e=this instanceof Fs();if(!e&&!nI(ir,this))return new ir(t);this._writableState=new vp(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&eJ(t.signal,this)),mp.call(this,t),Qm.construct(this,()=>{let r=this._writableState;r.writing||p_(this,r),h_(this,r)})}iI(ir,YW,{__proto__:null,value:function(t){return nI(this,t)?!0:this!==ir?!1:t&&t._writableState instanceof vp}});ir.prototype.pipe=function(){Jl(this,new sJ)};function uI(t,e,r,n){let s=t._writableState;if(typeof r=="function")n=r,r=s.defaultEncoding;else{if(!r)r=s.defaultEncoding;else if(r!=="buffer"&&!Zm.isEncoding(r))throw new aI(r);typeof n!="function"&&(n=f_)}if(e===null)throw new aJ;if(!s.objectMode)if(typeof e=="string")s.decodeStrings!==!1&&(e=Zm.from(e,r),r="buffer");else if(e instanceof Zm)r="buffer";else if(mp._isUint8Array(e))e=mp._uint8ArrayToBuffer(e),r="buffer";else throw new nJ("chunk",["string","Buffer","Uint8Array"],e);let i;return s.ending?i=new uJ:s.destroyed&&(i=new gp("write")),i?(ic.nextTick(n,i),Jl(t,i,!0),i):(s.pendingcb++,cJ(t,s,e,r,n))}ir.prototype.write=function(t,e,r){return uI(this,t,e,r)===!0};ir.prototype.cork=function(){this._writableState.corked++};ir.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||p_(this,t))};ir.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=ZW(e)),!Zm.isEncoding(e))throw new aI(e);return this._writableState.defaultEncoding=e,this};function cJ(t,e,r,n,s){let i=e.objectMode?1:r.length;e.length+=i;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:s}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&s!==f_&&(e.allNoop=!1)):(e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function eI(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new gp("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1}function tI(t,e,r,n){--e.pendingcb,n(r),d_(e),Jl(t,r)}function lJ(t,e){let r=t._writableState,n=r.sync,s=r.writecb;if(typeof s!="function"){Jl(t,new oI);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?ic.nextTick(tI,t,r,e,s):tI(t,r,e,s)):(r.buffered.length>r.bufferedIndex&&p_(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===s?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:s,stream:t,state:r},ic.nextTick(fJ,r.afterWriteTickInfo)):cI(t,r,1,s))}function fJ({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,cI(t,e,r,n)}function cI(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&d_(e),h_(t,e)}function d_(t){if(t.writing)return;for(let s=t.bufferedIndex;s<t.buffered.length;++s){var e;let{chunk:i,callback:o}=t.buffered[s],a=t.objectMode?1:i.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new gp("write"))}let r=t[Gl].splice(0);for(let s=0;s<r.length;s++){var n;r[s]((n=t.errored)!==null&&n!==void 0?n:new gp("end"))}Ym(t)}function p_(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:s}=e,i=r.length-n;if(!i)return;let o=n;if(e.bufferProcessing=!0,i>1&&t._writev){e.pendingcb-=i-1;let a=e.allNoop?f_:c=>{for(let l=o;l<r.length;++l)r[l].callback(c)},u=e.allNoop&&o===0?r:rI(r,o);u.allBuffers=e.allBuffers,eI(t,e,!0,e.length,u,"",a),Ym(e)}else{do{let{chunk:a,encoding:u,callback:c}=r[o];r[o++]=null;let l=s?1:a.length;eI(t,e,!1,l,a,u,c)}while(o<r.length&&!e.writing);o===r.length?Ym(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ir.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new iJ("_write()")};ir.prototype._writev=null;ir.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let s;if(t!=null){let i=uI(this,t,e);i instanceof JW&&(s=i)}return n.corked&&(n.corked=1,this.uncork()),s||(!n.errored&&!n.ending?(n.ending=!0,h_(this,n,!0),n.ended=!0):n.finished?s=new oJ("end"):n.destroyed&&(s=new gp("end"))),typeof r=="function"&&(s||n.finished?ic.nextTick(r,s):n[Gl].push(r)),this};function Xm(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function dJ(t,e){let r=!1;function n(s){if(r){Jl(t,s??oI());return}if(r=!0,e.pendingcb--,s){let i=e[Gl].splice(0);for(let o=0;o<i.length;o++)i[o](s);Jl(t,s,e.sync)}else Xm(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,ic.nextTick(l_,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(s){n(s)}e.sync=!1}function pJ(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,dJ(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function h_(t,e,r){Xm(e)&&(pJ(t,e),e.pendingcb===0&&(r?(e.pendingcb++,ic.nextTick((n,s)=>{Xm(s)?l_(n,s):s.pendingcb--},t,e)):Xm(e)&&(e.pendingcb++,l_(t,e))))}function l_(t,e){e.pendingcb--,e.finished=!0;let r=e[Gl].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}GW(ir.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var hJ=Qm.destroy;ir.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Gl].length)&&ic.nextTick(d_,r),hJ.call(this,t,e),this};ir.prototype._undestroy=Qm.undestroy;ir.prototype._destroy=function(t,e){e(t)};ir.prototype[QW.captureRejectionSymbol]=function(t){this.destroy(t)};var c_;function lI(){return c_===void 0&&(c_={}),c_}ir.fromWeb=function(t,e){return lI().newStreamWritableFromWritableStream(t,e)};ir.toWeb=function(t){return lI().newWritableStreamFromStreamWritable(t)}});var SI=w((zve,EI)=>{var m_=Fa(),yJ=pi(),{isReadable:mJ,isWritable:gJ,isIterable:dI,isNodeStream:vJ,isReadableNodeStream:pI,isWritableNodeStream:hI,isDuplexNodeStream:bJ}=Bs(),yI=Io(),{AbortError:_I,codes:{ERR_INVALID_ARG_TYPE:wJ,ERR_INVALID_RETURN_VALUE:mI}}=_n(),{destroyer:Zl}=tc(),_J=Fs(),EJ=yp(),{createDeferredPromise:gI}=Ds(),vI=r_(),bI=globalThis.Blob||yJ.Blob,SJ=typeof bI<"u"?function(e){return e instanceof bI}:function(e){return!1},AJ=globalThis.AbortController||Fm().AbortController,{FunctionPrototypeCall:wI}=wr(),sc=class extends _J{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};EI.exports=function t(e,r){if(bJ(e))return e;if(pI(e))return e0({readable:e});if(hI(e))return e0({writable:e});if(vJ(e))return e0({writable:!1,readable:!1});if(typeof e=="function"){let{value:s,write:i,final:o,destroy:a}=xJ(e);if(dI(s))return vI(sc,s,{objectMode:!0,write:i,final:o,destroy:a});let u=s?.then;if(typeof u=="function"){let c,l=wI(u,s,f=>{if(f!=null)throw new mI("nully","body",f)},f=>{Zl(c,f)});return c=new sc({objectMode:!0,readable:!1,write:i,final(f){o(async()=>{try{await l,m_.nextTick(f,null)}catch(p){m_.nextTick(f,p)}})},destroy:a})}throw new mI("Iterable, AsyncIterable or AsyncFunction",r,s)}if(SJ(e))return t(e.arrayBuffer());if(dI(e))return vI(sc,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let s=e!=null&&e.readable?pI(e?.readable)?e?.readable:t(e.readable):void 0,i=e!=null&&e.writable?hI(e?.writable)?e?.writable:t(e.writable):void 0;return e0({readable:s,writable:i})}let n=e?.then;if(typeof n=="function"){let s;return wI(n,e,i=>{i!=null&&s.push(i),s.push(null)},i=>{Zl(s,i)}),s=new sc({objectMode:!0,writable:!1,read(){}})}throw new wJ(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function xJ(t){let{promise:e,resolve:r}=gI(),n=new AJ,s=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:u,cb:c}=await o;if(m_.nextTick(c),u)return;if(s.aborted)throw new _I(void 0,{cause:s.reason});({promise:e,resolve:r}=gI()),yield a}}(),{signal:s}),write(o,a,u){let c=r;r=null,c({chunk:o,done:!1,cb:u})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function e0(t){let e=t.readable&&typeof t.readable.read!="function"?EJ.wrap(t.readable):t.readable,r=t.writable,n=!!mJ(e),s=!!gJ(r),i,o,a,u,c;function l(f){let p=u;u=null,p?p(f):f&&c.destroy(f)}return c=new sc({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:s}),s&&(yI(r,f=>{s=!1,f&&Zl(e,f),l(f)}),c._write=function(f,p,d){r.write(f,p)?d():i=d},c._final=function(f){r.end(),o=f},r.on("drain",function(){if(i){let f=i;i=null,f()}}),r.on("finish",function(){if(o){let f=o;o=null,f()}})),n&&(yI(e,f=>{n=!1,f&&Zl(e,f),l(f)}),e.on("readable",function(){if(a){let f=a;a=null,f()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let f=e.read();if(f===null){a=c._read;return}if(!c.push(f))return}}),c._destroy=function(f,p){!f&&u!==null&&(f=new _I),a=null,i=null,o=null,u===null?p(f):(u=p,Zl(r,f),Zl(e,f))},c}});var Fs=w((Wve,DI)=>{"use strict";var{ObjectDefineProperties:DJ,ObjectGetOwnPropertyDescriptor:Fo,ObjectKeys:CJ,ObjectSetPrototypeOf:AI}=wr();DI.exports=zi;var b_=yp(),gi=y_();AI(zi.prototype,b_.prototype);AI(zi,b_);{let t=CJ(gi.prototype);for(let e=0;e<t.length;e++){let r=t[e];zi.prototype[r]||(zi.prototype[r]=gi.prototype[r])}}function zi(t){if(!(this instanceof zi))return new zi(t);b_.call(this,t),gi.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}DJ(zi.prototype,{writable:{__proto__:null,...Fo(gi.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Fo(gi.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Fo(gi.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Fo(gi.prototype,"writableBuffer")},writableLength:{__proto__:null,...Fo(gi.prototype,"writableLength")},writableFinished:{__proto__:null,...Fo(gi.prototype,"writableFinished")},writableCorked:{__proto__:null,...Fo(gi.prototype,"writableCorked")},writableEnded:{__proto__:null,...Fo(gi.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Fo(gi.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var g_;function xI(){return g_===void 0&&(g_={}),g_}zi.fromWeb=function(t,e){return xI().newStreamDuplexFromReadableWritablePair(t,e)};zi.toWeb=function(t){return xI().newReadableWritablePairFromDuplex(t)};var v_;zi.from=function(t){return v_||(v_=SI()),v_(t,"body")}});var E_=w((Jve,PI)=>{"use strict";var{ObjectSetPrototypeOf:CI,Symbol:PJ}=wr();PI.exports=ko;var{ERR_METHOD_NOT_IMPLEMENTED:OJ}=_n().codes,__=Fs(),{getHighWaterMark:BJ}=zm();CI(ko.prototype,__.prototype);CI(ko,__);var bp=PJ("kCallback");function ko(t){if(!(this instanceof ko))return new ko(t);let e=t?BJ(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),__.call(this,t),this._readableState.sync=!1,this[bp]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",TJ)}function w_(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function TJ(){this._final!==w_&&w_.call(this)}ko.prototype._final=w_;ko.prototype._transform=function(t,e,r){throw new OJ("_transform()")};ko.prototype._write=function(t,e,r){let n=this._readableState,s=this._writableState,i=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[bp]=r})};ko.prototype._read=function(){if(this[bp]){let t=this[bp];this[bp]=null,t()}}});var A_=w((Gve,BI)=>{"use strict";var{ObjectSetPrototypeOf:OI}=wr();BI.exports=Xl;var S_=E_();OI(Xl.prototype,S_.prototype);OI(Xl,S_);function Xl(t){if(!(this instanceof Xl))return new Xl(t);S_.call(this,t)}Xl.prototype._transform=function(t,e,r){r(null,t)}});var i0=w((Zve,RI)=>{var wp=Fa(),{ArrayIsArray:IJ,Promise:FJ,SymbolAsyncIterator:kJ}=wr(),n0=Io(),{once:RJ}=Ds(),$J=tc(),TI=Fs(),{aggregateTwoErrors:NJ,codes:{ERR_INVALID_ARG_TYPE:I_,ERR_INVALID_RETURN_VALUE:x_,ERR_MISSING_ARGS:MJ,ERR_STREAM_DESTROYED:jJ,ERR_STREAM_PREMATURE_CLOSE:qJ},AbortError:UJ}=_n(),{validateFunction:LJ,validateAbortSignal:KJ}=dp(),{isIterable:oc,isReadable:D_,isReadableNodeStream:r0,isNodeStream:II,isTransformStream:Yl,isWebStream:VJ,isReadableStream:C_,isReadableEnded:HJ}=Bs(),zJ=globalThis.AbortController||Fm().AbortController,P_,O_;function FI(t,e,r){let n=!1;t.on("close",()=>{n=!0});let s=n0(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,$J.destroyer(t,i||new jJ("pipe")))},cleanup:s}}function WJ(t){return LJ(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function B_(t){if(oc(t))return t;if(r0(t))return JJ(t);throw new I_("val",["Readable","Iterable","AsyncIterable"],t)}async function*JJ(t){O_||(O_=yp()),yield*O_.prototype[kJ].call(t)}async function t0(t,e,r,{end:n}){let s,i=null,o=c=>{if(c&&(s=c),i){let l=i;i=null,l()}},a=()=>new FJ((c,l)=>{s?l(s):i=()=>{s?l(s):c()}});e.on("drain",o);let u=n0(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&e.end(),await a(),r()}catch(c){r(s!==c?NJ(s,c):c)}finally{u(),e.off("drain",o)}}async function T_(t,e,r,{end:n}){Yl(e)&&(e=e.writable);let s=e.getWriter();try{for await(let i of t)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function GJ(...t){return kI(t,RJ(WJ(t)))}function kI(t,e,r){if(t.length===1&&IJ(t[0])&&(t=t[0]),t.length<2)throw new MJ("streams");let n=new zJ,s=n.signal,i=r?.signal,o=[];KJ(i,"options.signal");function a(){d(new UJ)}i?.addEventListener("abort",a);let u,c,l=[],f=0;function p(D){d(D,--f===0)}function d(D,v){if(D&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=D),!(!u&&!v)){for(;l.length;)l.shift()(u);i?.removeEventListener("abort",a),n.abort(),v&&(u||o.forEach(A=>A()),wp.nextTick(e,u,c))}}let h;for(let D=0;D<t.length;D++){let v=t[D],A=D<t.length-1,x=D>0,B=A||r?.end!==!1,C=D===t.length-1;if(II(v)){let T=function(k){k&&k.name!=="AbortError"&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(k)};var _=T;if(B){let{destroy:k,cleanup:I}=FI(v,A,x);l.push(k),D_(v)&&C&&o.push(I)}v.on("error",T),D_(v)&&C&&o.push(()=>{v.removeListener("error",T)})}if(D===0)if(typeof v=="function"){if(h=v({signal:s}),!oc(h))throw new x_("Iterable, AsyncIterable or Stream","source",h)}else oc(v)||r0(v)||Yl(v)?h=v:h=TI.from(v);else if(typeof v=="function"){if(Yl(h)){var m;h=B_((m=h)===null||m===void 0?void 0:m.readable)}else h=B_(h);if(h=v(h,{signal:s}),A){if(!oc(h,!0))throw new x_("AsyncIterable",`transform[${D-1}]`,h)}else{var g;P_||(P_=A_());let T=new P_({objectMode:!0}),k=(g=h)===null||g===void 0?void 0:g.then;if(typeof k=="function")f++,k.call(h,M=>{c=M,M!=null&&T.write(M),B&&T.end(),wp.nextTick(p)},M=>{T.destroy(M),wp.nextTick(p,M)});else if(oc(h,!0))f++,t0(h,T,p,{end:B});else if(C_(h)||Yl(h)){let M=h.readable||h;f++,t0(M,T,p,{end:B})}else throw new x_("AsyncIterable or Promise","destination",h);h=T;let{destroy:I,cleanup:$}=FI(h,!1,!0);l.push(I),C&&o.push($)}}else if(II(v)){if(r0(h)){f+=2;let T=ZJ(h,v,p,{end:B});D_(v)&&C&&o.push(T)}else if(Yl(h)||C_(h)){let T=h.readable||h;f++,t0(T,v,p,{end:B})}else if(oc(h))f++,t0(h,v,p,{end:B});else throw new I_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else if(VJ(v)){if(r0(h))f++,T_(B_(h),v,p,{end:B});else if(C_(h)||oc(h))f++,T_(h,v,p,{end:B});else if(Yl(h))f++,T_(h.readable,v,p,{end:B});else throw new I_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else h=TI.from(v)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&wp.nextTick(a),h}function ZJ(t,e,r,{end:n}){let s=!1;if(e.on("close",()=>{s||r(new qJ)}),t.pipe(e,{end:!1}),n){let o=function(){s=!0,e.end()};var i=o;HJ(t)?wp.nextTick(o):t.once("end",o)}else r();return n0(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),n0(e,{readable:!1,writable:!0},r)}RI.exports={pipelineImpl:kI,pipeline:GJ}});var k_=w((Xve,UI)=>{"use strict";var{pipeline:XJ}=i0(),s0=Fs(),{destroyer:YJ}=tc(),{isNodeStream:o0,isReadable:$I,isWritable:NI,isWebStream:F_,isTransformStream:ac,isWritableStream:MI,isReadableStream:jI}=Bs(),{AbortError:QJ,codes:{ERR_INVALID_ARG_VALUE:qI,ERR_MISSING_ARGS:eG}}=_n(),tG=Io();UI.exports=function(...e){if(e.length===0)throw new eG("streams");if(e.length===1)return s0.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=s0.from(e[0])),typeof e[e.length-1]=="function"){let d=e.length-1;e[d]=s0.from(e[d])}for(let d=0;d<e.length;++d)if(!(!o0(e[d])&&!F_(e[d]))){if(d<e.length-1&&!($I(e[d])||jI(e[d])||ac(e[d])))throw new qI(`streams[${d}]`,r[d],"must be readable");if(d>0&&!(NI(e[d])||MI(e[d])||ac(e[d])))throw new qI(`streams[${d}]`,r[d],"must be writable")}let n,s,i,o,a;function u(d){let h=o;o=null,h?h(d):d?a.destroy(d):!p&&!f&&a.destroy()}let c=e[0],l=XJ(e,u),f=!!(NI(c)||MI(c)||ac(c)),p=!!($I(l)||jI(l)||ac(l));if(a=new s0({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(l!=null&&l.writableObjectMode),writable:f,readable:p}),f){if(o0(c))a._write=function(h,m,g){c.write(h,m)?g():n=g},a._final=function(h){c.end(),s=h},c.on("drain",function(){if(n){let h=n;n=null,h()}});else if(F_(c)){let m=(ac(c)?c.writable:c).getWriter();a._write=async function(g,_,D){try{await m.ready,m.write(g).catch(()=>{}),D()}catch(v){D(v)}},a._final=async function(g){try{await m.ready,m.close().catch(()=>{}),s=g}catch(_){g(_)}}}let d=ac(l)?l.readable:l;tG(d,()=>{if(s){let h=s;s=null,h()}})}if(p){if(o0(l))l.on("readable",function(){if(i){let d=i;i=null,d()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let d=l.read();if(d===null){i=a._read;return}if(!a.push(d))return}};else if(F_(l)){let h=(ac(l)?l.readable:l).getReader();a._read=async function(){for(;;)try{let{value:m,done:g}=await h.read();if(!a.push(m))return;if(g){a.push(null);return}}catch{return}}}}return a._destroy=function(d,h){!d&&o!==null&&(d=new QJ),i=null,n=null,s=null,o===null?h(d):(o=h,o0(l)&&YJ(l,d))},a}});var GI=w((Yve,N_)=>{"use strict";var HI=globalThis.AbortController||Fm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:rG,ERR_INVALID_ARG_TYPE:_p,ERR_MISSING_ARGS:nG,ERR_OUT_OF_RANGE:iG},AbortError:ks}=_n(),{validateAbortSignal:uc,validateInteger:sG,validateObject:cc}=dp(),oG=wr().Symbol("kWeak"),{finished:aG}=Io(),uG=k_(),{addAbortSignalNoValidate:cG}=pp(),{isWritable:lG,isNodeStream:fG}=Bs(),{ArrayPrototypePush:dG,MathFloor:pG,Number:hG,NumberIsNaN:yG,Promise:LI,PromiseReject:KI,PromisePrototypeThen:mG,Symbol:zI}=wr(),a0=zI("kEmpty"),VI=zI("kEof");function gG(t,e){if(e!=null&&cc(e,"options"),e?.signal!=null&&uc(e.signal,"options.signal"),fG(t)&&!lG(t))throw new rG("stream",t,"must be writable");let r=uG(this,t);return e!=null&&e.signal&&cG(e.signal,r),r}function u0(t,e){if(typeof t!="function")throw new _p("fn",["Function","AsyncFunction"],t);e!=null&&cc(e,"options"),e?.signal!=null&&uc(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=pG(e.concurrency)),sG(r,"concurrency",1),(async function*(){var s,i;let o=new HI,a=this,u=[],c=o.signal,l={signal:c},f=()=>o.abort();e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted&&f(),e==null||(i=e.signal)===null||i===void 0||i.addEventListener("abort",f);let p,d,h=!1;function m(){h=!0}async function g(){try{for await(let v of a){var _;if(h)return;if(c.aborted)throw new ks;try{v=t(v,l)}catch(A){v=KI(A)}v!==a0&&(typeof((_=v)===null||_===void 0?void 0:_.catch)=="function"&&v.catch(m),u.push(v),p&&(p(),p=null),!h&&u.length&&u.length>=r&&await new LI(A=>{d=A}))}u.push(VI)}catch(v){let A=KI(v);mG(A,void 0,m),u.push(A)}finally{var D;h=!0,p&&(p(),p=null),e==null||(D=e.signal)===null||D===void 0||D.removeEventListener("abort",f)}}g();try{for(;;){for(;u.length>0;){let _=await u[0];if(_===VI)return;if(c.aborted)throw new ks;_!==a0&&(yield _),u.shift(),d&&(d(),d=null)}await new LI(_=>{p=_})}}finally{o.abort(),h=!0,d&&(d(),d=null)}}).call(this)}function vG(t=void 0){return t!=null&&cc(t,"options"),t?.signal!=null&&uc(t.signal,"options.signal"),(async function*(){let r=0;for await(let s of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new ks({cause:t.signal.reason});yield[r++,s]}}).call(this)}async function WI(t,e=void 0){for await(let r of $_.call(this,t,e))return!0;return!1}async function bG(t,e=void 0){if(typeof t!="function")throw new _p("fn",["Function","AsyncFunction"],t);return!await WI.call(this,async(...r)=>!await t(...r),e)}async function wG(t,e){for await(let r of $_.call(this,t,e))return r}async function _G(t,e){if(typeof t!="function")throw new _p("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s),a0}for await(let n of u0.call(this,r,e));}function $_(t,e){if(typeof t!="function")throw new _p("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s)?n:a0}return u0.call(this,r,e)}var R_=class extends nG{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function EG(t,e,r){var n;if(typeof t!="function")throw new _p("reducer",["Function","AsyncFunction"],t);r!=null&&cc(r,"options"),r?.signal!=null&&uc(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new ks(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await aG(this.destroy(c)),c}let i=new HI,o=i.signal;if(r!=null&&r.signal){let c={once:!0,[oG]:this};r.signal.addEventListener("abort",()=>i.abort(),c)}let a=!1;try{for await(let c of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new ks;s?e=await t(e,c,{signal:o}):(e=c,s=!0)}if(!a&&!s)throw new R_}finally{i.abort()}return e}async function SG(t){t!=null&&cc(t,"options"),t?.signal!=null&&uc(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ks(void 0,{cause:t.signal.reason});dG(e,n)}return e}function AG(t,e){let r=u0.call(this,t,e);return(async function*(){for await(let s of r)yield*s}).call(this)}function JI(t){if(t=hG(t),yG(t))return 0;if(t<0)throw new iG("number",">= 0",t);return t}function xG(t,e=void 0){return e!=null&&cc(e,"options"),e?.signal!=null&&uc(e.signal,"options.signal"),t=JI(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ks;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new ks;t--<=0&&(yield i)}}).call(this)}function DG(t,e=void 0){return e!=null&&cc(e,"options"),e?.signal!=null&&uc(e.signal,"options.signal"),t=JI(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ks;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new ks;if(t-- >0)yield i;else return}}).call(this)}N_.exports.streamReturningOperators={asIndexedPairs:vG,drop:xG,filter:$_,flatMap:AG,map:u0,take:DG,compose:gG};N_.exports.promiseReturningOperators={every:bG,forEach:_G,reduce:EG,toArray:SG,some:WI,find:wG}});var M_=w((Qve,ZI)=>{"use strict";var{ArrayPrototypePop:CG,Promise:PG}=wr(),{isIterable:OG,isNodeStream:BG,isWebStream:TG}=Bs(),{pipelineImpl:IG}=i0(),{finished:FG}=Io();j_();function kG(...t){return new PG((e,r)=>{let n,s,i=t[t.length-1];if(i&&typeof i=="object"&&!BG(i)&&!OG(i)&&!TG(i)){let o=CG(t);n=o.signal,s=o.end}IG(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:s})})}ZI.exports={finished:FG,pipeline:kG}});var j_=w((ebe,s8)=>{var{Buffer:RG}=pi(),{ObjectDefineProperty:Ro,ObjectKeys:QI,ReflectApply:e8}=wr(),{promisify:{custom:t8}}=Ds(),{streamReturningOperators:XI,promiseReturningOperators:YI}=GI(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:r8}}=_n(),$G=k_(),{pipeline:n8}=i0(),{destroyer:NG}=tc(),i8=Io(),q_=M_(),U_=Bs(),hr=s8.exports=Km().Stream;hr.isDisturbed=U_.isDisturbed;hr.isErrored=U_.isErrored;hr.isReadable=U_.isReadable;hr.Readable=yp();for(let t of QI(XI)){let r=function(...n){if(new.target)throw r8();return hr.Readable.from(e8(e,this,n))};L_=r;let e=XI[t];Ro(r,"name",{__proto__:null,value:e.name}),Ro(r,"length",{__proto__:null,value:e.length}),Ro(hr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var L_;for(let t of QI(YI)){let r=function(...s){if(new.target)throw r8();return e8(e,this,s)};L_=r;let e=YI[t];Ro(r,"name",{__proto__:null,value:e.name}),Ro(r,"length",{__proto__:null,value:e.length}),Ro(hr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var L_;hr.Writable=y_();hr.Duplex=Fs();hr.Transform=E_();hr.PassThrough=A_();hr.pipeline=n8;var{addAbortSignal:MG}=pp();hr.addAbortSignal=MG;hr.finished=i8;hr.destroy=NG;hr.compose=$G;Ro(hr,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return q_}});Ro(n8,t8,{__proto__:null,enumerable:!0,get(){return q_.pipeline}});Ro(i8,t8,{__proto__:null,enumerable:!0,get(){return q_.finished}});hr.Stream=hr;hr._isUint8Array=function(e){return e instanceof Uint8Array};hr._uint8ArrayToBuffer=function(e){return RG.from(e.buffer,e.byteOffset,e.byteLength)}});var Ep=w((tbe,yr)=>{"use strict";var Dr=j_(),jG=M_(),qG=Dr.Readable.destroy;yr.exports=Dr.Readable;yr.exports._uint8ArrayToBuffer=Dr._uint8ArrayToBuffer;yr.exports._isUint8Array=Dr._isUint8Array;yr.exports.isDisturbed=Dr.isDisturbed;yr.exports.isErrored=Dr.isErrored;yr.exports.isReadable=Dr.isReadable;yr.exports.Readable=Dr.Readable;yr.exports.Writable=Dr.Writable;yr.exports.Duplex=Dr.Duplex;yr.exports.Transform=Dr.Transform;yr.exports.PassThrough=Dr.PassThrough;yr.exports.addAbortSignal=Dr.addAbortSignal;yr.exports.finished=Dr.finished;yr.exports.destroy=Dr.destroy;yr.exports.destroy=qG;yr.exports.pipeline=Dr.pipeline;yr.exports.compose=Dr.compose;Object.defineProperty(Dr,"promises",{configurable:!0,enumerable:!0,get(){return jG}});yr.exports.Stream=Dr.Stream;yr.exports.default=yr.exports});var E8=w(_8=>{_8.Level=Bw().BrowserLevel});var aS=w((ag,e6)=>{(function(t,e){typeof ag=="object"&&typeof e6<"u"?e(ag):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(ag,function(t){"use strict";function e(){for(var F=arguments.length,O=Array(F),N=0;N<F;N++)O[N]=arguments[N];if(O.length>1){O[0]=O[0].slice(0,-1);for(var L=O.length-1,K=1;K<L;++K)O[K]=O[K].slice(1,-1);return O[L]=O[L].slice(1),O.join("")}else return O[0]}function r(F){return"(?:"+F+")"}function n(F){return F===void 0?"undefined":F===null?"null":Object.prototype.toString.call(F).split(" ").pop().split("]").shift().toLowerCase()}function s(F){return F.toUpperCase()}function i(F){return F!=null?F instanceof Array?F:typeof F.length!="number"||F.split||F.setInterval||F.call?[F]:Array.prototype.slice.call(F):[]}function o(F,O){var N=F;if(O)for(var L in O)N[L]=O[L];return N}function a(F){var O="[A-Za-z]",N="[\\x0D]",L="[0-9]",K="[\\x22]",ue=e(L,"[A-Fa-f]"),Ve="[\\x0A]",wt="[\\x20]",Ot=r(r("%[EFef]"+ue+"%"+ue+ue+"%"+ue+ue)+"|"+r("%[89A-Fa-f]"+ue+"%"+ue+ue)+"|"+r("%"+ue+ue)),vr="[\\:\\/\\?\\#\\[\\]\\@]",mt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",rr=e(vr,mt),br=F?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Zt=F?"[\\uE000-\\uF8FF]":"[]",St=e(O,L,"[\\-\\.\\_\\~]",br),nr=r(O+e(O,L,"[\\+\\-\\.]")+"*"),Ft=r(r(Ot+"|"+e(St,mt,"[\\:]"))+"*"),Bu=r(r("25[0-5]")+"|"+r("2[0-4]"+L)+"|"+r("1"+L+L)+"|"+r("[1-9]"+L)+"|"+L),Gn=r(r("25[0-5]")+"|"+r("2[0-4]"+L)+"|"+r("1"+L+L)+"|"+r("0?[1-9]"+L)+"|0?0?"+L),li=r(Gn+"\\."+Gn+"\\."+Gn+"\\."+Gn),jt=r(ue+"{1,4}"),Zn=r(r(jt+"\\:"+jt)+"|"+li),fi=r(r(jt+"\\:")+"{6}"+Zn),vs=r("\\:\\:"+r(jt+"\\:")+"{5}"+Zn),Tu=r(r(jt)+"?\\:\\:"+r(jt+"\\:")+"{4}"+Zn),go=r(r(r(jt+"\\:")+"{0,1}"+jt)+"?\\:\\:"+r(jt+"\\:")+"{3}"+Zn),Rd=r(r(r(jt+"\\:")+"{0,2}"+jt)+"?\\:\\:"+r(jt+"\\:")+"{2}"+Zn),Zy=r(r(r(jt+"\\:")+"{0,3}"+jt)+"?\\:\\:"+jt+"\\:"+Zn),Xy=r(r(r(jt+"\\:")+"{0,4}"+jt)+"?\\:\\:"+Zn),wl=r(r(r(jt+"\\:")+"{0,5}"+jt)+"?\\:\\:"+jt),_l=r(r(r(jt+"\\:")+"{0,6}"+jt)+"?\\:\\:"),vo=r([fi,vs,Tu,go,Rd,Zy,Xy,wl,_l].join("|")),El=r(r(St+"|"+Ot)+"+"),d1=r(vo+"\\%25"+El),Iu=r(vo+r("\\%25|\\%(?!"+ue+"{2})")+El),m7=r("[vV]"+ue+"+\\."+e(St,mt,"[\\:]")+"+"),g7=r("\\["+r(Iu+"|"+vo+"|"+m7)+"\\]"),_P=r(r(Ot+"|"+e(St,mt))+"*"),$d=r(g7+"|"+li+"(?!"+_P+")|"+_P),Nd=r(L+"*"),EP=r(r(Ft+"@")+"?"+$d+r("\\:"+Nd)+"?"),Md=r(Ot+"|"+e(St,mt,"[\\:\\@]")),v7=r(Md+"*"),SP=r(Md+"+"),b7=r(r(Ot+"|"+e(St,mt,"[\\@]"))+"+"),bo=r(r("\\/"+v7)+"*"),Sl=r("\\/"+r(SP+bo)+"?"),p1=r(b7+bo),Yy=r(SP+bo),Al="(?!"+Md+")",q0e=r(bo+"|"+Sl+"|"+p1+"|"+Yy+"|"+Al),xl=r(r(Md+"|"+e("[\\/\\?]",Zt))+"*"),jd=r(r(Md+"|[\\/\\?]")+"*"),AP=r(r("\\/\\/"+EP+bo)+"|"+Sl+"|"+Yy+"|"+Al),w7=r(nr+"\\:"+AP+r("\\?"+xl)+"?"+r("\\#"+jd)+"?"),_7=r(r("\\/\\/"+EP+bo)+"|"+Sl+"|"+p1+"|"+Al),E7=r(_7+r("\\?"+xl)+"?"+r("\\#"+jd)+"?"),U0e=r(w7+"|"+E7),L0e=r(nr+"\\:"+AP+r("\\?"+xl)+"?"),K0e="^("+nr+")\\:"+r(r("\\/\\/("+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?)")+"?("+bo+"|"+Sl+"|"+Yy+"|"+Al+")")+r("\\?("+xl+")")+"?"+r("\\#("+jd+")")+"?$",V0e="^(){0}"+r(r("\\/\\/("+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?)")+"?("+bo+"|"+Sl+"|"+p1+"|"+Al+")")+r("\\?("+xl+")")+"?"+r("\\#("+jd+")")+"?$",H0e="^("+nr+")\\:"+r(r("\\/\\/("+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?)")+"?("+bo+"|"+Sl+"|"+Yy+"|"+Al+")")+r("\\?("+xl+")")+"?$",z0e="^"+r("\\#("+jd+")")+"?$",W0e="^"+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",O,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",St,mt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",St,mt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",St,mt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",St,mt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",St,mt,"[\\:\\@\\/\\?]",Zt),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",St,mt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",St,mt),"g"),UNRESERVED:new RegExp(St,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",St,rr),"g"),PCT_ENCODED:new RegExp(Ot,"g"),IPV4ADDRESS:new RegExp("^("+li+")$"),IPV6ADDRESS:new RegExp("^\\[?("+vo+")"+r(r("\\%25|\\%(?!"+ue+"{2})")+"("+El+")")+"?\\]?$")}}var u=a(!1),c=a(!0),l=function(){function F(O,N){var L=[],K=!0,ue=!1,Ve=void 0;try{for(var wt=O[Symbol.iterator](),Ot;!(K=(Ot=wt.next()).done)&&(L.push(Ot.value),!(N&&L.length===N));K=!0);}catch(vr){ue=!0,Ve=vr}finally{try{!K&&wt.return&&wt.return()}finally{if(ue)throw Ve}}return L}return function(O,N){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return F(O,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(F){if(Array.isArray(F)){for(var O=0,N=Array(F.length);O<F.length;O++)N[O]=F[O];return N}else return Array.from(F)},p=2147483647,d=36,h=1,m=26,g=38,_=700,D=72,v=128,A="-",x=/^xn--/,B=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=d-h,I=Math.floor,$=String.fromCharCode;function M(F){throw new RangeError(T[F])}function Y(F,O){for(var N=[],L=F.length;L--;)N[L]=O(F[L]);return N}function ee(F,O){var N=F.split("@"),L="";N.length>1&&(L=N[0]+"@",F=N[1]),F=F.replace(C,".");var K=F.split("."),ue=Y(K,O).join(".");return L+ue}function U(F){for(var O=[],N=0,L=F.length;N<L;){var K=F.charCodeAt(N++);if(K>=55296&&K<=56319&&N<L){var ue=F.charCodeAt(N++);(ue&64512)==56320?O.push(((K&1023)<<10)+(ue&1023)+65536):(O.push(K),N--)}else O.push(K)}return O}var G=function(O){return String.fromCodePoint.apply(String,f(O))},te=function(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:d},W=function(O,N){return O+22+75*(O<26)-((N!=0)<<5)},j=function(O,N,L){var K=0;for(O=L?I(O/_):O>>1,O+=I(O/N);O>k*m>>1;K+=d)O=I(O/k);return I(K+(k+1)*O/(O+g))},q=function(O){var N=[],L=O.length,K=0,ue=v,Ve=D,wt=O.lastIndexOf(A);wt<0&&(wt=0);for(var Ot=0;Ot<wt;++Ot)O.charCodeAt(Ot)>=128&&M("not-basic"),N.push(O.charCodeAt(Ot));for(var vr=wt>0?wt+1:0;vr<L;){for(var mt=K,rr=1,br=d;;br+=d){vr>=L&&M("invalid-input");var Zt=te(O.charCodeAt(vr++));(Zt>=d||Zt>I((p-K)/rr))&&M("overflow"),K+=Zt*rr;var St=br<=Ve?h:br>=Ve+m?m:br-Ve;if(Zt<St)break;var nr=d-St;rr>I(p/nr)&&M("overflow"),rr*=nr}var Ft=N.length+1;Ve=j(K-mt,Ft,mt==0),I(K/Ft)>p-ue&&M("overflow"),ue+=I(K/Ft),K%=Ft,N.splice(K++,0,ue)}return String.fromCodePoint.apply(String,N)},Q=function(O){var N=[];O=U(O);var L=O.length,K=v,ue=0,Ve=D,wt=!0,Ot=!1,vr=void 0;try{for(var mt=O[Symbol.iterator](),rr;!(wt=(rr=mt.next()).done);wt=!0){var br=rr.value;br<128&&N.push($(br))}}catch(Iu){Ot=!0,vr=Iu}finally{try{!wt&&mt.return&&mt.return()}finally{if(Ot)throw vr}}var Zt=N.length,St=Zt;for(Zt&&N.push(A);St<L;){var nr=p,Ft=!0,Bu=!1,Gn=void 0;try{for(var li=O[Symbol.iterator](),jt;!(Ft=(jt=li.next()).done);Ft=!0){var Zn=jt.value;Zn>=K&&Zn<nr&&(nr=Zn)}}catch(Iu){Bu=!0,Gn=Iu}finally{try{!Ft&&li.return&&li.return()}finally{if(Bu)throw Gn}}var fi=St+1;nr-K>I((p-ue)/fi)&&M("overflow"),ue+=(nr-K)*fi,K=nr;var vs=!0,Tu=!1,go=void 0;try{for(var Rd=O[Symbol.iterator](),Zy;!(vs=(Zy=Rd.next()).done);vs=!0){var Xy=Zy.value;if(Xy<K&&++ue>p&&M("overflow"),Xy==K){for(var wl=ue,_l=d;;_l+=d){var vo=_l<=Ve?h:_l>=Ve+m?m:_l-Ve;if(wl<vo)break;var El=wl-vo,d1=d-vo;N.push($(W(vo+El%d1,0))),wl=I(El/d1)}N.push($(W(wl,0))),Ve=j(ue,fi,St==Zt),ue=0,++St}}}catch(Iu){Tu=!0,go=Iu}finally{try{!vs&&Rd.return&&Rd.return()}finally{if(Tu)throw go}}++ue,++K}return N.join("")},oe=function(O){return ee(O,function(N){return x.test(N)?q(N.slice(4).toLowerCase()):N})},pe=function(O){return ee(O,function(N){return B.test(N)?"xn--"+Q(N):N})},ae={version:"2.1.0",ucs2:{decode:U,encode:G},decode:q,encode:Q,toASCII:pe,toUnicode:oe},he={};function Ee(F){var O=F.charCodeAt(0),N=void 0;return O<16?N="%0"+O.toString(16).toUpperCase():O<128?N="%"+O.toString(16).toUpperCase():O<2048?N="%"+(O>>6|192).toString(16).toUpperCase()+"%"+(O&63|128).toString(16).toUpperCase():N="%"+(O>>12|224).toString(16).toUpperCase()+"%"+(O>>6&63|128).toString(16).toUpperCase()+"%"+(O&63|128).toString(16).toUpperCase(),N}function Pe(F){for(var O="",N=0,L=F.length;N<L;){var K=parseInt(F.substr(N+1,2),16);if(K<128)O+=String.fromCharCode(K),N+=3;else if(K>=194&&K<224){if(L-N>=6){var ue=parseInt(F.substr(N+4,2),16);O+=String.fromCharCode((K&31)<<6|ue&63)}else O+=F.substr(N,6);N+=6}else if(K>=224){if(L-N>=9){var Ve=parseInt(F.substr(N+4,2),16),wt=parseInt(F.substr(N+7,2),16);O+=String.fromCharCode((K&15)<<12|(Ve&63)<<6|wt&63)}else O+=F.substr(N,9);N+=9}else O+=F.substr(N,3),N+=3}return O}function Fe(F,O){function N(L){var K=Pe(L);return K.match(O.UNRESERVED)?K:L}return F.scheme&&(F.scheme=String(F.scheme).replace(O.PCT_ENCODED,N).toLowerCase().replace(O.NOT_SCHEME,"")),F.userinfo!==void 0&&(F.userinfo=String(F.userinfo).replace(O.PCT_ENCODED,N).replace(O.NOT_USERINFO,Ee).replace(O.PCT_ENCODED,s)),F.host!==void 0&&(F.host=String(F.host).replace(O.PCT_ENCODED,N).toLowerCase().replace(O.NOT_HOST,Ee).replace(O.PCT_ENCODED,s)),F.path!==void 0&&(F.path=String(F.path).replace(O.PCT_ENCODED,N).replace(F.scheme?O.NOT_PATH:O.NOT_PATH_NOSCHEME,Ee).replace(O.PCT_ENCODED,s)),F.query!==void 0&&(F.query=String(F.query).replace(O.PCT_ENCODED,N).replace(O.NOT_QUERY,Ee).replace(O.PCT_ENCODED,s)),F.fragment!==void 0&&(F.fragment=String(F.fragment).replace(O.PCT_ENCODED,N).replace(O.NOT_FRAGMENT,Ee).replace(O.PCT_ENCODED,s)),F}function Je(F){return F.replace(/^0*(.*)/,"$1")||"0"}function at(F,O){var N=F.match(O.IPV4ADDRESS)||[],L=l(N,2),K=L[1];return K?K.split(".").map(Je).join("."):F}function ft(F,O){var N=F.match(O.IPV6ADDRESS)||[],L=l(N,3),K=L[1],ue=L[2];if(K){for(var Ve=K.toLowerCase().split("::").reverse(),wt=l(Ve,2),Ot=wt[0],vr=wt[1],mt=vr?vr.split(":").map(Je):[],rr=Ot.split(":").map(Je),br=O.IPV4ADDRESS.test(rr[rr.length-1]),Zt=br?7:8,St=rr.length-Zt,nr=Array(Zt),Ft=0;Ft<Zt;++Ft)nr[Ft]=mt[Ft]||rr[St+Ft]||"";br&&(nr[Zt-1]=at(nr[Zt-1],O));var Bu=nr.reduce(function(fi,vs,Tu){if(!vs||vs==="0"){var go=fi[fi.length-1];go&&go.index+go.length===Tu?go.length++:fi.push({index:Tu,length:1})}return fi},[]),Gn=Bu.sort(function(fi,vs){return vs.length-fi.length})[0],li=void 0;if(Gn&&Gn.length>1){var jt=nr.slice(0,Gn.index),Zn=nr.slice(Gn.index+Gn.length);li=jt.join(":")+"::"+Zn.join(":")}else li=nr.join(":");return ue&&(li+="%"+ue),li}else return F}var Ge=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Vt="".match(/(){0}/)[1]===void 0;function At(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N={},L=O.iri!==!1?c:u;O.reference==="suffix"&&(F=(O.scheme?O.scheme+":":"")+"//"+F);var K=F.match(Ge);if(K){Vt?(N.scheme=K[1],N.userinfo=K[3],N.host=K[4],N.port=parseInt(K[5],10),N.path=K[6]||"",N.query=K[7],N.fragment=K[8],isNaN(N.port)&&(N.port=K[5])):(N.scheme=K[1]||void 0,N.userinfo=F.indexOf("@")!==-1?K[3]:void 0,N.host=F.indexOf("//")!==-1?K[4]:void 0,N.port=parseInt(K[5],10),N.path=K[6]||"",N.query=F.indexOf("?")!==-1?K[7]:void 0,N.fragment=F.indexOf("#")!==-1?K[8]:void 0,isNaN(N.port)&&(N.port=F.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?K[4]:void 0)),N.host&&(N.host=ft(at(N.host,L),L)),N.scheme===void 0&&N.userinfo===void 0&&N.host===void 0&&N.port===void 0&&!N.path&&N.query===void 0?N.reference="same-document":N.scheme===void 0?N.reference="relative":N.fragment===void 0?N.reference="absolute":N.reference="uri",O.reference&&O.reference!=="suffix"&&O.reference!==N.reference&&(N.error=N.error||"URI is not a "+O.reference+" reference.");var ue=he[(O.scheme||N.scheme||"").toLowerCase()];if(!O.unicodeSupport&&(!ue||!ue.unicodeSupport)){if(N.host&&(O.domainHost||ue&&ue.domainHost))try{N.host=ae.toASCII(N.host.replace(L.PCT_ENCODED,Pe).toLowerCase())}catch(Ve){N.error=N.error||"Host's domain name can not be converted to ASCII via punycode: "+Ve}Fe(N,u)}else Fe(N,L);ue&&ue.parse&&ue.parse(N,O)}else N.error=N.error||"URI can not be parsed.";return N}function cn(F,O){var N=O.iri!==!1?c:u,L=[];return F.userinfo!==void 0&&(L.push(F.userinfo),L.push("@")),F.host!==void 0&&L.push(ft(at(String(F.host),N),N).replace(N.IPV6ADDRESS,function(K,ue,Ve){return"["+ue+(Ve?"%25"+Ve:"")+"]"})),(typeof F.port=="number"||typeof F.port=="string")&&(L.push(":"),L.push(String(F.port))),L.length?L.join(""):void 0}var lr=/^\.\.?\//,ys=/^\/\.(\/|$)/,qi=/^\/\.\.(\/|$)/,mo=/^\/?(?:.|\n)*?(?=\/|$)/;function fr(F){for(var O=[];F.length;)if(F.match(lr))F=F.replace(lr,"");else if(F.match(ys))F=F.replace(ys,"/");else if(F.match(qi))F=F.replace(qi,"/"),O.pop();else if(F==="."||F==="..")F="";else{var N=F.match(mo);if(N){var L=N[0];F=F.slice(L.length),O.push(L)}else throw new Error("Unexpected dot segment condition")}return O.join("")}function Fn(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=O.iri?c:u,L=[],K=he[(O.scheme||F.scheme||"").toLowerCase()];if(K&&K.serialize&&K.serialize(F,O),F.host&&!N.IPV6ADDRESS.test(F.host)){if(O.domainHost||K&&K.domainHost)try{F.host=O.iri?ae.toUnicode(F.host):ae.toASCII(F.host.replace(N.PCT_ENCODED,Pe).toLowerCase())}catch(wt){F.error=F.error||"Host's domain name can not be converted to "+(O.iri?"Unicode":"ASCII")+" via punycode: "+wt}}Fe(F,N),O.reference!=="suffix"&&F.scheme&&(L.push(F.scheme),L.push(":"));var ue=cn(F,O);if(ue!==void 0&&(O.reference!=="suffix"&&L.push("//"),L.push(ue),F.path&&F.path.charAt(0)!=="/"&&L.push("/")),F.path!==void 0){var Ve=F.path;!O.absolutePath&&(!K||!K.absolutePath)&&(Ve=fr(Ve)),ue===void 0&&(Ve=Ve.replace(/^\/\//,"/%2F")),L.push(Ve)}return F.query!==void 0&&(L.push("?"),L.push(F.query)),F.fragment!==void 0&&(L.push("#"),L.push(F.fragment)),L.join("")}function Ea(F,O){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=arguments[3],K={};return L||(F=At(Fn(F,N),N),O=At(Fn(O,N),N)),N=N||{},!N.tolerant&&O.scheme?(K.scheme=O.scheme,K.userinfo=O.userinfo,K.host=O.host,K.port=O.port,K.path=fr(O.path||""),K.query=O.query):(O.userinfo!==void 0||O.host!==void 0||O.port!==void 0?(K.userinfo=O.userinfo,K.host=O.host,K.port=O.port,K.path=fr(O.path||""),K.query=O.query):(O.path?(O.path.charAt(0)==="/"?K.path=fr(O.path):((F.userinfo!==void 0||F.host!==void 0||F.port!==void 0)&&!F.path?K.path="/"+O.path:F.path?K.path=F.path.slice(0,F.path.lastIndexOf("/")+1)+O.path:K.path=O.path,K.path=fr(K.path)),K.query=O.query):(K.path=F.path,O.query!==void 0?K.query=O.query:K.query=F.query),K.userinfo=F.userinfo,K.host=F.host,K.port=F.port),K.scheme=F.scheme),K.fragment=O.fragment,K}function dt(F,O,N){var L=o({scheme:"null"},N);return Fn(Ea(At(F,L),At(O,L),L,!0),L)}function tr(F,O){return typeof F=="string"?F=Fn(At(F,O),O):n(F)==="object"&&(F=At(Fn(F,O),O)),F}function Be(F,O,N){return typeof F=="string"?F=Fn(At(F,N),N):n(F)==="object"&&(F=Fn(F,N)),typeof O=="string"?O=Fn(At(O,N),N):n(O)==="object"&&(O=Fn(O,N)),F===O}function dr(F,O){return F&&F.toString().replace(!O||!O.iri?u.ESCAPE:c.ESCAPE,Ee)}function bt(F,O){return F&&F.toString().replace(!O||!O.iri?u.PCT_ENCODED:c.PCT_ENCODED,Pe)}var ms={scheme:"http",domainHost:!0,parse:function(O,N){return O.host||(O.error=O.error||"HTTP URIs must have a host."),O},serialize:function(O,N){var L=String(O.scheme).toLowerCase()==="https";return(O.port===(L?443:80)||O.port==="")&&(O.port=void 0),O.path||(O.path="/"),O}},Pu={scheme:"https",domainHost:ms.domainHost,parse:ms.parse,serialize:ms.serialize};function kn(F){return typeof F.secure=="boolean"?F.secure:String(F.scheme).toLowerCase()==="wss"}var gs={scheme:"ws",domainHost:!0,parse:function(O,N){var L=O;return L.secure=kn(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L},serialize:function(O,N){if((O.port===(kn(O)?443:80)||O.port==="")&&(O.port=void 0),typeof O.secure=="boolean"&&(O.scheme=O.secure?"wss":"ws",O.secure=void 0),O.resourceName){var L=O.resourceName.split("?"),K=l(L,2),ue=K[0],Ve=K[1];O.path=ue&&ue!=="/"?ue:void 0,O.query=Ve,O.resourceName=void 0}return O.fragment=void 0,O}},Ui={scheme:"wss",domainHost:gs.domainHost,parse:gs.parse,serialize:gs.serialize},ur={},Wy=!0,Jy="[A-Za-z0-9\\-\\.\\_\\~"+(Wy?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",xt="[0-9A-Fa-f]",bn=r(r("%[EFef]"+xt+"%"+xt+xt+"%"+xt+xt)+"|"+r("%[89A-Fa-f]"+xt+"%"+xt+xt)+"|"+r("%"+xt+xt)),Ou="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",bl="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Gy=e(bl,'[\\"\\\\]'),l1="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",f1=new RegExp(Jy,"g"),y=new RegExp(bn,"g"),E=new RegExp(e("[^]",Ou,"[\\.]",'[\\"]',Gy),"g"),b=new RegExp(e("[^]",Jy,l1),"g"),S=b;function P(F){var O=Pe(F);return O.match(f1)?O:F}var V={scheme:"mailto",parse:function(O,N){var L=O,K=L.to=L.path?L.path.split(","):[];if(L.path=void 0,L.query){for(var ue=!1,Ve={},wt=L.query.split("&"),Ot=0,vr=wt.length;Ot<vr;++Ot){var mt=wt[Ot].split("=");switch(mt[0]){case"to":for(var rr=mt[1].split(","),br=0,Zt=rr.length;br<Zt;++br)K.push(rr[br]);break;case"subject":L.subject=bt(mt[1],N);break;case"body":L.body=bt(mt[1],N);break;default:ue=!0,Ve[bt(mt[0],N)]=bt(mt[1],N);break}}ue&&(L.headers=Ve)}L.query=void 0;for(var St=0,nr=K.length;St<nr;++St){var Ft=K[St].split("@");if(Ft[0]=bt(Ft[0]),N.unicodeSupport)Ft[1]=bt(Ft[1],N).toLowerCase();else try{Ft[1]=ae.toASCII(bt(Ft[1],N).toLowerCase())}catch(Bu){L.error=L.error||"Email address's domain name can not be converted to ASCII via punycode: "+Bu}K[St]=Ft.join("@")}return L},serialize:function(O,N){var L=O,K=i(O.to);if(K){for(var ue=0,Ve=K.length;ue<Ve;++ue){var wt=String(K[ue]),Ot=wt.lastIndexOf("@"),vr=wt.slice(0,Ot).replace(y,P).replace(y,s).replace(E,Ee),mt=wt.slice(Ot+1);try{mt=N.iri?ae.toUnicode(mt):ae.toASCII(bt(mt,N).toLowerCase())}catch(St){L.error=L.error||"Email address's domain name can not be converted to "+(N.iri?"Unicode":"ASCII")+" via punycode: "+St}K[ue]=vr+"@"+mt}L.path=K.join(",")}var rr=O.headers=O.headers||{};O.subject&&(rr.subject=O.subject),O.body&&(rr.body=O.body);var br=[];for(var Zt in rr)rr[Zt]!==ur[Zt]&&br.push(Zt.replace(y,P).replace(y,s).replace(b,Ee)+"="+rr[Zt].replace(y,P).replace(y,s).replace(S,Ee));return br.length&&(L.query=br.join("&")),L}},Z=/^([^\:]+)\:(.*)/,re={scheme:"urn",parse:function(O,N){var L=O.path&&O.path.match(Z),K=O;if(L){var ue=N.scheme||K.scheme||"urn",Ve=L[1].toLowerCase(),wt=L[2],Ot=ue+":"+(N.nid||Ve),vr=he[Ot];K.nid=Ve,K.nss=wt,K.path=void 0,vr&&(K=vr.parse(K,N))}else K.error=K.error||"URN can not be parsed.";return K},serialize:function(O,N){var L=N.scheme||O.scheme||"urn",K=O.nid,ue=L+":"+(N.nid||K),Ve=he[ue];Ve&&(O=Ve.serialize(O,N));var wt=O,Ot=O.nss;return wt.path=(K||N.nid)+":"+Ot,wt}},de=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ot={scheme:"urn:uuid",parse:function(O,N){var L=O;return L.uuid=L.nss,L.nss=void 0,!N.tolerant&&(!L.uuid||!L.uuid.match(de))&&(L.error=L.error||"UUID is not valid."),L},serialize:function(O,N){var L=O;return L.nss=(O.uuid||"").toLowerCase(),L}};he[ms.scheme]=ms,he[Pu.scheme]=Pu,he[gs.scheme]=gs,he[Ui.scheme]=Ui,he[V.scheme]=V,he[re.scheme]=re,he[ot.scheme]=ot,t.SCHEMES=he,t.pctEncChar=Ee,t.pctDecChars=Pe,t.parse=At,t.removeDotSegments=fr,t.serialize=Fn,t.resolveComponents=Ea,t.resolve=dt,t.normalize=tr,t.equal=Be,t.escapeComponent=dr,t.unescapeComponent=bt,Object.defineProperty(t,"__esModule",{value:!0})})});var r6=w((w2e,t6)=>{"use strict";t6.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return n;let i=n.length===0?"":",";return`${n}${i}${t(s)}:${t(e[s])}`},"")}}`}});var U6=w((aCe,q6)=>{var Bf=1e3,Tf=Bf*60,If=Tf*60,Pc=If*24,ZQ=Pc*7,XQ=Pc*365.25;q6.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return YQ(t);if(r==="number"&&isFinite(t))return e.long?eee(t):QQ(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function YQ(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*XQ;case"weeks":case"week":case"w":return r*ZQ;case"days":case"day":case"d":return r*Pc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*If;case"minutes":case"minute":case"mins":case"min":case"m":return r*Tf;case"seconds":case"second":case"secs":case"sec":case"s":return r*Bf;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function QQ(t){var e=Math.abs(t);return e>=Pc?Math.round(t/Pc)+"d":e>=If?Math.round(t/If)+"h":e>=Tf?Math.round(t/Tf)+"m":e>=Bf?Math.round(t/Bf)+"s":t+"ms"}function eee(t){var e=Math.abs(t);return e>=Pc?_g(t,e,Pc,"day"):e>=If?_g(t,e,If,"hour"):e>=Tf?_g(t,e,Tf,"minute"):e>=Bf?_g(t,e,Bf,"second"):t+" ms"}function _g(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var Tr=w(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.hasErrors=Yo.Checked=Yo.Status=void 0;Yo.Status={INFO:"info",WARN:"warn",ERROR:"error"};var iee=class{constructor(t,e,r){this.tag=t,this.status=e,this.message=r}};Yo.Checked=iee;var see=t=>{function e(r){return r.status===Yo.Status.ERROR}return t.filter(r=>e(r)).length>0};Yo.hasErrors=see});var H6=w(V6=>{"use strict";Object.defineProperty(V6,"__esModule",{value:!0})});var z6=w(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.HandlerCheckResult=void 0;var oee=class{constructor(t,e,r,n,s,i){this.input_descriptor_path=t,this.verifiable_credential_path=e,this.evaluator=r,this.status=n,this.message=s,this.payload=i}};Sg.HandlerCheckResult=oee});var J6=w(W6=>{"use strict";Object.defineProperty(W6,"__esModule",{value:!0})});var Z6=w(G6=>{"use strict";Object.defineProperty(G6,"__esModule",{value:!0})});var X6=w(zs=>{"use strict";var aee=zs&&zs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ag=zs&&zs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&aee(e,t,r)};Object.defineProperty(zs,"__esModule",{value:!0});Ag(H6(),zs);Ag(z6(),zs);Ag(J6(),zs);Ag(Z6(),zs)});var Y6=w(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.parseDid=Ws.IProofType=Ws.IProofPurpose=void 0;var uee;(function(t){t.verificationMethod="verificationMethod",t.assertionMethod="assertionMethod",t.authentication="authentication",t.keyAgreement="keyAgreement",t.contractAgreement="contactAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(uee=Ws.IProofPurpose||(Ws.IProofPurpose={}));var cee;(function(t){t.Ed25519Signature2018="Ed25519Signature2018",t.Ed25519Signature2020="Ed25519Signature2020",t.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",t.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",t.JsonWebSignature2020="JsonWebSignature2020",t.RsaSignature2018="RsaSignature2018",t.GpgSignature2020="GpgSignature2020",t.JcsEd25519Signature2020="JcsEd25519Signature2020",t.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",t.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",t.JwtProof2020="JwtProof2020"})(cee=Ws.IProofType||(Ws.IProofType={}));var lee=t=>{let e=fee(t);if(e===null)throw new Error("invalid did");return e};Ws.parseDid=lee;var fee=t=>{let r="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",n="([a-z0-9]+)",s=`((?:${r}*:)*(${r}+))`,i="[a-zA-Z0-9_.:%-]",a=`((${`;${i}+=${i}*`})*)`,u="(/[^#?]*)?",c="([?][^#]*)?",l="(#.*)?",f=new RegExp(`^did:${n}:${s}${a}${u}${c}${l}$`);if(t===""||!t)return null;let p=t.match(f);if(p){let d={did:`did:${p[1]}:${p[2]}`,method:p[1],id:p[2],didUrl:t};if(p[4]){let h=p[4].slice(1).split(";");d.params={};for(let m of h){let g=m.split("=");d.params[g[0]]=g[1]}}return p[6]&&(d.path=p[6]),p[7]&&(d.query=p[7].slice(1)),p[8]&&(d.fragment=p[8].slice(1)),d}return null}});var eF=w(Q6=>{"use strict";Object.defineProperty(Q6,"__esModule",{value:!0})});var tF=w(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.JWT_PROOF_TYPE_2020=Js.DocumentFormat=Js.OriginalType=void 0;var dee;(function(t){t.JSONLD="json-ld",t.JWT_ENCODED="jwt-encoded",t.JWT_DECODED="jwt-decoded"})(dee=Js.OriginalType||(Js.OriginalType={}));var pee;(function(t){t[t.JWT=0]="JWT",t[t.JSONLD=1]="JSONLD",t[t.EIP712=2]="EIP712"})(pee=Js.DocumentFormat||(Js.DocumentFormat={}));Js.JWT_PROOF_TYPE_2020="JwtProof2020"});var nF=w(rF=>{"use strict";Object.defineProperty(rF,"__esModule",{value:!0})});var TS=w(Gs=>{"use strict";var hee=Gs&&Gs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xg=Gs&&Gs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hee(e,t,r)};Object.defineProperty(Gs,"__esModule",{value:!0});xg(Y6(),Gs);xg(eF(),Gs);xg(tF(),Gs);xg(nF(),Gs)});var iF=w(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.ObjectUtils=void 0;var IS=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}};Dg.ObjectUtils=IS});var FS=w(Oc=>{"use strict";var yee=Oc&&Oc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mee=Oc&&Oc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yee(e,t,r)};Object.defineProperty(Oc,"__esModule",{value:!0});mee(iF(),Oc)});var uF=w((GCe,aF)=>{"use strict";function RS(t){this.message=t}RS.prototype=new Error,RS.prototype.name="InvalidCharacterError";var sF=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new RS("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function gee(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(sF(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return sF(e)}}function ph(t){this.message=t}function oF(t,e){if(typeof t!="string")throw new ph("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(gee(t.split(".")[r]))}catch(n){throw new ph("Invalid token specified: "+n.message)}}ph.prototype=new Error,ph.prototype.name="InvalidTokenError";var kS=oF;kS.default=oF,kS.InvalidTokenError=ph,aF.exports=kS});var fF=w(tu=>{"use strict";var cF=tu&&tu.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},vee=tu&&tu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tu,"__esModule",{value:!0});tu.CredentialMapper=void 0;var Zs=TS(),Ff=vee(uF()),lF=FS(),$S=class t{static decodeVerifiablePresentation(e){var r;if(t.isJwtEncoded(e)){let n=(0,Ff.default)(e),s=(0,Ff.default)(e,{header:!0});return n.vp.proof={type:Zs.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Zs.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return t.isJwtDecodedPresentation(e)?e:t.isJsonLdAsString(e)?JSON.parse(e):e}static decodeVerifiableCredential(e){var r;if(t.isJwtEncoded(e)){let n=(0,Ff.default)(e),s=(0,Ff.default)(e,{header:!0});return n.vc.proof={type:Zs.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Zs.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return t.isJwtDecodedCredential(e)?e:t.isJsonLdAsString(e)?JSON.parse(e):e}static toWrappedVerifiablePresentation(e,r){let n=t.getFirstProof(e),s=typeof e!="string"&&t.hasJWTProofType(e)?n?.jwt:e;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let i=t.decodeVerifiablePresentation(s),o=t.isJwtEncoded(s),a=t.isJwtDecodedPresentation(s),u=o?Zs.OriginalType.JWT_ENCODED:a?Zs.OriginalType.JWT_DECODED:Zs.OriginalType.JSONLD,c=a||o?"jwt_vp":"ldp_vp",l;if(o||a?l=t.jwtDecodedPresentationToUniformPresentation(i,!1,r):l=i,!l||!("verifiableCredential"in l)||!l.verifiableCredential||l.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");let f=t.toWrappedVerifiableCredentials(l.verifiableCredential,r),p=Object.assign(Object.assign({},l),{verifiableCredential:f});return{type:u,format:c,original:s,decoded:i,presentation:p,vcs:f}}static toWrappedVerifiableCredentials(e,r){return e.map(n=>t.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(e,r){var n;let s=t.getFirstProof(e),i=t.hasJWTProofType(e)&&s&&(n=s.jwt)!==null&&n!==void 0?n:e;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");let o=t.decodeVerifiableCredential(i),a=t.isJwtEncoded(i),u=t.isJwtDecodedCredential(i),c=a?Zs.OriginalType.JWT_ENCODED:u?Zs.OriginalType.JWT_DECODED:Zs.OriginalType.JSONLD,l=a||u?t.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||u?"jwt_vc":"ldp_vc",type:c,credential:l}}static isJwtEncoded(e){return lF.ObjectUtils.isString(e)&&e.startsWith("ey")}static isJsonLdAsString(e){return lF.ObjectUtils.isString(e)&&e.includes("@context")}static isJwtDecodedCredential(e){return e.vc!==void 0&&e.iss!==void 0}static isJwtDecodedPresentation(e){return e.vp!==void 0&&e.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(e,r=!0,n){return t.jwtDecodedPresentationToUniformPresentation((0,Ff.default)(e),r,n)}static jwtDecodedPresentationToUniformPresentation(e,r=!0,n){let{iss:s,aud:i,jti:o,vp:a}=e,u=cF(e,["iss","aud","jti","vp"]),c=Object.assign(Object.assign({},u),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");c.verifiableCredential=a.verifiableCredential.map(l=>t.toUniformCredential(l,n))}if(s){let l=c.holder;if(l&&l!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${l})`);c.holder=s}if(i){let l=c.verifier;if(l&&l!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${l})`);c.verifier=i}if(o){let l=c.id;if(l&&l!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${l})`);c.id=o}return c}static toUniformCredential(e,r){var n;let s=typeof e!="string"&&t.hasJWTProofType(e)?(n=t.getFirstProof(e))===null||n===void 0?void 0:n.jwt:e;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");let i=t.decodeVerifiableCredential(s),o=t.isJwtEncoded(s);return t.isJwtDecodedCredential(s)||o?t.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(e,r){var n;let s=t.getFirstProof(e),i=typeof e!="string"&&t.hasJWTProofType(e)?s?.jwt:e;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let o=t.decodeVerifiablePresentation(i),a=t.isJwtEncoded(i),u=t.isJwtDecodedPresentation(i),c=a||u?t.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r?.addContextIfMissing&&!c["@context"]&&(c["@context"]=["https://www.w3.org/2018/credentials/v1"]),c.verifiableCredential=(n=c.verifiableCredential)===null||n===void 0?void 0:n.map(l=>t.toUniformCredential(l,r)),c}static jwtEncodedCredentialToUniformCredential(e,r){return t.jwtDecodedCredentialToUniformCredential((0,Ff.default)(e),r)}static jwtDecodedCredentialToUniformCredential(e,r){let{exp:n,nbf:s,iss:i,vc:o,sub:a,jti:u}=e,c=cF(e,["exp","nbf","iss","vc","sub","jti"]),l=Object.assign(Object.assign({},c),o),f=r?.maxTimeSkewInMS!==void 0?r.maxTimeSkewInMS:999;if(n){let p=l.expirationDate,d=parseInt(n.toString()),h=d<9999999999?new Date(d*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(d).toISOString();if(p&&p!==h){let m=Math.abs(new Date(h).getTime()-new Date(p).getTime());if(!f||m>f)throw new Error(`Inconsistent expiration dates between JWT claim (${h}) and VC value (${p})`)}l.expirationDate=h}if(s){let p=l.issuanceDate,d=parseInt(s.toString()),h=d<9999999999?new Date(d*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(d).toISOString();if(p&&p!==h){let m=Math.abs(new Date(h).getTime()-new Date(p).getTime());if(!f||m>f)throw new Error(`Inconsistent issuance dates between JWT claim (${h}) and VC value (${p})`)}l.issuanceDate=h}if(i){let p=l.issuer;if(p){if(typeof p=="string"){if(p!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${p})`)}else if(p.id!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${p.id})`)}else l.issuer=i}if(a){let p=Array.isArray(l.credentialSubject)?l.credentialSubject:[l.credentialSubject];for(let d=0;d<p.length;d++){let h=p[d].id;if(h&&h!==a)throw new Error(`Inconsistent credential subject ids between JWT claim (${a}) and VC value (${h})`);Array.isArray(l.credentialSubject)?l.credentialSubject[d].id=a:l.credentialSubject.id=a}}if(u){let p=l.id;if(p&&p!==u)throw new Error(`Inconsistent credential ids between JWT claim (${u}) and VC value (${p})`);l.id=u}return l}static toExternalVerifiableCredential(e){let r;if(e.proof){if(!e.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!e.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!e.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!e.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},e.proof),{type:e.proof.type,created:e.proof.created,proofPurpose:e.proof.proofPurpose,verificationMethod:e.proof.verificationMethod})}return Object.assign(Object.assign({},e),{type:e.type?typeof e.type=="string"?[e.type]:e.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static storedPresentationToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static toCompactJWT(e){if(!e||t.detectDocumentType(e)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof e=="string")return e;let r;if("vp"in e?r=e.vp.proof:"vc"in e?r=e.vc.proof:r=Array.isArray(e.proof)?e.proof[0].jwt:e.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(e){if(typeof e=="string")return this.isJsonLdAsString(e)?1:0;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof,n=Array.isArray(r)?r[0]:r;return n?.jwt?0:n?.type==="EthereumEip712Signature2021"?2:1}static hasJWTProofType(e){var r;return typeof e=="string"?!1:!!(!((r=t.getFirstProof(e))===null||r===void 0)&&r.jwt)}static getFirstProof(e){if(!e||typeof e=="string")return;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof;return Array.isArray(r)?r[0]:r}};tu.CredentialMapper=$S});var dF=w(Bc=>{"use strict";var bee=Bc&&Bc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wee=Bc&&Bc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bee(e,t,r)};Object.defineProperty(Bc,"__esModule",{value:!0});wee(fF(),Bc)});var Cg=w(Qo=>{"use strict";var _ee=Qo&&Qo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NS=Qo&&Qo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_ee(e,t,r)};Object.defineProperty(Qo,"__esModule",{value:!0});NS(TS(),Qo);NS(FS(),Qo);NS(dF(),Qo)});var rs=w(jS=>{"use strict";Object.defineProperty(jS,"__esModule",{value:!0});var MS;(function(t){t.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",t.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",t.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",t.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",t.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",t.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",t.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",t.SUBJECT_IS_NOT_ISSUER="subject is not issuer",t.SUBJECT_IS_ISSUER="subject is issuer",t.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",t.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",t.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",t.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",t.UNKNOWN_EXCEPTION="unknown exception occurred: ",t.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(MS||(MS={}));jS.default=MS});var BF=w(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.version=_e.parse=_e.tokenize=_e.Syntax=void 0;var le,is,gF,ru,fe,KS,VS,se,Bt,R,Ke,rt,It,z,ce,xe,J;le={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};is={};is[le.BooleanLiteral]="Boolean";is[le.EOF]="<end>";is[le.Identifier]="Identifier";is[le.Keyword]="Keyword";is[le.NullLiteral]="Null";is[le.NumericLiteral]="Numeric";is[le.Punctuator]="Punctuator";is[le.StringLiteral]="String";is[le.RegularExpression]="RegularExpression";gF=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];_e.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};ru={Data:1,Get:2,Set:4};fe={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};KS={NonAsciiIdentifierStart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]"),NonAsciiIdentifierPart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]")};function mh(t,e){if(!t)throw new Error("ASSERT: "+e)}function ea(t){return t>=48&&t<=57}function vF(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function hh(t){return"01234567".indexOf(t)>=0}function Eee(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Ic(t){return t===10||t===13||t===8232||t===8233}function Rf(t){return t==64||t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&KS.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function Og(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&KS.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function See(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function gh(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function Ci(t){return t==="eval"||t==="arguments"}function Aee(t){if(Bt&&gh(t))return!0;switch(t.length){case 2:return t==="if"||t==="in"||t==="do";case 3:return t==="var"||t==="for"||t==="new"||t==="try"||t==="let";case 4:return t==="this"||t==="else"||t==="case"||t==="void"||t==="with"||t==="enum";case 5:return t==="while"||t==="break"||t==="catch"||t==="throw"||t==="const"||t==="yield"||t==="class"||t==="super";case 6:return t==="return"||t==="typeof"||t==="delete"||t==="switch"||t==="export"||t==="import";case 7:return t==="default"||t==="finally"||t==="extends";case 8:return t==="function"||t==="continue"||t==="debugger";case 10:return t==="instanceof";default:return!1}}function LS(t,e,r,n,s){var i,o;mh(typeof r=="number","Comment must have valid position"),!(xe.lastCommentStart>=r)&&(xe.lastCommentStart=r,i={type:t,value:e},J.range&&(i.range=[r,n]),J.loc&&(i.loc=s),J.comments.push(i),J.attachComment&&(J.leadingComments.push(i),J.trailingComments.push(i)))}function qS(t){var e,r,n,s;for(e=R-t,r={start:{line:Ke,column:R-rt-t}};R<It;)if(n=se.charCodeAt(R),++R,Ic(n)){J.comments&&(s=se.slice(e+t,R-1),r.end={line:Ke,column:R-rt-1},LS("Line",s,e,R-1,r)),n===13&&se.charCodeAt(R)===10&&++R,++Ke,rt=R;return}J.comments&&(s=se.slice(e+t,R),r.end={line:Ke,column:R-rt},LS("Line",s,e,R,r))}function xee(){var t,e,r,n;for(J.comments&&(t=R-2,e={start:{line:Ke,column:R-rt-2}});R<It;)if(r=se.charCodeAt(R),Ic(r))r===13&&se.charCodeAt(R+1)===10&&++R,++Ke,++R,rt=R,R>=It&&Ye({},fe.UnexpectedToken,"ILLEGAL");else if(r===42){if(se.charCodeAt(R+1)===47){++R,++R,J.comments&&(n=se.slice(t+2,R-2),e.end={line:Ke,column:R-rt},LS("Block",n,t,R,e));return}++R}else++R;Ye({},fe.UnexpectedToken,"ILLEGAL")}function nu(){var t,e;for(e=R===0;R<It;)if(t=se.charCodeAt(R),Eee(t))++R;else if(Ic(t))++R,t===13&&se.charCodeAt(R)===10&&++R,++Ke,rt=R,e=!0;else if(t===47)if(t=se.charCodeAt(R+1),t===47)++R,++R,qS(2),e=!0;else if(t===42)++R,++R,xee();else break;else if(e&&t===45)if(se.charCodeAt(R+1)===45&&se.charCodeAt(R+2)===62)R+=3,qS(3);else break;else if(t===60)if(se.slice(R+1,R+4)==="!--")++R,++R,++R,++R,qS(4);else break;else break}function Bg(t){var e,r,n,s=0;for(r=t==="u"?4:2,e=0;e<r;++e)if(R<It&&vF(se[R]))n=se[R++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function bF(){var t,e;for(t=se.charCodeAt(R++),e=String.fromCharCode(t),t===92&&(se.charCodeAt(R)!==117&&Ye({},fe.UnexpectedToken,"ILLEGAL"),++R,t=Bg("u"),(!t||t==="\\"||!Rf(t.charCodeAt(0)))&&Ye({},fe.UnexpectedToken,"ILLEGAL"),e=t);R<It&&(t=se.charCodeAt(R),!!Og(t));)++R,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),se.charCodeAt(R)!==117&&Ye({},fe.UnexpectedToken,"ILLEGAL"),++R,t=Bg("u"),(!t||t==="\\"||!Og(t.charCodeAt(0)))&&Ye({},fe.UnexpectedToken,"ILLEGAL"),e+=t);return e}function Dee(){var t,e;for(t=R++;R<It;){if(e=se.charCodeAt(R),e===92)return R=t,bF();if(Og(e))++R;else break}return se.slice(t,R)}function Cee(){var t,e,r;return t=R,e=se.charCodeAt(R)===92?bF():Dee(),e.length===1?r=le.Identifier:Aee(e)?r=le.Keyword:e==="null"?r=le.NullLiteral:e==="true"||e==="false"?r=le.BooleanLiteral:r=le.Identifier,{type:r,value:e,lineNumber:Ke,lineStart:rt,start:t,end:R}}function ta(){var t=R,e=se.charCodeAt(R),r,n=se[R],s,i,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++R,J.tokenize&&(e===40?J.openParenToken=J.tokens.length:e===123&&(J.openCurlyToken=J.tokens.length)),{type:le.Punctuator,value:String.fromCharCode(e),lineNumber:Ke,lineStart:rt,start:t,end:R};default:if(r=se.charCodeAt(R+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return R+=2,{type:le.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(r),lineNumber:Ke,lineStart:rt,start:t,end:R};case 33:case 61:return R+=2,se.charCodeAt(R)===61&&++R,{type:le.Punctuator,value:se.slice(t,R),lineNumber:Ke,lineStart:rt,start:t,end:R}}}if(o=se.substr(R,4),o===">>>=")return R+=4,{type:le.Punctuator,value:o,lineNumber:Ke,lineStart:rt,start:t,end:R};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return R+=3,{type:le.Punctuator,value:i,lineNumber:Ke,lineStart:rt,start:t,end:R};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return R+=2,{type:le.Punctuator,value:s,lineNumber:Ke,lineStart:rt,start:t,end:R};if("<>=!+-*%&|^/".indexOf(n)>=0)return++R,{type:le.Punctuator,value:n,lineNumber:Ke,lineStart:rt,start:t,end:R};Ye({},fe.UnexpectedToken,"ILLEGAL")}function Pee(t){for(var e="";R<It&&vF(se[R]);)e+=se[R++];return e.length===0&&Ye({},fe.UnexpectedToken,"ILLEGAL"),Rf(se.charCodeAt(R))&&Ye({},fe.UnexpectedToken,"ILLEGAL"),{type:le.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:Ke,lineStart:rt,start:t,end:R}}function Oee(t){for(var e="0"+se[R++];R<It&&hh(se[R]);)e+=se[R++];return(Rf(se.charCodeAt(R))||ea(se.charCodeAt(R)))&&Ye({},fe.UnexpectedToken,"ILLEGAL"),{type:le.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:Ke,lineStart:rt,start:t,end:R}}function pF(){var t,e,r;if(r=se[R],mh(ea(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=R,t="",r!=="."){if(t=se[R++],r=se[R],t==="0"){if(r==="x"||r==="X")return++R,Pee(e);if(hh(r))return Oee(e);r&&ea(r.charCodeAt(0))&&Ye({},fe.UnexpectedToken,"ILLEGAL")}for(;ea(se.charCodeAt(R));)t+=se[R++];r=se[R]}if(r==="."){for(t+=se[R++];ea(se.charCodeAt(R));)t+=se[R++];r=se[R]}if(r==="e"||r==="E")if(t+=se[R++],r=se[R],(r==="+"||r==="-")&&(t+=se[R++]),ea(se.charCodeAt(R)))for(;ea(se.charCodeAt(R));)t+=se[R++];else Ye({},fe.UnexpectedToken,"ILLEGAL");return Rf(se.charCodeAt(R))&&Ye({},fe.UnexpectedToken,"ILLEGAL"),{type:le.NumericLiteral,value:parseFloat(t),lineNumber:Ke,lineStart:rt,start:e,end:R}}function Bee(){var t="",e,r,n,s,i,o,a=!1,u,c;for(u=Ke,c=rt,e=se[R],mh(e==="'"||e==='"',"String literal must starts with a quote"),r=R,++R;R<It;)if(n=se[R++],n===e){e="";break}else if(n==="\\")if(n=se[R++],!n||!Ic(n.charCodeAt(0)))switch(n){case"u":case"x":o=R,i=Bg(n),i?t+=i:(R=o,t+=n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:hh(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),R<It&&hh(se[R])&&(a=!0,s=s*8+"01234567".indexOf(se[R++]),"0123".indexOf(n)>=0&&R<It&&hh(se[R])&&(s=s*8+"01234567".indexOf(se[R++]))),t+=String.fromCharCode(s)):t+=n;break}else++Ke,n==="\r"&&se[R]===`
`&&++R,rt=R;else{if(Ic(n.charCodeAt(0)))break;t+=n}return e!==""&&Ye({},fe.UnexpectedToken,"ILLEGAL"),{type:le.StringLiteral,value:t,octal:a,startLineNumber:u,startLineStart:c,lineNumber:Ke,lineStart:rt,start:r,end:R}}function Tee(t,e){var r;try{r=new RegExp(t,e)}catch{Ye({},fe.InvalidRegExp)}return r}function Iee(){var t,e,r,n,s;for(t=se[R],mh(t==="/","Regular expression literal must start with a slash"),e=se[R++],r=!1,n=!1;R<It;)if(t=se[R++],e+=t,t==="\\")t=se[R++],Ic(t.charCodeAt(0))&&Ye({},fe.UnterminatedRegExp),e+=t;else if(Ic(t.charCodeAt(0)))Ye({},fe.UnterminatedRegExp);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||Ye({},fe.UnterminatedRegExp),s=e.substr(1,e.length-2),{value:s,literal:e}}function Fee(){var t,e,r,n;for(e="",r="";R<It&&(t=se[R],!!Og(t.charCodeAt(0)));)if(++R,t==="\\"&&R<It)if(t=se[R],t==="u"){if(++R,n=R,t=Bg("u"),t)for(r+=t,e+="\\u";n<R;++n)e+=se[n];else R=n,r+="u",e+="\\u";Tt({},fe.UnexpectedToken,"ILLEGAL")}else e+="\\",Tt({},fe.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}function wF(){var t,e,r,n,s;return ce=null,nu(),t=R,e=Iee(),r=Fee(),s=Tee(e.value,r.value),J.tokenize?{type:le.RegularExpression,value:s,lineNumber:Ke,lineStart:rt,start:t,end:R}:{literal:e.literal+r.literal,value:s,start:t,end:R}}function Tc(){var t,e,r,n;return nu(),t=R,e={start:{line:Ke,column:R-rt}},r=wF(),e.end={line:Ke,column:R-rt},J.tokenize||(J.tokens.length>0&&(n=J.tokens[J.tokens.length-1],n.range[0]===t&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&J.tokens.pop()),J.tokens.push({type:"RegularExpression",value:r.literal,range:[t,R],loc:e})),r}function kee(t){return t.type===le.Identifier||t.type===le.Keyword||t.type===le.BooleanLiteral||t.type===le.NullLiteral}function Ree(){var t,e;if(t=J.tokens[J.tokens.length-1],!t)return Tc();if(t.type==="Punctuator"){if(t.value==="]")return ta();if(t.value===")")return e=J.tokens[J.openParenToken-1],e&&e.type==="Keyword"&&(e.value==="if"||e.value==="while"||e.value==="for"||e.value==="with")?Tc():ta();if(t.value==="}"){if(J.tokens[J.openCurlyToken-3]&&J.tokens[J.openCurlyToken-3].type==="Keyword"){if(e=J.tokens[J.openCurlyToken-4],!e)return ta()}else if(J.tokens[J.openCurlyToken-4]&&J.tokens[J.openCurlyToken-4].type==="Keyword"){if(e=J.tokens[J.openCurlyToken-5],!e)return Tc()}else return ta();return gF.indexOf(e.value)>=0?ta():Tc()}return Tc()}return t.type==="Keyword"?Tc():ta()}function HS(){var t;return nu(),R>=It?{type:le.EOF,lineNumber:Ke,lineStart:rt,start:R,end:R}:(t=se.charCodeAt(R),Rf(t)?Cee():t===40||t===41||t===59?ta():t===39||t===34?Bee():t===46?ea(se.charCodeAt(R+1))?pF():ta():ea(t)?pF():J.tokenize&&t===47?Ree():ta())}function _F(){var t,e,r,n;return nu(),t={start:{line:Ke,column:R-rt}},e=HS(),t.end={line:Ke,column:R-rt},e.type!==le.EOF&&(n=se.slice(e.start,e.end),J.tokens.push({type:is[e.type],value:n,range:[e.start,e.end],loc:t})),e}function Xe(){var t;return t=ce,R=t.end,Ke=t.lineNumber,rt=t.lineStart,ce=typeof J.tokens<"u"?_F():HS(),R=t.end,Ke=t.lineNumber,rt=t.lineStart,t}function zS(){var t,e,r;t=R,e=Ke,r=rt,ce=typeof J.tokens<"u"?_F():HS(),R=t,Ke=e,rt=r}function hF(t,e){this.line=t,this.column=e}function $ee(t,e,r,n){this.start=new hF(t,e),this.end=new hF(r,n)}VS={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===_e.Syntax.Program&&t.body.length>0)){for(J.trailingComments.length>0?J.trailingComments[0].range[0]>=t.range[1]?(r=J.trailingComments,J.trailingComments=[]):J.trailingComments.length=0:J.bottomRightStack.length>0&&J.bottomRightStack[J.bottomRightStack.length-1].trailingComments&&J.bottomRightStack[J.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=J.bottomRightStack[J.bottomRightStack.length-1].trailingComments,delete J.bottomRightStack[J.bottomRightStack.length-1].trailingComments);J.bottomRightStack.length>0&&J.bottomRightStack[J.bottomRightStack.length-1].range[0]>=t.range[0];)e=J.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):J.leadingComments.length>0&&J.leadingComments[J.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=J.leadingComments,J.leadingComments=[]),r&&(t.trailingComments=r),J.bottomRightStack.push(t)}},markEnd:function(t,e){return J.range&&(t.range=[e.start,R]),J.loc&&(t.loc=new $ee(e.startLineNumber===void 0?e.lineNumber:e.startLineNumber,e.start-(e.startLineStart===void 0?e.lineStart:e.startLineStart),Ke,R-rt),this.postProcess(t)),J.attachComment&&this.processComment(t),t},postProcess:function(t){return J.source&&(t.loc.source=J.source),t},createArrayExpression:function(t){return{type:_e.Syntax.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:_e.Syntax.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n=t==="||"||t==="&&"?_e.Syntax.LogicalExpression:_e.Syntax.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:_e.Syntax.BlockStatement,body:t}},createBreakStatement:function(t){return{type:_e.Syntax.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:_e.Syntax.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:_e.Syntax.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:_e.Syntax.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:_e.Syntax.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:_e.Syntax.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:_e.Syntax.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:_e.Syntax.EmptyStatement}},createExpressionStatement:function(t){return{type:_e.Syntax.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:_e.Syntax.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:_e.Syntax.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:_e.Syntax.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:_e.Syntax.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:_e.Syntax.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:_e.Syntax.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:_e.Syntax.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:_e.Syntax.Literal,value:t.value,raw:se.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:_e.Syntax.MemberExpression,computed:t==="[",object:e,property:r}},createNewExpression:function(t,e){return{type:_e.Syntax.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:_e.Syntax.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:_e.Syntax.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:_e.Syntax.Program,body:t}},createProperty:function(t,e,r){return{type:_e.Syntax.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:_e.Syntax.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:_e.Syntax.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:_e.Syntax.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:_e.Syntax.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:_e.Syntax.ThisExpression}},createThrowStatement:function(t){return{type:_e.Syntax.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:_e.Syntax.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return t==="++"||t==="--"?{type:_e.Syntax.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:_e.Syntax.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:_e.Syntax.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:_e.Syntax.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:_e.Syntax.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:_e.Syntax.WithStatement,object:t,body:e}}};function vh(){var t,e,r,n;return t=R,e=Ke,r=rt,nu(),n=Ke!==e,R=t,Ke=e,rt=r,n}function Ye(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=e.replace(/%(\d)/g,function(o,a){return mh(a<r.length,"Message reference must be in range"),r[a]});throw typeof t.lineNumber=="number"?(s=new Error("Line "+t.lineNumber+": "+i),s.index=t.start,s.lineNumber=t.lineNumber,s.column=t.start-rt+1):(s=new Error("Line "+Ke+": "+i),s.index=R,s.lineNumber=Ke,s.column=R-rt+1),s.description=i,s}function Tt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{Ye.apply(null,t)}catch(r){if(J.errors)J.errors.push(r);else throw r}}function Xs(t){if(t.type===le.EOF&&Ye(t,fe.UnexpectedEOS),t.type===le.NumericLiteral&&Ye(t,fe.UnexpectedNumber),t.type===le.StringLiteral&&Ye(t,fe.UnexpectedString),t.type===le.Identifier&&Ye(t,fe.UnexpectedIdentifier),t.type===le.Keyword){if(See(t.value))Ye(t,fe.UnexpectedReserved);else if(Bt&&gh(t.value)){Tt(t,fe.StrictReservedWord);return}Ye(t,fe.UnexpectedToken,t.value)}Ye(t,fe.UnexpectedToken,t.value)}function Re(t){var e=Xe();(e.type!==le.Punctuator||e.value!==t)&&Xs(e)}function Er(t){var e=Xe();(e.type!==le.Keyword||e.value!==t)&&Xs(e)}function Te(t){return ce.type===le.Punctuator&&ce.value===t}function tn(t){return ce.type===le.Keyword&&ce.value===t}function Nee(){var t;return ce.type!==le.Punctuator?!1:(t=ce.value,t==="="||t==="*="||t==="/="||t==="%="||t==="+="||t==="-="||t==="<<="||t===">>="||t===">>>="||t==="&="||t==="^="||t==="|=")}function Ys(){var t;if(se.charCodeAt(R)===59||Te(";")){Xe();return}t=Ke,nu(),Ke===t&&ce.type!==le.EOF&&!Te("}")&&Xs(ce)}function Ig(t){return t.type===_e.Syntax.Identifier||t.type===_e.Syntax.MemberExpression}function Mee(){var t=[],e;for(e=ce,Re("[");!Te("]");)Te(",")?(Xe(),t.push(null)):(t.push(ns()),Te("]")||Re(","));return Xe(),z.markEnd(z.createArrayExpression(t),e)}function US(t,e){var r,n,s;return r=Bt,s=ce,n=JS(),e&&Bt&&Ci(t[0].name)&&Tt(e,fe.StrictParamName),Bt=r,z.markEnd(z.createFunctionExpression(null,t,[],n),s)}function Pg(){var t,e;return e=ce,t=Xe(),t.type===le.StringLiteral||t.type===le.NumericLiteral?(Bt&&t.octal&&Tt(t,fe.StrictOctalLiteral),z.markEnd(z.createLiteral(t),e)):z.markEnd(z.createIdentifier(t.value),e)}function jee(){var t,e,r,n,s,i;if(t=ce,i=ce,t.type===le.Identifier)return r=Pg(),t.value==="get"&&!Te(":")?(e=Pg(),Re("("),Re(")"),n=US([]),z.markEnd(z.createProperty("get",e,n),i)):t.value==="set"&&!Te(":")?(e=Pg(),Re("("),t=ce,t.type!==le.Identifier?(Re(")"),Tt(t,fe.UnexpectedToken,t.value),n=US([])):(s=[iu()],Re(")"),n=US(s,t)),z.markEnd(z.createProperty("set",e,n),i)):(Re(":"),n=ns(),z.markEnd(z.createProperty("init",r,n),i));if(t.type===le.EOF||t.type===le.Punctuator)Xs(t);else return e=Pg(),Re(":"),n=ns(),z.markEnd(z.createProperty("init",e,n),i)}function qee(){var t=[],e,r,n,s,i={},o=String,a;for(a=ce,Re("{");!Te("}");)e=jee(),e.key.type===_e.Syntax.Identifier?r=e.key.name:r=o(e.key.value),s=e.kind==="init"?ru.Data:e.kind==="get"?ru.Get:ru.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===ru.Data?Bt&&s===ru.Data?Tt({},fe.StrictDuplicateProperty):s!==ru.Data&&Tt({},fe.AccessorDataProperty):s===ru.Data?Tt({},fe.AccessorDataProperty):i[n]&s&&Tt({},fe.AccessorGetSet),i[n]|=s):i[n]=s,t.push(e),Te("}")||Re(",");return Re("}"),z.markEnd(z.createObjectExpression(t),a)}function Uee(){var t;return Re("("),t=Ur(),Re(")"),t}function EF(){var t,e,r,n;if(Te("("))return Uee();if(Te("["))return Mee();if(Te("{"))return qee();if(t=ce.type,n=ce,t===le.Identifier)r=z.createIdentifier(Xe().value);else if(t===le.StringLiteral||t===le.NumericLiteral)Bt&&ce.octal&&Tt(ce,fe.StrictOctalLiteral),r=z.createLiteral(Xe());else if(t===le.Keyword){if(tn("function"))return hte();tn("this")?(Xe(),r=z.createThisExpression()):Xs(Xe())}else t===le.BooleanLiteral?(e=Xe(),e.value=e.value==="true",r=z.createLiteral(e)):t===le.NullLiteral?(e=Xe(),e.value=null,r=z.createLiteral(e)):Te("/")||Te("/=")?(typeof J.tokens<"u"?r=z.createLiteral(Tc()):r=z.createLiteral(wF()),zS()):Xs(Xe());return z.markEnd(r,n)}function SF(){var t=[];if(Re("("),!Te(")"))for(;R<It&&(t.push(ns()),!Te(")"));)Re(",");return Re(")"),t}function Lee(){var t,e;return e=ce,t=Xe(),kee(t)||Xs(t),z.markEnd(z.createIdentifier(t.value),e)}function AF(){return Re("."),Lee()}function xF(){var t;return Re("["),t=Ur(),Re("]"),t}function DF(){var t,e,r;return r=ce,Er("new"),t=Vee(),e=Te("(")?SF():[],z.markEnd(z.createNewExpression(t,e),r)}function Kee(){var t,e,r,n,s;for(s=ce,t=xe.allowIn,xe.allowIn=!0,e=tn("new")?DF():EF(),xe.allowIn=t;;){if(Te("."))n=AF(),e=z.createMemberExpression(".",e,n);else if(Te("("))r=SF(),e=z.createCallExpression(e,r);else if(Te("["))n=xF(),e=z.createMemberExpression("[",e,n);else break;z.markEnd(e,s)}return e}function Vee(){var t,e,r,n;for(n=ce,t=xe.allowIn,e=tn("new")?DF():EF(),xe.allowIn=t;Te(".")||Te("[");)Te("[")?(r=xF(),e=z.createMemberExpression("[",e,r)):(r=AF(),e=z.createMemberExpression(".",e,r)),z.markEnd(e,n);return e}function yF(){var t,e,r=ce;return t=Kee(),ce.type===le.Punctuator&&(Te("++")||Te("--"))&&!vh()&&(Bt&&t.type===_e.Syntax.Identifier&&Ci(t.name)&&Tt({},fe.StrictLHSPostfix),Ig(t)||Tt({},fe.InvalidLHSInAssignment),e=Xe(),t=z.markEnd(z.createPostfixExpression(e.value,t),r)),t}function kf(){var t,e,r;return ce.type!==le.Punctuator&&ce.type!==le.Keyword?e=yF():Te("++")||Te("--")?(r=ce,t=Xe(),e=kf(),Bt&&e.type===_e.Syntax.Identifier&&Ci(e.name)&&Tt({},fe.StrictLHSPrefix),Ig(e)||Tt({},fe.InvalidLHSInAssignment),e=z.createUnaryExpression(t.value,e),e=z.markEnd(e,r)):Te("+")||Te("-")||Te("~")||Te("!")?(r=ce,t=Xe(),e=kf(),e=z.createUnaryExpression(t.value,e),e=z.markEnd(e,r)):tn("delete")||tn("void")||tn("typeof")?(r=ce,t=Xe(),e=kf(),e=z.createUnaryExpression(t.value,e),e=z.markEnd(e,r),Bt&&e.operator==="delete"&&e.argument.type===_e.Syntax.Identifier&&Tt({},fe.StrictDelete)):e=yF(),e}function mF(t,e){var r=0;if(t.type!==le.Punctuator&&t.type!==le.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=e?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function Hee(){var t,e,r,n,s,i,o,a,u,c;if(t=ce,u=kf(),n=ce,s=mF(n,xe.allowIn),s===0)return u;for(n.prec=s,Xe(),e=[t,ce],o=kf(),i=[u,n,o];(s=mF(ce,xe.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,u=i.pop(),r=z.createBinaryExpression(a,u,o),e.pop(),t=e[e.length-1],z.markEnd(r,t),i.push(r);n=Xe(),n.prec=s,i.push(n),e.push(ce),r=kf(),i.push(r)}for(c=i.length-1,r=i[c],e.pop();c>1;)r=z.createBinaryExpression(i[c-1].value,i[c-2],r),c-=2,t=e.pop(),z.markEnd(r,t);return r}function zee(){var t,e,r,n,s;return s=ce,t=Hee(),Te("?")&&(Xe(),e=xe.allowIn,xe.allowIn=!0,r=ns(),xe.allowIn=e,Re(":"),n=ns(),t=z.createConditionalExpression(t,r,n),z.markEnd(t,s)),t}function ns(){var t,e,r,n,s;return t=ce,s=ce,n=e=zee(),Nee()&&(Ig(e)||Tt({},fe.InvalidLHSInAssignment),Bt&&e.type===_e.Syntax.Identifier&&Ci(e.name)&&Tt(t,fe.StrictLHSAssignment),t=Xe(),r=ns(),n=z.markEnd(z.createAssignmentExpression(t.value,e,r),s)),n}function Ur(){var t,e=ce;if(t=ns(),Te(",")){for(t=z.createSequenceExpression([t]);R<It&&Te(",");)Xe(),t.expressions.push(ns());z.markEnd(t,e)}return t}function Wee(){for(var t=[],e;R<It&&!(Te("}")||(e=yh(),typeof e>"u"));)t.push(e);return t}function Tg(){var t,e;return e=ce,Re("{"),t=Wee(),Re("}"),z.markEnd(z.createBlockStatement(t),e)}function iu(){var t,e;return e=ce,t=Xe(),t.type!==le.Identifier&&Xs(t),z.markEnd(z.createIdentifier(t.value),e)}function Jee(t){var e=null,r,n;return n=ce,r=iu(),Bt&&Ci(r.name)&&Tt({},fe.StrictVarName),t==="const"?(Re("="),e=ns()):Te("=")&&(Xe(),e=ns()),z.markEnd(z.createVariableDeclarator(r,e),n)}function WS(t){var e=[];do{if(e.push(Jee(t)),!Te(","))break;Xe()}while(R<It);return e}function Gee(){var t;return Er("var"),t=WS(),Ys(),z.createVariableDeclaration(t,"var")}function Zee(t){var e,r;return r=ce,Er(t),e=WS(t),Ys(),z.markEnd(z.createVariableDeclaration(e,t),r)}function Xee(){return Re(";"),z.createEmptyStatement()}function Yee(){var t=Ur();return Ys(),z.createExpressionStatement(t)}function Qee(){var t,e,r;return Er("if"),Re("("),t=Ur(),Re(")"),e=Qs(),tn("else")?(Xe(),r=Qs()):r=null,z.createIfStatement(t,e,r)}function ete(){var t,e,r;return Er("do"),r=xe.inIteration,xe.inIteration=!0,t=Qs(),xe.inIteration=r,Er("while"),Re("("),e=Ur(),Re(")"),Te(";")&&Xe(),z.createDoWhileStatement(t,e)}function tte(){var t,e,r;return Er("while"),Re("("),t=Ur(),Re(")"),r=xe.inIteration,xe.inIteration=!0,e=Qs(),xe.inIteration=r,z.createWhileStatement(t,e)}function rte(){var t,e,r;return r=ce,t=Xe(),e=WS(),z.markEnd(z.createVariableDeclaration(e,t.value),r)}function nte(){var t,e,r,n,s,i,o;return t=e=r=null,Er("for"),Re("("),Te(";")?Xe():(tn("var")||tn("let")?(xe.allowIn=!1,t=rte(),xe.allowIn=!0,t.declarations.length===1&&tn("in")&&(Xe(),n=t,s=Ur(),t=null)):(xe.allowIn=!1,t=Ur(),xe.allowIn=!0,tn("in")&&(Ig(t)||Tt({},fe.InvalidLHSInForIn),Xe(),n=t,s=Ur(),t=null)),typeof n>"u"&&Re(";")),typeof n>"u"&&(Te(";")||(e=Ur()),Re(";"),Te(")")||(r=Ur())),Re(")"),o=xe.inIteration,xe.inIteration=!0,i=Qs(),xe.inIteration=o,typeof n>"u"?z.createForStatement(t,e,r,i):z.createForInStatement(n,s,i)}function ite(){var t=null,e;return Er("continue"),se.charCodeAt(R)===59?(Xe(),xe.inIteration||Ye({},fe.IllegalContinue),z.createContinueStatement(null)):vh()?(xe.inIteration||Ye({},fe.IllegalContinue),z.createContinueStatement(null)):(ce.type===le.Identifier&&(t=iu(),e="$"+t.name,Object.prototype.hasOwnProperty.call(xe.labelSet,e)||Ye({},fe.UnknownLabel,t.name)),Ys(),t===null&&!xe.inIteration&&Ye({},fe.IllegalContinue),z.createContinueStatement(t))}function ste(){var t=null,e;return Er("break"),se.charCodeAt(R)===59?(Xe(),xe.inIteration||xe.inSwitch||Ye({},fe.IllegalBreak),z.createBreakStatement(null)):vh()?(xe.inIteration||xe.inSwitch||Ye({},fe.IllegalBreak),z.createBreakStatement(null)):(ce.type===le.Identifier&&(t=iu(),e="$"+t.name,Object.prototype.hasOwnProperty.call(xe.labelSet,e)||Ye({},fe.UnknownLabel,t.name)),Ys(),t===null&&!(xe.inIteration||xe.inSwitch)&&Ye({},fe.IllegalBreak),z.createBreakStatement(t))}function ote(){var t=null;return Er("return"),xe.inFunctionBody||Tt({},fe.IllegalReturn),se.charCodeAt(R)===32&&Rf(se.charCodeAt(R+1))?(t=Ur(),Ys(),z.createReturnStatement(t)):vh()?z.createReturnStatement(null):(Te(";")||!Te("}")&&ce.type!==le.EOF&&(t=Ur()),Ys(),z.createReturnStatement(t))}function ate(){var t,e;return Bt&&(nu(),Tt({},fe.StrictModeWith)),Er("with"),Re("("),t=Ur(),Re(")"),e=Qs(),z.createWithStatement(t,e)}function ute(){var t,e=[],r,n;for(n=ce,tn("default")?(Xe(),t=null):(Er("case"),t=Ur()),Re(":");R<It&&!(Te("}")||tn("default")||tn("case"));)r=Qs(),e.push(r);return z.markEnd(z.createSwitchCase(t,e),n)}function cte(){var t,e,r,n,s;if(Er("switch"),Re("("),t=Ur(),Re(")"),Re("{"),e=[],Te("}"))return Xe(),z.createSwitchStatement(t,e);for(n=xe.inSwitch,xe.inSwitch=!0,s=!1;R<It&&!Te("}");)r=ute(),r.test===null&&(s&&Ye({},fe.MultipleDefaultsInSwitch),s=!0),e.push(r);return xe.inSwitch=n,Re("}"),z.createSwitchStatement(t,e)}function lte(){var t;return Er("throw"),vh()&&Ye({},fe.NewlineAfterThrow),t=Ur(),Ys(),z.createThrowStatement(t)}function fte(){var t,e,r;return r=ce,Er("catch"),Re("("),Te(")")&&Xs(ce),t=iu(),Bt&&Ci(t.name)&&Tt({},fe.StrictCatchVariable),Re(")"),e=Tg(),z.markEnd(z.createCatchClause(t,e),r)}function dte(){var t,e=[],r=null;return Er("try"),t=Tg(),tn("catch")&&e.push(fte()),tn("finally")&&(Xe(),r=Tg()),e.length===0&&!r&&Ye({},fe.NoCatchOrFinally),z.createTryStatement(t,[],e,r)}function pte(){return Er("debugger"),Ys(),z.createDebuggerStatement()}function Qs(){var t=ce.type,e,r,n,s;if(t===le.EOF&&Xs(ce),t===le.Punctuator&&ce.value==="{")return Tg();if(s=ce,t===le.Punctuator)switch(ce.value){case";":return z.markEnd(Xee(),s);case"(":return z.markEnd(Yee(),s);default:break}if(t===le.Keyword)switch(ce.value){case"break":return z.markEnd(ste(),s);case"continue":return z.markEnd(ite(),s);case"debugger":return z.markEnd(pte(),s);case"do":return z.markEnd(ete(),s);case"for":return z.markEnd(nte(),s);case"function":return z.markEnd(PF(),s);case"if":return z.markEnd(Qee(),s);case"return":return z.markEnd(ote(),s);case"switch":return z.markEnd(cte(),s);case"throw":return z.markEnd(lte(),s);case"try":return z.markEnd(dte(),s);case"var":return z.markEnd(Gee(),s);case"while":return z.markEnd(tte(),s);case"with":return z.markEnd(ate(),s);default:break}return e=Ur(),e.type===_e.Syntax.Identifier&&Te(":")?(Xe(),n="$"+e.name,Object.prototype.hasOwnProperty.call(xe.labelSet,n)&&Ye({},fe.Redeclaration,"Label",e.name),xe.labelSet[n]=!0,r=Qs(),delete xe.labelSet[n],z.markEnd(z.createLabeledStatement(e,r),s)):(Ys(),z.markEnd(z.createExpressionStatement(e),s))}function JS(){var t,e=[],r,n,s,i,o,a,u,c;for(c=ce,Re("{");R<It&&!(ce.type!==le.StringLiteral||(r=ce,t=yh(),e.push(t),t.expression.type!==_e.Syntax.Literal));)n=se.slice(r.start+1,r.end-1),n==="use strict"?(Bt=!0,s&&Tt(s,fe.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=xe.labelSet,o=xe.inIteration,a=xe.inSwitch,u=xe.inFunctionBody,xe.labelSet={},xe.inIteration=!1,xe.inSwitch=!1,xe.inFunctionBody=!0;R<It&&!(Te("}")||(t=yh(),typeof t>"u"));)e.push(t);return Re("}"),xe.labelSet=i,xe.inIteration=o,xe.inSwitch=a,xe.inFunctionBody=u,z.markEnd(z.createBlockStatement(e),c)}function CF(t){var e,r=[],n,s,i,o,a;if(Re("("),!Te(")"))for(i={};R<It&&(n=ce,e=iu(),o="$"+n.value,Bt?(Ci(n.value)&&(s=n,a=fe.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=fe.StrictParamDupe)):t||(Ci(n.value)?(t=n,a=fe.StrictParamName):gh(n.value)?(t=n,a=fe.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=n,a=fe.StrictParamDupe)),r.push(e),i[o]=!0,!Te(")"));)Re(",");return Re(")"),{params:r,stricted:s,firstRestricted:t,message:a}}function PF(){var t,e=[],r,n,s,i,o,a,u,c;return c=ce,Er("function"),n=ce,t=iu(),Bt?Ci(n.value)&&Tt(n,fe.StrictFunctionName):Ci(n.value)?(o=n,a=fe.StrictFunctionName):gh(n.value)&&(o=n,a=fe.StrictReservedWord),i=CF(o),e=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),u=Bt,r=JS(),Bt&&o&&Ye(o,a),Bt&&s&&Tt(s,a),Bt=u,z.markEnd(z.createFunctionDeclaration(t,e,[],r),c)}function hte(){var t,e=null,r,n,s,i,o=[],a,u,c;return c=ce,Er("function"),Te("(")||(t=ce,e=iu(),Bt?Ci(t.value)&&Tt(t,fe.StrictFunctionName):Ci(t.value)?(n=t,s=fe.StrictFunctionName):gh(t.value)&&(n=t,s=fe.StrictReservedWord)),i=CF(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),u=Bt,a=JS(),Bt&&n&&Ye(n,s),Bt&&r&&Tt(r,s),Bt=u,z.markEnd(z.createFunctionExpression(e,o,[],a),c)}function yh(){if(ce.type===le.Keyword)switch(ce.value){case"const":case"let":return Zee(ce.value);case"function":return PF();default:return Qs()}if(ce.type!==le.EOF)return Qs()}function yte(){for(var t,e=[],r,n,s;R<It&&(r=ce,!(r.type!==le.StringLiteral||(t=yh(),e.push(t),t.expression.type!==_e.Syntax.Literal)));)n=se.slice(r.start+1,r.end-1),n==="use strict"?(Bt=!0,s&&Tt(s,fe.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;R<It&&(t=yh(),!(typeof t>"u"));)e.push(t);return e}function mte(){var t,e;return nu(),zS(),e=ce,Bt=!1,t=yte(),z.markEnd(z.createProgram(t),e)}function OF(){var t,e,r,n=[];for(t=0;t<J.tokens.length;++t)e=J.tokens[t],r={type:e.type,value:e.value},J.range&&(r.range=e.range),J.loc&&(r.loc=e.loc),n.push(r);J.tokens=n}function gte(t,e){var r,n,s;r=String,typeof t!="string"&&!(t instanceof String)&&(t=r(t)),z=VS,se=t,R=0,Ke=se.length>0?1:0,rt=0,It=se.length,ce=null,xe={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},J={},e=e||{},e.tokens=!0,J.tokens=[],J.tokenize=!0,J.openParenToken=-1,J.openCurlyToken=-1,J.range=typeof e.range=="boolean"&&e.range,J.loc=typeof e.loc=="boolean"&&e.loc,typeof e.comment=="boolean"&&e.comment&&(J.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(J.errors=[]);try{if(zS(),ce.type===le.EOF)return J.tokens;for(n=Xe();ce.type!==le.EOF;)try{n=Xe()}catch(i){if(n=ce,J.errors){J.errors.push(i);break}else throw i}OF(),s=J.tokens,typeof J.comments<"u"&&(s.comments=J.comments),typeof J.errors<"u"&&(s.errors=J.errors)}catch(i){throw i}finally{J={}}return s}_e.tokenize=gte;function vte(t,e){var r,n;n=String,typeof t!="string"&&!(t instanceof String)&&(t=n(t)),z=VS,se=t,R=0,Ke=se.length>0?1:0,rt=0,It=se.length,ce=null,xe={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},J={},typeof e<"u"&&(J.range=typeof e.range=="boolean"&&e.range,J.loc=typeof e.loc=="boolean"&&e.loc,J.attachComment=typeof e.attachComment=="boolean"&&e.attachComment,J.loc&&e.source!==null&&e.source!==void 0&&(J.source=n(e.source)),typeof e.tokens=="boolean"&&e.tokens&&(J.tokens=[]),typeof e.comment=="boolean"&&e.comment&&(J.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(J.errors=[]),J.attachComment&&(J.range=!0,J.comments=[],J.bottomRightStack=[],J.trailingComments=[],J.leadingComments=[]));try{r=mte(),typeof J.comments<"u"&&(r.comments=J.comments),typeof J.tokens<"u"&&(OF(),r.tokens=J.tokens),typeof J.errors<"u"&&(r.errors=J.errors)}catch(s){throw s}finally{J={}}return r}_e.parse=vte;_e.version="1.2.2"});var TF=w(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.slice=void 0;function bte(t,e,r,n){function s(u){return String(u).match(/^[0-9]+$/)?parseInt(u):Number.isFinite(u)?parseInt(u,10):0}if(typeof e=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=t.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,e=e<0?i+e:e,r=r<0?i+r:r,e=s(e===0?0:e||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),e=n>0?Math.max(0,e):Math.min(i,e),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=e)return[];if(n<0&&e<=r)return[];for(var o=[],a=e;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(t[a]);return o}Fg.slice=bte});var IF=w((rPe,wte)=>{wte.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.3.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"}}});var kF=w(FF=>{(function t(e){"use strict";var r,n,s,i,o,a;function u(v){var A={},x,B;for(x in v)v.hasOwnProperty(x)&&(B=v[x],typeof B=="object"&&B!==null?A[x]=u(B):A[x]=B);return A}function c(v,A){var x,B,C,T;for(B=v.length,C=0;B;)x=B>>>1,T=C+x,A(v[T])?B=x:(C=T+1,B-=x+1);return C}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={},o={},a={},n={Break:i,Skip:o,Remove:a};function l(v,A){this.parent=v,this.key=A}l.prototype.replace=function(A){this.parent[this.key]=A},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function f(v,A,x,B){this.node=v,this.path=A,this.wrap=x,this.ref=B}function p(){}p.prototype.path=function(){var A,x,B,C,T,k;function I($,M){if(Array.isArray(M))for(B=0,C=M.length;B<C;++B)$.push(M[B]);else $.push(M)}if(!this.__current.path)return null;for(T=[],A=2,x=this.__leavelist.length;A<x;++A)k=this.__leavelist[A],I(T,k.path);return I(T,this.__current.path),T},p.prototype.type=function(){var v=this.current();return v.type||this.__current.wrap},p.prototype.parents=function(){var A,x,B;for(B=[],A=1,x=this.__leavelist.length;A<x;++A)B.push(this.__leavelist[A].node);return B},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(A,x){var B,C;return C=void 0,B=this.__current,this.__current=x,this.__state=null,A&&(C=A.call(this,x.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=B,C},p.prototype.notify=function(A){this.__state=A},p.prototype.skip=function(){this.notify(o)},p.prototype.break=function(){this.notify(i)},p.prototype.remove=function(){this.notify(a)},p.prototype.__initialize=function(v,A){this.visitor=A,this.root=v,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,A.fallback==="iteration"?this.__fallback=Object.keys:typeof A.fallback=="function"&&(this.__fallback=A.fallback),this.__keys=s,A.keys&&(this.__keys=Object.assign(Object.create(this.__keys),A.keys))};function d(v){return v==null?!1:typeof v=="object"&&typeof v.type=="string"}function h(v,A){return(v===r.ObjectExpression||v===r.ObjectPattern)&&A==="properties"}p.prototype.traverse=function(A,x){var B,C,T,k,I,$,M,Y,ee,U,G,te;for(this.__initialize(A,x),te={},B=this.__worklist,C=this.__leavelist,B.push(new f(A,null,null,null)),C.push(new f(null,null,null,null));B.length;){if(T=B.pop(),T===te){if(T=C.pop(),$=this.__execute(x.leave,T),this.__state===i||$===i)return;continue}if(T.node){if($=this.__execute(x.enter,T),this.__state===i||$===i)return;if(B.push(te),C.push(T),this.__state===o||$===o)continue;if(k=T.node,I=k.type||T.wrap,U=this.__keys[I],!U)if(this.__fallback)U=this.__fallback(k);else throw new Error("Unknown node type "+I+".");for(Y=U.length;(Y-=1)>=0;)if(M=U[Y],G=k[M],!!G)if(Array.isArray(G)){for(ee=G.length;(ee-=1)>=0;)if(G[ee]){if(h(I,U[Y]))T=new f(G[ee],[M,ee],"Property",null);else if(d(G[ee]))T=new f(G[ee],[M,ee],null,null);else continue;B.push(T)}}else d(G)&&B.push(new f(G,M,null,null))}}},p.prototype.replace=function(A,x){var B,C,T,k,I,$,M,Y,ee,U,G,te,W;function j(q){var Q,oe,pe,ae;if(q.ref.remove()){for(oe=q.ref.key,ae=q.ref.parent,Q=B.length;Q--;)if(pe=B[Q],pe.ref&&pe.ref.parent===ae){if(pe.ref.key<oe)break;--pe.ref.key}}}for(this.__initialize(A,x),G={},B=this.__worklist,C=this.__leavelist,te={root:A},$=new f(A,null,null,new l(te,"root")),B.push($),C.push($);B.length;){if($=B.pop(),$===G){if($=C.pop(),I=this.__execute(x.leave,$),I!==void 0&&I!==i&&I!==o&&I!==a&&$.ref.replace(I),(this.__state===a||I===a)&&j($),this.__state===i||I===i)return te.root;continue}if(I=this.__execute(x.enter,$),I!==void 0&&I!==i&&I!==o&&I!==a&&($.ref.replace(I),$.node=I),(this.__state===a||I===a)&&(j($),$.node=null),this.__state===i||I===i)return te.root;if(T=$.node,!!T&&(B.push(G),C.push($),!(this.__state===o||I===o))){if(k=T.type||$.wrap,ee=this.__keys[k],!ee)if(this.__fallback)ee=this.__fallback(T);else throw new Error("Unknown node type "+k+".");for(M=ee.length;(M-=1)>=0;)if(W=ee[M],U=T[W],!!U)if(Array.isArray(U)){for(Y=U.length;(Y-=1)>=0;)if(U[Y]){if(h(k,ee[M]))$=new f(U[Y],[W,Y],"Property",new l(U,Y));else if(d(U[Y]))$=new f(U[Y],[W,Y],null,new l(U,Y));else continue;B.push($)}}else d(U)&&B.push(new f(U,W,null,new l(T,W)))}}return te.root};function m(v,A){var x=new p;return x.traverse(v,A)}function g(v,A){var x=new p;return x.replace(v,A)}function _(v,A){var x;return x=c(A,function(C){return C.range[0]>v.range[0]}),v.extendedRange=[v.range[0],v.range[1]],x!==A.length&&(v.extendedRange[1]=A[x].range[0]),x-=1,x>=0&&(v.extendedRange[0]=A[x].range[1]),v}function D(v,A,x){var B=[],C,T,k,I;if(!v.range)throw new Error("attachComments needs range information");if(!x.length){if(A.length){for(k=0,T=A.length;k<T;k+=1)C=u(A[k]),C.extendedRange=[0,v.range[0]],B.push(C);v.leadingComments=B}return v}for(k=0,T=A.length;k<T;k+=1)B.push(_(u(A[k]),x));return I=0,m(v,{enter:function($){for(var M;I<B.length&&(M=B[I],!(M.extendedRange[1]>$.range[0]));)M.extendedRange[1]===$.range[0]?($.leadingComments||($.leadingComments=[]),$.leadingComments.push(M),B.splice(I,1)):I+=1;if(I===B.length)return n.Break;if(B[I].extendedRange[0]>$.range[1])return n.Skip}}),I=0,m(v,{leave:function($){for(var M;I<B.length&&(M=B[I],!($.range[1]<M.extendedRange[0]));)$.range[1]===M.extendedRange[0]?($.trailingComments||($.trailingComments=[]),$.trailingComments.push(M),B.splice(I,1)):I+=1;if(I===B.length)return n.Break;if(B[I].extendedRange[0]>$.range[1])return n.Skip}}),v}return e.version=IF().version,e.Syntax=r,e.traverse=m,e.replace=g,e.attachComments=D,e.VisitorKeys=s,e.VisitorOption=n,e.Controller=p,e.cloneEnvironment=function(){return t({})},e})(FF)});var $F=w((iPe,RF)=>{(function(){"use strict";function t(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}RF.exports={isExpression:t,isStatement:r,isIterationStatement:e,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})()});var GS=w((sPe,NF)=>{(function(){"use strict";var t,e,r,n,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(g){return 48<=g&&g<=57}function a(g){return 48<=g&&g<=57||97<=g&&g<=102||65<=g&&g<=70}function u(g){return g>=48&&g<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(g){return g===32||g===9||g===11||g===12||g===160||g>=5760&&r.indexOf(g)>=0}function l(g){return g===10||g===13||g===8232||g===8233}function f(g){if(g<=65535)return String.fromCharCode(g);var _=String.fromCharCode(Math.floor((g-65536)/1024)+55296),D=String.fromCharCode((g-65536)%1024+56320);return _+D}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function p(g){return g<128?n[g]:e.NonAsciiIdentifierStart.test(f(g))}function d(g){return g<128?s[g]:e.NonAsciiIdentifierPart.test(f(g))}function h(g){return g<128?n[g]:t.NonAsciiIdentifierStart.test(f(g))}function m(g){return g<128?s[g]:t.NonAsciiIdentifierPart.test(f(g))}NF.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:l,isIdentifierStartES5:p,isIdentifierPartES5:d,isIdentifierStartES6:h,isIdentifierPartES6:m}})()});var jF=w((oPe,MF)=>{(function(){"use strict";var t=GS();function e(p){switch(p){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(p,d){return!d&&p==="yield"?!1:n(p,d)}function n(p,d){if(d&&e(p))return!0;switch(p.length){case 2:return p==="if"||p==="in"||p==="do";case 3:return p==="var"||p==="for"||p==="new"||p==="try";case 4:return p==="this"||p==="else"||p==="case"||p==="void"||p==="with"||p==="enum";case 5:return p==="while"||p==="break"||p==="catch"||p==="throw"||p==="const"||p==="yield"||p==="class"||p==="super";case 6:return p==="return"||p==="typeof"||p==="delete"||p==="switch"||p==="export"||p==="import";case 7:return p==="default"||p==="finally"||p==="extends";case 8:return p==="function"||p==="continue"||p==="debugger";case 10:return p==="instanceof";default:return!1}}function s(p,d){return p==="null"||p==="true"||p==="false"||r(p,d)}function i(p,d){return p==="null"||p==="true"||p==="false"||n(p,d)}function o(p){return p==="eval"||p==="arguments"}function a(p){var d,h,m;if(p.length===0||(m=p.charCodeAt(0),!t.isIdentifierStartES5(m)))return!1;for(d=1,h=p.length;d<h;++d)if(m=p.charCodeAt(d),!t.isIdentifierPartES5(m))return!1;return!0}function u(p,d){return(p-55296)*1024+(d-56320)+65536}function c(p){var d,h,m,g,_;if(p.length===0)return!1;for(_=t.isIdentifierStartES6,d=0,h=p.length;d<h;++d){if(m=p.charCodeAt(d),55296<=m&&m<=56319){if(++d,d>=h||(g=p.charCodeAt(d),!(56320<=g&&g<=57343)))return!1;m=u(m,g)}if(!_(m))return!1;_=t.isIdentifierPartES6}return!0}function l(p,d){return a(p)&&!s(p,d)}function f(p,d){return c(p)&&!i(p,d)}MF.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:c,isIdentifierES5:l,isIdentifierES6:f}})()});var qF=w(kg=>{(function(){"use strict";kg.ast=$F(),kg.code=GS(),kg.keyword=jF()})()});var LF=w(ZS=>{var UF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");ZS.encode=function(t){if(0<=t&&t<UF.length)return UF[t];throw new TypeError("Must be between 0 and 63: "+t)};ZS.decode=function(t){var e=65,r=90,n=97,s=122,i=48,o=57,a=43,u=47,c=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=s?t-n+c:i<=t&&t<=o?t-i+l:t==a?62:t==u?63:-1}});var QS=w(YS=>{var KF=LF(),XS=5,VF=1<<XS,HF=VF-1,zF=VF;function _te(t){return t<0?(-t<<1)+1:(t<<1)+0}function Ete(t){var e=(t&1)===1,r=t>>1;return e?-r:r}YS.encode=function(e){var r="",n,s=_te(e);do n=s&HF,s>>>=XS,s>0&&(n|=zF),r+=KF.encode(n);while(s>0);return r};YS.decode=function(e,r,n){var s=e.length,i=0,o=0,a,u;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(u=KF.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&zF),u&=HF,i=i+(u<<o),o+=XS}while(a);n.value=Ete(i),n.rest=r}});var Mf=w(hn=>{function Ste(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}hn.getArg=Ste;var WF=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Ate=/^data:.+\,.+$/;function bh(t){var e=t.match(WF);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}hn.urlParse=bh;function $f(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}hn.urlGenerate=$f;function eA(t){var e=t,r=bh(t);if(r){if(!r.path)return t;e=r.path}for(var n=hn.isAbsolute(e),s=e.split(/\/+/),i,o=0,a=s.length-1;a>=0;a--)i=s[a],i==="."?s.splice(a,1):i===".."?o++:o>0&&(i===""?(s.splice(a+1,o),o=0):(s.splice(a,2),o--));return e=s.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,$f(r)):e}hn.normalize=eA;function JF(t,e){t===""&&(t="."),e===""&&(e=".");var r=bh(e),n=bh(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),$f(r);if(r||e.match(Ate))return e;if(n&&!n.host&&!n.path)return n.host=e,$f(n);var s=e.charAt(0)==="/"?e:eA(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=s,$f(n)):s}hn.join=JF;hn.isAbsolute=function(t){return t.charAt(0)==="/"||WF.test(t)};function xte(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}hn.relative=xte;var GF=function(){var t=Object.create(null);return!("__proto__"in t)}();function ZF(t){return t}function Dte(t){return XF(t)?"$"+t:t}hn.toSetString=GF?ZF:Dte;function Cte(t){return XF(t)?t.slice(1):t}hn.fromSetString=GF?ZF:Cte;function XF(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Pte(t,e,r){var n=Nf(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Nf(t.name,e.name)}hn.compareByOriginalPositions=Pte;function Ote(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Nf(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Nf(t.name,e.name)}hn.compareByGeneratedPositionsDeflated=Ote;function Nf(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Bte(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Nf(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Nf(t.name,e.name)}hn.compareByGeneratedPositionsInflated=Bte;function Tte(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}hn.parseSourceMapInput=Tte;function Ite(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=bh(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var s=n.path.lastIndexOf("/");s>=0&&(n.path=n.path.substring(0,s+1))}e=JF($f(n),e)}return eA(e)}hn.computeSourceURL=Ite});var nA=w(YF=>{var tA=Mf(),rA=Object.prototype.hasOwnProperty,Fc=typeof Map<"u";function ra(){this._array=[],this._set=Fc?new Map:Object.create(null)}ra.fromArray=function(e,r){for(var n=new ra,s=0,i=e.length;s<i;s++)n.add(e[s],r);return n};ra.prototype.size=function(){return Fc?this._set.size:Object.getOwnPropertyNames(this._set).length};ra.prototype.add=function(e,r){var n=Fc?e:tA.toSetString(e),s=Fc?this.has(e):rA.call(this._set,n),i=this._array.length;(!s||r)&&this._array.push(e),s||(Fc?this._set.set(e,i):this._set[n]=i)};ra.prototype.has=function(e){if(Fc)return this._set.has(e);var r=tA.toSetString(e);return rA.call(this._set,r)};ra.prototype.indexOf=function(e){if(Fc){var r=this._set.get(e);if(r>=0)return r}else{var n=tA.toSetString(e);if(rA.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};ra.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};ra.prototype.toArray=function(){return this._array.slice()};YF.ArraySet=ra});var tk=w(ek=>{var QF=Mf();function Fte(t,e){var r=t.generatedLine,n=e.generatedLine,s=t.generatedColumn,i=e.generatedColumn;return n>r||n==r&&i>=s||QF.compareByGeneratedPositionsInflated(t,e)<=0}function Rg(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Rg.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};Rg.prototype.add=function(e){Fte(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Rg.prototype.toArray=function(){return this._sorted||(this._array.sort(QF.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};ek.MappingList=Rg});var iA=w(rk=>{var wh=QS(),Sr=Mf(),$g=nA().ArraySet,kte=tk().MappingList;function Pi(t){t||(t={}),this._file=Sr.getArg(t,"file",null),this._sourceRoot=Sr.getArg(t,"sourceRoot",null),this._skipValidation=Sr.getArg(t,"skipValidation",!1),this._sources=new $g,this._names=new $g,this._mappings=new kte,this._sourcesContents=null}Pi.prototype._version=3;Pi.fromSourceMap=function(e){var r=e.sourceRoot,n=new Pi({file:e.file,sourceRoot:r});return e.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,r!=null&&(i.source=Sr.relative(r,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),e.sources.forEach(function(s){var i=s;r!==null&&(i=Sr.relative(r,s)),n._sources.has(i)||n._sources.add(i);var o=e.sourceContentFor(s);o!=null&&n.setSourceContent(s,o)}),n};Pi.prototype.addMapping=function(e){var r=Sr.getArg(e,"generated"),n=Sr.getArg(e,"original",null),s=Sr.getArg(e,"source",null),i=Sr.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,s,i),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:s,name:i})};Pi.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Sr.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Sr.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Sr.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Pi.prototype.applySourceMap=function(e,r,n){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var i=this._sourceRoot;i!=null&&(s=Sr.relative(i,s));var o=new $g,a=new $g;this._mappings.unsortedForEach(function(u){if(u.source===s&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,n!=null&&(u.source=Sr.join(n,u.source)),i!=null&&(u.source=Sr.relative(i,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!o.has(l)&&o.add(l);var f=u.name;f!=null&&!a.has(f)&&a.add(f)},this),this._sources=o,this._names=a,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=Sr.join(n,u)),i!=null&&(u=Sr.relative(i,u)),this.setSourceContent(u,c))},this)};Pi.prototype._validateMapping=function(e,r,n,s){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:s}))}};Pi.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,s=0,i=0,o=0,a="",u,c,l,f,p=this._mappings.toArray(),d=0,h=p.length;d<h;d++){if(c=p[d],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(d>0){if(!Sr.compareByGeneratedPositionsInflated(c,p[d-1]))continue;u+=","}u+=wh.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(f=this._sources.indexOf(c.source),u+=wh.encode(f-o),o=f,u+=wh.encode(c.originalLine-1-s),s=c.originalLine-1,u+=wh.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=wh.encode(l-i),i=l)),a+=u}return a};Pi.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Sr.relative(r,n));var s=Sr.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};Pi.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Pi.prototype.toString=function(){return JSON.stringify(this.toJSON())};rk.SourceMapGenerator=Pi});var nk=w(kc=>{kc.GREATEST_LOWER_BOUND=1;kc.LEAST_UPPER_BOUND=2;function sA(t,e,r,n,s,i){var o=Math.floor((e-t)/2)+t,a=s(r,n[o],!0);return a===0?o:a>0?e-o>1?sA(o,e,r,n,s,i):i==kc.LEAST_UPPER_BOUND?e<n.length?e:-1:o:o-t>1?sA(t,o,r,n,s,i):i==kc.LEAST_UPPER_BOUND?o:t<0?-1:t}kc.search=function(e,r,n,s){if(r.length===0)return-1;var i=sA(-1,r.length,e,r,n,s||kc.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var sk=w(ik=>{function oA(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Rte(t,e){return Math.round(t+Math.random()*(e-t))}function aA(t,e,r,n){if(r<n){var s=Rte(r,n),i=r-1;oA(t,s,n);for(var o=t[n],a=r;a<n;a++)e(t[a],o)<=0&&(i+=1,oA(t,i,a));oA(t,i+1,a);var u=i+1;aA(t,e,r,u-1),aA(t,e,u+1,n)}}ik.quickSort=function(t,e){aA(t,e,0,t.length-1)}});var ak=w(Ng=>{var be=Mf(),uA=nk(),jf=nA().ArraySet,$te=QS(),_h=sk().quickSort;function Jt(t,e){var r=t;return typeof t=="string"&&(r=be.parseSourceMapInput(t)),r.sections!=null?new ss(r,e):new rn(r,e)}Jt.fromSourceMap=function(t,e){return rn.fromSourceMap(t,e)};Jt.prototype._version=3;Jt.prototype.__generatedMappings=null;Object.defineProperty(Jt.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Jt.prototype.__originalMappings=null;Object.defineProperty(Jt.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Jt.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Jt.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Jt.GENERATED_ORDER=1;Jt.ORIGINAL_ORDER=2;Jt.GREATEST_LOWER_BOUND=1;Jt.LEAST_UPPER_BOUND=2;Jt.prototype.eachMapping=function(e,r,n){var s=r||null,i=n||Jt.GENERATED_ORDER,o;switch(i){case Jt.GENERATED_ORDER:o=this._generatedMappings;break;case Jt.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=be.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,s)};Jt.prototype.allGeneratedPositionsFor=function(e){var r=be.getArg(e,"line"),n={source:be.getArg(e,"source"),originalLine:r,originalColumn:be.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var s=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",be.compareByOriginalPositions,uA.LEAST_UPPER_BOUND);if(i>=0){var o=this._originalMappings[i];if(e.column===void 0)for(var a=o.originalLine;o&&o.originalLine===a;)s.push({line:be.getArg(o,"generatedLine",null),column:be.getArg(o,"generatedColumn",null),lastColumn:be.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i];else for(var u=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==u;)s.push({line:be.getArg(o,"generatedLine",null),column:be.getArg(o,"generatedColumn",null),lastColumn:be.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i]}return s};Ng.SourceMapConsumer=Jt;function rn(t,e){var r=t;typeof t=="string"&&(r=be.parseSourceMapInput(t));var n=be.getArg(r,"version"),s=be.getArg(r,"sources"),i=be.getArg(r,"names",[]),o=be.getArg(r,"sourceRoot",null),a=be.getArg(r,"sourcesContent",null),u=be.getArg(r,"mappings"),c=be.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o&&(o=be.normalize(o)),s=s.map(String).map(be.normalize).map(function(l){return o&&be.isAbsolute(o)&&be.isAbsolute(l)?be.relative(o,l):l}),this._names=jf.fromArray(i.map(String),!0),this._sources=jf.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(l){return be.computeSourceURL(o,l,e)}),this.sourceRoot=o,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=c}rn.prototype=Object.create(Jt.prototype);rn.prototype.consumer=Jt;rn.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=be.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};rn.fromSourceMap=function(e,r){var n=Object.create(rn.prototype),s=n._names=jf.fromArray(e._names.toArray(),!0),i=n._sources=jf.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(d){return be.computeSourceURL(n.sourceRoot,d,r)});for(var o=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],c=0,l=o.length;c<l;c++){var f=o[c],p=new ok;p.generatedLine=f.generatedLine,p.generatedColumn=f.generatedColumn,f.source&&(p.source=i.indexOf(f.source),p.originalLine=f.originalLine,p.originalColumn=f.originalColumn,f.name&&(p.name=s.indexOf(f.name)),u.push(p)),a.push(p)}return _h(n.__originalMappings,be.compareByOriginalPositions),n};rn.prototype._version=3;Object.defineProperty(rn.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function ok(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}rn.prototype._parseMappings=function(e,r){for(var n=1,s=0,i=0,o=0,a=0,u=0,c=e.length,l=0,f={},p={},d=[],h=[],m,g,_,D,v;l<c;)if(e.charAt(l)===";")n++,l++,s=0;else if(e.charAt(l)===",")l++;else{for(m=new ok,m.generatedLine=n,D=l;D<c&&!this._charIsMappingSeparator(e,D);D++);if(g=e.slice(l,D),_=f[g],_)l+=g.length;else{for(_=[];l<D;)$te.decode(e,l,p),v=p.value,l=p.rest,_.push(v);if(_.length===2)throw new Error("Found a source, but no line and column");if(_.length===3)throw new Error("Found a source and line, but no column");f[g]=_}m.generatedColumn=s+_[0],s=m.generatedColumn,_.length>1&&(m.source=a+_[1],a+=_[1],m.originalLine=i+_[2],i=m.originalLine,m.originalLine+=1,m.originalColumn=o+_[3],o=m.originalColumn,_.length>4&&(m.name=u+_[4],u+=_[4])),h.push(m),typeof m.originalLine=="number"&&d.push(m)}_h(h,be.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,_h(d,be.compareByOriginalPositions),this.__originalMappings=d};rn.prototype._findMapping=function(e,r,n,s,i,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return uA.search(e,r,i,o)};rn.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};rn.prototype.originalPositionFor=function(e){var r={generatedLine:be.getArg(e,"line"),generatedColumn:be.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",be.compareByGeneratedPositionsDeflated,be.getArg(e,"bias",Jt.GREATEST_LOWER_BOUND));if(n>=0){var s=this._generatedMappings[n];if(s.generatedLine===r.generatedLine){var i=be.getArg(s,"source",null);i!==null&&(i=this._sources.at(i),i=be.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var o=be.getArg(s,"name",null);return o!==null&&(o=this._names.at(o)),{source:i,line:be.getArg(s,"originalLine",null),column:be.getArg(s,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};rn.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};rn.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var s=e;this.sourceRoot!=null&&(s=be.relative(this.sourceRoot,s));var i;if(this.sourceRoot!=null&&(i=be.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!i.path||i.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(r)return null;throw new Error('"'+s+'" is not in the SourceMap.')};rn.prototype.generatedPositionFor=function(e){var r=be.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:be.getArg(e,"line"),originalColumn:be.getArg(e,"column")},s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",be.compareByOriginalPositions,be.getArg(e,"bias",Jt.GREATEST_LOWER_BOUND));if(s>=0){var i=this._originalMappings[s];if(i.source===n.source)return{line:be.getArg(i,"generatedLine",null),column:be.getArg(i,"generatedColumn",null),lastColumn:be.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Ng.BasicSourceMapConsumer=rn;function ss(t,e){var r=t;typeof t=="string"&&(r=be.parseSourceMapInput(t));var n=be.getArg(r,"version"),s=be.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new jf,this._names=new jf;var i={line:-1,column:0};this._sections=s.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var a=be.getArg(o,"offset"),u=be.getArg(a,"line"),c=be.getArg(a,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Jt(be.getArg(o,"map"),e)}})}ss.prototype=Object.create(Jt.prototype);ss.prototype.constructor=Jt;ss.prototype._version=3;Object.defineProperty(ss.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});ss.prototype.originalPositionFor=function(e){var r={generatedLine:be.getArg(e,"line"),generatedColumn:be.getArg(e,"column")},n=uA.search(r,this._sections,function(i,o){var a=i.generatedLine-o.generatedOffset.generatedLine;return a||i.generatedColumn-o.generatedOffset.generatedColumn}),s=this._sections[n];return s?s.consumer.originalPositionFor({line:r.generatedLine-(s.generatedOffset.generatedLine-1),column:r.generatedColumn-(s.generatedOffset.generatedLine===r.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};ss.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};ss.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var s=this._sections[n],i=s.consumer.sourceContentFor(e,!0);if(i)return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};ss.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(be.getArg(e,"source"))!==-1){var s=n.consumer.generatedPositionFor(e);if(s){var i={line:s.line+(n.generatedOffset.generatedLine-1),column:s.column+(n.generatedOffset.generatedLine===s.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};ss.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var s=this._sections[n],i=s.consumer._generatedMappings,o=0;o<i.length;o++){var a=i[o],u=s.consumer._sources.at(a.source);u=be.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;a.name&&(c=s.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}_h(this.__generatedMappings,be.compareByGeneratedPositionsDeflated),_h(this.__originalMappings,be.compareByOriginalPositions)};Ng.IndexedSourceMapConsumer=ss});var ck=w(uk=>{var Nte=iA().SourceMapGenerator,Mg=Mf(),Mte=/(\r?\n)/,jte=10,qf="$$$isSourceNode$$$";function ii(t,e,r,n,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=s??null,this[qf]=!0,n!=null&&this.add(n)}ii.fromStringWithSourceMap=function(e,r,n){var s=new ii,i=e.split(Mte),o=0,a=function(){var p=h(),d=h()||"";return p+d;function h(){return o<i.length?i[o++]:void 0}},u=1,c=0,l=null;return r.eachMapping(function(p){if(l!==null)if(u<p.generatedLine)f(l,a()),u++,c=0;else{var d=i[o]||"",h=d.substr(0,p.generatedColumn-c);i[o]=d.substr(p.generatedColumn-c),c=p.generatedColumn,f(l,h),l=p;return}for(;u<p.generatedLine;)s.add(a()),u++;if(c<p.generatedColumn){var d=i[o]||"";s.add(d.substr(0,p.generatedColumn)),i[o]=d.substr(p.generatedColumn),c=p.generatedColumn}l=p},this),o<i.length&&(l&&f(l,a()),s.add(i.splice(o).join(""))),r.sources.forEach(function(p){var d=r.sourceContentFor(p);d!=null&&(n!=null&&(p=Mg.join(n,p)),s.setSourceContent(p,d))}),s;function f(p,d){if(p===null||p.source===void 0)s.add(d);else{var h=n?Mg.join(n,p.source):p.source;s.add(new ii(p.originalLine,p.originalColumn,h,d,p.name))}}};ii.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[qf]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};ii.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[qf]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};ii.prototype.walk=function(e){for(var r,n=0,s=this.children.length;n<s;n++)r=this.children[n],r[qf]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};ii.prototype.join=function(e){var r,n,s=this.children.length;if(s>0){for(r=[],n=0;n<s-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};ii.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[qf]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};ii.prototype.setSourceContent=function(e,r){this.sourceContents[Mg.toSetString(e)]=r};ii.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][qf]&&this.children[r].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),r=0,n=s.length;r<n;r++)e(Mg.fromSetString(s[r]),this.sourceContents[s[r]])};ii.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};ii.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new Nte(e),s=!1,i=null,o=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((i!==l.source||o!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),i=l.source,o=l.line,a=l.column,u=l.name,s=!0):s&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,s=!1);for(var f=0,p=c.length;f<p;f++)c.charCodeAt(f)===jte?(r.line++,r.column=0,f+1===p?(i=null,s=!1):s&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}};uk.SourceNode=ii});var lk=w(jg=>{jg.SourceMapGenerator=iA().SourceMapGenerator;jg.SourceMapConsumer=ak().SourceMapConsumer;jg.SourceNode=ck().SourceNode});var fk=w((bPe,qte)=>{qte.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"1.14.3",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}});var dk=w(na=>{(function(){"use strict";var t,e,r,n,s,i,o,a,u,c,l,f,p,d,h,m,g,_,D,v,A,x,B,C,T,k;s=kF(),i=qF(),t=s.Syntax;function I(y){return xt.Expression.hasOwnProperty(y.type)}function $(y){return xt.Statement.hasOwnProperty(y.type)}e={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},r={"||":e.LogicalOR,"&&":e.LogicalAND,"|":e.BitwiseOR,"^":e.BitwiseXOR,"&":e.BitwiseAND,"==":e.Equality,"!=":e.Equality,"===":e.Equality,"!==":e.Equality,is:e.Equality,isnt:e.Equality,"<":e.Relational,">":e.Relational,"<=":e.Relational,">=":e.Relational,in:e.Relational,instanceof:e.Relational,"<<":e.BitwiseSHIFT,">>":e.BitwiseSHIFT,">>>":e.BitwiseSHIFT,"+":e.Additive,"-":e.Additive,"*":e.Multiplicative,"%":e.Multiplicative,"/":e.Multiplicative,"**":e.Exponentiation};var M=1,Y=2,ee=4,U=8,G=16,te=32,W=Y|ee,j=M|Y,q=M|Y|ee,Q=M,oe=ee,pe=M|ee,ae=M,he=M|te,Ee=0,Pe=M|G,Fe=M|U;function Je(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function at(y,E){var b="";for(E|=0;E>0;E>>>=1,y+=y)E&1&&(b+=y);return b}function ft(y){return/[\r\n]/g.test(y)}function Ge(y){var E=y.length;return E&&i.code.isLineTerminator(y.charCodeAt(E-1))}function Vt(y,E){var b;for(b in E)E.hasOwnProperty(b)&&(y[b]=E[b]);return y}function At(y,E){var b,S;function P(V){return typeof V=="object"&&V instanceof Object&&!(V instanceof RegExp)}for(b in E)E.hasOwnProperty(b)&&(S=E[b],P(S)?P(y[b])?At(y[b],S):y[b]=At({},S):y[b]=S);return y}function cn(y){var E,b,S,P,V;if(y!==y)throw new Error("Numeric literal whose value is NaN");if(y<0||y===0&&1/y<0)throw new Error("Numeric literal whose value is negative");if(y===1/0)return u?"null":c?"1e400":"1e+400";if(E=""+y,!c||E.length<3)return E;for(b=E.indexOf("."),!u&&E.charCodeAt(0)===48&&b===1&&(b=0,E=E.slice(1)),S=E,E=E.replace("e+","e"),P=0,(V=S.indexOf("e"))>0&&(P=+S.slice(V+1),S=S.slice(0,V)),b>=0&&(P-=S.length-b-1,S=+(S.slice(0,b)+S.slice(b+1))+""),V=0;S.charCodeAt(S.length+V-1)===48;)--V;return V!==0&&(P-=V,S=S.slice(0,V)),P!==0&&(S+="e"+P),(S.length<E.length||l&&y>1e12&&Math.floor(y)===y&&(S="0x"+y.toString(16)).length<E.length)&&+S===y&&(E=S),E}function lr(y,E){return(y&-2)===8232?(E?"u":"\\u")+(y===8232?"2028":"2029"):y===10||y===13?(E?"":"\\")+(y===10?"n":"r"):String.fromCharCode(y)}function ys(y){var E,b,S,P,V,Z,re,de;if(b=y.toString(),y.source){if(E=b.match(/\/([^/]*)$/),!E)return b;for(S=E[1],b="",re=!1,de=!1,P=0,V=y.source.length;P<V;++P)Z=y.source.charCodeAt(P),de?(b+=lr(Z,de),de=!1):(re?Z===93&&(re=!1):Z===47?b+="\\":Z===91&&(re=!0),b+=lr(Z,de),de=Z===92);return"/"+b+"/"+S}return b}function qi(y,E){var b;return y===8?"\\b":y===12?"\\f":y===9?"\\t":(b=y.toString(16).toUpperCase(),u||y>255?"\\u"+"0000".slice(b.length)+b:y===0&&!i.code.isDecimalDigit(E)?"\\0":y===11?"\\x0B":"\\x"+"00".slice(b.length)+b)}function mo(y){if(y===92)return"\\\\";if(y===10)return"\\n";if(y===13)return"\\r";if(y===8232)return"\\u2028";if(y===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function fr(y){var E,b,S,P;for(P=f==="double"?'"':"'",E=0,b=y.length;E<b;++E)if(S=y.charCodeAt(E),S===39){P='"';break}else if(S===34){P="'";break}else S===92&&++E;return P+y+P}function Fn(y){var E="",b,S,P,V=0,Z=0,re,de;for(b=0,S=y.length;b<S;++b){if(P=y.charCodeAt(b),P===39)++V;else if(P===34)++Z;else if(P===47&&u)E+="\\";else if(i.code.isLineTerminator(P)||P===92){E+=mo(P);continue}else if(!i.code.isIdentifierPartES5(P)&&(u&&P<32||!u&&!p&&(P<32||P>126))){E+=qi(P,y.charCodeAt(b+1));continue}E+=String.fromCharCode(P)}if(re=!(f==="double"||f==="auto"&&Z<V),de=re?"'":'"',!(re?V:Z))return de+E+de;for(y=E,E=de,b=0,S=y.length;b<S;++b)P=y.charCodeAt(b),(P===39&&re||P===34&&!re)&&(E+="\\"),E+=String.fromCharCode(P);return E+de}function Ea(y){var E,b,S,P="";for(E=0,b=y.length;E<b;++E)S=y[E],P+=Array.isArray(S)?Ea(S):S;return P}function dt(y,E){if(!x)return Array.isArray(y)?Ea(y):y;if(E==null){if(y instanceof n)return y;E={}}return E.loc==null?new n(null,null,x,y,E.name||null):new n(E.loc.start.line,E.loc.start.column,x===!0?E.loc.source||null:x,y,E.name||null)}function tr(){return h||" "}function Be(y,E){var b,S,P,V;return b=dt(y).toString(),b.length===0?[E]:(S=dt(E).toString(),S.length===0?[y]:(P=b.charCodeAt(b.length-1),V=S.charCodeAt(0),(P===43||P===45)&&P===V||i.code.isIdentifierPartES5(P)&&i.code.isIdentifierPartES5(V)||P===47&&V===105?[y,tr(),E]:i.code.isWhiteSpace(P)||i.code.isLineTerminator(P)||i.code.isWhiteSpace(V)||i.code.isLineTerminator(V)?[y,E]:[y,h,E]))}function dr(y){return[o,y]}function bt(y){var E;E=o,o+=a,y(o),o=E}function ms(y){var E;for(E=y.length-1;E>=0&&!i.code.isLineTerminator(y.charCodeAt(E));--E);return y.length-1-E}function Pu(y,E){var b,S,P,V,Z,re,de,ot;for(b=y.split(/\r\n|[\r\n]/),re=Number.MAX_VALUE,S=1,P=b.length;S<P;++S){for(V=b[S],Z=0;Z<V.length&&i.code.isWhiteSpace(V.charCodeAt(Z));)++Z;re>Z&&(re=Z)}for(typeof E<"u"?(de=o,b[1][re]==="*"&&(E+=" "),o=E):(re&1&&--re,de=o),S=1,P=b.length;S<P;++S)ot=dt(dr(b[S].slice(re))),b[S]=x?ot.join(""):ot;return o=de,b.join(`
`)}function kn(y,E){if(y.type==="Line"){if(Ge(y.value))return"//"+y.value;var b="//"+y.value;return C||(b+=`
`),b}return v.format.indent.adjustMultilineComment&&/[\n\r]/.test(y.value)?Pu("/*"+y.value+"*/",E):"/*"+y.value+"*/"}function gs(y,E){var b,S,P,V,Z,re,de,ot,F,O,N,L,K,ue;if(y.leadingComments&&y.leadingComments.length>0){if(V=E,C){for(P=y.leadingComments[0],E=[],ot=P.extendedRange,F=P.range,N=B.substring(ot[0],F[0]),ue=(N.match(/\n/g)||[]).length,ue>0?(E.push(at(`
`,ue)),E.push(dr(kn(P)))):(E.push(N),E.push(kn(P))),O=F,b=1,S=y.leadingComments.length;b<S;b++)P=y.leadingComments[b],F=P.range,L=B.substring(O[1],F[0]),ue=(L.match(/\n/g)||[]).length,E.push(at(`
`,ue)),E.push(dr(kn(P))),O=F;K=B.substring(F[1],ot[1]),ue=(K.match(/\n/g)||[]).length,E.push(at(`
`,ue))}else for(P=y.leadingComments[0],E=[],_&&y.type===t.Program&&y.body.length===0&&E.push(`
`),E.push(kn(P)),Ge(dt(E).toString())||E.push(`
`),b=1,S=y.leadingComments.length;b<S;++b)P=y.leadingComments[b],de=[kn(P)],Ge(dt(de).toString())||de.push(`
`),E.push(dr(de));E.push(dr(V))}if(y.trailingComments)if(C)P=y.trailingComments[0],ot=P.extendedRange,F=P.range,N=B.substring(ot[0],F[0]),ue=(N.match(/\n/g)||[]).length,ue>0?(E.push(at(`
`,ue)),E.push(dr(kn(P)))):(E.push(N),E.push(kn(P)));else for(Z=!Ge(dt(E).toString()),re=at(" ",ms(dt([o,E,a]).toString())),b=0,S=y.trailingComments.length;b<S;++b)P=y.trailingComments[b],Z?(b===0?E=[E,a]:E=[E,re],E.push(kn(P,re))):E=[E,dr(kn(P))],b!==S-1&&!Ge(dt(E).toString())&&(E=[E,`
`]);return E}function Ui(y,E,b){var S,P=0;for(S=y;S<E;S++)B[S]===`
`&&P++;for(S=1;S<P;S++)b.push(d)}function ur(y,E,b){return E<b?["(",y,")"]:y}function Wy(y){var E,b,S;for(S=y.split(/\r\n|\n/),E=1,b=S.length;E<b;E++)S[E]=d+o+S[E];return S}function Jy(y,E){var b,S,P;return b=y[v.verbatim],typeof b=="string"?S=ur(Wy(b),e.Sequence,E):(S=Wy(b.content),P=b.precedence!=null?b.precedence:e.Sequence,S=ur(S,P,E)),dt(S,y)}function xt(){}xt.prototype.maybeBlock=function(y,E){var b,S,P=this;return S=!v.comment||!y.leadingComments,y.type===t.BlockStatement&&S?[h,this.generateStatement(y,E)]:y.type===t.EmptyStatement&&S?";":(bt(function(){b=[d,dr(P.generateStatement(y,E))]}),b)},xt.prototype.maybeBlockSuffix=function(y,E){var b=Ge(dt(E).toString());return y.type===t.BlockStatement&&(!v.comment||!y.leadingComments)&&!b?[E,h]:b?[E,o]:[E,d,o]};function bn(y){return dt(y.name,y)}function Ou(y,E){return y.async?"async"+(E?tr():h):""}function bl(y){var E=y.generator&&!v.moz.starlessGenerator;return E?"*"+h:""}function Gy(y){var E=y.value,b="";return E.async&&(b+=Ou(E,!y.computed)),E.generator&&(b+=bl(E)?"*":""),b}xt.prototype.generatePattern=function(y,E,b){return y.type===t.Identifier?bn(y):this.generateExpression(y,E,b)},xt.prototype.generateFunctionParams=function(y){var E,b,S,P;if(P=!1,y.type===t.ArrowFunctionExpression&&!y.rest&&(!y.defaults||y.defaults.length===0)&&y.params.length===1&&y.params[0].type===t.Identifier)S=[Ou(y,!0),bn(y.params[0])];else{for(S=y.type===t.ArrowFunctionExpression?[Ou(y,!1)]:[],S.push("("),y.defaults&&(P=!0),E=0,b=y.params.length;E<b;++E)P&&y.defaults[E]?S.push(this.generateAssignment(y.params[E],y.defaults[E],"=",e.Assignment,q)):S.push(this.generatePattern(y.params[E],e.Assignment,q)),E+1<b&&S.push(","+h);y.rest&&(y.params.length&&S.push(","+h),S.push("..."),S.push(bn(y.rest))),S.push(")")}return S},xt.prototype.generateFunctionBody=function(y){var E,b;return E=this.generateFunctionParams(y),y.type===t.ArrowFunctionExpression&&(E.push(h),E.push("=>")),y.expression?(E.push(h),b=this.generateExpression(y.body,e.Assignment,q),b.toString().charAt(0)==="{"&&(b=["(",b,")"]),E.push(b)):E.push(this.maybeBlock(y.body,Fe)),E},xt.prototype.generateIterationForStatement=function(y,E,b){var S=["for"+(E.await?tr()+"await":"")+h+"("],P=this;return bt(function(){E.left.type===t.VariableDeclaration?bt(function(){S.push(E.left.kind+tr()),S.push(P.generateStatement(E.left.declarations[0],Ee))}):S.push(P.generateExpression(E.left,e.Call,q)),S=Be(S,y),S=[Be(S,P.generateExpression(E.right,e.Assignment,q)),")"]}),S.push(this.maybeBlock(E.body,b)),S},xt.prototype.generatePropertyKey=function(y,E){var b=[];return E&&b.push("["),b.push(this.generateExpression(y,e.Assignment,q)),E&&b.push("]"),b},xt.prototype.generateAssignment=function(y,E,b,S,P){return e.Assignment<S&&(P|=M),ur([this.generateExpression(y,e.Call,P),h+b+h,this.generateExpression(E,e.Assignment,P)],e.Assignment,S)},xt.prototype.semicolon=function(y){return!g&&y&te?"":";"},xt.Statement={BlockStatement:function(y,E){var b,S,P=["{",d],V=this;return bt(function(){y.body.length===0&&C&&(b=y.range,b[1]-b[0]>2&&(S=B.substring(b[0]+1,b[1]-1),S[0]===`
`&&(P=["{"]),P.push(S)));var Z,re,de,ot;for(ot=ae,E&U&&(ot|=G),Z=0,re=y.body.length;Z<re;++Z)C&&(Z===0&&(y.body[0].leadingComments&&(b=y.body[0].leadingComments[0].extendedRange,S=B.substring(b[0],b[1]),S[0]===`
`&&(P=["{"])),y.body[0].leadingComments||Ui(y.range[0],y.body[0].range[0],P)),Z>0&&!y.body[Z-1].trailingComments&&!y.body[Z].leadingComments&&Ui(y.body[Z-1].range[1],y.body[Z].range[0],P)),Z===re-1&&(ot|=te),y.body[Z].leadingComments&&C?de=V.generateStatement(y.body[Z],ot):de=dr(V.generateStatement(y.body[Z],ot)),P.push(de),Ge(dt(de).toString())||C&&Z<re-1&&y.body[Z+1].leadingComments||P.push(d),C&&Z===re-1&&(y.body[Z].trailingComments||Ui(y.body[Z].range[1],y.range[1],P))}),P.push(dr("}")),P},BreakStatement:function(y,E){return y.label?"break "+y.label.name+this.semicolon(E):"break"+this.semicolon(E)},ContinueStatement:function(y,E){return y.label?"continue "+y.label.name+this.semicolon(E):"continue"+this.semicolon(E)},ClassBody:function(y,E){var b=["{",d],S=this;return bt(function(P){var V,Z;for(V=0,Z=y.body.length;V<Z;++V)b.push(P),b.push(S.generateExpression(y.body[V],e.Sequence,q)),V+1<Z&&b.push(d)}),Ge(dt(b).toString())||b.push(d),b.push(o),b.push("}"),b},ClassDeclaration:function(y,E){var b,S;return b=["class"],y.id&&(b=Be(b,this.generateExpression(y.id,e.Sequence,q))),y.superClass&&(S=Be("extends",this.generateExpression(y.superClass,e.Unary,q)),b=Be(b,S)),b.push(h),b.push(this.generateStatement(y.body,he)),b},DirectiveStatement:function(y,E){return v.raw&&y.raw?y.raw+this.semicolon(E):fr(y.directive)+this.semicolon(E)},DoWhileStatement:function(y,E){var b=Be("do",this.maybeBlock(y.body,ae));return b=this.maybeBlockSuffix(y.body,b),Be(b,["while"+h+"(",this.generateExpression(y.test,e.Sequence,q),")"+this.semicolon(E)])},CatchClause:function(y,E){var b,S=this;return bt(function(){var P;y.param?(b=["catch"+h+"(",S.generateExpression(y.param,e.Sequence,q),")"],y.guard&&(P=S.generateExpression(y.guard,e.Sequence,q),b.splice(2,0," if ",P))):b=["catch"]}),b.push(this.maybeBlock(y.body,ae)),b},DebuggerStatement:function(y,E){return"debugger"+this.semicolon(E)},EmptyStatement:function(y,E){return";"},ExportDefaultDeclaration:function(y,E){var b=["export"],S;return S=E&te?he:ae,b=Be(b,"default"),$(y.declaration)?b=Be(b,this.generateStatement(y.declaration,S)):b=Be(b,this.generateExpression(y.declaration,e.Assignment,q)+this.semicolon(E)),b},ExportNamedDeclaration:function(y,E){var b=["export"],S,P=this;return S=E&te?he:ae,y.declaration?Be(b,this.generateStatement(y.declaration,S)):(y.specifiers&&(y.specifiers.length===0?b=Be(b,"{"+h+"}"):y.specifiers[0].type===t.ExportBatchSpecifier?b=Be(b,this.generateExpression(y.specifiers[0],e.Sequence,q)):(b=Be(b,"{"),bt(function(V){var Z,re;for(b.push(d),Z=0,re=y.specifiers.length;Z<re;++Z)b.push(V),b.push(P.generateExpression(y.specifiers[Z],e.Sequence,q)),Z+1<re&&b.push(","+d)}),Ge(dt(b).toString())||b.push(d),b.push(o+"}")),y.source?b=Be(b,["from"+h,this.generateExpression(y.source,e.Sequence,q),this.semicolon(E)]):b.push(this.semicolon(E))),b)},ExportAllDeclaration:function(y,E){return["export"+h,"*"+h,"from"+h,this.generateExpression(y.source,e.Sequence,q),this.semicolon(E)]},ExpressionStatement:function(y,E){var b,S;function P(re){var de;return re.slice(0,5)!=="class"?!1:(de=re.charCodeAt(5),de===123||i.code.isWhiteSpace(de)||i.code.isLineTerminator(de))}function V(re){var de;return re.slice(0,8)!=="function"?!1:(de=re.charCodeAt(8),de===40||i.code.isWhiteSpace(de)||de===42||i.code.isLineTerminator(de))}function Z(re){var de,ot,F;if(re.slice(0,5)!=="async"||!i.code.isWhiteSpace(re.charCodeAt(5)))return!1;for(ot=6,F=re.length;ot<F&&i.code.isWhiteSpace(re.charCodeAt(ot));++ot);return ot===F||re.slice(ot,ot+8)!=="function"?!1:(de=re.charCodeAt(ot+8),de===40||i.code.isWhiteSpace(de)||de===42||i.code.isLineTerminator(de))}return b=[this.generateExpression(y.expression,e.Sequence,q)],S=dt(b).toString(),S.charCodeAt(0)===123||P(S)||V(S)||Z(S)||D&&E&G&&y.expression.type===t.Literal&&typeof y.expression.value=="string"?b=["(",b,")"+this.semicolon(E)]:b.push(this.semicolon(E)),b},ImportDeclaration:function(y,E){var b,S,P=this;return y.specifiers.length===0?["import",h,this.generateExpression(y.source,e.Sequence,q),this.semicolon(E)]:(b=["import"],S=0,y.specifiers[S].type===t.ImportDefaultSpecifier&&(b=Be(b,[this.generateExpression(y.specifiers[S],e.Sequence,q)]),++S),y.specifiers[S]&&(S!==0&&b.push(","),y.specifiers[S].type===t.ImportNamespaceSpecifier?b=Be(b,[h,this.generateExpression(y.specifiers[S],e.Sequence,q)]):(b.push(h+"{"),y.specifiers.length-S===1?(b.push(h),b.push(this.generateExpression(y.specifiers[S],e.Sequence,q)),b.push(h+"}"+h)):(bt(function(V){var Z,re;for(b.push(d),Z=S,re=y.specifiers.length;Z<re;++Z)b.push(V),b.push(P.generateExpression(y.specifiers[Z],e.Sequence,q)),Z+1<re&&b.push(","+d)}),Ge(dt(b).toString())||b.push(d),b.push(o+"}"+h)))),b=Be(b,["from"+h,this.generateExpression(y.source,e.Sequence,q),this.semicolon(E)]),b)},VariableDeclarator:function(y,E){var b=E&M?q:W;return y.init?[this.generateExpression(y.id,e.Assignment,b),h,"=",h,this.generateExpression(y.init,e.Assignment,b)]:this.generatePattern(y.id,e.Assignment,b)},VariableDeclaration:function(y,E){var b,S,P,V,Z,re=this;b=[y.kind],Z=E&M?ae:Ee;function de(){for(V=y.declarations[0],v.comment&&V.leadingComments?(b.push(`
`),b.push(dr(re.generateStatement(V,Z)))):(b.push(tr()),b.push(re.generateStatement(V,Z))),S=1,P=y.declarations.length;S<P;++S)V=y.declarations[S],v.comment&&V.leadingComments?(b.push(","+d),b.push(dr(re.generateStatement(V,Z)))):(b.push(","+h),b.push(re.generateStatement(V,Z)))}return y.declarations.length>1?bt(de):de(),b.push(this.semicolon(E)),b},ThrowStatement:function(y,E){return[Be("throw",this.generateExpression(y.argument,e.Sequence,q)),this.semicolon(E)]},TryStatement:function(y,E){var b,S,P,V;if(b=["try",this.maybeBlock(y.block,ae)],b=this.maybeBlockSuffix(y.block,b),y.handlers)for(S=0,P=y.handlers.length;S<P;++S)b=Be(b,this.generateStatement(y.handlers[S],ae)),(y.finalizer||S+1!==P)&&(b=this.maybeBlockSuffix(y.handlers[S].body,b));else{for(V=y.guardedHandlers||[],S=0,P=V.length;S<P;++S)b=Be(b,this.generateStatement(V[S],ae)),(y.finalizer||S+1!==P)&&(b=this.maybeBlockSuffix(V[S].body,b));if(y.handler)if(Array.isArray(y.handler))for(S=0,P=y.handler.length;S<P;++S)b=Be(b,this.generateStatement(y.handler[S],ae)),(y.finalizer||S+1!==P)&&(b=this.maybeBlockSuffix(y.handler[S].body,b));else b=Be(b,this.generateStatement(y.handler,ae)),y.finalizer&&(b=this.maybeBlockSuffix(y.handler.body,b))}return y.finalizer&&(b=Be(b,["finally",this.maybeBlock(y.finalizer,ae)])),b},SwitchStatement:function(y,E){var b,S,P,V,Z,re=this;if(bt(function(){b=["switch"+h+"(",re.generateExpression(y.discriminant,e.Sequence,q),")"+h+"{"+d]}),y.cases)for(Z=ae,P=0,V=y.cases.length;P<V;++P)P===V-1&&(Z|=te),S=dr(this.generateStatement(y.cases[P],Z)),b.push(S),Ge(dt(S).toString())||b.push(d);return b.push(dr("}")),b},SwitchCase:function(y,E){var b,S,P,V,Z,re=this;return bt(function(){for(y.test?b=[Be("case",re.generateExpression(y.test,e.Sequence,q)),":"]:b=["default:"],P=0,V=y.consequent.length,V&&y.consequent[0].type===t.BlockStatement&&(S=re.maybeBlock(y.consequent[0],ae),b.push(S),P=1),P!==V&&!Ge(dt(b).toString())&&b.push(d),Z=ae;P<V;++P)P===V-1&&E&te&&(Z|=te),S=dr(re.generateStatement(y.consequent[P],Z)),b.push(S),P+1!==V&&!Ge(dt(S).toString())&&b.push(d)}),b},IfStatement:function(y,E){var b,S,P,V=this;return bt(function(){b=["if"+h+"(",V.generateExpression(y.test,e.Sequence,q),")"]}),P=E&te,S=ae,P&&(S|=te),y.alternate?(b.push(this.maybeBlock(y.consequent,ae)),b=this.maybeBlockSuffix(y.consequent,b),y.alternate.type===t.IfStatement?b=Be(b,["else ",this.generateStatement(y.alternate,S)]):b=Be(b,Be("else",this.maybeBlock(y.alternate,S)))):b.push(this.maybeBlock(y.consequent,S)),b},ForStatement:function(y,E){var b,S=this;return bt(function(){b=["for"+h+"("],y.init?y.init.type===t.VariableDeclaration?b.push(S.generateStatement(y.init,Ee)):(b.push(S.generateExpression(y.init,e.Sequence,W)),b.push(";")):b.push(";"),y.test&&(b.push(h),b.push(S.generateExpression(y.test,e.Sequence,q))),b.push(";"),y.update&&(b.push(h),b.push(S.generateExpression(y.update,e.Sequence,q))),b.push(")")}),b.push(this.maybeBlock(y.body,E&te?he:ae)),b},ForInStatement:function(y,E){return this.generateIterationForStatement("in",y,E&te?he:ae)},ForOfStatement:function(y,E){return this.generateIterationForStatement("of",y,E&te?he:ae)},LabeledStatement:function(y,E){return[y.label.name+":",this.maybeBlock(y.body,E&te?he:ae)]},Program:function(y,E){var b,S,P,V,Z;for(V=y.body.length,b=[_&&V>0?`
`:""],Z=Pe,P=0;P<V;++P)!_&&P===V-1&&(Z|=te),C&&(P===0&&(y.body[0].leadingComments||Ui(y.range[0],y.body[P].range[0],b)),P>0&&!y.body[P-1].trailingComments&&!y.body[P].leadingComments&&Ui(y.body[P-1].range[1],y.body[P].range[0],b)),S=dr(this.generateStatement(y.body[P],Z)),b.push(S),P+1<V&&!Ge(dt(S).toString())&&(C&&y.body[P+1].leadingComments||b.push(d)),C&&P===V-1&&(y.body[P].trailingComments||Ui(y.body[P].range[1],y.range[1],b));return b},FunctionDeclaration:function(y,E){return[Ou(y,!0),"function",bl(y)||tr(),y.id?bn(y.id):"",this.generateFunctionBody(y)]},ReturnStatement:function(y,E){return y.argument?[Be("return",this.generateExpression(y.argument,e.Sequence,q)),this.semicolon(E)]:["return"+this.semicolon(E)]},WhileStatement:function(y,E){var b,S=this;return bt(function(){b=["while"+h+"(",S.generateExpression(y.test,e.Sequence,q),")"]}),b.push(this.maybeBlock(y.body,E&te?he:ae)),b},WithStatement:function(y,E){var b,S=this;return bt(function(){b=["with"+h+"(",S.generateExpression(y.object,e.Sequence,q),")"]}),b.push(this.maybeBlock(y.body,E&te?he:ae)),b}},Vt(xt.prototype,xt.Statement),xt.Expression={SequenceExpression:function(y,E,b){var S,P,V;for(e.Sequence<E&&(b|=M),S=[],P=0,V=y.expressions.length;P<V;++P)S.push(this.generateExpression(y.expressions[P],e.Assignment,b)),P+1<V&&S.push(","+h);return ur(S,e.Sequence,E)},AssignmentExpression:function(y,E,b){return this.generateAssignment(y.left,y.right,y.operator,E,b)},ArrowFunctionExpression:function(y,E,b){return ur(this.generateFunctionBody(y),e.ArrowFunction,E)},ConditionalExpression:function(y,E,b){return e.Conditional<E&&(b|=M),ur([this.generateExpression(y.test,e.LogicalOR,b),h+"?"+h,this.generateExpression(y.consequent,e.Assignment,b),h+":"+h,this.generateExpression(y.alternate,e.Assignment,b)],e.Conditional,E)},LogicalExpression:function(y,E,b){return this.BinaryExpression(y,E,b)},BinaryExpression:function(y,E,b){var S,P,V,Z,re,de;return Z=r[y.operator],P=y.operator==="**"?e.Postfix:Z,V=y.operator==="**"?Z:Z+1,Z<E&&(b|=M),re=this.generateExpression(y.left,P,b),de=re.toString(),de.charCodeAt(de.length-1)===47&&i.code.isIdentifierPartES5(y.operator.charCodeAt(0))?S=[re,tr(),y.operator]:S=Be(re,y.operator),re=this.generateExpression(y.right,V,b),y.operator==="/"&&re.toString().charAt(0)==="/"||y.operator.slice(-1)==="<"&&re.toString().slice(0,3)==="!--"?(S.push(tr()),S.push(re)):S=Be(S,re),y.operator==="in"&&!(b&M)?["(",S,")"]:ur(S,Z,E)},CallExpression:function(y,E,b){var S,P,V;for(S=[this.generateExpression(y.callee,e.Call,j)],S.push("("),P=0,V=y.arguments.length;P<V;++P)S.push(this.generateExpression(y.arguments[P],e.Assignment,q)),P+1<V&&S.push(","+h);return S.push(")"),b&Y?ur(S,e.Call,E):["(",S,")"]},NewExpression:function(y,E,b){var S,P,V,Z,re;if(P=y.arguments.length,re=b&ee&&!m&&P===0?pe:Q,S=Be("new",this.generateExpression(y.callee,e.New,re)),!(b&ee)||m||P>0){for(S.push("("),V=0,Z=P;V<Z;++V)S.push(this.generateExpression(y.arguments[V],e.Assignment,q)),V+1<Z&&S.push(","+h);S.push(")")}return ur(S,e.New,E)},MemberExpression:function(y,E,b){var S,P;return S=[this.generateExpression(y.object,e.Call,b&Y?j:Q)],y.computed?(S.push("["),S.push(this.generateExpression(y.property,e.Sequence,b&Y?q:pe)),S.push("]")):(y.object.type===t.Literal&&typeof y.object.value=="number"&&(P=dt(S).toString(),P.indexOf(".")<0&&!/[eExX]/.test(P)&&i.code.isDecimalDigit(P.charCodeAt(P.length-1))&&!(P.length>=2&&P.charCodeAt(0)===48)&&S.push(" ")),S.push("."),S.push(bn(y.property))),ur(S,e.Member,E)},MetaProperty:function(y,E,b){var S;return S=[],S.push(typeof y.meta=="string"?y.meta:bn(y.meta)),S.push("."),S.push(typeof y.property=="string"?y.property:bn(y.property)),ur(S,e.Member,E)},UnaryExpression:function(y,E,b){var S,P,V,Z,re;return P=this.generateExpression(y.argument,e.Unary,q),h===""?S=Be(y.operator,P):(S=[y.operator],y.operator.length>2?S=Be(S,P):(Z=dt(S).toString(),re=Z.charCodeAt(Z.length-1),V=P.toString().charCodeAt(0),((re===43||re===45)&&re===V||i.code.isIdentifierPartES5(re)&&i.code.isIdentifierPartES5(V))&&S.push(tr()),S.push(P))),ur(S,e.Unary,E)},YieldExpression:function(y,E,b){var S;return y.delegate?S="yield*":S="yield",y.argument&&(S=Be(S,this.generateExpression(y.argument,e.Yield,q))),ur(S,e.Yield,E)},AwaitExpression:function(y,E,b){var S=Be(y.all?"await*":"await",this.generateExpression(y.argument,e.Await,q));return ur(S,e.Await,E)},UpdateExpression:function(y,E,b){return y.prefix?ur([y.operator,this.generateExpression(y.argument,e.Unary,q)],e.Unary,E):ur([this.generateExpression(y.argument,e.Postfix,q),y.operator],e.Postfix,E)},FunctionExpression:function(y,E,b){var S=[Ou(y,!0),"function"];return y.id?(S.push(bl(y)||tr()),S.push(bn(y.id))):S.push(bl(y)||h),S.push(this.generateFunctionBody(y)),S},ArrayPattern:function(y,E,b){return this.ArrayExpression(y,E,b,!0)},ArrayExpression:function(y,E,b,S){var P,V,Z=this;return y.elements.length?(V=S?!1:y.elements.length>1,P=["[",V?d:""],bt(function(re){var de,ot;for(de=0,ot=y.elements.length;de<ot;++de)y.elements[de]?(P.push(V?re:""),P.push(Z.generateExpression(y.elements[de],e.Assignment,q))):(V&&P.push(re),de+1===ot&&P.push(",")),de+1<ot&&P.push(","+(V?d:h))}),V&&!Ge(dt(P).toString())&&P.push(d),P.push(V?o:""),P.push("]"),P):"[]"},RestElement:function(y,E,b){return"..."+this.generatePattern(y.argument)},ClassExpression:function(y,E,b){var S,P;return S=["class"],y.id&&(S=Be(S,this.generateExpression(y.id,e.Sequence,q))),y.superClass&&(P=Be("extends",this.generateExpression(y.superClass,e.Unary,q)),S=Be(S,P)),S.push(h),S.push(this.generateStatement(y.body,he)),S},MethodDefinition:function(y,E,b){var S,P;return y.static?S=["static"+h]:S=[],y.kind==="get"||y.kind==="set"?P=[Be(y.kind,this.generatePropertyKey(y.key,y.computed)),this.generateFunctionBody(y.value)]:P=[Gy(y),this.generatePropertyKey(y.key,y.computed),this.generateFunctionBody(y.value)],Be(S,P)},Property:function(y,E,b){return y.kind==="get"||y.kind==="set"?[y.kind,tr(),this.generatePropertyKey(y.key,y.computed),this.generateFunctionBody(y.value)]:y.shorthand?y.value.type==="AssignmentPattern"?this.AssignmentPattern(y.value,e.Sequence,q):this.generatePropertyKey(y.key,y.computed):y.method?[Gy(y),this.generatePropertyKey(y.key,y.computed),this.generateFunctionBody(y.value)]:[this.generatePropertyKey(y.key,y.computed),":"+h,this.generateExpression(y.value,e.Assignment,q)]},ObjectExpression:function(y,E,b){var S,P,V,Z=this;return y.properties.length?(S=y.properties.length>1,bt(function(){V=Z.generateExpression(y.properties[0],e.Sequence,q)}),!S&&!ft(dt(V).toString())?["{",h,V,h,"}"]:(bt(function(re){var de,ot;if(P=["{",d,re,V],S)for(P.push(","+d),de=1,ot=y.properties.length;de<ot;++de)P.push(re),P.push(Z.generateExpression(y.properties[de],e.Sequence,q)),de+1<ot&&P.push(","+d)}),Ge(dt(P).toString())||P.push(d),P.push(o),P.push("}"),P)):"{}"},AssignmentPattern:function(y,E,b){return this.generateAssignment(y.left,y.right,"=",E,b)},ObjectPattern:function(y,E,b){var S,P,V,Z,re,de=this;if(!y.properties.length)return"{}";if(Z=!1,y.properties.length===1)re=y.properties[0],re.type===t.Property&&re.value.type!==t.Identifier&&(Z=!0);else for(P=0,V=y.properties.length;P<V;++P)if(re=y.properties[P],re.type===t.Property&&!re.shorthand){Z=!0;break}return S=["{",Z?d:""],bt(function(ot){var F,O;for(F=0,O=y.properties.length;F<O;++F)S.push(Z?ot:""),S.push(de.generateExpression(y.properties[F],e.Sequence,q)),F+1<O&&S.push(","+(Z?d:h))}),Z&&!Ge(dt(S).toString())&&S.push(d),S.push(Z?o:""),S.push("}"),S},ThisExpression:function(y,E,b){return"this"},Super:function(y,E,b){return"super"},Identifier:function(y,E,b){return bn(y)},ImportDefaultSpecifier:function(y,E,b){return bn(y.id||y.local)},ImportNamespaceSpecifier:function(y,E,b){var S=["*"],P=y.id||y.local;return P&&S.push(h+"as"+tr()+bn(P)),S},ImportSpecifier:function(y,E,b){var S=y.imported,P=[S.name],V=y.local;return V&&V.name!==S.name&&P.push(tr()+"as"+tr()+bn(V)),P},ExportSpecifier:function(y,E,b){var S=y.local,P=[S.name],V=y.exported;return V&&V.name!==S.name&&P.push(tr()+"as"+tr()+bn(V)),P},Literal:function(y,E,b){var S;if(y.hasOwnProperty("raw")&&A&&v.raw)try{if(S=A(y.raw).body[0].expression,S.type===t.Literal&&S.value===y.value)return y.raw}catch{}return y.regex?"/"+y.regex.pattern+"/"+y.regex.flags:y.value===null?"null":typeof y.value=="string"?Fn(y.value):typeof y.value=="number"?cn(y.value):typeof y.value=="boolean"?y.value?"true":"false":ys(y.value)},GeneratorExpression:function(y,E,b){return this.ComprehensionExpression(y,E,b)},ComprehensionExpression:function(y,E,b){var S,P,V,Z,re=this;return S=y.type===t.GeneratorExpression?["("]:["["],v.moz.comprehensionExpressionStartsWithAssignment&&(Z=this.generateExpression(y.body,e.Assignment,q),S.push(Z)),y.blocks&&bt(function(){for(P=0,V=y.blocks.length;P<V;++P)Z=re.generateExpression(y.blocks[P],e.Sequence,q),P>0||v.moz.comprehensionExpressionStartsWithAssignment?S=Be(S,Z):S.push(Z)}),y.filter&&(S=Be(S,"if"+h),Z=this.generateExpression(y.filter,e.Sequence,q),S=Be(S,["(",Z,")"])),v.moz.comprehensionExpressionStartsWithAssignment||(Z=this.generateExpression(y.body,e.Assignment,q),S=Be(S,Z)),S.push(y.type===t.GeneratorExpression?")":"]"),S},ComprehensionBlock:function(y,E,b){var S;return y.left.type===t.VariableDeclaration?S=[y.left.kind,tr(),this.generateStatement(y.left.declarations[0],Ee)]:S=this.generateExpression(y.left,e.Call,q),S=Be(S,y.of?"of":"in"),S=Be(S,this.generateExpression(y.right,e.Sequence,q)),["for"+h+"(",S,")"]},SpreadElement:function(y,E,b){return["...",this.generateExpression(y.argument,e.Assignment,q)]},TaggedTemplateExpression:function(y,E,b){var S=j;b&Y||(S=Q);var P=[this.generateExpression(y.tag,e.Call,S),this.generateExpression(y.quasi,e.Primary,oe)];return ur(P,e.TaggedTemplate,E)},TemplateElement:function(y,E,b){return y.value.raw},TemplateLiteral:function(y,E,b){var S,P,V;for(S=["`"],P=0,V=y.quasis.length;P<V;++P)S.push(this.generateExpression(y.quasis[P],e.Primary,q)),P+1<V&&(S.push("${"+h),S.push(this.generateExpression(y.expressions[P],e.Sequence,q)),S.push(h+"}"));return S.push("`"),S},ModuleSpecifier:function(y,E,b){return this.Literal(y,E,b)},ImportExpression:function(y,E,b){return ur(["import(",this.generateExpression(y.source,e.Assignment,q),")"],e.Call,E)}},Vt(xt.prototype,xt.Expression),xt.prototype.generateExpression=function(y,E,b){var S,P;return P=y.type||t.Property,v.verbatim&&y.hasOwnProperty(v.verbatim)?Jy(y,E):(S=this[P](y,E,b),v.comment&&(S=gs(y,S)),dt(S,y))},xt.prototype.generateStatement=function(y,E){var b,S;return b=this[y.type](y,E),v.comment&&(b=gs(y,b)),S=dt(b).toString(),y.type===t.Program&&!_&&d===""&&S.charAt(S.length-1)===`
`&&(b=x?dt(b).replaceRight(/\s+$/,""):S.replace(/\s+$/,"")),dt(b,y)};function l1(y){var E;if(E=new xt,$(y))return E.generateStatement(y,ae);if(I(y))return E.generateExpression(y,e.Sequence,q);throw new Error("Unknown node type: "+y.type)}function f1(y,E){var b=Je(),S,P;return E!=null?(typeof E.indent=="string"&&(b.format.indent.style=E.indent),typeof E.base=="number"&&(b.format.indent.base=E.base),E=At(b,E),a=E.format.indent.style,typeof E.base=="string"?o=E.base:o=at(a,E.format.indent.base)):(E=b,a=E.format.indent.style,o=at(a,E.format.indent.base)),u=E.format.json,c=E.format.renumber,l=u?!1:E.format.hexadecimal,f=u?"double":E.format.quotes,p=E.format.escapeless,d=E.format.newline,h=E.format.space,E.format.compact&&(d=h=a=o=""),m=E.format.parentheses,g=E.format.semicolons,_=E.format.safeConcatenation,D=E.directive,A=u?null:E.parse,x=E.sourceMap,B=E.sourceCode,C=E.format.preserveBlankLines&&B!==null,v=E,x&&(na.browser?n=globalThis.sourceMap.SourceNode:n=lk().SourceNode),S=l1(y),x?(P=S.toStringWithSourceMap({file:E.file,sourceRoot:E.sourceMapRoot}),E.sourceContent&&P.map.setSourceContent(E.sourceMap,E.sourceContent),E.sourceMapWithCode?P:P.map.toString()):(P={code:S.toString(),map:null},E.sourceMapWithCode?P:P.code)}T={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},k=Je().format,na.version=fk().version,na.generate=f1,na.attachComments=s.attachComments,na.Precedence=At({},e),na.browser=!1,na.FORMAT_MINIFY=T,na.FORMAT_DEFAULTS=k})()});var hk=w((_Pe,pk)=>{var Ute=dk().generate;pk.exports=function(t,e){e||(e={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var u=[],c=0,l=i.elements.length;c<l;c++){var f=s(i.elements[c]);if(f===r)return r;u.push(f)}return u}else if(i.type==="ObjectExpression"){for(var p={},c=0;c<i.properties.length;c++){var d=i.properties[c],h=d.value===null?d.value:s(d.value);if(h===r)return r;p[d.key.value||d.key.name]=h}return p}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var l=s(i.left);if(l===r)return r;var m=s(i.right);if(m===r)return r;var g=i.operator;return g==="=="?l==m:g==="==="?l===m:g==="!="?l!=m:g==="!=="?l!==m:g==="+"?l+m:g==="-"?l-m:g==="*"?l*m:g==="/"?l/m:g==="%"?l%m:g==="<"?l<m:g==="<="?l<=m:g===">"?l>m:g===">="?l>=m:g==="|"?l|m:g==="&"?l&m:g==="^"?l^m:g==="&&"?l&&m:g==="||"?l||m:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(e,i.name)?e[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(e,"this")?e.this:r;if(i.type==="CallExpression"){var _=s(i.callee);if(_===r||typeof _!="function")return r;var D=i.callee.object?s(i.callee.object):r;D===r&&(D=null);for(var v=[],c=0,l=i.arguments.length;c<l;c++){var f=s(i.arguments[c]);if(f===r)return r;v.push(f)}return _.apply(D,v)}else if(i.type==="MemberExpression"){var p=s(i.object);if(p===r||typeof p=="function")return r;if(i.property.type==="Identifier")return p[i.property.name];var d=s(i.property);return d===r?r:p[d]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var A=i.body.body,x={};Object.keys(e).forEach(function(ee){x[ee]=e[ee]});for(var c=0;c<i.params.length;c++){var B=i.params[c];if(B.type=="Identifier")e[B.name]=null;else return r}for(var c in A)if(s(A[c])===r)return r;e=x;var C=Object.keys(e),T=C.map(function(ee){return e[ee]});return Function(C.join(", "),"return "+Ute(i)).apply(null,T)}else if(i.type==="TemplateLiteral"){for(var k="",c=0;c<i.expressions.length;c++)k+=s(i.quasis[c]),k+=s(i.expressions[c]);return k+=s(i.quasis[c]),k}else if(i.type==="TaggedTemplateExpression"){var I=s(i.tag),$=i.quasi,M=$.quasis.map(s),Y=$.expressions.map(s);return I.apply(null,[M].concat(Y))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(t);return n===r?void 0:n}});var bk=w(Oi=>{"use strict";var Lte=Oi&&Oi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Kte=Oi&&Oi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vte=Oi&&Oi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lte(e,t,r);return Kte(e,t),e},Hte=Oi&&Oi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.Handlers=void 0;var lA=Vte(BF()),zte=TF(),gk=Bi(),Wte=Hte(hk());function yk(t){return function(e,r,n,s){var i=e.value,o=e.path,a=[],u=(function(c,l){vk(c)?(c.forEach(function(f,p){a.length>=s||n(p,f,r)&&a.push({path:l.concat(p),value:f})}),c.forEach(function(f,p){a.length>=s||t&&u(f,l.concat(p))})):Gte(c)&&(Object.keys(c).forEach(function(f){a.length>=s||n(f,c[f],r)&&a.push({path:l.concat(f),value:c[f]})}),Object.keys(c).forEach(function(f){a.length>=s||t&&u(c[f],l.concat(f))}))}).bind(this);return u(i,o),a}}function fA(t,e){try{return(0,Wte.default)(t,e)}catch{}}function qg(t){return function(e,r,n){return this.descend(r,e.expression.value,t,n)}}function Ug(t){return function(e,r,n){return this.traverse(r,e.expression.value,t,n)}}function mk(t){return t=t.filter(function(e){return e}),Xte(t,function(e){return e.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function Jte(t){var e=String(t);return e.match(/^-?[0-9]+$/)?parseInt(e):null}function vk(t){return Array.isArray(t)}function Gte(t){return t&&!(t instanceof Array)&&t instanceof Object}function cA(t,e,r){var n=lA.parse(e).body[0].expression,s=fA(n,{"@":t.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=gk.JSONPath.nodes(t.value,i);return o.forEach(function(a){a.path=t.path.concat(a.path.slice(1))}),o}var Zte=function(){function t(){this._fns={"member-child-identifier":function(e,r){var n=e.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":Ug(function(e,r,n){return e==n}),"subscript-child-numeric_literal":qg(function(e,r,n){return e===n}),"member-child-numeric_literal":qg(function(e,r,n){return String(e)===String(n)}),"subscript-descendant-numeric_literal":Ug(function(e,r,n){return e===n}),"member-child-wildcard":qg(function(){return!0}),"member-descendant-wildcard":Ug(function(){return!0}),"subscript-descendant-wildcard":Ug(function(){return!0}),"subscript-child-wildcard":qg(function(){return!0}),"subscript-child-slice":function(e,r){if(vk(r.value)){var n=e.expression.value.split(":").map(Jte),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return zte.slice.apply(null,[s].concat(n))}},"subscript-child-union":function(e,r){var n=[];return e.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),mk(n)},"subscript-descendant-union":function(e,r,n){var s=this,i=[],o=gk.JSONPath.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||e.expression.value.forEach(function(u){var c={operation:"subscript",scope:"child",expression:u.expression},l=s.resolve(c),f=l(c,a);i=i.concat(f)})}),mk(i)},"subscript-child-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=lA.parse(s).body[0].expression,o=function(a,u){return fA(i,{"@":u})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=lA.parse(s).body[0].expression,o=function(a,u){return fA(i,{"@":u})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return cA(r,n,"$[{{value}}]")},"member-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return cA(r,n,"$.{{value}}")},"member-descendant-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return cA(r,n,"$..value")}},this.initialize()}return t.prototype.initialize=function(){this.traverse=yk(!0),this.descend=yk(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},t.prototype.resolve=function(e){var r=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},t.prototype.register=function(e,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[e]=r},t}();Oi.Handlers=Zte;function Xte(t,e){for(var r=[],n=[],s=0,i=t?.length;s<i;s++){var o=t[s],a=e?e(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}});var wk=w(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});Lg.TOKENS=void 0;Lg.TOKENS={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}});var _k=w(Eh=>{var Kg=function(){var t=function(B,C,T,k){for(T=T||{},k=B.length;k--;T[B[k]]=C);return T},e=[1,5],r=[1,6],n=[1,7],s=[1,8],i=[1,9],o=[1,18],a=[1,19],u=[1,20],c=[1,12,14,22],l=[1,29],f=[1,30],p=[1,33],d=[1,35],h=[1,31],m=[1,36],g=[1,37],_=[24,28],D={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(C,T,k,I,$,M,Y){I.ast||(I.ast=v,v.initialize());var ee=M.length-1;switch($){case 1:return I.ast.set({expression:{type:"root",value:M[ee]}}),I.ast.unshift(),I.ast.yield();break;case 2:return I.ast.set({expression:{type:"root",value:M[ee-1]}}),I.ast.unshift(),I.ast.yield();break;case 3:return I.ast.unshift(),I.ast.yield();break;case 4:return I.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:M[ee-1]}}),I.ast.unshift(),I.ast.yield();break;case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:I.ast.set({operation:"member"}),I.ast.push();break;case 8:I.ast.set({operation:"subscript"}),I.ast.push();break;case 9:case 19:I.ast.set({scope:"child"});break;case 10:case 20:I.ast.set({scope:"descendant"});break;case 12:I.ast.set({scope:"child",operation:"member"});break;case 14:I.ast.set({expression:{type:"wildcard",value:M[ee]}});break;case 15:I.ast.set({expression:{type:"identifier",value:M[ee]}});break;case 16:I.ast.set({expression:{type:"script_expression",value:M[ee]}});break;case 17:I.ast.set({expression:{type:"numeric_literal",value:parseInt(M[ee])}});break;case 24:M[ee].length>1?I.ast.set({expression:{type:"union",value:M[ee]}}):this.$=M[ee];break;case 25:this.$=[M[ee]];break;case 26:this.$=M[ee-2].concat(M[ee]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(M[ee])}},I.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:M[ee]}},I.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:M[ee]}},I.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:M[ee]}},I.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:M[ee]}},I.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:M[ee]}},I.ast.set(this.$);break;case 33:case 34:this.$=M[ee];break}},table:[{3:1,4:[1,2],6:3,13:4,15:e,16:r,17:n,18:s,19:i},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,12]),t(c,[2,14]),t(c,[2,15]),t(c,[2,16]),t(c,[2,17]),t(c,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,5]),t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,19]),t(c,[2,20]),{13:23,15:e,16:r,17:n,18:s,19:i},{13:24,15:e,16:r,17:n,18:s,19:i,22:[1,25]},{15:l,17:f,18:p,23:26,25:27,26:28,27:32,29:34,30:d,31:h,32:m,33:g},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,6]),t(c,[2,11]),t(c,[2,13]),{15:l,17:f,18:p,23:38,25:27,26:28,27:32,29:34,30:d,31:h,32:m,33:g},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},t(_,[2,25]),t(_,[2,27]),t(_,[2,28]),t(_,[2,29]),t(_,[2,33]),t(_,[2,34]),{24:[1,41]},t(c,[2,21]),{18:p,27:42,29:34,30:d,32:m,33:g},t(c,[2,22]),t(_,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(C,T){if(T.recoverable)this.trace(C);else{var k=new Error(C);throw k.hash=T,k}},parse:function(C){var T=this,k=[0],I=[],$=[null],M=[],Y=this.table,ee="",U=0,G=0,te=0,W=2,j=1,q=M.slice.call(arguments,1),Q=Object.create(this.lexer),oe={yy:{}};for(var pe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,pe)&&(oe.yy[pe]=this.yy[pe]);Q.setInput(C,oe.yy),oe.yy.lexer=Q,oe.yy.parser=this,typeof Q.yylloc>"u"&&(Q.yylloc={});var ae=Q.yylloc;M.push(ae);var he=Q.options&&Q.options.ranges;typeof oe.yy.parseError=="function"?this.parseError=oe.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ee(fr){k.length=k.length-2*fr,$.length=$.length-fr,M.length=M.length-fr}for(var Pe=function(){var fr;return fr=Q.lex()||j,typeof fr!="number"&&(fr=T.symbols_[fr]||fr),fr},Fe,Je,at,ft,Ge,Vt,At={},cn,lr,ys,qi;;){if(at=k[k.length-1],this.defaultActions[at]?ft=this.defaultActions[at]:((Fe===null||typeof Fe>"u")&&(Fe=Pe()),ft=Y[at]&&Y[at][Fe]),typeof ft>"u"||!ft.length||!ft[0]){var mo="";qi=[];for(cn in Y[at])this.terminals_[cn]&&cn>W&&qi.push("'"+this.terminals_[cn]+"'");Q.showPosition?mo="Parse error on line "+(U+1)+`:
`+Q.showPosition()+`
Expecting `+qi.join(", ")+", got '"+(this.terminals_[Fe]||Fe)+"'":mo="Parse error on line "+(U+1)+": Unexpected "+(Fe==j?"end of input":"'"+(this.terminals_[Fe]||Fe)+"'"),this.parseError(mo,{text:Q.match,token:this.terminals_[Fe]||Fe,line:Q.yylineno,loc:ae,expected:qi})}if(ft[0]instanceof Array&&ft.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+Fe);switch(ft[0]){case 1:k.push(Fe),$.push(Q.yytext),M.push(Q.yylloc),k.push(ft[1]),Fe=null,Je?(Fe=Je,Je=null):(G=Q.yyleng,ee=Q.yytext,U=Q.yylineno,ae=Q.yylloc,te>0&&te--);break;case 2:if(lr=this.productions_[ft[1]][1],At.$=$[$.length-lr],At._$={first_line:M[M.length-(lr||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(lr||1)].first_column,last_column:M[M.length-1].last_column},he&&(At._$.range=[M[M.length-(lr||1)].range[0],M[M.length-1].range[1]]),Vt=this.performAction.apply(At,[ee,G,U,oe.yy,ft[1],$,M].concat(q)),typeof Vt<"u")return Vt;lr&&(k=k.slice(0,-1*lr*2),$=$.slice(0,-1*lr),M=M.slice(0,-1*lr)),k.push(this.productions_[ft[1]][0]),$.push(At.$),M.push(At._$),ys=Y[k[k.length-2]][k[k.length-1]],k.push(ys);break;case 3:return!0}}return!0}},v={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(B){for(var C in B)this._node[C]=B[C];return this._node},node:function(B){return arguments.length&&(this._node=B),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var B=this._nodes;return this.initialize(),B}},A=function(){var B={EOF:1,parseError:function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},setInput:function(C,T){return this.yy=T||this.yy||{},this._input=C,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var C=this._input[0];this.yytext+=C,this.yyleng++,this.offset++,this.match+=C,this.matched+=C;var T=C.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),C},unput:function(C){var T=C.length,k=C.split(/(?:\r\n?|\n)/g);this._input=C+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var $=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===I.length?this.yylloc.first_column:0)+I[I.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[$[0],$[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(C){this.unput(this.match.slice(C))},pastInput:function(){var C=this.matched.substr(0,this.matched.length-this.match.length);return(C.length>20?"...":"")+C.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var C=this.match;return C.length<20&&(C+=this._input.substr(0,20-C.length)),(C.substr(0,20)+(C.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var C=this.pastInput(),T=new Array(C.length+1).join("-");return C+this.upcomingInput()+`
`+T+"^"},test_match:function(C,T){var k,I,$;if(this.options.backtrack_lexer&&($={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($.yylloc.range=this.yylloc.range.slice(0))),I=C[0].match(/(?:\r\n?|\n).*/g),I&&(this.yylineno+=I.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+C[0].length},this.yytext+=C[0],this.match+=C[0],this.matches=C,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(C[0].length),this.matched+=C[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var M in $)this[M]=$[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var C,T,k,I;this._more||(this.yytext="",this.match="");for(var $=this._currentRules(),M=0;M<$.length;M++)if(k=this._input.match(this.rules[$[M]]),k&&(!T||k[0].length>T[0].length)){if(T=k,I=M,this.options.backtrack_lexer){if(C=this.test_match(k,$[M]),C!==!1)return C;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(C=this.test_match(T,$[I]),C!==!1?C:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(T,k,I,$){var M=$;switch(I){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return k.yytext=k.yytext.substr(1,k.yyleng-2),32;break;case 11:return k.yytext=k.yytext.substr(1,k.yyleng-2),33;break;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return B}();D.lexer=A;function x(){this.yy={}}return x.prototype=D,D.Parser=x,new x}();typeof xP<"u"&&typeof Eh<"u"&&(Eh.parser=Kg,Eh.Parser=Kg.Parser,Eh.parse=function(){return Kg.parse.apply(Kg,arguments)})});var Ek=w(eo=>{"use strict";var Yte=eo&&eo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qte=eo&&eo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ere=eo&&eo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Yte(e,t,r);return Qte(e,t),e};Object.defineProperty(eo,"__esModule",{value:!0});eo.Parser=void 0;var tre=ere(_k());function rre(){var t=new tre.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t}eo.Parser=rre});var Sk=w(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});Vg.assert=void 0;var nre=function(){function t(){}return t.ok=function(e,r){if(!e)throw new Error(r)},t.equal=function(e,r,n){if(e!==r)throw new Error(n)},t}();Vg.assert=nre});var Ak=w(zg=>{"use strict";Object.defineProperty(zg,"__esModule",{value:!0});zg.JSONPath=void 0;var ire=bk(),sre=wk(),Hg=Ek(),Lr=Sk(),ore=function(){function t(){}return t.parse=function(e){return Lr.assert.ok(typeof e=="string","we need a path"),new Hg.Parser().parse(e)},t.parent=function(e,r){Lr.assert.ok(e instanceof Object,"obj needs to be an object"),Lr.assert.ok(r,"we need a path");var n=this.nodes(e,r)[0],s=n.path.pop();return this.value(e,n.path)},t.apply=function(e,r,n){Lr.assert.ok(e instanceof Object,"obj needs to be an object"),Lr.assert.ok(r,"we need a path"),Lr.assert.equal(typeof n,"function","fn needs to be function");var s=this.nodes(e,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(e,this.stringify(i.path)),u=i.value=n.call(e,a[o]);a[o]=u},this),s},t.value=function(e,r,n){if(Lr.assert.ok(e instanceof Object,"obj needs to be an object"),Lr.assert.ok(r,"we need a path"),n!==void 0){var s=this.nodes(e,r).shift();if(!s)return this._vivify(e,r,n);var i=s.path.slice(-1).shift(),o=this.parent(e,this.stringify(s.path));o[i]=n}return this.query(e,this.stringify(r),1).shift()},t._vivify=function(e,r,n){var s=this;Lr.assert.ok(e instanceof Object,"obj needs to be an object"),Lr.assert.ok(r,"we need a path");var i=new Hg.Parser().parse(r).map(function(a){return a.expression.value}),o=function(a,u){var c=a.pop(),l=s.value(e,a);l||(o(a.concat(),typeof c=="string"?{}:[]),l=s.value(e,a)),l[c]=u};return o(i,n),this.query(e,r)[0]},t.query=function(e,r,n){Lr.assert.ok(e instanceof Object,"obj needs to be an object"),Lr.assert.ok(typeof r=="string","we need a path");var s=this.nodes(e,r,n).map(function(i){return i.value});return s},t.paths=function(e,r,n){Lr.assert.ok(e instanceof Object,"obj needs to be an object"),Lr.assert.ok(r,"we need a path");var s=this.nodes(e,r,n).map(function(i){return i.path});return s},t.nodes=function(e,r,n){if(Lr.assert.ok(e instanceof Object,"obj needs to be an object"),Lr.assert.ok(r,"we need a path"),n===0)return[];var s=new Hg.Parser().parse(r),i=new ire.Handlers,o=[{path:["$"],value:e}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(u,c){if(!(a.length>=n)){var l=i.resolve(u),f=[];o.forEach(function(p){if(!(a.length>=n)){var d=l(u,p,n);c==s.length-1?a=a.concat(d||[]):f=f.concat(d||[])}}),o=f}}),n?a.slice(0,n):a):o},t.stringify=function(e){Lr.assert.ok(e,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return e=this._normalize(e),e.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},t._normalize=function(e){if(Lr.assert.ok(e,"we need a path"),typeof e=="string")return new Hg.Parser().parse(e);if(Array.isArray(e)&&typeof e[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return e.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+sre.TOKENS.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(e)&&typeof e[0]=="object")return e;throw new Error("couldn't understand path "+e)},t}();zg.JSONPath=ore});var Bi=w(Rc=>{"use strict";var are=Rc&&Rc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ure=Rc&&Rc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&are(e,t,r)};Object.defineProperty(Rc,"__esModule",{value:!0});ure(Ak(),Rc)});var Ck=w((BPe,Dk)=>{"use strict";var cre="Function.prototype.bind called on incompatible ",lre=Object.prototype.toString,fre=Math.max,dre="[object Function]",xk=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},pre=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},hre=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};Dk.exports=function(e){var r=this;if(typeof r!="function"||lre.apply(r)!==dre)throw new TypeError(cre+r);for(var n=pre(arguments,1),s,i=function(){if(this instanceof s){var l=r.apply(this,xk(n,arguments));return Object(l)===l?l:this}return r.apply(e,xk(n,arguments))},o=fre(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(s=Function("binder","return function ("+hre(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s}});var Wg=w((TPe,Pk)=>{"use strict";var yre=Ck();Pk.exports=Function.prototype.bind||yre});var Bk=w((IPe,Ok)=>{"use strict";Ok.exports=Error});var Ik=w((FPe,Tk)=>{"use strict";Tk.exports=EvalError});var kk=w((kPe,Fk)=>{"use strict";Fk.exports=RangeError});var $k=w((RPe,Rk)=>{"use strict";Rk.exports=ReferenceError});var Jg=w(($Pe,Nk)=>{"use strict";Nk.exports=SyntaxError});var gt=w((NPe,Mk)=>{"use strict";Mk.exports=TypeError});var qk=w((MPe,jk)=>{"use strict";jk.exports=URIError});var dA=w((jPe,Uk)=>{"use strict";Uk.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0}});var $c=w((qPe,Kk)=>{"use strict";var Lk=typeof Symbol<"u"&&Symbol,mre=dA();Kk.exports=function(){return typeof Lk!="function"||typeof Symbol!="function"||typeof Lk("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:mre()}});var hA=w((UPe,Vk)=>{"use strict";var pA={__proto__:null,foo:{}},gre=Object;Vk.exports=function(){return{__proto__:pA}.foo===pA.foo&&!(pA instanceof gre)}});var Nc=w((LPe,Hk)=>{"use strict";var vre=Function.prototype.call,bre=Object.prototype.hasOwnProperty,wre=Wg();Hk.exports=wre.call(vre,bre)});var Ar=w((KPe,Zk)=>{"use strict";var lt,_re=Bk(),Ere=Ik(),Sre=kk(),Are=$k(),Vf=Jg(),Kf=gt(),xre=qk(),Gk=Function,yA=function(t){try{return Gk('"use strict"; return ('+t+").constructor;")()}catch{}},Mc=Object.getOwnPropertyDescriptor;if(Mc)try{Mc({},"")}catch{Mc=null}var mA=function(){throw new Kf},Dre=Mc?function(){try{return arguments.callee,mA}catch{try{return Mc(arguments,"callee").get}catch{return mA}}}():mA,Uf=$c()(),Cre=hA()(),Kr=Object.getPrototypeOf||(Cre?function(t){return t.__proto__}:null),Lf={},Pre=typeof Uint8Array>"u"||!Kr?lt:Kr(Uint8Array),jc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?lt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?lt:ArrayBuffer,"%ArrayIteratorPrototype%":Uf&&Kr?Kr([][Symbol.iterator]()):lt,"%AsyncFromSyncIteratorPrototype%":lt,"%AsyncFunction%":Lf,"%AsyncGenerator%":Lf,"%AsyncGeneratorFunction%":Lf,"%AsyncIteratorPrototype%":Lf,"%Atomics%":typeof Atomics>"u"?lt:Atomics,"%BigInt%":typeof BigInt>"u"?lt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?lt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?lt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?lt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":_re,"%eval%":eval,"%EvalError%":Ere,"%Float32Array%":typeof Float32Array>"u"?lt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?lt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?lt:FinalizationRegistry,"%Function%":Gk,"%GeneratorFunction%":Lf,"%Int8Array%":typeof Int8Array>"u"?lt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?lt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?lt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Uf&&Kr?Kr(Kr([][Symbol.iterator]())):lt,"%JSON%":typeof JSON=="object"?JSON:lt,"%Map%":typeof Map>"u"?lt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Uf||!Kr?lt:Kr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?lt:Promise,"%Proxy%":typeof Proxy>"u"?lt:Proxy,"%RangeError%":Sre,"%ReferenceError%":Are,"%Reflect%":typeof Reflect>"u"?lt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?lt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Uf||!Kr?lt:Kr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?lt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Uf&&Kr?Kr(""[Symbol.iterator]()):lt,"%Symbol%":Uf?Symbol:lt,"%SyntaxError%":Vf,"%ThrowTypeError%":Dre,"%TypedArray%":Pre,"%TypeError%":Kf,"%Uint8Array%":typeof Uint8Array>"u"?lt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?lt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?lt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?lt:Uint32Array,"%URIError%":xre,"%WeakMap%":typeof WeakMap>"u"?lt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?lt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?lt:WeakSet};if(Kr)try{null.error}catch(t){zk=Kr(Kr(t)),jc["%Error.prototype%"]=zk}var zk,Ore=function t(e){var r;if(e==="%AsyncFunction%")r=yA("async function () {}");else if(e==="%GeneratorFunction%")r=yA("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=yA("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&Kr&&(r=Kr(s.prototype))}return jc[e]=r,r},Wk={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Sh=Wg(),Gg=Nc(),Bre=Sh.call(Function.call,Array.prototype.concat),Tre=Sh.call(Function.apply,Array.prototype.splice),Jk=Sh.call(Function.call,String.prototype.replace),Zg=Sh.call(Function.call,String.prototype.slice),Ire=Sh.call(Function.call,RegExp.prototype.exec),Fre=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,kre=/\\(\\)?/g,Rre=function(e){var r=Zg(e,0,1),n=Zg(e,-1);if(r==="%"&&n!=="%")throw new Vf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Vf("invalid intrinsic syntax, expected opening `%`");var s=[];return Jk(e,Fre,function(i,o,a,u){s[s.length]=a?Jk(u,kre,"$1"):o||i}),s},$re=function(e,r){var n=e,s;if(Gg(Wk,n)&&(s=Wk[n],n="%"+s[0]+"%"),Gg(jc,n)){var i=jc[n];if(i===Lf&&(i=Ore(n)),typeof i>"u"&&!r)throw new Kf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Vf("intrinsic "+e+" does not exist!")};Zk.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Kf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Kf('"allowMissing" argument must be a boolean');if(Ire(/^%?[^%]*%?$/,e)===null)throw new Vf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Rre(e),s=n.length>0?n[0]:"",i=$re("%"+s+"%",r),o=i.name,a=i.value,u=!1,c=i.alias;c&&(s=c[0],Tre(n,Bre([0,1],c)));for(var l=1,f=!0;l<n.length;l+=1){var p=n[l],d=Zg(p,0,1),h=Zg(p,-1);if((d==='"'||d==="'"||d==="`"||h==='"'||h==="'"||h==="`")&&d!==h)throw new Vf("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(u=!0),s+="."+p,o="%"+s+"%",Gg(jc,o))a=jc[o];else if(a!=null){if(!(p in a)){if(!r)throw new Kf("base intrinsic for "+e+" exists, but the property is not available.");return}if(Mc&&l+1>=n.length){var m=Mc(a,p);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[p]}else f=Gg(a,p),a=a[p];f&&!u&&(jc[o]=a)}}return a}});var Ah=w((VPe,Xk)=>{"use strict";var Nre=Ar(),Xg=Nre("%Object.defineProperty%",!0)||!1;if(Xg)try{Xg({},"a",{value:1})}catch{Xg=!1}Xk.exports=Xg});var gA=w((HPe,Yk)=>{"use strict";var Mre=Ar(),Yg=Mre("%Object.getOwnPropertyDescriptor%",!0);if(Yg)try{Yg([],"length")}catch{Yg=null}Yk.exports=Yg});var Qg=w((zPe,t3)=>{"use strict";var Qk=Ah(),jre=Jg(),Hf=gt(),e3=gA();t3.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Hf("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Hf("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Hf("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Hf("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Hf("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Hf("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!e3&&e3(e,r);if(Qk)Qk(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:s===null&&u?u.enumerable:!s,value:n,writable:i===null&&u?u.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new jre("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var xh=w((WPe,n3)=>{"use strict";var vA=Ah(),r3=function(){return!!vA};r3.hasArrayLengthDefineBug=function(){if(!vA)return null;try{return vA([],"length",{value:1}).length!==1}catch{return!0}};n3.exports=r3});var u3=w((JPe,a3)=>{"use strict";var qre=Ar(),i3=Qg(),Ure=xh()(),s3=gA(),o3=gt(),Lre=qre("%Math.floor%");a3.exports=function(e,r){if(typeof e!="function")throw new o3("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Lre(r)!==r)throw new o3("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&s3){var o=s3(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(Ure?i3(e,"length",r,!0,!0):i3(e,"length",r)),e}});var Dh=w((GPe,ev)=>{"use strict";var bA=Wg(),tv=Ar(),Kre=u3(),Vre=gt(),f3=tv("%Function.prototype.apply%"),d3=tv("%Function.prototype.call%"),p3=tv("%Reflect.apply%",!0)||bA.call(d3,f3),c3=Ah(),Hre=tv("%Math.max%");ev.exports=function(e){if(typeof e!="function")throw new Vre("a function is required");var r=p3(bA,d3,arguments);return Kre(r,1+Hre(0,e.length-(arguments.length-1)),!0)};var l3=function(){return p3(bA,f3,arguments)};c3?c3(ev.exports,"apply",{value:l3}):ev.exports.apply=l3});var wA=w((ZPe,y3)=>{"use strict";var h3=Object.prototype.toString;y3.exports=function(e){var r=h3.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&h3.call(e.callee)==="[object Function]"),n}});var A3=w((XPe,S3)=>{"use strict";var E3;Object.keys||(Ch=Object.prototype.hasOwnProperty,_A=Object.prototype.toString,m3=wA(),EA=Object.prototype.propertyIsEnumerable,g3=!EA.call({toString:null},"toString"),v3=EA.call(function(){},"prototype"),Ph=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],rv=function(t){var e=t.constructor;return e&&e.prototype===t},b3={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w3=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!b3["$"+t]&&Ch.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{rv(window[t])}catch{return!0}}catch{return!0}return!1}(),_3=function(t){if(typeof window>"u"||!w3)return rv(t);try{return rv(t)}catch{return!1}},E3=function(e){var r=e!==null&&typeof e=="object",n=_A.call(e)==="[object Function]",s=m3(e),i=r&&_A.call(e)==="[object String]",o=[];if(!r&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var a=v3&&n;if(i&&e.length>0&&!Ch.call(e,0))for(var u=0;u<e.length;++u)o.push(String(u));if(s&&e.length>0)for(var c=0;c<e.length;++c)o.push(String(c));else for(var l in e)!(a&&l==="prototype")&&Ch.call(e,l)&&o.push(String(l));if(g3)for(var f=_3(e),p=0;p<Ph.length;++p)!(f&&Ph[p]==="constructor")&&Ch.call(e,Ph[p])&&o.push(Ph[p]);return o});var Ch,_A,m3,EA,g3,v3,Ph,rv,b3,w3,_3;S3.exports=E3});var P3=w((YPe,C3)=>{"use strict";var zre=Array.prototype.slice,Wre=wA(),x3=Object.keys,nv=x3?function(e){return x3(e)}:A3(),D3=Object.keys;nv.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Wre(n)?D3(zre.call(n)):D3(n)})}else Object.keys=nv;return Object.keys||nv};C3.exports=nv});var su=w((QPe,I3)=>{"use strict";var Jre=P3(),Gre=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Zre=Object.prototype.toString,Xre=Array.prototype.concat,O3=Qg(),Yre=function(t){return typeof t=="function"&&Zre.call(t)==="[object Function]"},B3=xh()(),Qre=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Yre(n)||!n())return}B3?O3(t,e,r,!0):O3(t,e,r)},T3=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Jre(e);Gre&&(n=Xre.call(n,Object.getOwnPropertySymbols(e)));for(var s=0;s<n.length;s+=1)Qre(t,n[s],e[n[s]],r[n[s]])};T3.supportsDescriptors=!!B3;I3.exports=T3});var si=w((eOe,R3)=>{"use strict";var F3=Ar(),k3=Dh(),ene=k3(F3("String.prototype.indexOf"));R3.exports=function(e,r){var n=F3(e,!!r);return typeof n=="function"&&ene(e,".prototype.")>-1?k3(n):n}});var SA=w((tOe,N3)=>{"use strict";var tne=Ar(),$3=tne("%Array%"),rne=!$3.isArray&&si()("Object.prototype.toString");N3.exports=$3.isArray||function(e){return rne(e)==="[object Array]"}});var AA=w((rOe,M3)=>{"use strict";M3.exports=SA()});var xA=w((nOe,j3)=>{"use strict";var nne=Ar(),ine=si(),sne=gt(),one=AA(),ane=nne("%Reflect.apply%",!0)||ine("Function.prototype.apply");j3.exports=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!one(n))throw new sne("Assertion failed: optional `argumentsList`, if provided, must be a List");return ane(e,r,n)}});var q3=w(()=>{});var Ih=w((oOe,sR)=>{var RA=typeof Map=="function"&&Map.prototype,DA=Object.getOwnPropertyDescriptor&&RA?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,sv=RA&&DA&&typeof DA.get=="function"?DA.get:null,U3=RA&&Map.prototype.forEach,$A=typeof Set=="function"&&Set.prototype,CA=Object.getOwnPropertyDescriptor&&$A?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ov=$A&&CA&&typeof CA.get=="function"?CA.get:null,L3=$A&&Set.prototype.forEach,une=typeof WeakMap=="function"&&WeakMap.prototype,Bh=une?WeakMap.prototype.has:null,cne=typeof WeakSet=="function"&&WeakSet.prototype,Th=cne?WeakSet.prototype.has:null,lne=typeof WeakRef=="function"&&WeakRef.prototype,K3=lne?WeakRef.prototype.deref:null,fne=Boolean.prototype.valueOf,dne=Object.prototype.toString,pne=Function.prototype.toString,hne=String.prototype.match,NA=String.prototype.slice,au=String.prototype.replace,yne=String.prototype.toUpperCase,V3=String.prototype.toLowerCase,Q3=RegExp.prototype.test,H3=Array.prototype.concat,to=Array.prototype.join,mne=Array.prototype.slice,z3=Math.floor,BA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,PA=Object.getOwnPropertySymbols,TA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,zf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",yn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===zf||!0)?Symbol.toStringTag:null,eR=Object.prototype.propertyIsEnumerable,W3=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function J3(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Q3.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-z3(-t):z3(t);if(n!==t){var s=String(n),i=NA.call(e,s.length+1);return au.call(s,r,"$&_")+"."+au.call(au.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return au.call(e,r,"$&_")}var IA=q3(),G3=IA.custom,Z3=rR(G3)?G3:null;sR.exports=function t(e,r,n,s){var i=r||{};if(ou(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ou(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ou(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ou(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ou(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return iR(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?J3(e,u):u}if(typeof e=="bigint"){var c=String(e)+"n";return a?J3(e,c):c}var l=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return FA(e)?"[Array]":"[Object]";var f=kne(i,n);if(typeof s>"u")s=[];else if(nR(s,e)>=0)return"[Circular]";function p(Y,ee,U){if(ee&&(s=mne.call(s),s.push(ee)),U){var G={depth:i.depth};return ou(i,"quoteStyle")&&(G.quoteStyle=i.quoteStyle),t(Y,G,n+1,s)}return t(Y,i,n+1,s)}if(typeof e=="function"&&!X3(e)){var d=xne(e),h=iv(e,p);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(h.length>0?" { "+to.call(h,", ")+" }":"")}if(rR(e)){var m=zf?au.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):TA.call(e);return typeof e=="object"&&!zf?Oh(m):m}if(Tne(e)){for(var g="<"+V3.call(String(e.nodeName)),_=e.attributes||[],D=0;D<_.length;D++)g+=" "+_[D].name+"="+tR(gne(_[D].value),"double",i);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+V3.call(String(e.nodeName))+">",g}if(FA(e)){if(e.length===0)return"[]";var v=iv(e,p);return f&&!Fne(v)?"["+kA(v,f)+"]":"[ "+to.call(v,", ")+" ]"}if(bne(e)){var A=iv(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!eR.call(e,"cause")?"{ ["+String(e)+"] "+to.call(H3.call("[cause]: "+p(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+to.call(A,", ")+" }"}if(typeof e=="object"&&o){if(Z3&&typeof e[Z3]=="function"&&IA)return IA(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Dne(e)){var x=[];return U3&&U3.call(e,function(Y,ee){x.push(p(ee,e,!0)+" => "+p(Y,e))}),Y3("Map",sv.call(e),x,f)}if(One(e)){var B=[];return L3&&L3.call(e,function(Y){B.push(p(Y,e))}),Y3("Set",ov.call(e),B,f)}if(Cne(e))return OA("WeakMap");if(Bne(e))return OA("WeakSet");if(Pne(e))return OA("WeakRef");if(_ne(e))return Oh(p(Number(e)));if(Sne(e))return Oh(p(BA.call(e)));if(Ene(e))return Oh(fne.call(e));if(wne(e))return Oh(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===globalThis)return"{ [object globalThis] }";if(!vne(e)&&!X3(e)){var C=iv(e,p),T=W3?W3(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?"":"null prototype",I=!T&&yn&&Object(e)===e&&yn in e?NA.call(uu(e),8,-1):k?"Object":"",$=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",M=$+(I||k?"["+to.call(H3.call([],I||[],k||[]),": ")+"] ":"");return C.length===0?M+"{}":f?M+"{"+kA(C,f)+"}":M+"{ "+to.call(C,", ")+" }"}return String(e)};function tR(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function gne(t){return au.call(String(t),/"/g,"&quot;")}function FA(t){return uu(t)==="[object Array]"&&(!yn||!(typeof t=="object"&&yn in t))}function vne(t){return uu(t)==="[object Date]"&&(!yn||!(typeof t=="object"&&yn in t))}function X3(t){return uu(t)==="[object RegExp]"&&(!yn||!(typeof t=="object"&&yn in t))}function bne(t){return uu(t)==="[object Error]"&&(!yn||!(typeof t=="object"&&yn in t))}function wne(t){return uu(t)==="[object String]"&&(!yn||!(typeof t=="object"&&yn in t))}function _ne(t){return uu(t)==="[object Number]"&&(!yn||!(typeof t=="object"&&yn in t))}function Ene(t){return uu(t)==="[object Boolean]"&&(!yn||!(typeof t=="object"&&yn in t))}function rR(t){if(zf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!TA)return!1;try{return TA.call(t),!0}catch{}return!1}function Sne(t){if(!t||typeof t!="object"||!BA)return!1;try{return BA.call(t),!0}catch{}return!1}var Ane=Object.prototype.hasOwnProperty||function(t){return t in this};function ou(t,e){return Ane.call(t,e)}function uu(t){return dne.call(t)}function xne(t){if(t.name)return t.name;var e=hne.call(pne.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function nR(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Dne(t){if(!sv||!t||typeof t!="object")return!1;try{sv.call(t);try{ov.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Cne(t){if(!Bh||!t||typeof t!="object")return!1;try{Bh.call(t,Bh);try{Th.call(t,Th)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Pne(t){if(!K3||!t||typeof t!="object")return!1;try{return K3.call(t),!0}catch{}return!1}function One(t){if(!ov||!t||typeof t!="object")return!1;try{ov.call(t);try{sv.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Bne(t){if(!Th||!t||typeof t!="object")return!1;try{Th.call(t,Th);try{Bh.call(t,Bh)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Tne(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function iR(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return iR(NA.call(t,0,e.maxStringLength),e)+n}var s=au.call(au.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ine);return tR(s,"single",e)}function Ine(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+yne.call(e.toString(16))}function Oh(t){return"Object("+t+")"}function OA(t){return t+" { ? }"}function Y3(t,e,r,n){var s=n?kA(r,n):to.call(r,", ");return t+" ("+e+") {"+s+"}"}function Fne(t){for(var e=0;e<t.length;e++)if(nR(t[e],`
`)>=0)return!1;return!0}function kne(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=to.call(Array(t.indent+1)," ");else return null;return{base:r,prev:to.call(Array(e+1),r)}}function kA(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+to.call(t,","+r)+`
`+e.prev}function iv(t,e){var r=FA(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=ou(t,s)?e(t[s],t):""}var i=typeof PA=="function"?PA(t):[],o;if(zf){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var u in t)ou(t,u)&&(r&&String(Number(u))===u&&u<t.length||zf&&o["$"+u]instanceof Symbol||(Q3.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof PA=="function")for(var c=0;c<i.length;c++)eR.call(t,i[c])&&n.push("["+e(i[c])+"]: "+e(t[i[c]],t));return n}});var qc=w((aOe,oR)=>{"use strict";oR.exports=function(e){return typeof e=="string"||typeof e=="symbol"}});var uR=w((uOe,aR)=>{"use strict";aR.exports=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}});var os=w((cOe,cR)=>{"use strict";var Rne=uR();cR.exports=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":Rne(e)}});var Fh=w((lOe,fR)=>{"use strict";var lR=gt(),$ne=Ih(),Nne=qc(),Mne=os();fR.exports=function(e,r){if(Mne(e)!=="Object")throw new lR("Assertion failed: Type(O) is not Object");if(!Nne(r))throw new lR("Assertion failed: IsPropertyKey(P) is not true, got "+$ne(r));return e[r]}});var pR=w((fOe,dR)=>{"use strict";var jne=gt(),qne=Ih(),Une=qc();dR.exports=function(e,r){if(!Une(r))throw new jne("Assertion failed: IsPropertyKey(P) is not true, got "+qne(r));return e[r]}});var LA=w((dOe,mR)=>{"use strict";var yR=Function.prototype.toString,Wf=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,jA,av;if(typeof Wf=="function"&&typeof Object.defineProperty=="function")try{jA=Object.defineProperty({},"length",{get:function(){throw av}}),av={},Wf(function(){throw 42},null,jA)}catch(t){t!==av&&(Wf=null)}else Wf=null;var Lne=/^\s*class\b/,qA=function(e){try{var r=yR.call(e);return Lne.test(r)}catch{return!1}},MA=function(e){try{return qA(e)?!1:(yR.call(e),!0)}catch{return!1}},uv=Object.prototype.toString,Kne="[object Object]",Vne="[object Function]",Hne="[object GeneratorFunction]",zne="[object HTMLAllCollection]",Wne="[object HTML document.all class]",Jne="[object HTMLCollection]",Gne=typeof Symbol=="function"&&!!Symbol.toStringTag,Zne=!(0 in[,]),UA=function(){return!1};typeof document=="object"&&(hR=document.all,uv.call(hR)===uv.call(document.all)&&(UA=function(e){if((Zne||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=uv.call(e);return(r===zne||r===Wne||r===Jne||r===Kne)&&e("")==null}catch{}return!1}));var hR;mR.exports=Wf?function(e){if(UA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Wf(e,null,jA)}catch(r){if(r!==av)return!1}return!qA(e)&&MA(e)}:function(e){if(UA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Gne)return MA(e);if(qA(e))return!1;var r=uv.call(e);return r!==Vne&&r!==Hne&&!/^\[object HTML/.test(r)?!1:MA(e)}});var cv=w((pOe,gR)=>{"use strict";gR.exports=LA()});var _R=w((hOe,wR)=>{"use strict";var vR=gt(),Xne=pR(),Yne=cv(),Qne=qc(),bR=Ih();wR.exports=function(e,r){if(!Qne(r))throw new vR("Assertion failed: IsPropertyKey(P) is not true");var n=Xne(e,r);if(n!=null){if(!Yne(n))throw new vR(bR(r)+" is not a function: "+bR(n));return n}}});var lv=w((yOe,ER)=>{"use strict";var eie=dA();ER.exports=function(){return eie()&&!!Symbol.toStringTag}});var zA=w((mOe,DR)=>{"use strict";var KA=si(),SR=lv()(),AR,xR,VA,HA;SR&&(AR=KA("Object.prototype.hasOwnProperty"),xR=KA("RegExp.prototype.exec"),VA={},fv=function(){throw VA},HA={toString:fv,valueOf:fv},typeof Symbol.toPrimitive=="symbol"&&(HA[Symbol.toPrimitive]=fv));var fv,tie=KA("Object.prototype.toString"),rie=Object.getOwnPropertyDescriptor,nie="[object RegExp]";DR.exports=SR?function(e){if(!e||typeof e!="object")return!1;var r=rie(e,"lastIndex"),n=r&&AR(r,"value");if(!n)return!1;try{xR(e,HA)}catch(s){return s===VA}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:tie(e)===nie}});var WA=w((gOe,CR)=>{"use strict";CR.exports=function(e){return!!e}});var BR=w((vOe,OR)=>{"use strict";var iie=Ar(),PR=iie("%Symbol.match%",!0),sie=zA(),oie=WA();OR.exports=function(e){if(!e||typeof e!="object")return!1;if(PR){var r=e[PR];if(typeof r<"u")return oie(r)}return sie(e)}});var kh=w((bOe,TR)=>{"use strict";var aie=Ar(),uie=aie("%String%"),cie=gt();TR.exports=function(e){if(typeof e=="symbol")throw new cie("Cannot convert a Symbol value to a string");return uie(e)}});var FR=w((wOe,IR)=>{"use strict";var lie=gt();IR.exports=function(e,r){if(e==null)throw new lie(r||"Cannot call method on "+e);return e}});var dv=w((_Oe,kR)=>{"use strict";kR.exports=FR()});var $R=w((EOe,RR)=>{"use strict";var $h=function(){return typeof(function(){}).name=="string"},Rh=Object.getOwnPropertyDescriptor;if(Rh)try{Rh([],"length")}catch{Rh=null}$h.functionsHaveConfigurableNames=function(){if(!$h()||!Rh)return!1;var e=Rh(function(){},"name");return!!e&&!!e.configurable};var fie=Function.prototype.bind;$h.boundFunctionsHaveNames=function(){return $h()&&typeof fie=="function"&&(function(){}).bind().name!==""};RR.exports=$h});var JA=w((SOe,MR)=>{"use strict";var NR=Qg(),die=xh()(),pie=$R().functionsHaveConfigurableNames(),hie=gt();MR.exports=function(e,r){if(typeof e!="function")throw new hie("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||pie)&&(die?NR(e,"name",r,!0,!0):NR(e,"name",r)),e}});var GA=w((AOe,jR)=>{"use strict";var yie=JA(),mie=gt(),gie=Object;jR.exports=yie(function(){if(this==null||this!==gie(this))throw new mie("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var ZA=w((xOe,qR)=>{"use strict";var vie=GA(),bie=su().supportsDescriptors,wie=Object.getOwnPropertyDescriptor;qR.exports=function(){if(bie&&/a/mig.flags==="gim"){var e=wie(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return vie}});var KR=w((DOe,LR)=>{"use strict";var _ie=su().supportsDescriptors,Eie=ZA(),Sie=Object.getOwnPropertyDescriptor,Aie=Object.defineProperty,xie=TypeError,UR=Object.getPrototypeOf,Die=/a/;LR.exports=function(){if(!_ie||!UR)throw new xie("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=Eie(),r=UR(Die),n=Sie(r,"flags");return(!n||n.get!==e)&&Aie(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var XA=w((COe,zR)=>{"use strict";var Cie=su(),Pie=Dh(),Oie=GA(),VR=ZA(),Bie=KR(),HR=Pie(VR());Cie(HR,{getPolyfill:VR,implementation:Oie,shim:Bie});zR.exports=HR});var YA=w((POe,WR)=>{"use strict";WR.exports=function(e){return typeof e=="number"&&e>=55296&&e<=56319}});var QA=w((OOe,JR)=>{"use strict";JR.exports=function(e){return typeof e=="number"&&e>=56320&&e<=57343}});var XR=w((BOe,ZR)=>{"use strict";var Tie=Ar(),Iie=gt(),GR=Tie("%String.fromCharCode%"),Fie=YA(),kie=QA();ZR.exports=function(e,r){if(!Fie(e)||!kie(r))throw new Iie("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return GR(e)+GR(r)}});var n4=w((TOe,r4)=>{"use strict";var YR=gt(),t4=si(),Rie=YA(),QR=QA(),$ie=XR(),Nie=t4("String.prototype.charAt"),e4=t4("String.prototype.charCodeAt");r4.exports=function(e,r){if(typeof e!="string")throw new YR("Assertion failed: `string` must be a String");var n=e.length;if(r<0||r>=n)throw new YR("Assertion failed: `position` must be >= 0, and < the length of `string`");var s=e4(e,r),i=Nie(e,r),o=Rie(s),a=QR(s);if(!o&&!a)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(a||r+1===n)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var u=e4(e,r+1);return QR(u)?{"[[CodePoint]]":$ie(s,u),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}});var Nh=w((IOe,i4)=>{"use strict";i4.exports=Number.isNaN||function(e){return e!==e}});var ex=w((FOe,s4)=>{"use strict";var Mie=Nh();s4.exports=function(t){return(typeof t=="number"||typeof t=="bigint")&&!Mie(t)&&t!==1/0&&t!==-1/0}});var u4=w((kOe,a4)=>{"use strict";var o4=Ar(),jie=o4("%Math.abs%"),qie=o4("%Math.floor%"),Uie=Nh(),Lie=ex();a4.exports=function(e){if(typeof e!="number"||Uie(e)||!Lie(e))return!1;var r=jie(e);return qie(r)===r}});var tx=w((ROe,c4)=>{"use strict";c4.exports=Number.MAX_SAFE_INTEGER||9007199254740991});var f4=w(($Oe,l4)=>{"use strict";var Kie=n4(),Vie=u4(),Hie=tx(),rx=gt();l4.exports=function(e,r,n){if(typeof e!="string")throw new rx("Assertion failed: `S` must be a String");if(!Vie(r)||r<0||r>Hie)throw new rx("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof n!="boolean")throw new rx("Assertion failed: `unicode` must be a Boolean");if(!n)return r+1;var s=e.length;if(r+1>=s)return r+1;var i=Kie(e,r);return r+i["[[CodeUnitCount]]"]}});var p4=w((NOe,d4)=>{"use strict";var zie=gt();d4.exports=function(e,r){if(typeof r!="boolean")throw new zie("Assertion failed: Type(done) is not Boolean");return{value:e,done:r}}});var nx=w((MOe,m4)=>{"use strict";var Wie=xh(),h4=Ah(),y4=Wie.hasArrayLengthDefineBug(),Jie=y4&&SA(),Gie=si(),Zie=Gie("Object.prototype.propertyIsEnumerable");m4.exports=function(e,r,n,s,i,o){if(!h4){if(!e(o)||!o["[[Configurable]]"]||!o["[[Writable]]"]||i in s&&Zie(s,i)!==!!o["[[Enumerable]]"])return!1;var a=o["[[Value]]"];return s[i]=a,r(s[i],a)}return y4&&i==="length"&&"[[Value]]"in o&&Jie(s)&&s.length!==o["[[Value]]"]?(s.length=o["[[Value]]"],s.length===o["[[Value]]"]):(h4(s,i,n(o)),!0)}});var pv=w((jOe,g4)=>{"use strict";var Xie=gt(),Mh=Nc(),Yie={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};g4.exports=function(e){if(!e||typeof e!="object")return!1;for(var r in e)if(Mh(e,r)&&!Yie[r])return!1;var n=Mh(e,"[[Value]]")||Mh(e,"[[Writable]]"),s=Mh(e,"[[Get]]")||Mh(e,"[[Set]]");if(n&&s)throw new Xie("Property Descriptors may not be both accessor and data descriptors");return!0}});var b4=w((qOe,v4)=>{"use strict";v4.exports=function(e){if(typeof e>"u")return e;var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=!!e["[[Configurable]]"]),r}});var ix=w((UOe,w4)=>{"use strict";var Qie=gt(),ese=pv(),tse=b4();w4.exports=function(e){if(typeof e<"u"&&!ese(e))throw new Qie("Assertion failed: `Desc` must be a Property Descriptor");return tse(e)}});var sx=w((LOe,E4)=>{"use strict";var rse=gt(),_4=Nc(),nse=pv();E4.exports=function(e){if(typeof e>"u")return!1;if(!nse(e))throw new rse("Assertion failed: `Desc` must be a Property Descriptor");return!(!_4(e,"[[Value]]")&&!_4(e,"[[Writable]]"))}});var hv=w((KOe,A4)=>{"use strict";var S4=Nh();A4.exports=function(e,r){return e===r?e===0?1/e===1/r:!0:S4(e)&&S4(r)}});var C4=w((VOe,D4)=>{"use strict";var x4=gt(),ise=nx(),sse=ix(),ose=sx(),ase=qc(),use=hv(),cse=os();D4.exports=function(e,r,n){if(cse(e)!=="Object")throw new x4("Assertion failed: Type(O) is not Object");if(!ase(r))throw new x4("Assertion failed: IsPropertyKey(P) is not true");var s={"[[Configurable]]":!0,"[[Enumerable]]":!1,"[[Value]]":n,"[[Writable]]":!0};return ise(ose,use,sse,e,r,s)}});var O4=w((HOe,P4)=>{"use strict";P4.exports=function(e,r){for(var n=0;n<e.length;n+=1)r(e[n],n,e)}});var I4=w((zOe,T4)=>{"use strict";var B4=Ar(),Jf=si(),lse=Ih(),fse=gt(),yv=B4("%WeakMap%",!0),mv=B4("%Map%",!0),dse=Jf("WeakMap.prototype.get",!0),pse=Jf("WeakMap.prototype.set",!0),hse=Jf("WeakMap.prototype.has",!0),yse=Jf("Map.prototype.get",!0),mse=Jf("Map.prototype.set",!0),gse=Jf("Map.prototype.has",!0),ox=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},vse=function(t,e){var r=ox(t,e);return r&&r.value},bse=function(t,e,r){var n=ox(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},wse=function(t,e){return!!ox(t,e)};T4.exports=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new fse("Side channel does not contain "+lse(i))},get:function(i){if(yv&&i&&(typeof i=="object"||typeof i=="function")){if(e)return dse(e,i)}else if(mv){if(r)return yse(r,i)}else if(n)return vse(n,i)},has:function(i){if(yv&&i&&(typeof i=="object"||typeof i=="function")){if(e)return hse(e,i)}else if(mv){if(r)return gse(r,i)}else if(n)return wse(n,i);return!1},set:function(i,o){yv&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new yv),pse(e,i,o)):mv?(r||(r=new mv),mse(r,i,o)):(n||(n={key:{},next:null}),bse(n,i,o))}};return s}});var ux=w((WOe,F4)=>{"use strict";var _se=Nc(),jh=I4()(),ia=gt(),ax={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ia("`O` is not an object");if(typeof e!="string")throw new ia("`slot` must be a string");if(jh.assert(t),!ax.has(t,e))throw new ia("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ia("`O` is not an object");if(typeof e!="string")throw new ia("`slot` must be a string");var r=jh.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ia("`O` is not an object");if(typeof e!="string")throw new ia("`slot` must be a string");var r=jh.get(t);return!!r&&_se(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new ia("`O` is not an object");if(typeof e!="string")throw new ia("`slot` must be a string");var n=jh.get(t);n||(n={},jh.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(ax);F4.exports=ax});var N4=w((JOe,$4)=>{"use strict";var Ese=Ar(),k4=Ese("%Object.create%",!0),R4=gt(),Sse=Jg(),Ase=AA(),xse=os(),Dse=O4(),Cse=ux(),Pse=hA()();$4.exports=function(e){if(e!==null&&xse(e)!=="Object")throw new R4("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!Ase(r))throw new R4("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(k4)n=k4(e);else if(Pse)n={__proto__:e};else{if(e===null)throw new Sse("native Object.create support is required to create null objects");var s=function(){};s.prototype=e,n=new s}return r.length>0&&Dse(r,function(i){Cse.set(n,i,void 0)}),n}});var j4=w((GOe,M4)=>{"use strict";var cx=gt(),Ose=si()("RegExp.prototype.exec"),Bse=xA(),Tse=Fh(),Ise=cv(),Fse=os();M4.exports=function(e,r){if(Fse(e)!=="Object")throw new cx("Assertion failed: `R` must be an Object");if(typeof r!="string")throw new cx("Assertion failed: `S` must be a String");var n=Tse(e,"exec");if(Ise(n)){var s=Bse(n,e,[r]);if(typeof s=="object")return s;throw new cx('"exec" method must return `null` or an Object')}return Ose(e,r)}});var lx=w((ZOe,L4)=>{"use strict";var gv=gt(),kse=qc(),q4=hv(),Rse=os(),U4=function(){try{return delete[].length,!0}catch{return!1}}();L4.exports=function(e,r,n,s){if(Rse(e)!=="Object")throw new gv("Assertion failed: `O` must be an Object");if(!kse(r))throw new gv("Assertion failed: `P` must be a Property Key");if(typeof s!="boolean")throw new gv("Assertion failed: `Throw` must be a Boolean");if(s){if(e[r]=n,U4&&!q4(e[r],n))throw new gv("Attempted to assign to readonly property.");return!0}try{return e[r]=n,U4?q4(e[r],n):!0}catch{return!1}}});var V4=w((XOe,K4)=>{"use strict";K4.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var z4=w((YOe,H4)=>{"use strict";H4.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var J4=w((QOe,W4)=>{"use strict";var $se=Date.prototype.getDay,Nse=function(e){try{return $se.call(e),!0}catch{return!1}},Mse=Object.prototype.toString,jse="[object Date]",qse=lv()();W4.exports=function(e){return typeof e!="object"||e===null?!1:qse?Nse(e):Mse.call(e)===jse}});var Y4=w((eBe,fx)=>{"use strict";var Use=Object.prototype.toString,Lse=$c()();Lse?(G4=Symbol.prototype.toString,Z4=/^Symbol\(.*\)$/,X4=function(e){return typeof e.valueOf()!="symbol"?!1:Z4.test(G4.call(e))},fx.exports=function(e){if(typeof e=="symbol")return!0;if(Use.call(e)!=="[object Symbol]")return!1;try{return X4(e)}catch{return!1}}):fx.exports=function(e){return!1};var G4,Z4,X4});var r$=w((tBe,t$)=>{"use strict";var Kse=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",dx=z4(),e$=LA(),Vse=J4(),Q4=Y4(),Hse=function(e,r){if(typeof e>"u"||e===null)throw new TypeError("Cannot call method on "+e);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],s,i,o;for(o=0;o<n.length;++o)if(s=e[n[o]],e$(s)&&(i=s.call(e),dx(i)))return i;throw new TypeError("No default value")},zse=function(e,r){var n=e[r];if(n!==null&&typeof n<"u"){if(!e$(n))throw new TypeError(n+" returned for property "+r+" of object "+e+" is not a function");return n}};t$.exports=function(e){if(dx(e))return e;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(Kse&&(Symbol.toPrimitive?n=zse(e,Symbol.toPrimitive):Q4(e)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var s=n.call(e,r);if(dx(s))return s;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(Vse(e)||Q4(e))&&(r="string"),Hse(e,r==="default"?"number":r)}});var s$=w((rBe,i$)=>{"use strict";var n$=r$();i$.exports=function(e){return arguments.length>1?n$(e,arguments[1]):n$(e)}});var a$=w((nBe,o$)=>{"use strict";var Wse=si(),Jse=zA(),Gse=Wse("RegExp.prototype.exec"),Zse=gt();o$.exports=function(e){if(!Jse(e))throw new Zse("`regex` must be a RegExp");return function(n){return Gse(e,n)!==null}}});var px=w((iBe,l$)=>{"use strict";var Xse=dv(),Yse=kh(),Qse=si(),u$=Qse("String.prototype.replace"),c$=/^\s$/.test("\u180E"),eoe=c$?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,toe=c$?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;l$.exports=function(){var e=Yse(Xse(this));return u$(u$(e,eoe,""),toe,"")}});var hx=w((sBe,d$)=>{"use strict";var roe=px(),f$="\u200B",Gf="\u180E";d$.exports=function(){return String.prototype.trim&&f$.trim()===f$&&Gf.trim()===Gf&&("_"+Gf).trim()==="_"+Gf&&(Gf+"_").trim()===Gf+"_"?String.prototype.trim:roe}});var h$=w((oBe,p$)=>{"use strict";var noe=su(),ioe=hx();p$.exports=function(){var e=ioe();return noe(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var v$=w((aBe,g$)=>{"use strict";var soe=Dh(),ooe=su(),aoe=dv(),uoe=px(),y$=hx(),coe=h$(),loe=soe(y$()),m$=function(e){return aoe(e),loe(e)};ooe(m$,{getPolyfill:y$,implementation:uoe,shim:coe});g$.exports=m$});var E$=w((uBe,_$)=>{"use strict";var mx=Ar(),yx=mx("%Number%"),foe=mx("%RegExp%"),doe=gt(),b$=mx("%parseInt%"),poe=si(),vv=a$(),w$=poe("String.prototype.slice"),hoe=vv(/^0b[01]+$/i),yoe=vv(/^0o[0-7]+$/i),moe=vv(/^[-+]0x[0-9a-f]+$/i),goe=["\x85","\u200B","\uFFFE"].join(""),voe=new foe("["+goe+"]","g"),boe=vv(voe),woe=v$();_$.exports=function t(e){if(typeof e!="string")throw new doe("Assertion failed: `argument` is not a String");if(hoe(e))return yx(b$(w$(e,2),2));if(yoe(e))return yx(b$(w$(e,2),8));if(boe(e)||moe(e))return NaN;var r=woe(e);return r!==e?t(r):yx(e)}});var D$=w((cBe,x$)=>{"use strict";var _oe=Ar(),S$=gt(),A$=_oe("%Number%"),Eoe=V4(),Soe=s$(),Aoe=E$();x$.exports=function(e){var r=Eoe(e)?e:Soe(e,A$);if(typeof r=="symbol")throw new S$("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new S$("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?Aoe(r):A$(r)}});var P$=w((lBe,C$)=>{"use strict";var xoe=Math.floor;C$.exports=function(e){return typeof e=="bigint"?e:xoe(e)}});var T$=w((fBe,B$)=>{"use strict";var O$=P$(),Doe=gt();B$.exports=function(e){if(typeof e!="number"&&typeof e!="bigint")throw new Doe("argument must be a Number or a BigInt");var r=e<0?-O$(-e):O$(e);return r===0?0:r}});var F$=w((dBe,I$)=>{"use strict";var Coe=D$(),Poe=T$(),Ooe=Nh(),Boe=ex();I$.exports=function(e){var r=Coe(e);return Ooe(r)||r===0?0:Boe(r)?Poe(r):r}});var gx=w((pBe,R$)=>{"use strict";var k$=tx(),Toe=F$();R$.exports=function(e){var r=Toe(e);return r<=0?0:r>k$?k$:r}});var M$=w((hBe,N$)=>{"use strict";var Ioe=Ar(),$$=Ioe("%Object.defineProperty%",!0),Foe=lv()(),koe=Nc(),bv=Foe?Symbol.toStringTag:null;N$.exports=function(e,r){var n=arguments.length>2&&arguments[2]&&arguments[2].force;bv&&(n||!koe(e,bv))&&($$?$$(e,bv,{configurable:!0,enumerable:!1,value:r,writable:!1}):e[bv]=r)}});var V$=w((yBe,K$)=>{"use strict";var Roe=Ar(),$oe=$c()(),qh=gt(),j$=Roe("%IteratorPrototype%",!0),Noe=f4(),wv=p4(),L$=C4(),q$=Fh(),Moe=N4(),joe=j4(),qoe=lx(),Uoe=gx(),Loe=kh(),Koe=os(),nn=ux(),Voe=M$(),Uc=function(e,r,n,s){if(typeof r!="string")throw new qh("`S` must be a string");if(typeof n!="boolean")throw new qh("`global` must be a boolean");if(typeof s!="boolean")throw new qh("`fullUnicode` must be a boolean");nn.set(this,"[[IteratingRegExp]]",e),nn.set(this,"[[IteratedString]]",r),nn.set(this,"[[Global]]",n),nn.set(this,"[[Unicode]]",s),nn.set(this,"[[Done]]",!1)};j$&&(Uc.prototype=Moe(j$));var Hoe=function(){var e=this;if(Koe(e)!=="Object")throw new qh("receiver must be an object");if(!(e instanceof Uc)||!nn.has(e,"[[IteratingRegExp]]")||!nn.has(e,"[[IteratedString]]")||!nn.has(e,"[[Global]]")||!nn.has(e,"[[Unicode]]")||!nn.has(e,"[[Done]]"))throw new qh('"this" value must be a RegExpStringIterator instance');if(nn.get(e,"[[Done]]"))return wv(void 0,!0);var r=nn.get(e,"[[IteratingRegExp]]"),n=nn.get(e,"[[IteratedString]]"),s=nn.get(e,"[[Global]]"),i=nn.get(e,"[[Unicode]]"),o=joe(r,n);if(o===null)return nn.set(e,"[[Done]]",!0),wv(void 0,!0);if(s){var a=Loe(q$(o,"0"));if(a===""){var u=Uoe(q$(r,"lastIndex")),c=Noe(n,u,i);qoe(r,"lastIndex",c,!0)}return wv(o,!1)}return nn.set(e,"[[Done]]",!0),wv(o,!1)};L$(Uc.prototype,"next",Hoe);$oe&&(Voe(Uc.prototype,"RegExp String Iterator"),Symbol.iterator&&typeof Uc.prototype[Symbol.iterator]!="function"&&(U$=function(){return this},L$(Uc.prototype,Symbol.iterator,U$)));var U$;K$.exports=function(e,r,n,s){return new Uc(e,r,n,s)}});var z$=w((mBe,H$)=>{"use strict";H$.exports=Ar()});var G$=w((gBe,J$)=>{"use strict";var ro=Nc(),_v=gt(),zoe=os(),vx=WA(),W$=cv();J$.exports=function(e){if(zoe(e)!=="Object")throw new _v("ToPropertyDescriptor requires an object");var r={};if(ro(e,"enumerable")&&(r["[[Enumerable]]"]=vx(e.enumerable)),ro(e,"configurable")&&(r["[[Configurable]]"]=vx(e.configurable)),ro(e,"value")&&(r["[[Value]]"]=e.value),ro(e,"writable")&&(r["[[Writable]]"]=vx(e.writable)),ro(e,"get")){var n=e.get;if(typeof n<"u"&&!W$(n))throw new _v("getter must be a function");r["[[Get]]"]=n}if(ro(e,"set")){var s=e.set;if(typeof s<"u"&&!W$(s))throw new _v("setter must be a function");r["[[Set]]"]=s}if((ro(r,"[[Get]]")||ro(r,"[[Set]]"))&&(ro(r,"[[Value]]")||ro(r,"[[Writable]]")))throw new _v("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var Y$=w((vBe,X$)=>{"use strict";var bx=gt(),Z$=pv(),Woe=nx(),Joe=ix(),Goe=sx(),Zoe=qc(),Xoe=hv(),Yoe=G$(),Qoe=os();X$.exports=function(e,r,n){if(Qoe(e)!=="Object")throw new bx("Assertion failed: Type(O) is not Object");if(!Zoe(r))throw new bx("Assertion failed: IsPropertyKey(P) is not true");var s=Z$(n)?n:Yoe(n);if(!Z$(s))throw new bx("Assertion failed: Desc is not a valid Property Descriptor");return Woe(Goe,Xoe,Joe,e,r,s)}});var eN=w((bBe,Ex)=>{"use strict";var eae=z$(),Q$=eae("%Reflect.construct%",!0),Ev=Y$();try{Ev({},"",{"[[Get]]":function(){}})}catch{Ev=null}Ev&&Q$?(wx={},_x={},Ev(_x,"length",{"[[Get]]":function(){throw wx},"[[Enumerable]]":!0}),Ex.exports=function(e){try{Q$(e,_x)}catch(r){return r===wx}}):Ex.exports=function(e){return typeof e=="function"&&!!e.prototype};var wx,_x});var iN=w((wBe,nN)=>{"use strict";var tae=Ar(),tN=tae("%Symbol.species%",!0),Sx=gt(),rae=eN(),rN=os();nN.exports=function(e,r){if(rN(e)!=="Object")throw new Sx("Assertion failed: Type(O) is not Object");var n=e.constructor;if(typeof n>"u")return r;if(rN(n)!=="Object")throw new Sx("O.constructor is not an Object");var s=tN?n[tN]:void 0;if(s==null)return r;if(rae(s))return s;throw new Sx("no constructor found")}});var lN=w((_Be,cN)=>{"use strict";var nae=V$(),oN=Fh(),iae=lx(),sae=iN(),oae=gx(),aN=kh(),aae=os(),uae=XA(),cae=JA(),lae=si(),sN=lae("String.prototype.indexOf"),uN=RegExp,fae="flags"in RegExp.prototype,dae=function(e,r){var n,s="flags"in r?oN(r,"flags"):aN(uae(r));return fae&&typeof s=="string"?n=new e(r,s):e===uN?n=new e(r.source,s):n=new e(r,s),{flags:s,matcher:n}},pae=cae(function(e){var r=this;if(aae(r)!=="Object")throw new TypeError('"this" value must be an Object');var n=aN(e),s=sae(r,uN),i=dae(s,r),o=i.flags,a=i.matcher,u=oae(oN(r,"lastIndex"));iae(a,"lastIndex",u,!0);var c=sN(o,"g")>-1,l=sN(o,"u")>-1;return nae(a,n,c,l)},"[Symbol.matchAll]",!0);cN.exports=pae});var Ax=w((EBe,fN)=>{"use strict";var hae=$c()(),yae=lN();fN.exports=function(){return!hae||typeof Symbol.matchAll!="symbol"||typeof RegExp.prototype[Symbol.matchAll]!="function"?yae:RegExp.prototype[Symbol.matchAll]}});var xx=w((SBe,gN)=>{"use strict";var dN=xA(),mae=Fh(),gae=_R(),mN=BR(),pN=kh(),hN=dv(),vae=si(),bae=$c()(),wae=XA(),_ae=vae("String.prototype.indexOf"),Eae=Ax(),yN=function(e){var r=Eae();if(bae&&typeof Symbol.matchAll=="symbol"){var n=gae(e,Symbol.matchAll);return n===RegExp.prototype[Symbol.matchAll]&&n!==r?r:n}if(mN(e))return r};gN.exports=function(e){var r=hN(this);if(typeof e<"u"&&e!==null){var n=mN(e);if(n){var s="flags"in e?mae(e,"flags"):wae(e);if(hN(s),_ae(pN(s),"g")<0)throw new TypeError("matchAll requires a global regular expression")}var i=yN(e);if(typeof i<"u")return dN(i,e,[r])}var o=pN(r),a=new RegExp(e,"g");return dN(yN(a),a,[o])}});var Dx=w((ABe,vN)=>{"use strict";var Sae=xx();vN.exports=function(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch{return String.prototype.matchAll}return Sae}});var EN=w((xBe,_N)=>{"use strict";var Cx=su(),Aae=$c()(),xae=Dx(),Dae=Ax(),bN=Object.defineProperty,wN=Object.getOwnPropertyDescriptor;_N.exports=function(){var e=xae();if(Cx(String.prototype,{matchAll:e},{matchAll:function(){return String.prototype.matchAll!==e}}),Aae){var r=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(Cx(Symbol,{matchAll:r},{matchAll:function(){return Symbol.matchAll!==r}}),bN&&wN){var n=wN(Symbol,r);(!n||n.configurable)&&bN(Symbol,r,{configurable:!1,enumerable:!1,value:r,writable:!1})}var s=Dae(),i={};i[r]=s;var o={};o[r]=function(){return RegExp.prototype[r]!==s},Cx(RegExp.prototype,i,o)}return e}});var Px=w((DBe,xN)=>{"use strict";var Cae=Dh(),Pae=su(),SN=xx(),Oae=Dx(),Bae=EN(),AN=Cae(SN);Pae(AN,{getPolyfill:Oae,implementation:SN,shim:Bae});xN.exports=AN});var Ox=w(Sv=>{"use strict";Object.defineProperty(Sv,"__esModule",{value:!0});Sv.JsonPathUtils=void 0;var Tae=Bi(),Uh=class t{static extractInputField(e,r){let n=[];if(r){for(let s of r)if(n=Tae.JSONPath.nodes(e,s),n.length)break}return n}static changePropertyNameRecursively(e,r,n){let s=t.extractInputField(e,["$.."+r]);for(let i of s)this.copyResultPathToDestinationDefinition(i.path,e,n)}static copyResultPathToDestinationDefinition(e,r,n){let s=r;for(let i=1;i<e.length;i++)if(i+1<e.length&&(s=s[e[i]]),e.length==i+1){s[n]=s[e[i]],delete s[e[i]];break}}static changeSpecialPathsRecursively(e){let r=t.extractInputField(e,["$..path"]);for(let n of r)this.modifyPathsWithSpecialCharacter(n.path,e)}static modifyPathsWithSpecialCharacter(e,r){let n=r;for(let s=1;s<e.length;s++)if(s+1<e.length&&(n=n[e[s]]),e.length==s+1){let i=n[e[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[e[s]]=o;break}}static modifyPathWithSpecialCharacter(e){let r=this.matchAll(e,this.REGEX_PATH);return e=this.modifyPathRecursive(r,e),e}static modifyPathRecursive(e,r){let n=e.next(),s=!1;for(;n&&!n.done&&!s;){let i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;let o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r));n=e.next()}return r}};Sv.JsonPathUtils=Uh;Uh.matchAll=Px();Uh.REGEX_PATH=/@\w+/g});var Tx=w(Av=>{"use strict";Object.defineProperty(Av,"__esModule",{value:!0});Av.ObjectUtils=void 0;var Bx=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}static getDistinctFieldInObject(e,r){let n=e.map(s=>s[r]);return Array.from(new Set(n))}};Av.ObjectUtils=Bx});var DN=w(xv=>{"use strict";Object.defineProperty(xv,"__esModule",{value:!0});xv.ObjectValidationUtils=void 0;var Ix=class{static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static isValidDIDURI(e){let r="[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]",n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+r+")*)?";return""+r+r,new RegExp(n).test(e)}};xv.ObjectValidationUtils=Ix});var $x=w(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.PEVersion=sa.InternalPresentationDefinitionV2=sa.InternalPresentationDefinitionV1=void 0;var Fx=class{constructor(e,r,n,s,i,o){this.id=e,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return Rx.v1}};sa.InternalPresentationDefinitionV1=Fx;var kx=class{constructor(e,r,n,s,i,o,a){this.format=n,this.frame=s,this.id=e,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return Rx.v2}};sa.InternalPresentationDefinitionV2=kx;var Rx;(function(t){t.v1="v1",t.v2="v2"})(Rx=sa.PEVersion||(sa.PEVersion={}))});var PN=w(Cv=>{"use strict";Object.defineProperty(Cv,"__esModule",{value:!0});Cv.SSITypesBuilder=void 0;var CN=Cg(),Dv=Ti(),Nx=$x(),Mx=class t{static modelEntityToInternalPresentationDefinitionV1(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new Nx.InternalPresentationDefinitionV1(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new Nx.InternalPresentationDefinitionV2(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e));return Dv.JsonPathUtils.changePropertyNameRecursively(r,"_const","const"),Dv.JsonPathUtils.changePropertyNameRecursively(r,"_enum","enum"),Dv.JsonPathUtils.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(e){return CN.CredentialMapper.toWrappedVerifiablePresentation(e)}static mapExternalVerifiableCredentialsToWrappedVcs(e){return CN.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(e)?e:[e])}static toInternalPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e)),n=(0,Dv.definitionVersionDiscovery)(r);if(n.error)throw n.error;return n.version==Nx.PEVersion.v1?t.modelEntityToInternalPresentationDefinitionV1(r):t.modelEntityInternalPresentationDefinitionV2(r)}};Cv.SSITypesBuilder=Mx});var Lc=w(oa=>{"use strict";var Iae=oa&&oa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jx=oa&&oa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Iae(e,t,r)};Object.defineProperty(oa,"__esModule",{value:!0});jx(rs(),oa);jx($x(),oa);jx(PN(),oa)});var Kx=w((FBe,Lx)=>{"use strict";Lx.exports=Ux;Lx.exports.default=Ux;var Ir={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Yt={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},ON=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$","u"),BN=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),TN=new RegExp("additionalProperties","u");function Ov(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(ON.test(a)||BN.test(a)||TN.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Yt,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(ON.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].required,parentSchema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[f]:i.push(f),o++}let l=c.length;for(let f=0;f<l;f++){let p=c[f];if(typeof p!="string"){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+f,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items.type,parentSchema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items,data:p};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.type,parentSchema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].type,parentSchema:Yt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(BN.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[f]:i.push(f),o++}let l=c.length;for(let f=0;f<l;f++){let p=c[f];if(typeof p!="string"){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+f,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Yt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(TN.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Yt.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Yt.type,parentSchema:Yt,data:t};i===null?i=[a]:i.push(a),o++}return Ov.errors=i,o===0}var De={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},qx={validate:Lh};function Lh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:De.type,parentSchema:De,data:t};i===null?i=[d]:i.push(d),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let d={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:De.oneOf[0].required,parentSchema:De.oneOf[0],data:t};i===null?i=[d]:i.push(d),o++}if(t.from===void 0){let d={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:De.oneOf[0].required,parentSchema:De.oneOf[0],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="name"||d==="purpose"||d==="rule"||d==="count"||d==="min"||d==="max"||d==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:De.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let d=t.name;if(typeof d!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.oneOf[0].properties.name.type,parentSchema:De.oneOf[0].properties.name,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.oneOf[0].properties.purpose.type,parentSchema:De.oneOf[0].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let d=t.rule;if(typeof d!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.oneOf[0].properties.rule.type,parentSchema:De.oneOf[0].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}if(!(d==="all"||d==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:De.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:De.oneOf[0].properties.rule.enum,parentSchema:De.oneOf[0].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let d=t.count;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:De.oneOf[0].properties.count.type,parentSchema:De.oneOf[0].properties.count,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<1||isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:De.oneOf[0].properties.count,data:d};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let d=t.min;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:De.oneOf[0].properties.min.type,parentSchema:De.oneOf[0].properties.min,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:De.oneOf[0].properties.min,data:d};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let d=t.max;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:De.oneOf[0].properties.max.type,parentSchema:De.oneOf[0].properties.max,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:De.oneOf[0].properties.max,data:d};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let d=t.from;if(typeof d!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.oneOf[0].properties.from.type,parentSchema:De.oneOf[0].properties.from,data:d};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:De.oneOf[1].required,parentSchema:De.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}if(t.from_nested===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:De.oneOf[1].required,parentSchema:De.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="name"||d==="purpose"||d==="rule"||d==="count"||d==="min"||d==="max"||d==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:De.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let d=t.name;if(typeof d!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.oneOf[1].properties.name.type,parentSchema:De.oneOf[1].properties.name,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.oneOf[1].properties.purpose.type,parentSchema:De.oneOf[1].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let d=t.rule;if(typeof d!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:De.oneOf[1].properties.rule.type,parentSchema:De.oneOf[1].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}if(!(d==="all"||d==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:De.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:De.oneOf[1].properties.rule.enum,parentSchema:De.oneOf[1].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let d=t.count;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:De.oneOf[1].properties.count.type,parentSchema:De.oneOf[1].properties.count,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<1||isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:De.oneOf[1].properties.count,data:d};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let d=t.min;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:De.oneOf[1].properties.min.type,parentSchema:De.oneOf[1].properties.min,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:De.oneOf[1].properties.min,data:d};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let d=t.max;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:De.oneOf[1].properties.max.type,parentSchema:De.oneOf[1].properties.max,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:De.oneOf[1].properties.max,data:d};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let d=t.from_nested;if(Array.isArray(d)){if(d.length<1){let m={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:De.oneOf[1].properties.from_nested,data:d};i===null?i=[m]:i.push(m),o++}let h=d.length;for(let m=0;m<h;m++)qx.validate(d[m],{instancePath:e+"/from_nested/"+m,parentData:d,parentDataProperty:m,rootData:s})||(i=i===null?qx.validate.errors:i.concat(qx.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:De.oneOf[1].properties.from_nested.type,parentSchema:De.oneOf[1].properties.from_nested,data:d};i===null?i=[h]:i.push(h),o++}}}var p=f===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let d={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:De.oneOf,parentSchema:De,data:t};i===null?i=[d]:i.push(d),o++}return Lh.errors=i,o===0}var ne={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},aa={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function Bv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.uri===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:aa.required,parentSchema:aa,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="uri"||a==="required")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:aa,data:t};i===null?i=[u]:i.push(u),o++}if(t.uri!==void 0){let a=t.uri;if(typeof a!="string"){let u={instancePath:e+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:aa.properties.uri.type,parentSchema:aa.properties.uri,data:a};i===null?i=[u]:i.push(u),o++}}if(t.required!==void 0){let a=t.required;if(typeof a!="boolean"){let u={instancePath:e+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:aa.properties.required.type,parentSchema:aa.properties.required,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:aa.type,parentSchema:aa,data:t};i===null?i=[a]:i.push(a),o++}return Bv.errors=i,o===0}var Pv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Tv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pv.properties.manifest.type,parentSchema:Pv.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pv.type,parentSchema:Pv,data:t};i===null?i=[a]:i.push(a),o++}return Tv.errors=i,o===0}var pt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},nt={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},Fae=Object.prototype.hasOwnProperty;function Kc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:nt.required,parentSchema:nt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Fae.call(nt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:nt,data:t};i===null?i=[u]:i.push(u),o++}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nt.properties.type.type,parentSchema:nt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nt.properties.format.type,parentSchema:nt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nt.properties.pattern.type,parentSchema:nt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0){let a=t.minimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:nt.properties.minimum.type},message:"must be number,string",schema:nt.properties.minimum.type,parentSchema:nt.properties.minimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minLength!==void 0){let a=t.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:nt.properties.minLength.type,parentSchema:nt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:nt.properties.maxLength.type,parentSchema:nt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMinimum!==void 0){let a=t.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:nt.properties.exclusiveMinimum.type},message:"must be number,string",schema:nt.properties.exclusiveMinimum.type,parentSchema:nt.properties.exclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0){let a=t.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:nt.properties.exclusiveMaximum.type},message:"must be number,string",schema:nt.properties.exclusiveMaximum.type,parentSchema:nt.properties.exclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0){let a=t.maximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:nt.properties.maximum.type},message:"must be number,string",schema:nt.properties.maximum.type,parentSchema:nt.properties.maximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.const!==void 0){let a=t.const;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:nt.properties.const.type},message:"must be number,string",schema:nt.properties.const.type,parentSchema:nt.properties.const,data:a};i===null?i=[u]:i.push(u),o++}}if(t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="number"&&typeof l!="string"){let f={instancePath:e+"/enum/"+c,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:nt.properties.enum.items.type},message:"must be number,string",schema:nt.properties.enum.items.type,parentSchema:nt.properties.enum.items,data:l};i===null?i=[f]:i.push(f),o++}}}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nt.properties.enum.type,parentSchema:nt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.not!==void 0){let a=t.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){let u={instancePath:e+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:nt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}else{let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nt.properties.not.type,parentSchema:nt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nt.type,parentSchema:nt,data:t};i===null?i=[a]:i.push(a),o++}return Kc.errors=i,o===0}function Iv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:pt.type,parentSchema:pt,data:t};i===null?i=[d]:i.push(d),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let d={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:pt.oneOf[0].required,parentSchema:pt.oneOf[0],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="id"||d==="path"||d==="purpose"||d==="filter")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:pt.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let d=t.id;if(typeof d!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[0].properties.id.type,parentSchema:pt.oneOf[0].properties.id,data:d};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let d=t.path;if(Array.isArray(d)){let h=d.length;for(let m=0;m<h;m++){let g=d[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[0].properties.path.items.type,parentSchema:pt.oneOf[0].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:pt.oneOf[0].properties.path.type,parentSchema:pt.oneOf[0].properties.path,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[0].properties.purpose.type,parentSchema:pt.oneOf[0].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}t.filter!==void 0&&(Kc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Kc.errors:i.concat(Kc.errors),o=i.length))}var p=l===o;p&&(u=!0,c=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:pt.oneOf[1].required,parentSchema:pt.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}if(t.filter===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:pt.oneOf[1].required,parentSchema:pt.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}if(t.predicate===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:pt.oneOf[1].required,parentSchema:pt.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="id"||d==="path"||d==="purpose"||d==="filter"||d==="predicate")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:pt.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let d=t.id;if(typeof d!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.id.type,parentSchema:pt.oneOf[1].properties.id,data:d};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let d=t.path;if(Array.isArray(d)){let h=d.length;for(let m=0;m<h;m++){let g=d[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.path.items.type,parentSchema:pt.oneOf[1].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:pt.oneOf[1].properties.path.type,parentSchema:pt.oneOf[1].properties.path,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.purpose.type,parentSchema:pt.oneOf[1].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Kc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Kc.errors:i.concat(Kc.errors),o=i.length)),t.predicate!==void 0){let d=t.predicate;if(typeof d!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.predicate.type,parentSchema:pt.oneOf[1].properties.predicate,data:d};i===null?i=[h]:i.push(h),o++}if(!(d==="required"||d==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:pt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:pt.oneOf[1].properties.predicate.enum,parentSchema:pt.oneOf[1].properties.predicate,data:d};i===null?i=[h]:i.push(h),o++}}}var p=f===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let d={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:pt.oneOf,parentSchema:pt,data:t};i===null?i=[d]:i.push(d),o++}return Iv.errors=i,o===0}function Fv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:ne.required,parentSchema:ne,data:t};i===null?i=[a]:i.push(a),o++}if(t.schema===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:ne.required,parentSchema:ne,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ne,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.id.type,parentSchema:ne.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.name.type,parentSchema:ne.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.purpose.type,parentSchema:ne.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let f={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.group.items.type,parentSchema:ne.properties.group.items,data:l};i===null?i=[f]:i.push(f),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.group.type,parentSchema:ne.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.schema!==void 0){let a=t.schema;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Bv(a[c],{instancePath:e+"/schema/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Bv.errors:i.concat(Bv.errors),o=i.length)}else{let u={instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.schema.type,parentSchema:ne.properties.schema,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Tv(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Tv.errors:i.concat(Tv.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.issuance.type,parentSchema:ne.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:ne.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.limit_disclosure.type,parentSchema:ne.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.limit_disclosure.enum,parentSchema:ne.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let f={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:ne.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let f={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:ne.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.properties.active.type,parentSchema:ne.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let f={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let f={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:ne.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let f={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let f={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:ne.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.type,parentSchema:ne.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Iv(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Iv.errors:i.concat(Iv.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.fields.type,parentSchema:ne.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.subject_is_issuer.type,parentSchema:ne.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.subject_is_issuer.enum,parentSchema:ne.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let f=u[l];if(f&&typeof f=="object"&&!Array.isArray(f)){if(f.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ne.properties.constraints.properties.is_holder.items.required,parentSchema:ne.properties.constraints.properties.is_holder.items,data:f};i===null?i=[p]:i.push(p),o++}if(f.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ne.properties.constraints.properties.is_holder.items.required,parentSchema:ne.properties.constraints.properties.is_holder.items,data:f};i===null?i=[p]:i.push(p),o++}for(let p in f)if(!(p==="field_id"||p==="directive")){let d={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ne.properties.constraints.properties.is_holder.items,data:f};i===null?i=[d]:i.push(d),o++}if(f.field_id!==void 0){let p=f.field_id;if(Array.isArray(p)){let d=p.length;for(let h=0;h<d;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let d={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[d]:i.push(d),o++}}if(f.directive!==void 0){let p=f.directive;if(typeof p!="string"){let d={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}if(!(p==="required"||p==="preferred")){let d={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.is_holder.items.type,parentSchema:ne.properties.constraints.properties.is_holder.items,data:f};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.is_holder.type,parentSchema:ne.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let f=u[l];if(f&&typeof f=="object"&&!Array.isArray(f)){if(f.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ne.properties.constraints.properties.same_subject.items.required,parentSchema:ne.properties.constraints.properties.same_subject.items,data:f};i===null?i=[p]:i.push(p),o++}if(f.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ne.properties.constraints.properties.same_subject.items.required,parentSchema:ne.properties.constraints.properties.same_subject.items,data:f};i===null?i=[p]:i.push(p),o++}for(let p in f)if(!(p==="field_id"||p==="directive")){let d={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ne.properties.constraints.properties.same_subject.items,data:f};i===null?i=[d]:i.push(d),o++}if(f.field_id!==void 0){let p=f.field_id;if(Array.isArray(p)){let d=p.length;for(let h=0;h<d;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let d={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[d]:i.push(d),o++}}if(f.directive!==void 0){let p=f.directive;if(typeof p!="string"){let d={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}if(!(p==="required"||p==="preferred")){let d={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.same_subject.items.type,parentSchema:ne.properties.constraints.properties.same_subject.items,data:f};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.same_subject.type,parentSchema:ne.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.type,parentSchema:ne.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.type,parentSchema:ne,data:t};i===null?i=[a]:i.push(a),o++}return Fv.errors=i,o===0}function Ux(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Ir.properties.presentation_definition.required,parentSchema:Ir.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Ir.properties.presentation_definition.required,parentSchema:Ir.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Ir.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ir.properties.presentation_definition.properties.id.type,parentSchema:Ir.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ir.properties.presentation_definition.properties.name.type,parentSchema:Ir.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ir.properties.presentation_definition.properties.purpose.type,parentSchema:Ir.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(Ov(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?Ov.errors:i.concat(Ov.errors),o=i.length)),a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Lh(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Lh.errors:i.concat(Lh.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ir.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Ir.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Fv(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Fv.errors:i.concat(Fv.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ir.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Ir.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ir.properties.presentation_definition.type,parentSchema:Ir.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ir.type,parentSchema:Ir,data:t};i===null?i=[a]:i.push(a),o++}return Ux.errors=i,o===0}});var Vx=w((kBe,IN)=>{"use strict";IN.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var Kh=w(Hx=>{"use strict";Object.defineProperty(Hx,"__esModule",{value:!0});var FN=Vx();FN.code='require("ajv/dist/runtime/equal").default';Hx.default=FN});var Qx=w(($Be,Yx)=>{"use strict";Yx.exports=Xx;Yx.exports.default=Xx;var mr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Qt={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},kN=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$","u"),RN=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),$N=new RegExp("additionalProperties","u");function zc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(kN.test(a)||RN.test(a)||$N.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Qt,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(kN.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].required,parentSchema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[f]:i.push(f),o++}let l=c.length;for(let f=0;f<l;f++){let p=c[f];if(typeof p!="string"){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+f,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items.type,parentSchema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items,data:p};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.type,parentSchema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].type,parentSchema:Qt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(RN.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[f]:i.push(f),o++}let l=c.length;for(let f=0;f<l;f++){let p=c[f];if(typeof p!="string"){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+f,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Qt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if($N.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Qt.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Qt.type,parentSchema:Qt,data:t};i===null?i=[a]:i.push(a),o++}return zc.errors=i,o===0}var Ce={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},zx={validate:Hh};function Hh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ce.type,parentSchema:Ce,data:t};i===null?i=[d]:i.push(d),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let d={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ce.oneOf[0].required,parentSchema:Ce.oneOf[0],data:t};i===null?i=[d]:i.push(d),o++}if(t.from===void 0){let d={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Ce.oneOf[0].required,parentSchema:Ce.oneOf[0],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="name"||d==="purpose"||d==="rule"||d==="count"||d==="min"||d==="max"||d==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:Ce.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let d=t.name;if(typeof d!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.name.type,parentSchema:Ce.oneOf[0].properties.name,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.purpose.type,parentSchema:Ce.oneOf[0].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let d=t.rule;if(typeof d!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.rule.type,parentSchema:Ce.oneOf[0].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}if(!(d==="all"||d==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Ce.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ce.oneOf[0].properties.rule.enum,parentSchema:Ce.oneOf[0].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let d=t.count;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.count.type,parentSchema:Ce.oneOf[0].properties.count,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<1||isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ce.oneOf[0].properties.count,data:d};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let d=t.min;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.min.type,parentSchema:Ce.oneOf[0].properties.min,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[0].properties.min,data:d};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let d=t.max;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.max.type,parentSchema:Ce.oneOf[0].properties.max,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[0].properties.max,data:d};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let d=t.from;if(typeof d!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.from.type,parentSchema:Ce.oneOf[0].properties.from,data:d};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ce.oneOf[1].required,parentSchema:Ce.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}if(t.from_nested===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Ce.oneOf[1].required,parentSchema:Ce.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="name"||d==="purpose"||d==="rule"||d==="count"||d==="min"||d==="max"||d==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:Ce.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let d=t.name;if(typeof d!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.name.type,parentSchema:Ce.oneOf[1].properties.name,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.purpose.type,parentSchema:Ce.oneOf[1].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let d=t.rule;if(typeof d!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.rule.type,parentSchema:Ce.oneOf[1].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}if(!(d==="all"||d==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Ce.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ce.oneOf[1].properties.rule.enum,parentSchema:Ce.oneOf[1].properties.rule,data:d};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let d=t.count;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.count.type,parentSchema:Ce.oneOf[1].properties.count,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<1||isNaN(d))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ce.oneOf[1].properties.count,data:d};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let d=t.min;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.min.type,parentSchema:Ce.oneOf[1].properties.min,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[1].properties.min,data:d};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let d=t.max;if(!(typeof d=="number"&&!(d%1)&&!isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.max.type,parentSchema:Ce.oneOf[1].properties.max,data:d};i===null?i=[h]:i.push(h),o++}if(typeof d=="number"&&(d<0||isNaN(d))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[1].properties.max,data:d};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let d=t.from_nested;if(Array.isArray(d)){if(d.length<1){let m={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ce.oneOf[1].properties.from_nested,data:d};i===null?i=[m]:i.push(m),o++}let h=d.length;for(let m=0;m<h;m++)zx.validate(d[m],{instancePath:e+"/from_nested/"+m,parentData:d,parentDataProperty:m,rootData:s})||(i=i===null?zx.validate.errors:i.concat(zx.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ce.oneOf[1].properties.from_nested.type,parentSchema:Ce.oneOf[1].properties.from_nested,data:d};i===null?i=[h]:i.push(h),o++}}}var p=f===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let d={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Ce.oneOf,parentSchema:Ce,data:t};i===null?i=[d]:i.push(d),o++}return Hh.errors=i,o===0}var ie={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},kv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Rv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:kv.properties.manifest.type,parentSchema:kv.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:kv.type,parentSchema:kv,data:t};i===null?i=[a]:i.push(a),o++}return Rv.errors=i,o===0}var qe={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},ge={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Wx={type:"integer",minimum:0};function ai(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t))){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Wx.type,parentSchema:Wx,data:t};i===null?i=[a]:i.push(a),o++}if(typeof t=="number"&&(t<0||isNaN(t))){let a={instancePath:e,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Wx,data:t};i===null?i=[a]:i.push(a),o++}return ai.errors=i,o===0}function no(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return ai(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?ai.errors:i.concat(ai.errors),o=i.length),no.errors=i,o===0}var Jx={type:"array",minItems:1,items:{$ref:"#"}},Gx={validate:Ne};function oi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){if(t.length<1){let u={instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Jx,data:t};i===null?i=[u]:i.push(u),o++}let a=t.length;for(let u=0;u<a;u++)Gx.validate(t[u],{instancePath:e+"/"+u,parentData:t,parentDataProperty:u,rootData:s})||(i=i===null?Gx.validate.errors:i.concat(Gx.validate.errors),o=i.length)}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Jx.type,parentSchema:Jx,data:t};i===null?i=[a]:i.push(a),o++}return oi.errors=i,o===0}var Vh={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function Vc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){let a=t.length;for(let l=0;l<a;l++){let f=t[l];if(typeof f!="string"){let p={instancePath:e+"/"+l,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Vh.items.type,parentSchema:Vh.items,data:f};i===null?i=[p]:i.push(p),o++}}let u=t.length,c;if(u>1){let l={};for(;u--;){let f=t[u];if(typeof f=="string"){if(typeof l[f]=="number"){c=l[f];let p={instancePath:e,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:u,j:c},message:"must NOT have duplicate items (items ## "+c+" and "+u+" are identical)",schema:!0,parentSchema:Vh,data:t};i===null?i=[p]:i.push(p),o++;break}l[f]=u}}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Vh.type,parentSchema:Vh,data:t};i===null?i=[a]:i.push(a),o++}return Vc.errors=i,o===0}var Zx={enum:["array","boolean","integer","null","number","object","string"]};function Hc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t==="array"||t==="boolean"||t==="integer"||t==="null"||t==="number"||t==="object"||t==="string")){let a={instancePath:e,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:Zx.enum},message:"must be equal to one of the allowed values",schema:Zx.enum,parentSchema:Zx,data:t};i===null?i=[a]:i.push(a),o++}return Hc.errors=i,o===0}var NN=Kh().default;function Ne(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean"){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:ge.type},message:"must be object,boolean",schema:ge.type,parentSchema:ge,data:t};i===null?i=[f]:i.push(f),o++}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let f=t.$id;if(typeof f!="string"){let p={instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.$id.type,parentSchema:ge.properties.$id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.$schema!==void 0){let f=t.$schema;if(typeof f!="string"){let p={instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.$schema.type,parentSchema:ge.properties.$schema,data:f};i===null?i=[p]:i.push(p),o++}}if(t.$ref!==void 0){let f=t.$ref;if(typeof f!="string"){let p={instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.$ref.type,parentSchema:ge.properties.$ref,data:f};i===null?i=[p]:i.push(p),o++}}if(t.$comment!==void 0){let f=t.$comment;if(typeof f!="string"){let p={instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.$comment.type,parentSchema:ge.properties.$comment,data:f};i===null?i=[p]:i.push(p),o++}}if(t.title!==void 0){let f=t.title;if(typeof f!="string"){let p={instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.title.type,parentSchema:ge.properties.title,data:f};i===null?i=[p]:i.push(p),o++}}if(t.description!==void 0){let f=t.description;if(typeof f!="string"){let p={instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.description.type,parentSchema:ge.properties.description,data:f};i===null?i=[p]:i.push(p),o++}}if(t.readOnly!==void 0){let f=t.readOnly;if(typeof f!="boolean"){let p={instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ge.properties.readOnly.type,parentSchema:ge.properties.readOnly,data:f};i===null?i=[p]:i.push(p),o++}}if(t.examples!==void 0){let f=t.examples;if(!Array.isArray(f)){let p={instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ge.properties.examples.type,parentSchema:ge.properties.examples,data:f};i===null?i=[p]:i.push(p),o++}}if(t.multipleOf!==void 0){let f=t.multipleOf;if(typeof f=="number"){if(f<=0||isNaN(f)){let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:ge.properties.multipleOf,data:f};i===null?i=[p]:i.push(p),o++}}else{let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ge.properties.multipleOf.type,parentSchema:ge.properties.multipleOf,data:f};i===null?i=[p]:i.push(p),o++}}if(t.maximum!==void 0){let f=t.maximum;if(typeof f!="number"){let p={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ge.properties.maximum.type,parentSchema:ge.properties.maximum,data:f};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMaximum!==void 0){let f=t.exclusiveMaximum;if(typeof f!="number"){let p={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ge.properties.exclusiveMaximum.type,parentSchema:ge.properties.exclusiveMaximum,data:f};i===null?i=[p]:i.push(p),o++}}if(t.minimum!==void 0){let f=t.minimum;if(typeof f!="number"){let p={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ge.properties.minimum.type,parentSchema:ge.properties.minimum,data:f};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMinimum!==void 0){let f=t.exclusiveMinimum;if(typeof f!="number"){let p={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ge.properties.exclusiveMinimum.type,parentSchema:ge.properties.exclusiveMinimum,data:f};i===null?i=[p]:i.push(p),o++}}if(t.maxLength!==void 0&&(ai(t.maxLength,{instancePath:e+"/maxLength",parentData:t,parentDataProperty:"maxLength",rootData:s})||(i=i===null?ai.errors:i.concat(ai.errors),o=i.length)),t.minLength!==void 0&&(no(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?no.errors:i.concat(no.errors),o=i.length)),t.pattern!==void 0){let f=t.pattern;if(typeof f!="string"){let p={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.pattern.type,parentSchema:ge.properties.pattern,data:f};i===null?i=[p]:i.push(p),o++}}if(t.additionalItems!==void 0&&(Ne(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.items!==void 0){let f=t.items,p=o,d=!1,h=o;Ne(f,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);var a=h===o;if(d=d||a,!d){let m=o;oi(f,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?oi.errors:i.concat(oi.errors),o=i.length);var a=m===o;d=d||a}if(d)o=p,i!==null&&(p?i.length=p:i=null);else{let m={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ge.properties.items.anyOf,parentSchema:ge.properties.items,data:f};i===null?i=[m]:i.push(m),o++}}if(t.maxItems!==void 0&&(ai(t.maxItems,{instancePath:e+"/maxItems",parentData:t,parentDataProperty:"maxItems",rootData:s})||(i=i===null?ai.errors:i.concat(ai.errors),o=i.length)),t.minItems!==void 0&&(no(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?no.errors:i.concat(no.errors),o=i.length)),t.uniqueItems!==void 0){let f=t.uniqueItems;if(typeof f!="boolean"){let p={instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ge.properties.uniqueItems.type,parentSchema:ge.properties.uniqueItems,data:f};i===null?i=[p]:i.push(p),o++}}if(t.contains!==void 0&&(Ne(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.maxProperties!==void 0&&(ai(t.maxProperties,{instancePath:e+"/maxProperties",parentData:t,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?ai.errors:i.concat(ai.errors),o=i.length)),t.minProperties!==void 0&&(no(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?no.errors:i.concat(no.errors),o=i.length)),t.required!==void 0&&(Vc(t.required,{instancePath:e+"/required",parentData:t,parentDataProperty:"required",rootData:s})||(i=i===null?Vc.errors:i.concat(Vc.errors),o=i.length)),t.additionalProperties!==void 0&&(Ne(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.definitions!==void 0){let f=t.definitions;if(f&&typeof f=="object"&&!Array.isArray(f))for(let p in f)Ne(f[p],{instancePath:e+"/definitions/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:f,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);else{let p={instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ge.properties.definitions.type,parentSchema:ge.properties.definitions,data:f};i===null?i=[p]:i.push(p),o++}}if(t.properties!==void 0){let f=t.properties;if(f&&typeof f=="object"&&!Array.isArray(f))for(let p in f)Ne(f[p],{instancePath:e+"/properties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:f,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);else{let p={instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ge.properties.properties.type,parentSchema:ge.properties.properties,data:f};i===null?i=[p]:i.push(p),o++}}if(t.patternProperties!==void 0){let f=t.patternProperties;if(f&&typeof f=="object"&&!Array.isArray(f)){for(let p in f){var u=o===o;if(!u){let h={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:p},message:"property name must be valid",schema:ge.properties.patternProperties.propertyNames,parentSchema:ge.properties.patternProperties,data:f};i===null?i=[h]:i.push(h),o++}}for(let p in f)Ne(f[p],{instancePath:e+"/patternProperties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:f,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)}else{let p={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ge.properties.patternProperties.type,parentSchema:ge.properties.patternProperties,data:f};i===null?i=[p]:i.push(p),o++}}if(t.dependencies!==void 0){let f=t.dependencies;if(f&&typeof f=="object"&&!Array.isArray(f))for(let p in f){let d=f[p],h=o,m=!1,g=o;Ne(d,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:f,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);var c=g===o;if(m=m||c,!m){let _=o;Vc(d,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:f,parentDataProperty:p,rootData:s})||(i=i===null?Vc.errors:i.concat(Vc.errors),o=i.length);var c=_===o;m=m||c}if(m)o=h,i!==null&&(h?i.length=h:i=null);else{let _={instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ge.properties.dependencies.additionalProperties.anyOf,parentSchema:ge.properties.dependencies.additionalProperties,data:d};i===null?i=[_]:i.push(_),o++}}else{let p={instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ge.properties.dependencies.type,parentSchema:ge.properties.dependencies,data:f};i===null?i=[p]:i.push(p),o++}}if(t.propertyNames!==void 0&&(Ne(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.enum!==void 0){let f=t.enum;if(Array.isArray(f)){if(f.length<1){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ge.properties.enum,data:f};i===null?i=[h]:i.push(h),o++}let p=f.length,d;if(p>1){e:for(;p--;)for(d=p;d--;)if(NN(f[p],f[d])){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:p,j:d},message:"must NOT have duplicate items (items ## "+d+" and "+p+" are identical)",schema:!0,parentSchema:ge.properties.enum,data:f};i===null?i=[h]:i.push(h),o++;break e}}}else{let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ge.properties.enum.type,parentSchema:ge.properties.enum,data:f};i===null?i=[p]:i.push(p),o++}}if(t.type!==void 0){let f=t.type,p=o,d=!1,h=o;Hc(f,{instancePath:e+"/type",parentData:t,parentDataProperty:"type",rootData:s})||(i=i===null?Hc.errors:i.concat(Hc.errors),o=i.length);var l=h===o;if(d=d||l,!d){let m=o;if(Array.isArray(f)){if(f.length<1){let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ge.properties.type.anyOf[1],data:f};i===null?i=[A]:i.push(A),o++}let _=f.length;for(let A=0;A<_;A++)Hc(f[A],{instancePath:e+"/type/"+A,parentData:f,parentDataProperty:A,rootData:s})||(i=i===null?Hc.errors:i.concat(Hc.errors),o=i.length);let D=f.length,v;if(D>1){e:for(;D--;)for(v=D;v--;)if(NN(f[D],f[v])){let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:D,j:v},message:"must NOT have duplicate items (items ## "+v+" and "+D+" are identical)",schema:!0,parentSchema:ge.properties.type.anyOf[1],data:f};i===null?i=[A]:i.push(A),o++;break e}}}else{let _={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ge.properties.type.anyOf[1].type,parentSchema:ge.properties.type.anyOf[1],data:f};i===null?i=[_]:i.push(_),o++}var l=m===o;d=d||l}if(d)o=p,i!==null&&(p?i.length=p:i=null);else{let m={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ge.properties.type.anyOf,parentSchema:ge.properties.type,data:f};i===null?i=[m]:i.push(m),o++}}if(t.format!==void 0){let f=t.format;if(typeof f!="string"){let p={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.format.type,parentSchema:ge.properties.format,data:f};i===null?i=[p]:i.push(p),o++}}if(t.contentMediaType!==void 0){let f=t.contentMediaType;if(typeof f!="string"){let p={instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.contentMediaType.type,parentSchema:ge.properties.contentMediaType,data:f};i===null?i=[p]:i.push(p),o++}}if(t.contentEncoding!==void 0){let f=t.contentEncoding;if(typeof f!="string"){let p={instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ge.properties.contentEncoding.type,parentSchema:ge.properties.contentEncoding,data:f};i===null?i=[p]:i.push(p),o++}}t.if!==void 0&&(Ne(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.then!==void 0&&(Ne(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.else!==void 0&&(Ne(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.allOf!==void 0&&(oi(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?oi.errors:i.concat(oi.errors),o=i.length)),t.anyOf!==void 0&&(oi(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?oi.errors:i.concat(oi.errors),o=i.length)),t.oneOf!==void 0&&(oi(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?oi.errors:i.concat(oi.errors),o=i.length)),t.not!==void 0&&(Ne(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length))}return Ne.errors=i,o===0}function $v(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:qe.type,parentSchema:qe,data:t};i===null?i=[d]:i.push(d),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let d={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:qe.oneOf[0].required,parentSchema:qe.oneOf[0],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="id"||d==="path"||d==="purpose"||d==="intent_to_retain"||d==="filter"||d==="name")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:qe.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let d=t.id;if(typeof d!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.id.type,parentSchema:qe.oneOf[0].properties.id,data:d};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let d=t.path;if(Array.isArray(d)){let h=d.length;for(let m=0;m<h;m++){let g=d[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.path.items.type,parentSchema:qe.oneOf[0].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:qe.oneOf[0].properties.path.type,parentSchema:qe.oneOf[0].properties.path,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.purpose.type,parentSchema:qe.oneOf[0].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let d=t.intent_to_retain;if(typeof d!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:qe.oneOf[0].properties.intent_to_retain.type,parentSchema:qe.oneOf[0].properties.intent_to_retain,data:d};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Ne(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.name!==void 0){let d=t.name;if(typeof d!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.name.type,parentSchema:qe.oneOf[0].properties.name,data:d};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:qe.oneOf[1].required,parentSchema:qe.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}if(t.filter===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:qe.oneOf[1].required,parentSchema:qe.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}if(t.predicate===void 0){let d={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:qe.oneOf[1].required,parentSchema:qe.oneOf[1],data:t};i===null?i=[d]:i.push(d),o++}for(let d in t)if(!(d==="id"||d==="path"||d==="purpose"||d==="intent_to_retain"||d==="filter"||d==="predicate"||d==="name")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties",schema:!1,parentSchema:qe.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let d=t.id;if(typeof d!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.id.type,parentSchema:qe.oneOf[1].properties.id,data:d};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let d=t.path;if(Array.isArray(d)){let h=d.length;for(let m=0;m<h;m++){let g=d[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.path.items.type,parentSchema:qe.oneOf[1].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:qe.oneOf[1].properties.path.type,parentSchema:qe.oneOf[1].properties.path,data:d};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let d=t.purpose;if(typeof d!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.purpose.type,parentSchema:qe.oneOf[1].properties.purpose,data:d};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let d=t.intent_to_retain;if(typeof d!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:qe.oneOf[1].properties.intent_to_retain.type,parentSchema:qe.oneOf[1].properties.intent_to_retain,data:d};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Ne(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.predicate!==void 0){let d=t.predicate;if(typeof d!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.predicate.type,parentSchema:qe.oneOf[1].properties.predicate,data:d};i===null?i=[h]:i.push(h),o++}if(!(d==="required"||d==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:qe.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:qe.oneOf[1].properties.predicate.enum,parentSchema:qe.oneOf[1].properties.predicate,data:d};i===null?i=[h]:i.push(h),o++}}if(t.name!==void 0){let d=t.name;if(typeof d!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.name.type,parentSchema:qe.oneOf[1].properties.name,data:d};i===null?i=[h]:i.push(h),o++}}}var p=f===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let d={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:qe.oneOf,parentSchema:qe,data:t};i===null?i=[d]:i.push(d),o++}return $v.errors=i,o===0}function Nv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:ie.required,parentSchema:ie,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ie,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.id.type,parentSchema:ie.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.name.type,parentSchema:ie.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.purpose.type,parentSchema:ie.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Rv(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Rv.errors:i.concat(Rv.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.issuance.type,parentSchema:ie.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let f={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.group.items.type,parentSchema:ie.properties.group.items,data:l};i===null?i=[f]:i.push(f),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.group.type,parentSchema:ie.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0&&(zc(t.format,{instancePath:e+"/format",parentData:t,parentDataProperty:"format",rootData:s})||(i=i===null?zc.errors:i.concat(zc.errors),o=i.length)),t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:ie.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.limit_disclosure.type,parentSchema:ie.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.limit_disclosure.enum,parentSchema:ie.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let f={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:ie.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let f={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:ie.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.properties.active.type,parentSchema:ie.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let f={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let f={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:ie.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let f={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let f={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:ie.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.type,parentSchema:ie.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)$v(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?$v.errors:i.concat($v.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.fields.type,parentSchema:ie.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.subject_is_issuer.type,parentSchema:ie.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.subject_is_issuer.enum,parentSchema:ie.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let f=u[l];if(f&&typeof f=="object"&&!Array.isArray(f)){if(f.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ie.properties.constraints.properties.is_holder.items.required,parentSchema:ie.properties.constraints.properties.is_holder.items,data:f};i===null?i=[p]:i.push(p),o++}if(f.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ie.properties.constraints.properties.is_holder.items.required,parentSchema:ie.properties.constraints.properties.is_holder.items,data:f};i===null?i=[p]:i.push(p),o++}for(let p in f)if(!(p==="field_id"||p==="directive")){let d={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ie.properties.constraints.properties.is_holder.items,data:f};i===null?i=[d]:i.push(d),o++}if(f.field_id!==void 0){let p=f.field_id;if(Array.isArray(p)){let d=p.length;for(let h=0;h<d;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let d={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[d]:i.push(d),o++}}if(f.directive!==void 0){let p=f.directive;if(typeof p!="string"){let d={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}if(!(p==="required"||p==="preferred")){let d={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.is_holder.items.type,parentSchema:ie.properties.constraints.properties.is_holder.items,data:f};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.is_holder.type,parentSchema:ie.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let f=u[l];if(f&&typeof f=="object"&&!Array.isArray(f)){if(f.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ie.properties.constraints.properties.same_subject.items.required,parentSchema:ie.properties.constraints.properties.same_subject.items,data:f};i===null?i=[p]:i.push(p),o++}if(f.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ie.properties.constraints.properties.same_subject.items.required,parentSchema:ie.properties.constraints.properties.same_subject.items,data:f};i===null?i=[p]:i.push(p),o++}for(let p in f)if(!(p==="field_id"||p==="directive")){let d={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ie.properties.constraints.properties.same_subject.items,data:f};i===null?i=[d]:i.push(d),o++}if(f.field_id!==void 0){let p=f.field_id;if(Array.isArray(p)){let d=p.length;for(let h=0;h<d;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let d={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[d]:i.push(d),o++}}if(f.directive!==void 0){let p=f.directive;if(typeof p!="string"){let d={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}if(!(p==="required"||p==="preferred")){let d={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[d]:i.push(d),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.same_subject.items.type,parentSchema:ie.properties.constraints.properties.same_subject.items,data:f};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.same_subject.type,parentSchema:ie.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.type,parentSchema:ie.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.type,parentSchema:ie,data:t};i===null?i=[a]:i.push(a),o++}return Nv.errors=i,o===0}function Xx(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:mr.properties.presentation_definition.required,parentSchema:mr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:mr.properties.presentation_definition.required,parentSchema:mr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="frame"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:mr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mr.properties.presentation_definition.properties.id.type,parentSchema:mr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mr.properties.presentation_definition.properties.name.type,parentSchema:mr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mr.properties.presentation_definition.properties.purpose.type,parentSchema:mr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(zc(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?zc.errors:i.concat(zc.errors),o=i.length)),a.frame!==void 0){let u=a.frame;if(!(u&&typeof u=="object"&&!Array.isArray(u))){let c={instancePath:e+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:mr.properties.presentation_definition.properties.frame.type,parentSchema:mr.properties.presentation_definition.properties.frame,data:u};i===null?i=[c]:i.push(c),o++}}if(a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Hh(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Hh.errors:i.concat(Hh.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:mr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:mr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Nv(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Nv.errors:i.concat(Nv.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:mr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:mr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:mr.properties.presentation_definition.type,parentSchema:mr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:mr.type,parentSchema:mr,data:t};i===null?i=[a]:i.push(a),o++}return Xx.errors=i,o===0}});var UN=w(mn=>{"use strict";var qN=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mn,"__esModule",{value:!0});mn.filterToRestrictedDIDs=mn.isRestrictedDID=mn.uniformDIDMethods=mn.definitionVersionDiscovery=mn.getIssuerString=mn.getSubjectIdsAsString=void 0;var MN=Lc(),kae=qN(Kx()),Rae=qN(Qx()),$ae=Tx(),jN=Ox();function Nae(t){return(Array.isArray(t.credentialSubject)?t.credentialSubject:[t.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}mn.getSubjectIdsAsString=Nae;function Mae(t){return $ae.ObjectUtils.isString(t.issuer)?t.issuer:t.issuer.id}mn.getIssuerString=Mae;function jae(t){let e=JSON.parse(JSON.stringify(t));jN.JsonPathUtils.changePropertyNameRecursively(e,"_const","const"),jN.JsonPathUtils.changePropertyNameRecursively(e,"_enum","enum");let r={presentation_definition:e},n=(0,Rae.default)(r);return n?{version:MN.PEVersion.v2}:(n=(0,kae.default)(r),n?{version:MN.PEVersion.v1}:{error:"This is not a valid PresentationDefinition"})}mn.definitionVersionDiscovery=jae;function e2(t,e){var r;let n=(r=t?.map(s=>s.toLowerCase()).map(s=>s.startsWith("did:")?s:`did:${s}`))!==null&&r!==void 0?r:[];if(e?.removePrefix){let s=e.removePrefix.endsWith(":")?e.removePrefix.length:e.removePrefix.length+1;n=n.map(i=>i.startsWith(e.removePrefix)?i.substring(s):i)}return n.includes("did")?[]:n}mn.uniformDIDMethods=e2;function qae(t,e){let r=e2(e);return r.length===0||r.some(n=>t.toLowerCase().startsWith(n))}mn.isRestrictedDID=qae;function Uae(t,e){let r=e2(e);return r.length===0?t:r.flatMap(n=>t.filter(s=>s.toLowerCase().startsWith(n)))}mn.filterToRestrictedDIDs=Uae});var Ti=w(io=>{"use strict";var Lae=io&&io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mv=io&&io.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Lae(e,t,r)};Object.defineProperty(io,"__esModule",{value:!0});Mv(Ox(),io);Mv(Tx(),io);Mv(DN(),io);Mv(UN(),io)});var Ii=w(jv=>{"use strict";Object.defineProperty(jv,"__esModule",{value:!0});jv.AbstractEvaluationHandler=void 0;var Kae=Bi(),Vae=Tr(),t2=class{constructor(e){this._client=e}setNext(e){return this.nextHandler=e,e}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(e){this._client.wrappedVcs=e}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(e){this._client.presentationSubmission=e}getResults(){return this._client.results}updatePresentationSubmission(e){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===Vae.Status.ERROR&&a.evaluator===this.getName()).find(a=>(i=Kae.JSONPath.query(e,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&i?.id===r.id))&&delete s[n]})}removeDuplicate(e){return e.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}};jv.AbstractEvaluationHandler=t2});var KN=w(LN=>{"use strict";Object.defineProperty(LN,"__esModule",{value:!0})});var Jh=w(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.regexpCode=_t.getEsmExportName=_t.getProperty=_t.safeStringify=_t.stringify=_t.strConcat=_t.addCodeArg=_t.str=_t._=_t.nil=_t._Code=_t.Name=_t.IDENTIFIER=_t._CodeOrName=void 0;var zh=class{};_t._CodeOrName=zh;_t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Wc=class extends zh{constructor(e){if(super(),!_t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};_t.Name=Wc;var Fi=class extends zh{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Wc&&(r[n.str]=(r[n.str]||0)+1),r),{})}};_t._Code=Fi;_t.nil=new Fi("");function VN(t,...e){let r=[t[0]],n=0;for(;n<e.length;)n2(r,e[n]),r.push(t[++n]);return new Fi(r)}_t._=VN;var r2=new Fi("+");function HN(t,...e){let r=[Wh(t[0])],n=0;for(;n<e.length;)r.push(r2),n2(r,e[n]),r.push(r2,Wh(t[++n]));return Hae(r),new Fi(r)}_t.str=HN;function n2(t,e){e instanceof Fi?t.push(...e._items):e instanceof Wc?t.push(e):t.push(Jae(e))}_t.addCodeArg=n2;function Hae(t){let e=1;for(;e<t.length-1;){if(t[e]===r2){let r=zae(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function zae(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Wc||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Wc))return`"${t}${e.slice(1)}`}function Wae(t,e){return e.emptyStr()?t:t.emptyStr()?e:HN`${t}${e}`}_t.strConcat=Wae;function Jae(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Wh(Array.isArray(t)?t.join(","):t)}function Gae(t){return new Fi(Wh(t))}_t.stringify=Gae;function Wh(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}_t.safeStringify=Wh;function Zae(t){return typeof t=="string"&&_t.IDENTIFIER.test(t)?new Fi(`.${t}`):VN`[${t}]`}_t.getProperty=Zae;function Xae(t){if(typeof t=="string"&&_t.IDENTIFIER.test(t))return new Fi(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}_t.getEsmExportName=Xae;function Yae(t){return new Fi(t.toString())}_t.regexpCode=Yae});var a2=w(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ValueScope=Pn.ValueScopeName=Pn.Scope=Pn.varKinds=Pn.UsedValueState=void 0;var Hn=Jh(),i2=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},s2;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(s2=Pn.UsedValueState||(Pn.UsedValueState={}));Pn.varKinds={const:new Hn.Name("const"),let:new Hn.Name("let"),var:new Hn.Name("var")};var qv=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Hn.Name?e:this.name(e)}name(e){return new Hn.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Pn.Scope=qv;var Uv=class extends Hn.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Hn._)`.${new Hn.Name(r)}[${n}]`}};Pn.ValueScopeName=Uv;var Qae=(0,Hn._)`\n`,o2=class extends qv{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Qae:Hn.nil}}get(){return this._scope}name(e){return new Uv(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Hn._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Hn.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,s2.Started);let l=r(c);if(l){let f=this.opts.es5?Pn.varKinds.var:Pn.varKinds.const;i=(0,Hn._)`${i}${f} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,Hn._)`${i}${l}${this.opts._n}`;else throw new i2(c);u.set(c,s2.Completed)})}return i}};Pn.ValueScope=o2});var Qe=w(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.or=it.and=it.not=it.CodeGen=it.operators=it.varKinds=it.ValueScopeName=it.ValueScope=it.Scope=it.Name=it.regexpCode=it.stringify=it.getProperty=it.nil=it.strConcat=it.str=it._=void 0;var ht=Jh(),as=a2(),cu=Jh();Object.defineProperty(it,"_",{enumerable:!0,get:function(){return cu._}});Object.defineProperty(it,"str",{enumerable:!0,get:function(){return cu.str}});Object.defineProperty(it,"strConcat",{enumerable:!0,get:function(){return cu.strConcat}});Object.defineProperty(it,"nil",{enumerable:!0,get:function(){return cu.nil}});Object.defineProperty(it,"getProperty",{enumerable:!0,get:function(){return cu.getProperty}});Object.defineProperty(it,"stringify",{enumerable:!0,get:function(){return cu.stringify}});Object.defineProperty(it,"regexpCode",{enumerable:!0,get:function(){return cu.regexpCode}});Object.defineProperty(it,"Name",{enumerable:!0,get:function(){return cu.Name}});var Hv=a2();Object.defineProperty(it,"Scope",{enumerable:!0,get:function(){return Hv.Scope}});Object.defineProperty(it,"ValueScope",{enumerable:!0,get:function(){return Hv.ValueScope}});Object.defineProperty(it,"ValueScopeName",{enumerable:!0,get:function(){return Hv.ValueScopeName}});Object.defineProperty(it,"varKinds",{enumerable:!0,get:function(){return Hv.varKinds}});it.operators={GT:new ht._Code(">"),GTE:new ht._Code(">="),LT:new ht._Code("<"),LTE:new ht._Code("<="),EQ:new ht._Code("==="),NEQ:new ht._Code("!=="),NOT:new ht._Code("!"),OR:new ht._Code("||"),AND:new ht._Code("&&"),ADD:new ht._Code("+")};var ua=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},u2=class extends ua{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?as.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Xf(this.rhs,e,r)),this}get names(){return this.rhs instanceof ht._CodeOrName?this.rhs.names:{}}},Lv=class extends ua{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof ht.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Xf(this.rhs,e,r),this}get names(){let e=this.lhs instanceof ht.Name?{}:{...this.lhs.names};return Vv(e,this.rhs)}},c2=class extends Lv{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},l2=class extends ua{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},f2=class extends ua{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},d2=class extends ua{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},p2=class extends ua{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Xf(this.code,e,r),this}get names(){return this.code instanceof ht._CodeOrName?this.code.names:{}}},Gh=class extends ua{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(eue(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Zc(e,r.names),{})}},ca=class extends Gh{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},h2=class extends Gh{},Zf=class extends ca{};Zf.kind="else";var Jc=class t extends ca{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Zf(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(zN(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Xf(this.condition,e,r),this}get names(){let e=super.names;return Vv(e,this.condition),this.else&&Zc(e,this.else.names),e}};Jc.kind="if";var Gc=class extends ca{};Gc.kind="for";var y2=class extends Gc{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Xf(this.iteration,e,r),this}get names(){return Zc(super.names,this.iteration.names)}},m2=class extends Gc{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?as.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Vv(super.names,this.from);return Vv(e,this.to)}},Kv=class extends Gc{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Xf(this.iterable,e,r),this}get names(){return Zc(super.names,this.iterable.names)}},Zh=class extends ca{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Zh.kind="func";var Xh=class extends Gh{render(e){return"return "+super.render(e)}};Xh.kind="return";var g2=class extends ca{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Zc(e,this.catch.names),this.finally&&Zc(e,this.finally.names),e}},Yh=class extends ca{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Yh.kind="catch";var Qh=class extends ca{render(e){return"finally"+super.render(e)}};Qh.kind="finally";var v2=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new as.Scope({parent:e}),this._nodes=[new h2]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new u2(e,i,n)),i}const(e,r,n){return this._def(as.varKinds.const,e,r,n)}let(e,r,n){return this._def(as.varKinds.let,e,r,n)}var(e,r,n){return this._def(as.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Lv(e,r,n))}add(e,r){return this._leafNode(new c2(e,it.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==ht.nil&&this._leafNode(new p2(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,ht.addCodeArg)(r,s));return r.push("}"),new ht._Code(r)}if(e,r,n){if(this._blockNode(new Jc(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Jc(e))}else(){return this._elseNode(new Zf)}endIf(){return this._endBlockNode(Jc,Zf)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new y2(e),r)}forRange(e,r,n,s,i=this.opts.es5?as.varKinds.var:as.varKinds.let){let o=this._scope.toName(e);return this._for(new m2(i,o,r,n),()=>s(o))}forOf(e,r,n,s=as.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof ht.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,ht._)`${o}.length`,a=>{this.var(i,(0,ht._)`${o}[${a}]`),n(i)})}return this._for(new Kv("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?as.varKinds.var:as.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,ht._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Kv("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Gc)}label(e){return this._leafNode(new l2(e))}break(e){return this._leafNode(new f2(e))}return(e){let r=new Xh;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Xh)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new g2;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Yh(i),r(i)}return n&&(this._currNode=s.finally=new Qh,this.code(n)),this._endBlockNode(Yh,Qh)}throw(e){return this._leafNode(new d2(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=ht.nil,n,s){return this._blockNode(new Zh(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Zh)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Jc))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};it.CodeGen=v2;function Zc(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Vv(t,e){return e instanceof ht._CodeOrName?Zc(t,e.names):t}function Xf(t,e,r){if(t instanceof ht.Name)return n(t);if(!s(t))return t;return new ht._Code(t._items.reduce((i,o)=>(o instanceof ht.Name&&(o=n(o)),o instanceof ht._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof ht._Code&&i._items.some(o=>o instanceof ht.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function eue(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function zN(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,ht._)`!${b2(t)}`}it.not=zN;var tue=WN(it.operators.AND);function rue(...t){return t.reduce(tue)}it.and=rue;var nue=WN(it.operators.OR);function iue(...t){return t.reduce(nue)}it.or=iue;function WN(t){return(e,r)=>e===ht.nil?r:r===ht.nil?e:(0,ht._)`${b2(e)} ${t} ${b2(r)}`}function b2(t){return t instanceof ht.Name?t:(0,ht._)`(${t})`}});var Et=w(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.checkStrictMode=st.getErrorPath=st.Type=st.useFunc=st.setEvaluated=st.evaluatedPropsToName=st.mergeEvaluated=st.eachItem=st.unescapeJsonPointer=st.escapeJsonPointer=st.escapeFragment=st.unescapeFragment=st.schemaRefOrVal=st.schemaHasRulesButRef=st.schemaHasRules=st.checkUnknownRules=st.alwaysValidSchema=st.toHash=void 0;var Lt=Qe(),sue=Jh();function oue(t){let e={};for(let r of t)e[r]=!0;return e}st.toHash=oue;function aue(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(ZN(t,e),!XN(e,t.self.RULES.all))}st.alwaysValidSchema=aue;function ZN(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||t9(t,`unknown keyword: "${i}"`)}st.checkUnknownRules=ZN;function XN(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}st.schemaHasRules=XN;function uue(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}st.schemaHasRulesButRef=uue;function cue({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Lt._)`${r}`}return(0,Lt._)`${t}${e}${(0,Lt.getProperty)(n)}`}st.schemaRefOrVal=cue;function lue(t){return YN(decodeURIComponent(t))}st.unescapeFragment=lue;function fue(t){return encodeURIComponent(w2(t))}st.escapeFragment=fue;function w2(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}st.escapeJsonPointer=w2;function YN(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}st.unescapeJsonPointer=YN;function due(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}st.eachItem=due;function JN({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof Lt.Name?(i instanceof Lt.Name?t(s,i,o):e(s,i,o),o):i instanceof Lt.Name?(e(s,o,i),i):r(i,o);return a===Lt.Name&&!(u instanceof Lt.Name)?n(s,u):u}}st.mergeEvaluated={props:JN({mergeNames:(t,e,r)=>t.if((0,Lt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Lt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Lt._)`${r} || {}`).code((0,Lt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Lt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Lt._)`${r} || {}`),_2(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:QN}),items:JN({mergeNames:(t,e,r)=>t.if((0,Lt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Lt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Lt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Lt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function QN(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Lt._)`{}`);return e!==void 0&&_2(t,r,e),r}st.evaluatedPropsToName=QN;function _2(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Lt._)`${e}${(0,Lt.getProperty)(n)}`,!0))}st.setEvaluated=_2;var GN={};function pue(t,e){return t.scopeValue("func",{ref:e,code:GN[e.code]||(GN[e.code]=new sue._Code(e.code))})}st.useFunc=pue;var e9;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(e9=st.Type||(st.Type={}));function hue(t,e,r){if(t instanceof Lt.Name){let n=e===e9.Num;return r?n?(0,Lt._)`"[" + ${t} + "]"`:(0,Lt._)`"['" + ${t} + "']"`:n?(0,Lt._)`"/" + ${t}`:(0,Lt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Lt.getProperty)(t).toString():"/"+w2(t)}st.getErrorPath=hue;function t9(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}st.checkStrictMode=t9});var la=w(E2=>{"use strict";Object.defineProperty(E2,"__esModule",{value:!0});var gn=Qe(),yue={data:new gn.Name("data"),valCxt:new gn.Name("valCxt"),instancePath:new gn.Name("instancePath"),parentData:new gn.Name("parentData"),parentDataProperty:new gn.Name("parentDataProperty"),rootData:new gn.Name("rootData"),dynamicAnchors:new gn.Name("dynamicAnchors"),vErrors:new gn.Name("vErrors"),errors:new gn.Name("errors"),this:new gn.Name("this"),self:new gn.Name("self"),scope:new gn.Name("scope"),json:new gn.Name("json"),jsonPos:new gn.Name("jsonPos"),jsonLen:new gn.Name("jsonLen"),jsonPart:new gn.Name("jsonPart")};E2.default=yue});var ey=w(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.extendErrors=vn.resetErrorsCount=vn.reportExtraError=vn.reportError=vn.keyword$DataError=vn.keywordError=void 0;var vt=Qe(),zv=Et(),On=la();vn.keywordError={message:({keyword:t})=>(0,vt.str)`must pass "${t}" keyword validation`};vn.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,vt.str)`"${t}" keyword must be ${e} ($data)`:(0,vt.str)`"${t}" keyword is invalid ($data)`};function mue(t,e=vn.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=i9(t,e,r);n??(o||a)?r9(i,u):n9(s,(0,vt._)`[${u}]`)}vn.reportError=mue;function gue(t,e=vn.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=i9(t,e,r);r9(s,a),i||o||n9(n,On.default.vErrors)}vn.reportExtraError=gue;function vue(t,e){t.assign(On.default.errors,e),t.if((0,vt._)`${On.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,vt._)`${On.default.vErrors}.length`,e),()=>t.assign(On.default.vErrors,null)))}vn.resetErrorsCount=vue;function bue({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,On.default.errors,a=>{t.const(o,(0,vt._)`${On.default.vErrors}[${a}]`),t.if((0,vt._)`${o}.instancePath === undefined`,()=>t.assign((0,vt._)`${o}.instancePath`,(0,vt.strConcat)(On.default.instancePath,i.errorPath))),t.assign((0,vt._)`${o}.schemaPath`,(0,vt.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,vt._)`${o}.schema`,r),t.assign((0,vt._)`${o}.data`,n))})}vn.extendErrors=bue;function r9(t,e){let r=t.const("err",e);t.if((0,vt._)`${On.default.vErrors} === null`,()=>t.assign(On.default.vErrors,(0,vt._)`[${r}]`),(0,vt._)`${On.default.vErrors}.push(${r})`),t.code((0,vt._)`${On.default.errors}++`)}function n9(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,vt._)`new ${t.ValidationError}(${e})`):(r.assign((0,vt._)`${n}.errors`,e),r.return(!1))}var Xc={keyword:new vt.Name("keyword"),schemaPath:new vt.Name("schemaPath"),params:new vt.Name("params"),propertyName:new vt.Name("propertyName"),message:new vt.Name("message"),schema:new vt.Name("schema"),parentSchema:new vt.Name("parentSchema")};function i9(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,vt._)`{}`:wue(t,e,r)}function wue(t,e,r={}){let{gen:n,it:s}=t,i=[_ue(s,r),Eue(t,r)];return Sue(t,e,i),n.object(...i)}function _ue({errorPath:t},{instancePath:e}){let r=e?(0,vt.str)`${t}${(0,zv.getErrorPath)(e,zv.Type.Str)}`:t;return[On.default.instancePath,(0,vt.strConcat)(On.default.instancePath,r)]}function Eue({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,vt.str)`${e}/${t}`;return r&&(s=(0,vt.str)`${s}${(0,zv.getErrorPath)(r,zv.Type.Str)}`),[Xc.schemaPath,s]}function Sue(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:f}=a;n.push([Xc.keyword,s],[Xc.params,typeof e=="function"?e(t):e||(0,vt._)`{}`]),u.messages&&n.push([Xc.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([Xc.schema,o],[Xc.parentSchema,(0,vt._)`${l}${f}`],[On.default.data,i]),c&&n.push([Xc.propertyName,c])}});var o9=w(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.boolOrEmptySchema=Yf.topBoolOrEmptySchema=void 0;var Aue=ey(),xue=Qe(),Due=la(),Cue={message:"boolean schema is false"};function Pue(t){let{gen:e,schema:r,validateName:n}=t;r===!1?s9(t,!1):typeof r=="object"&&r.$async===!0?e.return(Due.default.data):(e.assign((0,xue._)`${n}.errors`,null),e.return(!0))}Yf.topBoolOrEmptySchema=Pue;function Oue(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),s9(t)):r.var(e,!0)}Yf.boolOrEmptySchema=Oue;function s9(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Aue.reportError)(s,Cue,void 0,e)}});var S2=w(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.getRules=Qf.isJSONType=void 0;var Bue=["string","number","integer","boolean","null","object","array"],Tue=new Set(Bue);function Iue(t){return typeof t=="string"&&Tue.has(t)}Qf.isJSONType=Iue;function Fue(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Qf.getRules=Fue});var A2=w(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.shouldUseRule=lu.shouldUseGroup=lu.schemaHasRulesForType=void 0;function kue({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&a9(t,n)}lu.schemaHasRulesForType=kue;function a9(t,e){return e.rules.some(r=>u9(t,r))}lu.shouldUseGroup=a9;function u9(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}lu.shouldUseRule=u9});var ry=w(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.reportTypeError=sn.checkDataTypes=sn.checkDataType=sn.coerceAndCheckDataType=sn.getJSONTypes=sn.getSchemaTypes=sn.DataType=void 0;var Rue=S2(),$ue=A2(),Nue=ey(),We=Qe(),c9=Et(),ty;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(ty=sn.DataType||(sn.DataType={}));function Mue(t){let e=l9(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}sn.getSchemaTypes=Mue;function l9(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Rue.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}sn.getJSONTypes=l9;function jue(t,e){let{gen:r,data:n,opts:s}=t,i=que(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,$ue.schemaHasRulesForType)(t,e[0]));if(o){let a=D2(e,n,s.strictNumbers,ty.Wrong);r.if(a,()=>{i.length?Uue(t,e,i):C2(t)})}return o}sn.coerceAndCheckDataType=jue;var f9=new Set(["string","number","integer","boolean","null"]);function que(t,e){return e?t.filter(r=>f9.has(r)||e==="array"&&r==="array"):[]}function Uue(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,We._)`typeof ${s}`),a=n.let("coerced",(0,We._)`undefined`);i.coerceTypes==="array"&&n.if((0,We._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,We._)`${s}[0]`).assign(o,(0,We._)`typeof ${s}`).if(D2(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,We._)`${a} !== undefined`);for(let c of r)(f9.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),C2(t),n.endIf(),n.if((0,We._)`${a} !== undefined`,()=>{n.assign(s,a),Lue(t,a)});function u(c){switch(c){case"string":n.elseIf((0,We._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,We._)`"" + ${s}`).elseIf((0,We._)`${s} === null`).assign(a,(0,We._)`""`);return;case"number":n.elseIf((0,We._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,We._)`+${s}`);return;case"integer":n.elseIf((0,We._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,We._)`+${s}`);return;case"boolean":n.elseIf((0,We._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,We._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,We._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,We._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,We._)`[${s}]`)}}}function Lue({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,We._)`${e} !== undefined`,()=>t.assign((0,We._)`${e}[${r}]`,n))}function x2(t,e,r,n=ty.Correct){let s=n===ty.Correct?We.operators.EQ:We.operators.NEQ,i;switch(t){case"null":return(0,We._)`${e} ${s} null`;case"array":i=(0,We._)`Array.isArray(${e})`;break;case"object":i=(0,We._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,We._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,We._)`typeof ${e} ${s} ${t}`}return n===ty.Correct?i:(0,We.not)(i);function o(a=We.nil){return(0,We.and)((0,We._)`typeof ${e} == "number"`,a,r?(0,We._)`isFinite(${e})`:We.nil)}}sn.checkDataType=x2;function D2(t,e,r,n){if(t.length===1)return x2(t[0],e,r,n);let s,i=(0,c9.toHash)(t);if(i.array&&i.object){let o=(0,We._)`typeof ${e} != "object"`;s=i.null?o:(0,We._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=We.nil;i.number&&delete i.integer;for(let o in i)s=(0,We.and)(s,x2(o,e,r,n));return s}sn.checkDataTypes=D2;var Kue={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,We._)`{type: ${t}}`:(0,We._)`{type: ${e}}`};function C2(t){let e=Vue(t);(0,Nue.reportError)(e,Kue)}sn.reportTypeError=C2;function Vue(t){let{gen:e,data:r,schema:n}=t,s=(0,c9.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var p9=w(Wv=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});Wv.assignDefaults=void 0;var ed=Qe(),Hue=Et();function zue(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)d9(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>d9(t,i,s.default))}Wv.assignDefaults=zue;function d9(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,ed._)`${i}${(0,ed.getProperty)(e)}`;if(s){(0,Hue.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,ed._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,ed._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,ed._)`${a} = ${(0,ed.stringify)(r)}`)}});var ki=w(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.validateUnion=Nt.validateArray=Nt.usePattern=Nt.callValidateCode=Nt.schemaProperties=Nt.allSchemaProperties=Nt.noPropertyInData=Nt.propertyInData=Nt.isOwnProperty=Nt.hasPropFunc=Nt.reportMissingProp=Nt.checkMissingProp=Nt.checkReportMissingProp=void 0;var Gt=Qe(),P2=Et(),fu=la(),Wue=Et();function Jue(t,e){let{gen:r,data:n,it:s}=t;r.if(B2(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Gt._)`${e}`},!0),t.error()})}Nt.checkReportMissingProp=Jue;function Gue({gen:t,data:e,it:{opts:r}},n,s){return(0,Gt.or)(...n.map(i=>(0,Gt.and)(B2(t,e,i,r.ownProperties),(0,Gt._)`${s} = ${i}`)))}Nt.checkMissingProp=Gue;function Zue(t,e){t.setParams({missingProperty:e},!0),t.error()}Nt.reportMissingProp=Zue;function h9(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Gt._)`Object.prototype.hasOwnProperty`})}Nt.hasPropFunc=h9;function O2(t,e,r){return(0,Gt._)`${h9(t)}.call(${e}, ${r})`}Nt.isOwnProperty=O2;function Xue(t,e,r,n){let s=(0,Gt._)`${e}${(0,Gt.getProperty)(r)} !== undefined`;return n?(0,Gt._)`${s} && ${O2(t,e,r)}`:s}Nt.propertyInData=Xue;function B2(t,e,r,n){let s=(0,Gt._)`${e}${(0,Gt.getProperty)(r)} === undefined`;return n?(0,Gt.or)(s,(0,Gt.not)(O2(t,e,r))):s}Nt.noPropertyInData=B2;function y9(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Nt.allSchemaProperties=y9;function Yue(t,e){return y9(e).filter(r=>!(0,P2.alwaysValidSchema)(t,e[r]))}Nt.schemaProperties=Yue;function Que({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,Gt._)`${t}, ${e}, ${n}${s}`:e,f=[[fu.default.instancePath,(0,Gt.strConcat)(fu.default.instancePath,i)],[fu.default.parentData,o.parentData],[fu.default.parentDataProperty,o.parentDataProperty],[fu.default.rootData,fu.default.rootData]];o.opts.dynamicRef&&f.push([fu.default.dynamicAnchors,fu.default.dynamicAnchors]);let p=(0,Gt._)`${l}, ${r.object(...f)}`;return u!==Gt.nil?(0,Gt._)`${a}.call(${u}, ${p})`:(0,Gt._)`${a}(${p})`}Nt.callValidateCode=Que;var ece=(0,Gt._)`new RegExp`;function tce({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Gt._)`${s.code==="new RegExp"?ece:(0,Wue.useFunc)(t,s)}(${r}, ${n})`})}Nt.usePattern=tce;function rce(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,Gt._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:P2.Type.Num},i),e.if((0,Gt.not)(i),a)})}}Nt.validateArray=rce;function nce(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,P2.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,Gt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,Gt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Nt.validateUnion=nce});var v9=w(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.validateKeywordUsage=so.validSchemaType=so.funcKeywordCode=so.macroKeywordCode=void 0;var Bn=Qe(),Yc=la(),ice=ki(),sce=ey();function oce(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=g9(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:Bn.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}so.macroKeywordCode=oce;function ace(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;cce(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=g9(n,s,c),f=n.let("valid");t.block$data(f,p),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function p(){if(e.errors===!1)m(),e.modifying&&m9(t),g(()=>t.error());else{let _=e.async?d():h();e.modifying&&m9(t),g(()=>uce(t,_))}}function d(){let _=n.let("ruleErrs",null);return n.try(()=>m((0,Bn._)`await `),D=>n.assign(f,!1).if((0,Bn._)`${D} instanceof ${u.ValidationError}`,()=>n.assign(_,(0,Bn._)`${D}.errors`),()=>n.throw(D))),_}function h(){let _=(0,Bn._)`${l}.errors`;return n.assign(_,null),m(Bn.nil),_}function m(_=e.async?(0,Bn._)`await `:Bn.nil){let D=u.opts.passContext?Yc.default.this:Yc.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,Bn._)`${_}${(0,ice.callValidateCode)(t,l,D,v)}`,e.modifying)}function g(_){var D;n.if((0,Bn.not)((D=e.valid)!==null&&D!==void 0?D:f),_)}}so.funcKeywordCode=ace;function m9(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Bn._)`${n.parentData}[${n.parentDataProperty}]`))}function uce(t,e){let{gen:r}=t;r.if((0,Bn._)`Array.isArray(${e})`,()=>{r.assign(Yc.default.vErrors,(0,Bn._)`${Yc.default.vErrors} === null ? ${e} : ${Yc.default.vErrors}.concat(${e})`).assign(Yc.default.errors,(0,Bn._)`${Yc.default.vErrors}.length`),(0,sce.extendErrors)(t)},()=>t.error())}function cce({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function g9(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Bn.stringify)(r)})}function lce(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}so.validSchemaType=lce;function fce({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}so.validateKeywordUsage=fce});var w9=w(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.extendSubschemaMode=du.extendSubschemaData=du.getSubschema=void 0;var oo=Qe(),b9=Et();function dce(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,oo._)`${t.schemaPath}${(0,oo.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,oo._)`${t.schemaPath}${(0,oo.getProperty)(e)}${(0,oo.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,b9.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}du.getSubschema=dce;function pce(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:f}=e,p=a.let("data",(0,oo._)`${e.data}${(0,oo.getProperty)(r)}`,!0);u(p),t.errorPath=(0,oo.str)`${c}${(0,b9.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,oo._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof oo.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}du.extendSubschemaData=pce;function hce(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}du.extendSubschemaMode=hce});var E9=w((tTe,_9)=>{"use strict";var pu=_9.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Jv(e,n,s,t,"",t)};pu.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};pu.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};pu.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};pu.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Jv(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var f=n[l];if(Array.isArray(f)){if(l in pu.arrayKeywords)for(var p=0;p<f.length;p++)Jv(t,e,r,f[p],s+"/"+l+"/"+p,i,s,l,n,p)}else if(l in pu.propsKeywords){if(f&&typeof f=="object")for(var d in f)Jv(t,e,r,f[d],s+"/"+l+"/"+yce(d),i,s,l,n,d)}else(l in pu.keywords||t.allKeys&&!(l in pu.skipKeywords))&&Jv(t,e,r,f,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function yce(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var ny=w(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.getSchemaRefs=zn.resolveUrl=zn.normalizeId=zn._getFullPath=zn.getFullPath=zn.inlineRef=void 0;var mce=Et(),gce=Vx(),vce=E9(),bce=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function wce(t,e=!0){return typeof t=="boolean"?!0:e===!0?!T2(t):e?S9(t)<=e:!1}zn.inlineRef=wce;var _ce=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function T2(t){for(let e in t){if(_ce.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(T2)||typeof r=="object"&&T2(r))return!0}return!1}function S9(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!bce.has(r)&&(typeof t[r]=="object"&&(0,mce.eachItem)(t[r],n=>e+=S9(n)),e===1/0))return 1/0}return e}function A9(t,e="",r){r!==!1&&(e=td(e));let n=t.parse(e);return x9(t,n)}zn.getFullPath=A9;function x9(t,e){return t.serialize(e).split("#")[0]+"#"}zn._getFullPath=x9;var Ece=/#\/?$/;function td(t){return t?t.replace(Ece,""):""}zn.normalizeId=td;function Sce(t,e,r){return r=td(r),t.resolve(e,r)}zn.resolveUrl=Sce;var Ace=/^[a-z_][-a-z0-9._]*$/i;function xce(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=td(t[r]||e),i={"":s},o=A9(n,s,!1),a={},u=new Set;return vce(t,{allKeys:!0},(f,p,d,h)=>{if(h===void 0)return;let m=o+p,g=i[h];typeof f[r]=="string"&&(g=_.call(this,f[r])),D.call(this,f.$anchor),D.call(this,f.$dynamicAnchor),i[p]=g;function _(v){let A=this.opts.uriResolver.resolve;if(v=td(g?A(g,v):v),u.has(v))throw l(v);u.add(v);let x=this.refs[v];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?c(f,x.schema,v):v!==td(m)&&(v[0]==="#"?(c(f,a[v],v),a[v]=f):this.refs[v]=m),v}function D(v){if(typeof v=="string"){if(!Ace.test(v))throw new Error(`invalid anchor "${v}"`);_.call(this,`#${v}`)}}}),a;function c(f,p,d){if(p!==void 0&&!gce(f,p))throw l(d)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}zn.getSchemaRefs=xce});var oy=w(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.getData=hu.KeywordCxt=hu.validateFunctionCode=void 0;var B9=o9(),D9=ry(),F2=A2(),Gv=ry(),Dce=p9(),sy=v9(),I2=w9(),Ae=Qe(),Me=la(),Cce=ny(),fa=Et(),iy=ey();function Pce(t){if(F9(t)&&(k9(t),I9(t))){Tce(t);return}T9(t,()=>(0,B9.topBoolOrEmptySchema)(t))}hu.validateFunctionCode=Pce;function T9({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Ae._)`${Me.default.data}, ${Me.default.valCxt}`,n.$async,()=>{t.code((0,Ae._)`"use strict"; ${C9(r,s)}`),Bce(t,s),t.code(i)}):t.func(e,(0,Ae._)`${Me.default.data}, ${Oce(s)}`,n.$async,()=>t.code(C9(r,s)).code(i))}function Oce(t){return(0,Ae._)`{${Me.default.instancePath}="", ${Me.default.parentData}, ${Me.default.parentDataProperty}, ${Me.default.rootData}=${Me.default.data}${t.dynamicRef?(0,Ae._)`, ${Me.default.dynamicAnchors}={}`:Ae.nil}}={}`}function Bce(t,e){t.if(Me.default.valCxt,()=>{t.var(Me.default.instancePath,(0,Ae._)`${Me.default.valCxt}.${Me.default.instancePath}`),t.var(Me.default.parentData,(0,Ae._)`${Me.default.valCxt}.${Me.default.parentData}`),t.var(Me.default.parentDataProperty,(0,Ae._)`${Me.default.valCxt}.${Me.default.parentDataProperty}`),t.var(Me.default.rootData,(0,Ae._)`${Me.default.valCxt}.${Me.default.rootData}`),e.dynamicRef&&t.var(Me.default.dynamicAnchors,(0,Ae._)`${Me.default.valCxt}.${Me.default.dynamicAnchors}`)},()=>{t.var(Me.default.instancePath,(0,Ae._)`""`),t.var(Me.default.parentData,(0,Ae._)`undefined`),t.var(Me.default.parentDataProperty,(0,Ae._)`undefined`),t.var(Me.default.rootData,Me.default.data),e.dynamicRef&&t.var(Me.default.dynamicAnchors,(0,Ae._)`{}`)})}function Tce(t){let{schema:e,opts:r,gen:n}=t;T9(t,()=>{r.$comment&&e.$comment&&$9(t),$ce(t),n.let(Me.default.vErrors,null),n.let(Me.default.errors,0),r.unevaluated&&Ice(t),R9(t),jce(t)})}function Ice(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Ae._)`${r}.evaluated`),e.if((0,Ae._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Ae._)`${t.evaluated}.props`,(0,Ae._)`undefined`)),e.if((0,Ae._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Ae._)`${t.evaluated}.items`,(0,Ae._)`undefined`))}function C9(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Ae._)`/*# sourceURL=${r} */`:Ae.nil}function Fce(t,e){if(F9(t)&&(k9(t),I9(t))){kce(t,e);return}(0,B9.boolOrEmptySchema)(t,e)}function I9({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function F9(t){return typeof t.schema!="boolean"}function kce(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&$9(t),Nce(t),Mce(t);let i=n.const("_errs",Me.default.errors);R9(t,i),n.var(e,(0,Ae._)`${i} === ${Me.default.errors}`)}function k9(t){(0,fa.checkUnknownRules)(t),Rce(t)}function R9(t,e){if(t.opts.jtd)return P9(t,[],!1,e);let r=(0,D9.getSchemaTypes)(t.schema),n=(0,D9.coerceAndCheckDataType)(t,r);P9(t,r,!n,e)}function Rce(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,fa.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function $ce(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,fa.checkStrictMode)(t,"default is ignored in the schema root")}function Nce(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Cce.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Mce(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function $9({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Ae._)`${Me.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Ae.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Ae._)`${Me.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function jce(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Ae._)`${Me.default.errors} === 0`,()=>e.return(Me.default.data),()=>e.throw((0,Ae._)`new ${s}(${Me.default.vErrors})`)):(e.assign((0,Ae._)`${n}.errors`,Me.default.vErrors),i.unevaluated&&qce(t),e.return((0,Ae._)`${Me.default.errors} === 0`))}function qce({gen:t,evaluated:e,props:r,items:n}){r instanceof Ae.Name&&t.assign((0,Ae._)`${e}.props`,r),n instanceof Ae.Name&&t.assign((0,Ae._)`${e}.items`,n)}function P9(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,fa.schemaHasRulesButRef)(i,l))){s.block(()=>M9(t,"$ref",l.all.$ref.definition));return}u.jtd||Uce(t,e),s.block(()=>{for(let p of l.rules)f(p);f(l.post)});function f(p){(0,F2.shouldUseGroup)(i,p)&&(p.type?(s.if((0,Gv.checkDataType)(p.type,o,u.strictNumbers)),O9(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,Gv.reportTypeError)(t)),s.endIf()):O9(t,p),a||s.if((0,Ae._)`${Me.default.errors} === ${n||0}`))}}function O9(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Dce.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,F2.shouldUseRule)(n,i)&&M9(t,i.keyword,i.definition,e.type)})}function Uce(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Lce(t,e),t.opts.allowUnionTypes||Kce(t,e),Vce(t,t.dataTypes))}function Lce(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{N9(t.dataTypes,r)||k2(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),zce(t,e)}}function Kce(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&k2(t,"use allowUnionTypes to allow union type keyword")}function Vce(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,F2.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Hce(e,o))&&k2(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Hce(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function N9(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function zce(t,e){let r=[];for(let n of t.dataTypes)N9(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function k2(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,fa.checkStrictMode)(t,e,t.opts.strictTypes)}var Zv=class{constructor(e,r,n){if((0,sy.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,fa.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",j9(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,sy.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Me.default.errors))}result(e,r,n){this.failResult((0,Ae.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Ae.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Ae._)`${r} !== undefined && (${(0,Ae.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?iy.reportExtraError:iy.reportError)(this,this.def.error,r)}$dataError(){(0,iy.reportError)(this,this.def.$dataError||iy.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,iy.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Ae.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Ae.nil,r=Ae.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Ae.or)((0,Ae._)`${s} === undefined`,r)),e!==Ae.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Ae.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Ae.or)(o(),a());function o(){if(n.length){if(!(r instanceof Ae.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,Ae._)`${(0,Gv.checkDataTypes)(u,r,i.opts.strictNumbers,Gv.DataType.Wrong)}`}return Ae.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Ae._)`!${u}(${r})`}return Ae.nil}}subschema(e,r){let n=(0,I2.getSubschema)(this.it,e);(0,I2.extendSubschemaData)(n,this.it,e),(0,I2.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Fce(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=fa.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=fa.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Ae.Name)),!0}};hu.KeywordCxt=Zv;function M9(t,e,r,n){let s=new Zv(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,sy.funcKeywordCode)(s,r):"macro"in r?(0,sy.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,sy.funcKeywordCode)(s,r)}var Wce=/^\/(?:[^~]|~0|~1)*$/,Jce=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function j9(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return Me.default.rootData;if(t[0]==="/"){if(!Wce.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Me.default.rootData}else{let c=Jce.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,Ae._)`${i}${(0,Ae.getProperty)((0,fa.unescapeJsonPointer)(c))}`,o=(0,Ae._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}hu.getData=j9});var Xv=w($2=>{"use strict";Object.defineProperty($2,"__esModule",{value:!0});var R2=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};$2.default=R2});var Yv=w(j2=>{"use strict";Object.defineProperty(j2,"__esModule",{value:!0});var N2=ny(),M2=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,N2.resolveUrl)(e,r,n),this.missingSchema=(0,N2.normalizeId)((0,N2.getFullPath)(e,this.missingRef))}};j2.default=M2});var eb=w(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.resolveSchema=Ri.getCompilingSchema=Ri.resolveRef=Ri.compileSchema=Ri.SchemaEnv=void 0;var us=Qe(),Gce=Xv(),Qc=la(),cs=ny(),q9=Et(),Zce=oy(),rd=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,cs.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Ri.SchemaEnv=rd;function U2(t){let e=U9.call(this,t);if(e)return e;let r=(0,cs.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new us.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Gce.default,code:(0,us._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:Qc.default.data,parentData:Qc.default.parentData,parentDataProperty:Qc.default.parentDataProperty,dataNames:[Qc.default.data],dataPathArr:[us.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,us.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:us.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,us._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,Zce.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(Qc.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let d=new Function(`${Qc.default.self}`,`${Qc.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=c;d.evaluated={props:h instanceof us.Name?void 0:h,items:m instanceof us.Name?void 0:m,dynamicProps:h instanceof us.Name,dynamicItems:m instanceof us.Name},d.source&&(d.source.evaluated=(0,us.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),f}finally{this._compilations.delete(t)}}Ri.compileSchema=U2;function Xce(t,e,r){var n;r=(0,cs.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=ele.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new rd({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Yce.call(this,i)}Ri.resolveRef=Xce;function Yce(t){return(0,cs.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:U2.call(this,t)}function U9(t){for(let e of this._compilations)if(Qce(e,t))return e}Ri.getCompilingSchema=U9;function Qce(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function ele(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Qv.call(this,t,e)}function Qv(t,e){let r=this.opts.uriResolver.parse(e),n=(0,cs._getFullPath)(this.opts.uriResolver,r),s=(0,cs.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return q2.call(this,r,t);let i=(0,cs.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Qv.call(this,t,o);return typeof a?.schema!="object"?void 0:q2.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||U2.call(this,o),i===(0,cs.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,cs.resolveUrl)(this.opts.uriResolver,s,c)),new rd({schema:a,schemaId:u,root:t,baseId:s})}return q2.call(this,r,o)}}Ri.resolveSchema=Qv;var tle=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function q2(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,q9.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!tle.has(a)&&c&&(e=(0,cs.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,q9.schemaHasRulesButRef)(r,this.RULES)){let a=(0,cs.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Qv.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new rd({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var L9=w((aTe,rle)=>{rle.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var V9=w(L2=>{"use strict";Object.defineProperty(L2,"__esModule",{value:!0});var K9=aS();K9.code='require("ajv/dist/runtime/uri").default';L2.default=K9});var Y9=w(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.CodeGen=on.Name=on.nil=on.stringify=on.str=on._=on.KeywordCxt=void 0;var nle=oy();Object.defineProperty(on,"KeywordCxt",{enumerable:!0,get:function(){return nle.KeywordCxt}});var nd=Qe();Object.defineProperty(on,"_",{enumerable:!0,get:function(){return nd._}});Object.defineProperty(on,"str",{enumerable:!0,get:function(){return nd.str}});Object.defineProperty(on,"stringify",{enumerable:!0,get:function(){return nd.stringify}});Object.defineProperty(on,"nil",{enumerable:!0,get:function(){return nd.nil}});Object.defineProperty(on,"Name",{enumerable:!0,get:function(){return nd.Name}});Object.defineProperty(on,"CodeGen",{enumerable:!0,get:function(){return nd.CodeGen}});var ile=Xv(),G9=Yv(),sle=S2(),ay=eb(),ole=Qe(),uy=ny(),tb=ry(),V2=Et(),H9=L9(),ale=V9(),Z9=(t,e)=>new RegExp(t,e);Z9.code="new RegExp";var ule=["removeAdditional","useDefaults","coerceTypes"],cle=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),lle={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},fle={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},z9=200;function dle(t){var e,r,n,s,i,o,a,u,c,l,f,p,d,h,m,g,_,D,v,A,x,B,C,T,k;let I=t.strict,$=(e=t.code)===null||e===void 0?void 0:e.optimize,M=$===!0||$===void 0?1:$||0,Y=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Z9,ee=(s=t.uriResolver)!==null&&s!==void 0?s:ale.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:I)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:I)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:I)!==null&&l!==void 0?l:"log",strictTuples:(p=(f=t.strictTuples)!==null&&f!==void 0?f:I)!==null&&p!==void 0?p:"log",strictRequired:(h=(d=t.strictRequired)!==null&&d!==void 0?d:I)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:M,regExp:Y}:{optimize:M,regExp:Y},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:z9,loopEnum:(g=t.loopEnum)!==null&&g!==void 0?g:z9,meta:(_=t.meta)!==null&&_!==void 0?_:!0,messages:(D=t.messages)!==null&&D!==void 0?D:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(A=t.schemaId)!==null&&A!==void 0?A:"$id",addUsedSchema:(x=t.addUsedSchema)!==null&&x!==void 0?x:!0,validateSchema:(B=t.validateSchema)!==null&&B!==void 0?B:!0,validateFormats:(C=t.validateFormats)!==null&&C!==void 0?C:!0,unicodeRegExp:(T=t.unicodeRegExp)!==null&&T!==void 0?T:!0,int32range:(k=t.int32range)!==null&&k!==void 0?k:!0,uriResolver:ee}}var cy=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...dle(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new ole.ValueScope({scope:{},prefixes:cle,es5:r,lines:n}),this.logger=vle(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,sle.getRules)(),W9.call(this,lle,e,"NOT SUPPORTED"),W9.call(this,fle,e,"DEPRECATED","warn"),this._metaOpts=mle.call(this),e.formats&&hle.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&yle.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),ple.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=H9;n==="id"&&(s={...H9},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,f){await i.call(this,l.$schema);let p=this._addSchema(l,f);return p.validate||o.call(this,p)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(f){if(!(f instanceof G9.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:f}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${f} cannot be resolved`)}async function u(l){let f=await c.call(this,l);this.refs[l]||await i.call(this,f.$schema),this.refs[l]||this.addSchema(f,l,r)}async function c(l){let f=this._loading[l];if(f)return f;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,uy.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=J9.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new ay.SchemaEnv({schema:{},schemaId:n});if(r=ay.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=J9.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,uy.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(wle.call(this,n,r),!r)return(0,V2.eachItem)(n,i=>K2.call(this,i)),this;Ele.call(this,r);let s={...r,type:(0,tb.getJSONTypes)(r.type),schemaType:(0,tb.getJSONTypes)(r.schemaType)};return(0,V2.eachItem)(n,s.type.length===0?i=>K2.call(this,i,s):i=>s.type.forEach(o=>K2.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=X9(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,uy.normalizeId)(o||n);let c=uy.getSchemaRefs.call(this,e,n);return u=new ay.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):ay.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{ay.compileSchema.call(this,e)}finally{this.opts=r}}};on.default=cy;cy.ValidationError=ile.default;cy.MissingRefError=G9.default;function W9(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function J9(t){return t=(0,uy.normalizeId)(t),this.schemas[t]||this.refs[t]}function ple(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function hle(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function yle(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function mle(){let t={...this.opts};for(let e of ule)delete t[e];return t}var gle={log(){},warn(){},error(){}};function vle(t){if(t===!1)return gle;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var ble=/^[a-z_$][a-z0-9_$:-]*$/i;function wle(t,e){let{RULES:r}=this;if((0,V2.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!ble.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function K2(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,tb.getJSONTypes)(e.type),schemaType:(0,tb.getJSONTypes)(e.schemaType)}};e.before?_le.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function _le(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Ele(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=X9(e)),t.validateSchema=this.compile(e,!0))}var Sle={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function X9(t){return{anyOf:[t,Sle]}}});var Q9=w(H2=>{"use strict";Object.defineProperty(H2,"__esModule",{value:!0});var Ale={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};H2.default=Ale});var nM=w(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.callRef=el.getValidate=void 0;var xle=Yv(),eM=ki(),Wn=Qe(),id=la(),tM=eb(),rb=Et(),Dle={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return f();let l=tM.resolveRef.call(u,c,s,r);if(l===void 0)throw new xle.default(n.opts.uriResolver,s,r);if(l instanceof tM.SchemaEnv)return p(l);return d(l);function f(){if(i===c)return nb(t,o,i,i.$async);let h=e.scopeValue("root",{ref:c});return nb(t,(0,Wn._)`${h}.validate`,c,c.$async)}function p(h){let m=rM(t,h);nb(t,m,h,h.$async)}function d(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Wn.stringify)(h)}:{ref:h}),g=e.name("valid"),_=t.subschema({schema:h,dataTypes:[],schemaPath:Wn.nil,topSchemaRef:m,errSchemaPath:r},g);t.mergeEvaluated(_),t.ok(g)}}};function rM(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Wn._)`${r.scopeValue("wrapper",{ref:e})}.validate`}el.getValidate=rM;function nb(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?id.default.this:Wn.nil;n?l():f();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Wn._)`await ${(0,eM.callValidateCode)(t,e,c)}`),d(e),o||s.assign(h,!0)},m=>{s.if((0,Wn._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function f(){t.result((0,eM.callValidateCode)(t,e,c),()=>d(e),()=>p(e))}function p(h){let m=(0,Wn._)`${h}.errors`;s.assign(id.default.vErrors,(0,Wn._)`${id.default.vErrors} === null ? ${m} : ${id.default.vErrors}.concat(${m})`),s.assign(id.default.errors,(0,Wn._)`${id.default.vErrors}.length`)}function d(h){var m;if(!i.opts.unevaluated)return;let g=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=rb.mergeEvaluated.props(s,g.props,i.props));else{let _=s.var("props",(0,Wn._)`${h}.evaluated.props`);i.props=rb.mergeEvaluated.props(s,_,i.props,Wn.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=rb.mergeEvaluated.items(s,g.items,i.items));else{let _=s.var("items",(0,Wn._)`${h}.evaluated.items`);i.items=rb.mergeEvaluated.items(s,_,i.items,Wn.Name)}}}el.callRef=nb;el.default=Dle});var iM=w(z2=>{"use strict";Object.defineProperty(z2,"__esModule",{value:!0});var Cle=Q9(),Ple=nM(),Ole=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Cle.default,Ple.default];z2.default=Ole});var sM=w(W2=>{"use strict";Object.defineProperty(W2,"__esModule",{value:!0});var ib=Qe(),yu=ib.operators,sb={maximum:{okStr:"<=",ok:yu.LTE,fail:yu.GT},minimum:{okStr:">=",ok:yu.GTE,fail:yu.LT},exclusiveMaximum:{okStr:"<",ok:yu.LT,fail:yu.GTE},exclusiveMinimum:{okStr:">",ok:yu.GT,fail:yu.LTE}},Ble={message:({keyword:t,schemaCode:e})=>(0,ib.str)`must be ${sb[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,ib._)`{comparison: ${sb[t].okStr}, limit: ${e}}`},Tle={keyword:Object.keys(sb),type:"number",schemaType:"number",$data:!0,error:Ble,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,ib._)`${r} ${sb[e].fail} ${n} || isNaN(${r})`)}};W2.default=Tle});var oM=w(J2=>{"use strict";Object.defineProperty(J2,"__esModule",{value:!0});var ly=Qe(),Ile={message:({schemaCode:t})=>(0,ly.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,ly._)`{multipleOf: ${t}}`},Fle={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ile,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,ly._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,ly._)`${o} !== parseInt(${o})`;t.fail$data((0,ly._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};J2.default=Fle});var uM=w(G2=>{"use strict";Object.defineProperty(G2,"__esModule",{value:!0});function aM(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}G2.default=aM;aM.code='require("ajv/dist/runtime/ucs2length").default'});var cM=w(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});var tl=Qe(),kle=Et(),Rle=uM(),$le={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,tl.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,tl._)`{limit: ${t}}`},Nle={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:$le,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?tl.operators.GT:tl.operators.LT,o=s.opts.unicode===!1?(0,tl._)`${r}.length`:(0,tl._)`${(0,kle.useFunc)(t.gen,Rle.default)}(${r})`;t.fail$data((0,tl._)`${o} ${i} ${n}`)}};Z2.default=Nle});var lM=w(X2=>{"use strict";Object.defineProperty(X2,"__esModule",{value:!0});var Mle=ki(),ob=Qe(),jle={message:({schemaCode:t})=>(0,ob.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,ob._)`{pattern: ${t}}`},qle={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:jle,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,ob._)`(new RegExp(${s}, ${o}))`:(0,Mle.usePattern)(t,n);t.fail$data((0,ob._)`!${a}.test(${e})`)}};X2.default=qle});var fM=w(Y2=>{"use strict";Object.defineProperty(Y2,"__esModule",{value:!0});var fy=Qe(),Ule={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,fy.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,fy._)`{limit: ${t}}`},Lle={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ule,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?fy.operators.GT:fy.operators.LT;t.fail$data((0,fy._)`Object.keys(${r}).length ${s} ${n}`)}};Y2.default=Lle});var dM=w(Q2=>{"use strict";Object.defineProperty(Q2,"__esModule",{value:!0});var dy=ki(),py=Qe(),Kle=Et(),Vle={message:({params:{missingProperty:t}})=>(0,py.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,py._)`{missingProperty: ${t}}`},Hle={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Vle,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(d?.[m]===void 0&&!h.has(m)){let g=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Kle.checkStrictMode)(o,_,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(py.nil,f);else for(let d of r)(0,dy.checkReportMissingProp)(t,d)}function l(){let d=e.let("missing");if(u||i){let h=e.let("valid",!0);t.block$data(h,()=>p(d,h)),t.ok(h)}else e.if((0,dy.checkMissingProp)(t,r,d)),(0,dy.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,dy.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function p(d,h){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(h,(0,dy.propertyInData)(e,s,d,a.ownProperties)),e.if((0,py.not)(h),()=>{t.error(),e.break()})},py.nil)}}};Q2.default=Hle});var pM=w(eD=>{"use strict";Object.defineProperty(eD,"__esModule",{value:!0});var hy=Qe(),zle={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,hy.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,hy._)`{limit: ${t}}`},Wle={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:zle,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?hy.operators.GT:hy.operators.LT;t.fail$data((0,hy._)`${r}.length ${s} ${n}`)}};eD.default=Wle});var hM=w(rD=>{"use strict";Object.defineProperty(rD,"__esModule",{value:!0});var tD=ry(),an=Qe(),Jle=Et(),Gle=Kh(),Zle={message:({params:{i:t,j:e}})=>(0,an.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,an._)`{i: ${t}, j: ${e}}`},Xle={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Zle,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,tD.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,an._)`${o} === false`),t.ok(u);function l(){let h=e.let("i",(0,an._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(u,!0),e.if((0,an._)`${h} > 1`,()=>(f()?p:d)(h,m))}function f(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,m){let g=e.name("item"),_=(0,tD.checkDataTypes)(c,g,a.opts.strictNumbers,tD.DataType.Wrong),D=e.const("indices",(0,an._)`{}`);e.for((0,an._)`;${h}--;`,()=>{e.let(g,(0,an._)`${r}[${h}]`),e.if(_,(0,an._)`continue`),c.length>1&&e.if((0,an._)`typeof ${g} == "string"`,(0,an._)`${g} += "_"`),e.if((0,an._)`typeof ${D}[${g}] == "number"`,()=>{e.assign(m,(0,an._)`${D}[${g}]`),t.error(),e.assign(u,!1).break()}).code((0,an._)`${D}[${g}] = ${h}`)})}function d(h,m){let g=(0,Jle.useFunc)(e,Gle.default),_=e.name("outer");e.label(_).for((0,an._)`;${h}--;`,()=>e.for((0,an._)`${m} = ${h}; ${m}--;`,()=>e.if((0,an._)`${g}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(_)})))}}};rD.default=Xle});var yM=w(iD=>{"use strict";Object.defineProperty(iD,"__esModule",{value:!0});var nD=Qe(),Yle=Et(),Qle=Kh(),efe={message:"must be equal to constant",params:({schemaCode:t})=>(0,nD._)`{allowedValue: ${t}}`},tfe={keyword:"const",$data:!0,error:efe,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,nD._)`!${(0,Yle.useFunc)(e,Qle.default)}(${r}, ${s})`):t.fail((0,nD._)`${i} !== ${r}`)}};iD.default=tfe});var mM=w(sD=>{"use strict";Object.defineProperty(sD,"__esModule",{value:!0});var yy=Qe(),rfe=Et(),nfe=Kh(),ife={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,yy._)`{allowedValues: ${t}}`},sfe={keyword:"enum",schemaType:"array",$data:!0,error:ife,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,rfe.useFunc)(e,nfe.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",i);l=(0,yy.or)(...s.map((h,m)=>p(d,m)))}t.pass(l);function f(){e.assign(l,!1),e.forOf("v",i,d=>e.if((0,yy._)`${c()}(${r}, ${d})`,()=>e.assign(l,!0).break()))}function p(d,h){let m=s[h];return typeof m=="object"&&m!==null?(0,yy._)`${c()}(${r}, ${d}[${h}])`:(0,yy._)`${r} === ${m}`}}};sD.default=sfe});var gM=w(oD=>{"use strict";Object.defineProperty(oD,"__esModule",{value:!0});var ofe=sM(),afe=oM(),ufe=cM(),cfe=lM(),lfe=fM(),ffe=dM(),dfe=pM(),pfe=hM(),hfe=yM(),yfe=mM(),mfe=[ofe.default,afe.default,ufe.default,cfe.default,lfe.default,ffe.default,dfe.default,pfe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},hfe.default,yfe.default];oD.default=mfe});var uD=w(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});my.validateAdditionalItems=void 0;var rl=Qe(),aD=Et(),gfe={message:({params:{len:t}})=>(0,rl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,rl._)`{limit: ${t}}`},vfe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:gfe,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,aD.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}vM(t,n)}};function vM(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,rl._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,rl._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,aD.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,rl._)`${a} <= ${e.length}`);r.if((0,rl.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:aD.Type.Num},c),o.allErrors||r.if((0,rl.not)(c),()=>r.break())})}}my.validateAdditionalItems=vM;my.default=vfe});var cD=w(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.validateTuple=void 0;var bM=Qe(),ab=Et(),bfe=ki(),wfe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return wM(t,"additionalItems",e);r.items=!0,!(0,ab.alwaysValidSchema)(r,e)&&t.ok((0,bfe.validateArray)(t))}};function wM(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=ab.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,bM._)`${i}.length`);r.forEach((f,p)=>{(0,ab.alwaysValidSchema)(a,f)||(n.if((0,bM._)`${c} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},u)),t.ok(u))});function l(f){let{opts:p,errSchemaPath:d}=a,h=r.length,m=h===f.minItems&&(h===f.maxItems||f[e]===!1);if(p.strictTuples&&!m){let g=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,ab.checkStrictMode)(a,g,p.strictTuples)}}}gy.validateTuple=wM;gy.default=wfe});var _M=w(lD=>{"use strict";Object.defineProperty(lD,"__esModule",{value:!0});var _fe=cD(),Efe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,_fe.validateTuple)(t,"items")};lD.default=Efe});var SM=w(fD=>{"use strict";Object.defineProperty(fD,"__esModule",{value:!0});var EM=Qe(),Sfe=Et(),Afe=ki(),xfe=uD(),Dfe={message:({params:{len:t}})=>(0,EM.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,EM._)`{limit: ${t}}`},Cfe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Dfe,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Sfe.alwaysValidSchema)(n,e)&&(s?(0,xfe.validateAdditionalItems)(t,s):t.ok((0,Afe.validateArray)(t)))}};fD.default=Cfe});var AM=w(dD=>{"use strict";Object.defineProperty(dD,"__esModule",{value:!0});var $i=Qe(),ub=Et(),Pfe={message:({params:{min:t,max:e}})=>e===void 0?(0,$i.str)`must contain at least ${t} valid item(s)`:(0,$i.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,$i._)`{minContains: ${t}}`:(0,$i._)`{minContains: ${t}, maxContains: ${e}}`},Ofe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Pfe,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,$i._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,ub.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,ub.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,ub.alwaysValidSchema)(i,r)){let m=(0,$i._)`${l} >= ${o}`;a!==void 0&&(m=(0,$i._)`${m} && ${l} <= ${a}`),t.pass(m);return}i.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,$i._)`${s}.length > 0`,p)):(e.let(f,!1),p()),t.result(f,()=>t.reset());function p(){let m=e.name("_valid"),g=e.let("count",0);d(m,()=>e.if(m,()=>h(g)))}function d(m,g){e.forRange("i",0,l,_=>{t.subschema({keyword:"contains",dataProp:_,dataPropType:ub.Type.Num,compositeRule:!0},m),g()})}function h(m){e.code((0,$i._)`${m}++`),a===void 0?e.if((0,$i._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,$i._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,$i._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};dD.default=Ofe});var CM=w(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.validateSchemaDeps=ao.validatePropertyDeps=ao.error=void 0;var pD=Qe(),Bfe=Et(),vy=ki();ao.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,pD.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,pD._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Tfe={keyword:"dependencies",type:"object",schemaType:"object",error:ao.error,code(t){let[e,r]=Ife(t);xM(t,e),DM(t,r)}};function Ife({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function xM(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,vy.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,vy.checkReportMissingProp)(t,c)}):(r.if((0,pD._)`${u} && (${(0,vy.checkMissingProp)(t,a,i)})`),(0,vy.reportMissingProp)(t,i),r.else())}}ao.validatePropertyDeps=xM;function DM(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Bfe.alwaysValidSchema)(i,e[a])||(r.if((0,vy.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}ao.validateSchemaDeps=DM;ao.default=Tfe});var OM=w(hD=>{"use strict";Object.defineProperty(hD,"__esModule",{value:!0});var PM=Qe(),Ffe=Et(),kfe={message:"property name must be valid",params:({params:t})=>(0,PM._)`{propertyName: ${t.propertyName}}`},Rfe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:kfe,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Ffe.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,PM.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};hD.default=Rfe});var mD=w(yD=>{"use strict";Object.defineProperty(yD,"__esModule",{value:!0});var cb=ki(),ls=Qe(),$fe=la(),lb=Et(),Nfe={message:"must NOT have additional properties",params:({params:t})=>(0,ls._)`{additionalProperty: ${t.additionalProperty}}`},Mfe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Nfe,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,lb.alwaysValidSchema)(o,r))return;let c=(0,cb.allSchemaProperties)(n.properties),l=(0,cb.allSchemaProperties)(n.patternProperties);f(),t.ok((0,ls._)`${i} === ${$fe.default.errors}`);function f(){e.forIn("key",s,g=>{!c.length&&!l.length?h(g):e.if(p(g),()=>h(g))})}function p(g){let _;if(c.length>8){let D=(0,lb.schemaRefOrVal)(o,n.properties,"properties");_=(0,cb.isOwnProperty)(e,D,g)}else c.length?_=(0,ls.or)(...c.map(D=>(0,ls._)`${g} === ${D}`)):_=ls.nil;return l.length&&(_=(0,ls.or)(_,...l.map(D=>(0,ls._)`${(0,cb.usePattern)(t,D)}.test(${g})`))),(0,ls.not)(_)}function d(g){e.code((0,ls._)`delete ${s}[${g}]`)}function h(g){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,lb.alwaysValidSchema)(o,r)){let _=e.name("valid");u.removeAdditional==="failing"?(m(g,_,!1),e.if((0,ls.not)(_),()=>{t.reset(),d(g)})):(m(g,_),a||e.if((0,ls.not)(_),()=>e.break()))}}function m(g,_,D){let v={keyword:"additionalProperties",dataProp:g,dataPropType:lb.Type.Str};D===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,_)}}};yD.default=Mfe});var IM=w(vD=>{"use strict";Object.defineProperty(vD,"__esModule",{value:!0});var jfe=oy(),BM=ki(),gD=Et(),TM=mD(),qfe={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&TM.default.code(new jfe.KeywordCxt(i,TM.default,"additionalProperties"));let o=(0,BM.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=gD.mergeEvaluated.props(e,(0,gD.toHash)(o),i.props));let a=o.filter(f=>!(0,gD.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=e.name("valid");for(let f of a)c(f)?l(f):(e.if((0,BM.propertyInData)(e,s,f,i.opts.ownProperties)),l(f),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(u);function c(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function l(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};vD.default=qfe});var $M=w(bD=>{"use strict";Object.defineProperty(bD,"__esModule",{value:!0});var FM=ki(),fb=Qe(),kM=Et(),RM=Et(),Ufe={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,FM.allSchemaProperties)(r),u=a.filter(m=>(0,kM.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof fb.Name)&&(i.props=(0,RM.evaluatedPropsToName)(e,i.props));let{props:f}=i;p();function p(){for(let m of a)c&&d(m),i.allErrors?h(m):(e.var(l,!0),h(m),e.if(l))}function d(m){for(let g in c)new RegExp(m).test(g)&&(0,kM.checkStrictMode)(i,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,g=>{e.if((0,fb._)`${(0,FM.usePattern)(t,m)}.test(${g})`,()=>{let _=u.includes(m);_||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:RM.Type.Str},l),i.opts.unevaluated&&f!==!0?e.assign((0,fb._)`${f}[${g}]`,!0):!_&&!i.allErrors&&e.if((0,fb.not)(l),()=>e.break())})})}}};bD.default=Ufe});var NM=w(wD=>{"use strict";Object.defineProperty(wD,"__esModule",{value:!0});var Lfe=Et(),Kfe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Lfe.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};wD.default=Kfe});var MM=w(_D=>{"use strict";Object.defineProperty(_D,"__esModule",{value:!0});var Vfe=ki(),Hfe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Vfe.validateUnion,error:{message:"must match a schema in anyOf"}};_D.default=Hfe});var jM=w(ED=>{"use strict";Object.defineProperty(ED,"__esModule",{value:!0});var db=Qe(),zfe=Et(),Wfe={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,db._)`{passingSchemas: ${t.passing}}`},Jfe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Wfe,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,f)=>{let p;(0,zfe.alwaysValidSchema)(s,l)?e.var(u,!0):p=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&e.if((0,db._)`${u} && ${o}`).assign(o,!1).assign(a,(0,db._)`[${a}, ${f}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,f),p&&t.mergeEvaluated(p,db.Name)})})}}};ED.default=Jfe});var qM=w(SD=>{"use strict";Object.defineProperty(SD,"__esModule",{value:!0});var Gfe=Et(),Zfe={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,Gfe.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};SD.default=Zfe});var KM=w(AD=>{"use strict";Object.defineProperty(AD,"__esModule",{value:!0});var pb=Qe(),LM=Et(),Xfe={message:({params:t})=>(0,pb.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,pb._)`{failingKeyword: ${t.ifClause}}`},Yfe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Xfe,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,LM.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=UM(n,"then"),i=UM(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,pb.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,f){return()=>{let p=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(p,o),f?e.assign(f,(0,pb._)`${l}`):t.setParams({ifClause:l})}}}};function UM(t,e){let r=t.schema[e];return r!==void 0&&!(0,LM.alwaysValidSchema)(t,r)}AD.default=Yfe});var VM=w(xD=>{"use strict";Object.defineProperty(xD,"__esModule",{value:!0});var Qfe=Et(),ede={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Qfe.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};xD.default=ede});var HM=w(DD=>{"use strict";Object.defineProperty(DD,"__esModule",{value:!0});var tde=uD(),rde=_M(),nde=cD(),ide=SM(),sde=AM(),ode=CM(),ade=OM(),ude=mD(),cde=IM(),lde=$M(),fde=NM(),dde=MM(),pde=jM(),hde=qM(),yde=KM(),mde=VM();function gde(t=!1){let e=[fde.default,dde.default,pde.default,hde.default,yde.default,mde.default,ade.default,ude.default,ode.default,cde.default,lde.default];return t?e.push(rde.default,ide.default):e.push(tde.default,nde.default),e.push(sde.default),e}DD.default=gde});var zM=w(CD=>{"use strict";Object.defineProperty(CD,"__esModule",{value:!0});var gr=Qe(),vde={message:({schemaCode:t})=>(0,gr.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,gr._)`{format: ${t}}`},bde={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:vde,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:f}=a;if(!u.validateFormats)return;s?p():d();function p(){let h=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=r.const("fDef",(0,gr._)`${h}[${o}]`),g=r.let("fType"),_=r.let("format");r.if((0,gr._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(g,(0,gr._)`${m}.type || "string"`).assign(_,(0,gr._)`${m}.validate`),()=>r.assign(g,(0,gr._)`"string"`).assign(_,m)),t.fail$data((0,gr.or)(D(),v()));function D(){return u.strictSchema===!1?gr.nil:(0,gr._)`${o} && !${_}`}function v(){let A=l.$async?(0,gr._)`(${m}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,gr._)`${_}(${n})`,x=(0,gr._)`(typeof ${_} == "function" ? ${A} : ${_}.test(${n}))`;return(0,gr._)`${_} && ${_} !== true && ${g} === ${e} && !${x}`}}function d(){let h=f.formats[i];if(!h){D();return}if(h===!0)return;let[m,g,_]=v(h);m===e&&t.pass(A());function D(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function v(x){let B=x instanceof RegExp?(0,gr.regexpCode)(x):u.code.formats?(0,gr._)`${u.code.formats}${(0,gr.getProperty)(i)}`:void 0,C=r.scopeValue("formats",{key:i,ref:x,code:B});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,gr._)`${C}.validate`]:["string",x,C]}function A(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!l.$async)throw new Error("async format in sync schema");return(0,gr._)`await ${_}(${n})`}return typeof g=="function"?(0,gr._)`${_}(${n})`:(0,gr._)`${_}.test(${n})`}}}};CD.default=bde});var WM=w(PD=>{"use strict";Object.defineProperty(PD,"__esModule",{value:!0});var wde=zM(),_de=[wde.default];PD.default=_de});var JM=w(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.contentVocabulary=sd.metadataVocabulary=void 0;sd.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];sd.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ZM=w(OD=>{"use strict";Object.defineProperty(OD,"__esModule",{value:!0});var Ede=iM(),Sde=gM(),Ade=HM(),xde=WM(),GM=JM(),Dde=[Ede.default,Sde.default,(0,Ade.default)(),xde.default,GM.metadataVocabulary,GM.contentVocabulary];OD.default=Dde});var XM=w(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});by.DiscrError=void 0;var Cde;(function(t){t.Tag="tag",t.Mapping="mapping"})(Cde=by.DiscrError||(by.DiscrError={}))});var QM=w(TD=>{"use strict";Object.defineProperty(TD,"__esModule",{value:!0});var od=Qe(),BD=XM(),YM=eb(),Pde=Et(),Ode={message:({params:{discrError:t,tagName:e}})=>t===BD.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,od._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Bde={keyword:"discriminator",type:"object",schemaType:"object",error:Ode,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,od._)`${r}${(0,od.getProperty)(a)}`);e.if((0,od._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:BD.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let d=p();e.if(!1);for(let h in d)e.elseIf((0,od._)`${c} === ${h}`),e.assign(u,f(d[h]));e.else(),t.error(!1,{discrError:BD.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function f(d){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},h);return t.mergeEvaluated(m,od.Name),h}function p(){var d;let h={},m=_(s),g=!0;for(let A=0;A<o.length;A++){let x=o[A];x?.$ref&&!(0,Pde.schemaHasRulesButRef)(x,i.self.RULES)&&(x=YM.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,x?.$ref),x instanceof YM.SchemaEnv&&(x=x.schema));let B=(d=x?.properties)===null||d===void 0?void 0:d[a];if(typeof B!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||_(x)),D(B,A)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return h;function _({required:A}){return Array.isArray(A)&&A.includes(a)}function D(A,x){if(A.const)v(A.const,x);else if(A.enum)for(let B of A.enum)v(B,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(A,x){if(typeof A!="string"||A in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[A]=x}}}};TD.default=Bde});var ej=w((JTe,Tde)=>{Tde.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var ID=w((or,rj)=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.MissingRefError=or.ValidationError=or.CodeGen=or.Name=or.nil=or.stringify=or.str=or._=or.KeywordCxt=void 0;var Ide=Y9(),Fde=ZM(),kde=QM(),tj=ej(),Rde=["/properties"],hb="http://json-schema.org/draft-07/schema",yb=class extends Ide.default{_addVocabularies(){super._addVocabularies(),Fde.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(kde.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(tj,Rde):tj;this.addMetaSchema(e,hb,!1),this.refs["http://json-schema.org/schema"]=hb}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(hb)?hb:void 0)}};rj.exports=or=yb;Object.defineProperty(or,"__esModule",{value:!0});or.default=yb;var $de=oy();Object.defineProperty(or,"KeywordCxt",{enumerable:!0,get:function(){return $de.KeywordCxt}});var ad=Qe();Object.defineProperty(or,"_",{enumerable:!0,get:function(){return ad._}});Object.defineProperty(or,"str",{enumerable:!0,get:function(){return ad.str}});Object.defineProperty(or,"stringify",{enumerable:!0,get:function(){return ad.stringify}});Object.defineProperty(or,"nil",{enumerable:!0,get:function(){return ad.nil}});Object.defineProperty(or,"Name",{enumerable:!0,get:function(){return ad.Name}});Object.defineProperty(or,"CodeGen",{enumerable:!0,get:function(){return ad.CodeGen}});var Nde=Xv();Object.defineProperty(or,"ValidationError",{enumerable:!0,get:function(){return Nde.default}});var Mde=Yv();Object.defineProperty(or,"MissingRefError",{enumerable:!0,get:function(){return Mde.default}})});var uj=w(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.formatNames=uo.fastFormats=uo.fullFormats=void 0;function ud(t,e){return{validate:t,compare:e}}uo.fullFormats={date:ud(sj,RD),time:ud(oj,$D),"date-time":ud(Lde,aj),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Hde,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Yde,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:zde,int32:{type:"number",validate:Gde},int64:{type:"number",validate:Zde},float:{type:"number",validate:ij},double:{type:"number",validate:ij},password:!0,binary:!0};uo.fastFormats={...uo.fullFormats,date:ud(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,RD),time:ud(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,$D),"date-time":ud(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,aj),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};uo.formatNames=Object.keys(uo.fullFormats);function jde(t){return t%4===0&&(t%100!==0||t%400===0)}var qde=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Ude=[0,31,28,31,30,31,30,31,31,30,31,30,31];function sj(t){let e=qde.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&jde(r)?29:Ude[n])}function RD(t,e){if(t&&e)return t>e?1:t<e?-1:0}var FD=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function oj(t,e){let r=FD.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function $D(t,e){if(!(t&&e))return;let r=FD.exec(t),n=FD.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var kD=/t|\s/i;function Lde(t){let e=t.split(kD);return e.length===2&&sj(e[0])&&oj(e[1],!0)}function aj(t,e){if(!(t&&e))return;let[r,n]=t.split(kD),[s,i]=e.split(kD),o=RD(r,s);if(o!==void 0)return o||$D(n,i)}var Kde=/\/|:/,Vde=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Hde(t){return Kde.test(t)&&Vde.test(t)}var nj=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function zde(t){return nj.lastIndex=0,nj.test(t)}var Wde=-(2**31),Jde=2**31-1;function Gde(t){return Number.isInteger(t)&&t<=Jde&&t>=Wde}function Zde(t){return Number.isInteger(t)}function ij(){return!0}var Xde=/[^\\]\\Z/;function Yde(t){if(Xde.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var cj=w(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.formatLimitDefinition=void 0;var Qde=ID(),fs=Qe(),mu=fs.operators,mb={formatMaximum:{okStr:"<=",ok:mu.LTE,fail:mu.GT},formatMinimum:{okStr:">=",ok:mu.GTE,fail:mu.LT},formatExclusiveMaximum:{okStr:"<",ok:mu.LT,fail:mu.GTE},formatExclusiveMinimum:{okStr:">",ok:mu.GT,fail:mu.LTE}},epe={message:({keyword:t,schemaCode:e})=>fs.str`should be ${mb[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>fs._`{comparison: ${mb[t].okStr}, limit: ${e}}`};cd.formatLimitDefinition={keyword:Object.keys(mb),type:"string",schemaType:"string",$data:!0,error:epe,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new Qde.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=e.const("fmt",fs._`${p}[${u.schemaCode}]`);t.fail$data(fs.or(fs._`typeof ${d} != "object"`,fs._`${d} instanceof RegExp`,fs._`typeof ${d}.compare != "function"`,f(d)))}function l(){let p=u.schema,d=a.formats[p];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:d,code:o.code.formats?fs._`${o.code.formats}${fs.getProperty(p)}`:void 0});t.fail$data(f(h))}function f(p){return fs._`${p}.compare(${r}, ${n}) ${mb[s].fail} 0`}},dependencies:["format"]};var tpe=t=>(t.addKeyword(cd.formatLimitDefinition),t);cd.default=tpe});var pj=w((wy,dj)=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});var ld=uj(),rpe=cj(),ND=Qe(),lj=new ND.Name("fullFormats"),npe=new ND.Name("fastFormats"),MD=(t,e={keywords:!0})=>{if(Array.isArray(e))return fj(t,e,ld.fullFormats,lj),t;let[r,n]=e.mode==="fast"?[ld.fastFormats,npe]:[ld.fullFormats,lj],s=e.formats||ld.formatNames;return fj(t,s,r,n),e.keywords&&rpe.default(t),t};MD.get=(t,e="full")=>{let n=(e==="fast"?ld.fastFormats:ld.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function fj(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=ND._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}dj.exports=wy=MD;Object.defineProperty(wy,"__esModule",{value:!0});wy.default=MD});var yj=w(fd=>{"use strict";var LD=fd&&fd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fd,"__esModule",{value:!0});fd.InputDescriptorFilterEvaluationHandler=void 0;var jD=Bi(),ipe=LD(ID()),spe=LD(pj()),hj=Tr(),qD=LD(rs()),ope=Ti(),ape=Ii(),UD=class extends ape.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FilterEvaluation"}handle(e,r){let n=jD.JSONPath.nodes(e,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(e,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=ope.JsonPathUtils.extractInputField(s.credential,o.value.path));let u=!1;for(let c of a)if(this.evaluateFilter(c,o.value)){u=!0;let l={result:Object.assign({},a[0]),valid:!0,format:s.format};this.getResults().push(Object.assign({},this.createResultObject(jD.JSONPath.stringify(o.path.slice(0,3)),i,l)))}if(!u)if(a.length){let c={result:Object.assign({},a[0]),valid:!1,format:s.format};this.createResponse(o,i,c,qD.default.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{let c={valid:!1,format:s.format};this.createResponse(o,i,c,qD.default.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(e)}createNoFieldResults(e,r,n){e.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,u;return((o=i.inDesc.constraints)===null||o===void 0?void 0:o.fields)===void 0||((u=(a=i.inDesc.constraints)===null||a===void 0?void 0:a.fields)===null||u===void 0?void 0:u.length)===0}).forEach(i=>{let o={result:[],valid:!0,format:n.format};this.getResults().push(Object.assign({},this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)))})}createResponse(e,r,n,s){this.getResults().push(Object.assign(Object.assign({},this.createResultObject(jD.JSONPath.stringify(e.path.slice(0,3)),r,n)),{status:hj.Status.ERROR,message:s}))}createResultObject(e,r,n){return{input_descriptor_path:e,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:hj.Status.INFO,message:qD.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(e,r){var n;!((n=r.filter)===null||n===void 0)&&n.format&&r.filter.format==="date"&&this.transformDateFormat(e);let s=new ipe.default({verbose:!0,code:{source:!0,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});return(0,spe.default)(s),r.filter?s.validate(r.filter,e.value):!0}transformDateFormat(e){let r=new Date(e.value),n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),e.value=r.getUTCFullYear()+"-"+n+"-"+s,e.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}};fd.InputDescriptorFilterEvaluationHandler=UD});var gj=w(mj=>{"use strict";Object.defineProperty(mj,"__esModule",{value:!0})});var bj=w(vj=>{"use strict";Object.defineProperty(vj,"__esModule",{value:!0})});var _j=w(wj=>{"use strict";Object.defineProperty(wj,"__esModule",{value:!0})});var Sj=w(Ej=>{"use strict";Object.defineProperty(Ej,"__esModule",{value:!0})});var xj=w(Aj=>{"use strict";Object.defineProperty(Aj,"__esModule",{value:!0})});var Cj=w(Dj=>{"use strict";Object.defineProperty(Dj,"__esModule",{value:!0})});var Pj=w(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0});gb.Directives=void 0;gb.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"}});var Oj=w(vb=>{"use strict";Object.defineProperty(vb,"__esModule",{value:!0});vb.ExchangeStatus=void 0;vb.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"}});var Tj=w(Bj=>{"use strict";Object.defineProperty(Bj,"__esModule",{value:!0})});var Fj=w(Ij=>{"use strict";Object.defineProperty(Ij,"__esModule",{value:!0})});var Rj=w(kj=>{"use strict";Object.defineProperty(kj,"__esModule",{value:!0})});var Nj=w($j=>{"use strict";Object.defineProperty($j,"__esModule",{value:!0})});var jj=w(Mj=>{"use strict";Object.defineProperty(Mj,"__esModule",{value:!0})});var Uj=w(qj=>{"use strict";Object.defineProperty(qj,"__esModule",{value:!0})});var Kj=w(Lj=>{"use strict";Object.defineProperty(Lj,"__esModule",{value:!0})});var Hj=w(Vj=>{"use strict";Object.defineProperty(Vj,"__esModule",{value:!0})});var Wj=w(zj=>{"use strict";Object.defineProperty(zj,"__esModule",{value:!0})});var Gj=w(Jj=>{"use strict";Object.defineProperty(Jj,"__esModule",{value:!0})});var Xj=w(Zj=>{"use strict";Object.defineProperty(Zj,"__esModule",{value:!0})});var Qj=w(Yj=>{"use strict";Object.defineProperty(Yj,"__esModule",{value:!0})});var tq=w(eq=>{"use strict";Object.defineProperty(eq,"__esModule",{value:!0})});var nq=w(rq=>{"use strict";Object.defineProperty(rq,"__esModule",{value:!0})});var sq=w(iq=>{"use strict";Object.defineProperty(iq,"__esModule",{value:!0})});var aq=w(oq=>{"use strict";Object.defineProperty(oq,"__esModule",{value:!0})});var cq=w(uq=>{"use strict";Object.defineProperty(uq,"__esModule",{value:!0})});var lq=w(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});bb.Optionality=void 0;bb.Optionality={Required:"required",Preferred:"preferred"}});var dq=w(fq=>{"use strict";Object.defineProperty(fq,"__esModule",{value:!0})});var hq=w(pq=>{"use strict";Object.defineProperty(pq,"__esModule",{value:!0})});var mq=w(yq=>{"use strict";Object.defineProperty(yq,"__esModule",{value:!0})});var vq=w(gq=>{"use strict";Object.defineProperty(gq,"__esModule",{value:!0})});var wq=w(bq=>{"use strict";Object.defineProperty(bq,"__esModule",{value:!0})});var Eq=w(_q=>{"use strict";Object.defineProperty(_q,"__esModule",{value:!0})});var Aq=w(Sq=>{"use strict";Object.defineProperty(Sq,"__esModule",{value:!0})});var Dq=w(xq=>{"use strict";Object.defineProperty(xq,"__esModule",{value:!0})});var Pq=w(Cq=>{"use strict";Object.defineProperty(Cq,"__esModule",{value:!0})});var Oq=w(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0});wb.Rules=void 0;wb.Rules={All:"all",Pick:"pick"}});var Tq=w(Bq=>{"use strict";Object.defineProperty(Bq,"__esModule",{value:!0})});var Fq=w(Iq=>{"use strict";Object.defineProperty(Iq,"__esModule",{value:!0})});var kq=w(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});_b.Status=void 0;_b.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"}});var $q=w(Rq=>{"use strict";Object.defineProperty(Rq,"__esModule",{value:!0})});var Mq=w(Nq=>{"use strict";Object.defineProperty(Nq,"__esModule",{value:!0})});var qq=w(jq=>{"use strict";Object.defineProperty(jq,"__esModule",{value:!0})});var Lq=w(Uq=>{"use strict";Object.defineProperty(Uq,"__esModule",{value:!0})});var Kq=w($e=>{"use strict";var upe=$e&&$e.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ue=$e&&$e.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&upe(e,t,r)};Object.defineProperty($e,"__esModule",{value:!0});Ue(gj(),$e);Ue(bj(),$e);Ue(_j(),$e);Ue(Sj(),$e);Ue(xj(),$e);Ue(Cj(),$e);Ue(Pj(),$e);Ue(Oj(),$e);Ue(Tj(),$e);Ue(Fj(),$e);Ue(Rj(),$e);Ue(Nj(),$e);Ue(jj(),$e);Ue(Uj(),$e);Ue(Kj(),$e);Ue(Hj(),$e);Ue(Wj(),$e);Ue(Gj(),$e);Ue(Xj(),$e);Ue(Qj(),$e);Ue(tq(),$e);Ue(nq(),$e);Ue(sq(),$e);Ue(aq(),$e);Ue(cq(),$e);Ue(lq(),$e);Ue(dq(),$e);Ue(hq(),$e);Ue(mq(),$e);Ue(vq(),$e);Ue(wq(),$e);Ue(Eq(),$e);Ue(Aq(),$e);Ue(Dq(),$e);Ue(Pq(),$e);Ue(Oq(),$e);Ue(Tq(),$e);Ue(Fq(),$e);Ue(kq(),$e);Ue($q(),$e);Ue(Mq(),$e);Ue(qq(),$e);Ue(Lq(),$e)});var da=w(nl=>{"use strict";var cpe=nl&&nl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lpe=nl&&nl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cpe(e,t,r)};Object.defineProperty(nl,"__esModule",{value:!0});lpe(Kq(),nl)});var Vq=w(Sb=>{"use strict";Object.defineProperty(Sb,"__esModule",{value:!0});Sb.SubjectIsHolderEvaluationHandler=void 0;var gu=Bi(),Eb=da(),il=Tr(),fpe=Ii(),KD=class extends fpe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(il.Status.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(il.Status.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(il.Status.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(e,r){this.findIsHolderFieldIdsToInputDescriptorsSets(e),this.findAllCredentialSubjects(r),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,il.Status.INFO,Eb.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,il.Status.WARN,Eb.Optionality.Preferred),this.updatePresentationSubmission(e)}findIsHolderFieldIdsToInputDescriptorsSets(e){var r;this.fieldIds.push(...gu.JSONPath.nodes(e,"$..fields[*].id")),this.isHolder.push(...gu.JSONPath.nodes(e,"$..is_holder[*]"));let n=(r=this.fieldIds)===null||r===void 0?void 0:r.map(i=>i.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,Eb.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,Eb.Optionality.Required)),s.forEach(i=>this.getResults().push(this.createResult(i[1],i[0],["",{}],il.Status.ERROR,void 0)))}evaluateFields(e,r,n,s){let i=[];return r.filter(o=>o.value.directive===s).filter(o=>o.value.field_id.every(a=>n.includes(a))).forEach(o=>e.set(gu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id)),r.filter(o=>o.value.directive===s).filter(o=>!o.value.field_id.every(a=>n.includes(a))).forEach(o=>i.push([gu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id])),i}findAllCredentialSubjects(e){let r=gu.JSONPath.nodes(e.map(n=>n.credential),"$..credentialSubject");for(let n=0;n<r.length;n++){let s=r[n],i=gu.JSONPath.stringify(s.path.slice(0,2));this.credentialsSubjectsByPath.set(i,s.value),this.credentialsByPath.set(i,e[n])}}confirmAllFieldSetHasSameSubject(e,r,n){let s=Array.from(e).flatMap(u=>Array.from(this.credentialsSubjectsByPath).filter(c=>u[1].find(l=>Object.keys(c[1]).includes(l)))),i=this.mapCredentialPathsToInputDescriptors(n),o=Array.from(s).flatMap(u=>Object.keys(u[1]).filter(c=>c!=="id")),a=Array.from(e.values()).flatMap(u=>u.every(c=>o.includes(c)))[0];s.forEach(u=>{let c=i.get(u[0]);a&&u[1].id&&this.client.dids.includes(u[1].id)?this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,r,this.credentialsByPath.get(u[0]))):this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,il.Status.ERROR,this.credentialsByPath.get(u[0])))})}mapCredentialPathsToInputDescriptors(e){var r;let n=new Map;return(r=this.fieldIds)===null||r===void 0||r.forEach(s=>{let i=gu.JSONPath.stringify(s.path.slice(0,3));this.credentialsSubjectsByPath.forEach((o,a)=>{let u=this.isHolder.find(c=>gu.JSONPath.stringify(c.path.slice(0,3))===i);Object.keys(o).includes(s.value)&&u?.value.directive===e&&n.set(a,i)})}),n}createResult(e,r,n,s,i,o){return{input_descriptor_path:r,verifiable_credential_path:n[0],evaluator:this.getName(),status:s,payload:Object.assign({fieldIdSet:e,credentialSubject:n[1]},i?{format:i.format}:{}),message:o??this.messages.get(s)}}};Sb.SubjectIsHolderEvaluationHandler=KD});var Hq=w(dd=>{"use strict";var dpe=dd&&dd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dd,"__esModule",{value:!0});dd.LimitDisclosureEvaluationHandler=void 0;var Ab=da(),xb=Tr(),VD=dpe(rs()),ppe=Ti(),hpe=Ii(),HD=class extends hpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"LimitDisclosureEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{var i,o,a;!((i=n.constraints)===null||i===void 0)&&i.fields&&(((o=n.constraints)===null||o===void 0?void 0:o.limit_disclosure)===Ab.Optionality.Required||((a=n.constraints)===null||a===void 0?void 0:a.limit_disclosure)===Ab.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(e,r,n,s){let i=this.client.limitDisclosureSignatureSuites,o=e.decoded.proof;return!o||Array.isArray(o)||!o.type?!1:i?.includes(o.type)?!0:(s==Ab.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(e,r,n){let s=r?.fields,i=r.limit_disclosure;e.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o.credential,s,n,a,e,i)})}enforceLimitDisclosure(e,r,n,s,i,o){let a=this.createVcWithRequiredFields(e,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}createVcWithRequiredFields(e,r,n,s){let i={};i=Object.assign(i,e),i.credentialSubject={};for(let o of r)if(o.path){let a=ppe.JsonPathUtils.extractInputField(e,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],e,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(e,r,n){let s=Object.assign({},r.credentialSubject);return e.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject=Object.assign(Object.assign({},n.credentialSubject),s),n}createSuccessResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===Ab.Optionality.Required?xb.Status.INFO:xb.Status.WARN,message:VD.default.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:xb.Status.ERROR,message:VD.default.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(e,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:xb.Status.ERROR,message:VD.default.LIMIT_DISCLOSURE_NOT_SUPPORTED})}};dd.LimitDisclosureEvaluationHandler=HD});var Wq=w(pd=>{"use strict";var ype=pd&&pd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pd,"__esModule",{value:!0});pd.MarkForSubmissionEvaluationHandler=void 0;var mpe=Bi(),zD=Tr(),zq=ype(rs()),gpe=Ii(),WD=class extends gpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"MarkForSubmissionEvaluation"}handle(e,r){let n=[...this.getResults()],s=n.filter(o=>o.status===zD.Status.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,e)}retrieveNoErrorStatus(e,r){return e.filter(s=>s.status!==zD.Status.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(e,r){this.removeDuplicate(e).forEach(n=>{let i=mpe.JSONPath.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:zD.Status.INFO,payload:{group:i},message:zq.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(e){this.removeDuplicate(e).forEach(r=>{let n=Object.assign({},r.payload);n.evaluator=r.evaluator,this.getResults().push(Object.assign(Object.assign({},r),{evaluator:this.getName(),message:zq.default.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}))})}};pd.MarkForSubmissionEvaluationHandler=WD});var Jq=w(hd=>{"use strict";var vpe=hd&&hd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hd,"__esModule",{value:!0});hd.PredicateRelatedFieldEvaluationHandler=void 0;var bpe=da(),wpe=Tr(),_pe=vpe(rs()),Epe=Ii(),JD=class extends Epe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"PredicateRelatedFieldEvaluation"}handle(e){e.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(e,r){if(r?.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,e,r,n)}examinePredicateForFilterEvaluationResult(e,r,n,s,i){var o;let a=this.retrieveResultInputDescriptorIdx(e[r].input_descriptor_path);if(e[r].payload&&e[r].payload.result&&e[r].payload.result.path&&e[r].evaluator==="FilterEvaluation"&&n===a&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&(!((o=s.fields[i].path)===null||o===void 0)&&o.includes(this.concatenatePath(e[r].payload.result.path)))){let u=Object.assign({},e[r].payload.result),c=this.createResultObject(n,r,u,e);s.fields[i].predicate===bpe.Optionality.Required||(c.payload.value=!0),e.push(c)}}retrieveResultInputDescriptorIdx(e){let r="$.input_descriptors[",n=e.indexOf(r),s=e.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(e){let r="";for(let n=0;n<e.length;n++)typeof e[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=e[n]+".";return r.substring(0,r.length-1)}createResultObject(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:wpe.Status.INFO,message:_pe.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}};hd.PredicateRelatedFieldEvaluationHandler=JD});var Zq=w(Db=>{"use strict";Object.defineProperty(Db,"__esModule",{value:!0});Db.SameSubjectEvaluationHandler=void 0;var vu=Bi(),Gq=da(),pa=Tr(),Spe=Ii(),GD=class extends Spe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(pa.Status.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(pa.Status.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(pa.Status.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(e,r){let n=this.mapSameSubjectFieldIdsToInputDescriptors(e),s=this.mapCredentialsToResultObjecs(r,n),i=this.countSameSubjectOccurrences(n,s);this.generateErrorResults(i,s),this.updatePresentationSubmission(e)}mapSameSubjectFieldIdsToInputDescriptors(e){this.fieldIds.push(...vu.JSONPath.nodes(e,"$..fields[*].id")),this.sameSubject.push(...vu.JSONPath.nodes(e,"$..same_subject[*]"));let r=[];return this.fieldIds.forEach(n=>{let s=this.sameSubject.find(i=>i.value.field_id.includes(n.value));s&&r.push([n,s])}),r}generateErrorResults(e,r){e.forEach((n,s)=>{let i=r.filter(o=>s===o.payload.fieldIdSet).map(o=>o.payload.credentialSubject.id);(i.length!==n||new Set(i).size!==1)&&r.forEach((o,a,u)=>{o.payload.fieldIdSet===s&&(o.status=pa.Status.ERROR,o.message=this.messages.get(pa.Status.ERROR),u[a]=o)})}),this.client.results.push(...r)}countSameSubjectOccurrences(e,r){let n=new Map;return e.forEach(s=>{r.filter(o=>s[1].value.field_id===o.payload.fieldIdSet)&&(n.has(s[1].value.field_id)&&n.get(s[1].value.field_id)?n.set(s[1].value.field_id,n.get(s[1].value.field_id)+1):n.set(s[1].value.field_id,1))}),n}mapCredentialsToResultObjecs(e,r){let n=[...vu.JSONPath.nodes(e.map(i=>i.credential),"$..credentialSubject")],s=[];return n.forEach(i=>{let o=r.find(a=>vu.JSONPath.query(i.value,`$..${a[0].value}`).length!==0);o&&o[1].value.directive===Gq.Optionality.Required?s.push({input_descriptor_path:vu.JSONPath.stringify(o[0].path.slice(0,3)),status:pa.Status.INFO,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(pa.Status.INFO),verifiable_credential_path:vu.JSONPath.stringify(i.path.slice(0,2))}):o&&o[1].value.directive===Gq.Optionality.Preferred&&s.push({input_descriptor_path:vu.JSONPath.stringify(o[0].path.slice(0,3)),status:pa.Status.WARN,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(pa.Status.WARN),verifiable_credential_path:vu.JSONPath.stringify(i.path.slice(0,2))})}),s}};Db.SameSubjectEvaluationHandler=GD});var eU=w(yd=>{"use strict";var Ape=yd&&yd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yd,"__esModule",{value:!0});yd.SubjectIsIssuerEvaluationHandler=void 0;var xpe=da(),Xq=Cg(),Yq=Tr(),Qq=Ape(rs()),ZD=Ti(),Dpe=Ii(),XD=class extends Dpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"SubjectIsIssuerEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{let i=n.constraints;i?.subject_is_issuer===xpe.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(e)}checkSubjectIsIssuer(e,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===e){let i=ZD.JsonPathUtils.extractInputField(r.map(o=>o.credential),[s.path]);for(let o of i){let a=(0,ZD.getIssuerString)(o.value);o&&o.value&&(0,ZD.getSubjectIdsAsString)(o.value).every(u=>u===a)?this.getResults().push(this.generateSuccessResult(n,s.path,Xq.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,Xq.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Yq.Status.ERROR,message:Qq.default.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Yq.Status.INFO,message:s??Qq.default.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}};yd.SubjectIsIssuerEvaluationHandler=XD});var tU,rU=DP(()=>{tU="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var sU={};wo(sU,{customAlphabet:()=>Cpe,customRandom:()=>iU,nanoid:()=>Ppe,random:()=>nU,urlAlphabet:()=>tU});var nU,iU,Cpe,Ppe,oU=DP(()=>{rU();nU=t=>crypto.getRandomValues(new Uint8Array(t)),iU=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let a=r(s),u=s;for(;u--;)if(o+=t[a[u]&n]||"",o.length===i)return o}}},Cpe=(t,e=21)=>iU(t,e,nU),Ppe=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")});var aU=w(gd=>{"use strict";var Ope=gd&&gd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gd,"__esModule",{value:!0});gd.UriEvaluationHandler=void 0;var Bpe=Bi(),Tpe=(oU(),PP(sU)),_y=Tr(),YD=Lc(),Cb=Ope(rs()),Ipe=Ii(),md=class t extends Ipe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"UriEvaluation"}handle(e,r){e.input_descriptors.forEach((s,i)=>{let o=e.getVersion()!==YD.PEVersion.v2?s.schema.map(a=>a.uri):[];r.forEach((a,u)=>{let c=t.buildVcContextAndSchemaUris(a.credential,e.getVersion());this.evaluateUris(a,c,o,i,u,e.getVersion())})});let n=this.getResults().filter(s=>s.status===_y.Status.INFO).map(s=>{var i;return{id:Bpe.JSONPath.nodes(e,s.input_descriptor_path)[0].value.id,format:(i=s.payload)===null||i===void 0?void 0:i.format,path:s.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:(0,Tpe.nanoid)(),definition_id:e.id,descriptor_map:n})}evaluateUris(e,r,n,s,i,o){let a=!1;if(o===YD.PEVersion.v1){for(let u=0;u<n.length;u++)t.containsHashlink(n[u])&&this.getResults().push(this.createWarnResultObject(s,i));for(let u=0;u<r.length;u++)n.find(c=>c===r[u])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(e,n,s,i)):this.getResults().push(this.createErrorResultObject(e,n,s,i))}static buildVcContextAndSchemaUris(e,r){let n=[];return Array.isArray(e["@context"])?e["@context"].forEach(s=>n.push(s)):n.push(e["@context"]),Array.isArray(e.credentialSchema)&&e.credentialSchema.length>0?e.credentialSchema.forEach(s=>n.push(s.id)):e.credentialSchema&&n.push(e.credentialSchema.id),r===YD.PEVersion.v1&&(Array.isArray(e.type)?e.type.forEach(s=>n.push(s)):e.type&&n.push(e.type)),n}createSuccessResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=_y.Status.INFO,i.message=Cb.default.URI_EVALUATION_PASSED,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createErrorResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=_y.Status.ERROR,i.message=Cb.default.URI_EVALUATION_DIDNT_PASS,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createWarnResultObject(e,r){let n=this.createResult(e,r);return n.status=_y.Status.WARN,n.message=Cb.default.URI_EVALUATION_DIDNT_PASS,n.payload=Cb.default.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(e,r){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:_y.Status.INFO,message:void 0}}static containsHashlink(e){return!(this.matchAll(e,t.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(e,t.HASHLINK_URL_ENCODED_REGEX).next().done)}};gd.UriEvaluationHandler=md;md.matchAll=Px();md.HASHLINK_URL_ENCODED_REGEX=/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g;md.HASHLINK_QUERY_URL_REGEX=/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g});var lU=w(vd=>{"use strict";var Fpe=vd&&vd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vd,"__esModule",{value:!0});vd.FormatRestrictionEvaluationHandler=void 0;var uU=Tr(),cU=Fpe(rs()),kpe=Ii(),QD=class extends kpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FormatRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{!this.client.restrictToFormats||Object.keys(this.client.restrictToFormats).includes(i.format)?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${i.format} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:uU.Status.ERROR,message:cU.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:uU.Status.INFO,message:s??cU.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};vd.FormatRestrictionEvaluationHandler=QD});var pU=w(bd=>{"use strict";var Rpe=bd&&bd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bd,"__esModule",{value:!0});bd.DIDRestrictionEvaluationHandler=void 0;var fU=Tr(),dU=Rpe(rs()),$pe=Ti(),Npe=Ii(),eC=class extends Npe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"DIDRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{let a=typeof i.credential.issuer=="object"?i.credential.issuer.id:i.credential.issuer;!this.client.hasRestrictToDIDMethods()||!a||(0,$pe.isRestrictedDID)(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:fU.Status.ERROR,message:dU.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:fU.Status.INFO,message:s??dU.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};bd.DIDRestrictionEvaluationHandler=eC});var hU=w(Vr=>{"use strict";var Mpe=Vr&&Vr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ni=Vr&&Vr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Mpe(e,t,r)};Object.defineProperty(Vr,"__esModule",{value:!0});Ni(Ii(),Vr);Ni(KN(),Vr);Ni(yj(),Vr);Ni(Vq(),Vr);Ni(Hq(),Vr);Ni(Wq(),Vr);Ni(Jq(),Vr);Ni(Zq(),Vr);Ni(eU(),Vr);Ni(aU(),Vr);Ni(lU(),Vr);Ni(pU(),Vr)});var nC=w(wd=>{"use strict";var jpe=wd&&wd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wd,"__esModule",{value:!0});wd.EvaluationClient=void 0;var qpe=Cg(),Upe=Tr(),Lpe=jpe(rs()),tC=Ti(),co=hU(),yU=[qpe.IProofType.BbsBlsSignatureProof2020],rC=class{constructor(){this.failed_catched={tag:"root",status:Upe.Status.ERROR,message:Lpe.default.UNKNOWN_EXCEPTION,stacktrace:""},this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=yU,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(e,r,n){this._restrictToDIDMethods=n?.restrictToDIDMethods?(0,tC.uniformDIDMethods)(n?.restrictToDIDMethods):[],this._dids=n?.holderDIDs?(0,tC.filterToRestrictedDIDs)(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n?.limitDisclosureSignatureSuites,this._restrictToFormats=n?.restrictToFormats,this._generatePresentationSubmission=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:!0,n?.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s?.handle(e,r);s?.hasNext();){s=s.getNext();try{s?.handle(e,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(e){this._dids=e}assertPresentationSubmission(){if(!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(e){this._generatePresentationSubmission=e}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(e){this._presentationSubmission=e}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(e){this._wrappedVcs=e}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||yU}set limitDisclosureSignatureSuites(e){this._limitDisclosureSignatureSuites=e}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(e){this._restrictToDIDMethods=(0,tC.uniformDIDMethods)(e)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(e){this._restrictToFormats=e}initEvaluationHandlers(){let e=new co.UriEvaluationHandler(this);return e.setNext(new co.DIDRestrictionEvaluationHandler(this)).setNext(new co.FormatRestrictionEvaluationHandler(this)).setNext(new co.InputDescriptorFilterEvaluationHandler(this)).setNext(new co.PredicateRelatedFieldEvaluationHandler(this)).setNext(new co.LimitDisclosureEvaluationHandler(this)).setNext(new co.SubjectIsIssuerEvaluationHandler(this)).setNext(new co.SubjectIsHolderEvaluationHandler(this)).setNext(new co.SameSubjectEvaluationHandler(this)).setNext(new co.MarkForSubmissionEvaluationHandler(this)),e}};wd.EvaluationClient=rC});var mU=w(Bb=>{"use strict";Object.defineProperty(Bb,"__esModule",{value:!0});Bb.EvaluationClientWrapper=void 0;var Pb=Bi(),_d=da(),je=Tr(),Ob=Ti(),Kpe=nC(),iC=class{constructor(){this._client=new Kpe.EvaluationClient}getEvaluationClient(){return this._client}selectFrom(e,r,n){var s;let i;this._client.evaluate(e,r,n);let o=[...this.formatNotInfo(je.Status.WARN)],a=[...this.formatNotInfo(je.Status.ERROR)];if(e.submission_requirements){let u=this._client.results.filter(h=>h.evaluator==="MarkForSubmissionEvaluation"&&h.payload.group&&h.status!==je.Status.ERROR),c=Array.from(new Set(u)),l;try{l=this.matchSubmissionRequirements(e,e.submission_requirements,c)}catch(h){let m={status:je.Status.ERROR,message:JSON.stringify(h),tag:"matchSubmissionRequirements"};return{errors:a?[...a,m]:[m],warnings:o,areRequiredCredentialsPresent:je.Status.ERROR}}let p=this.extractMatches(l).map(h=>Pb.JSONPath.nodes(this._client.wrappedVcs.map(m=>m.original),h)[0].value),d=this.determineAreRequiredCredentialsPresent(e,l);i={errors:d===je.Status.INFO?[]:a,matches:[...l],areRequiredCredentialsPresent:d,verifiableCredential:p,warnings:o}}else{let u=this._client.results.filter(l=>l.evaluator==="MarkForSubmissionEvaluation"&&l.status!==je.Status.ERROR);if(this.checkWithoutSubmissionRequirements(u,e).length)return{errors:a,matches:[],areRequiredCredentialsPresent:je.Status.ERROR,verifiableCredential:r.map(l=>l.original),warnings:o};{let l=this.matchWithoutSubmissionRequirements(u,e),p=this.extractMatches(l).map(d=>Pb.JSONPath.nodes(this._client.wrappedVcs.map(h=>h.original),d)[0].value);i={errors:[],matches:[...l],areRequiredCredentialsPresent:je.Status.INFO,verifiableCredential:p,warnings:o}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(i,r),i.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(e,i?.matches),this.remapMatches(r.map(u=>u.original),i.matches,i?.verifiableCredential),(s=i.matches)===null||s===void 0||s.forEach(u=>{this.updateSubmissionRequirementMatchPathToAlias(u,"verifiableCredential")}),i.areRequiredCredentialsPresent===je.Status.INFO?i.errors=[]:(i.errors=a,i.warnings=o,i.verifiableCredential=r.map(u=>u.original)),i}remapMatches(e,r,n){r?.forEach(s=>{s.from_nested?this.remapMatches(e,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{let u=Pb.JSONPath.query(e,i)[0],c=n?.findIndex(l=>JSON.stringify(l)===JSON.stringify(u));if(c===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${u}`);a[o]=`$[${c}]`}),s.name)})}extractMatches(e){let r=[];return e.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(e,r){let n=[];if(!r.input_descriptors)return[];if(!e.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:je.Status.ERROR,payload:"Not all the InputDescriptors are addressed"}];let s=r.input_descriptors,i=Ob.ObjectUtils.getDistinctFieldInObject(e,"input_descriptor_path");if(i.length!==s.length){let o=i.map(a=>Ob.JsonPathUtils.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:je.Status.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(e,r,n){let s=[];for(let i of r){let o={name:e.name||e.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){let a=this.mapMatchingDescriptors(e,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(e,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(e,r){let n=[],s=this.createIdToVcMap(e);for(let[i,o]of s.entries())if(!(!o||!o.length))for(let a of o){let u=Ob.JsonPathUtils.extractInputField(r,[i]);u.length&&n.push({name:u[0].value.name||u[0].value.id,rule:_d.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(e,r,n){var s;let i={rule:r.rule,vc_path:[]};if(r?.from){i.from=r.from;for(let o of n){let a=Pb.JSONPath.query(e,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(i.name=a.name||a.id,o.payload.group.includes(r.from)&&((s=i.vc_path)===null||s===void 0?void 0:s.indexOf(o.verifiable_credential_path))===-1&&i.vc_path.push(o.verifiable_credential_path))}}return i}evaluate(e,r,n){var s,i,o,a;this._client.evaluate(e,r,n);let u={areRequiredCredentialsPresent:je.Status.INFO,verifiableCredential:r.map(c=>c.original)};if(u.warnings=this.formatNotInfo(je.Status.WARN),u.errors=this.formatNotInfo(je.Status.ERROR),this._client.assertPresentationSubmission(),!((s=this._client.presentationSubmission)===null||s===void 0)&&s.descriptor_map.length){let c=(i=this._client.presentationSubmission)===null||i===void 0?void 0:i.descriptor_map.length;for(let l=0;l<c;l++)this._client.presentationSubmission.descriptor_map[l]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[l]);this._client.presentationSubmission.descriptor_map.splice(0,c),u.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToAlias("verifiableCredential",u.value),u.verifiableCredential=this._client.wrappedVcs.map(c=>c.original),u.areRequiredCredentialsPresent=!((a=(o=u.value)===null||o===void 0?void 0:o.descriptor_map)===null||a===void 0)&&a.length?je.Status.INFO:je.Status.ERROR,u}formatNotInfo(e){return this._client.results.filter(r=>r.status===e).map(r=>{let n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(e,r){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(e.submission_requirements){let i=this._client.results.filter(f=>f.evaluator==="MarkForSubmissionEvaluation"&&f.payload.group&&f.status!==je.Status.ERROR),[o,a]=this.matchUserSelectedVcs(i,r),u=new Map;"input_descriptors"in e&&e.input_descriptors.forEach(f=>{f.group&&f.group.forEach(p=>{u.has(p)?u.set(p,u.get(p)+1):u.set(p,1)})});let c=this.evaluateRequirements(e.submission_requirements,o,u,0),l=a.filter(f=>c[1].find(p=>p.verifiable_credential_path===f[1]));return this.updatePresentationSubmission(l),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}let n=this._client.results.filter(i=>i.evaluator==="MarkForSubmissionEvaluation"&&i.status!==je.Status.ERROR),s=this.matchUserSelectedVcs(n,r);return this.updatePresentationSubmission(s[1]),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}updatePresentationSubmission(e){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>e.find(n=>n[0]===r.path)).map(r=>{let n=e.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}matchUserSelectedVcs(e,r){let n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((u,c)=>{u[1]===o[1]&&i.push([`$[${c}]`,`$[${a}]`])})}),e=e.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{let a=i.find(u=>u[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[e,i]}evaluateRequirements(e,r,n,s){let i=0,o=[];for(let a of e)if(a.from){if(a.rule===_d.Rules.All){let[u,c]=this.countMatchingInputDescriptors(a,r);if(u!==n.get(a.from))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...c)}else if(a.rule===_d.Rules.Pick){let[u,c]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,u,s),i++}catch(l){if(s===0)throw l}o.push(...c)}}else if(a.from_nested){let[u,c]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=u,o.push(...c),this.handleCount(a,u,s)}return[i,o]}countMatchingInputDescriptors(e,r){let n=0,s=[];for(let i of r)i.payload.group.includes(e.from)&&(s.push(i),n++);return[n,s]}handleCount(e,r,n){if(e.count&&r!==e.count)throw Error(`Count: expected: ${e.count} actual: ${r} at level: ${n}`);if(e.min&&r<e.min)throw Error(`Min: expected: ${e.min} actual: ${r} at level: ${n}`);if(e.max&&r>e.max)throw Error(`Max: expected: ${e.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(e){return e.filter((r,n)=>{let s=JSON.stringify(r);return n===e.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(e,r){var n;e&&((n=e.verifiableCredential)===null||n===void 0||n.forEach(s=>{var i;let o=Ob.ObjectUtils.isString(s)?r.findIndex(a=>s===a.original):r.findIndex(a=>JSON.stringify(s.proof)===JSON.stringify(a.credential.proof));if(o===-1)throw new Error("index is not right");(i=e.vcIndexes)===null||i===void 0||i.push(o)}))}determineAreRequiredCredentialsPresent(e,r,n){if(!r||!r.length)return je.Status.ERROR;let s=r.map(i=>this.determineSubmissionRequirementStatus(e,i));if(n){if(n.rule===_d.Rules.All&&s.includes(je.Status.ERROR))return je.Status.ERROR;let i=s.filter(o=>o!==je.Status.ERROR).length;if(n.count)return n.count>i?je.Status.ERROR:n.count<i?je.Status.WARN:je.Status.INFO;if(n.min&&n.min>i)return je.Status.ERROR;if(n.max&&n.max<i)return je.Status.WARN}else return s.includes(je.Status.ERROR)?je.Status.ERROR:s.includes(je.Status.WARN)?je.Status.WARN:je.Status.INFO;return je.Status.INFO}determineSubmissionRequirementStatus(e,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return je.Status.ERROR;if(r.from){let n=this.countGroupIDs(e.input_descriptors,r.from);switch(r.rule){case _d.Rules.All:return r.vc_path.length===n?je.Status.INFO:je.Status.WARN;case _d.Rules.Pick:return this.getPickRuleStatus(r);default:return je.Status.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(e,r.from_nested,r);return je.Status.INFO}getPickRuleStatus(e){return e.vc_path.length===0?je.Status.ERROR:e.count&&e.vc_path.length!==e.count?e.vc_path.length>e.count?je.Status.WARN:je.Status.ERROR:e.min&&e.vc_path.length<e.min?je.Status.ERROR:e.max&&e.vc_path.length>e.max?je.Status.WARN:je.Status.INFO}updateSubmissionRequirementMatchPathToAlias(e,r){let n=[];e.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),e.vc_path=n,e.from_nested&&e.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToAlias(e,r){r?r.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)}):this._client.generatePresentationSubmission&&this._client.presentationSubmission.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)})}replacePathWithAlias(e,r){e.path=e.path.replace("$","$."+r),e.path_nested&&this.replacePathWithAlias(e.path_nested,r)}createIdToVcMap(e){let r=new Map,n=new Map;for(let s=0;s<e.length;s++){let i=e[s].input_descriptor_path;if(n.has(i)){let o=n.get(i);o&&o.push(e[s])}else n.set(i,[e[s]])}for(let[s,i]of n.entries()){let o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(e,r){let n=0;for(let s of e)s.group&&s.group.includes(r)&&n++;return n}};Bb.EvaluationClientWrapper=iC});var Ey=w(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.HandlerCheckResult=bu.EvaluationClientWrapper=bu.EvaluationClient=void 0;var Vpe=X6();Object.defineProperty(bu,"HandlerCheckResult",{enumerable:!0,get:function(){return Vpe.HandlerCheckResult}});var Hpe=nC();Object.defineProperty(bu,"EvaluationClient",{enumerable:!0,get:function(){return Hpe.EvaluationClient}});var zpe=mU();Object.defineProperty(bu,"EvaluationClientWrapper",{enumerable:!0,get:function(){return zpe.EvaluationClientWrapper}})});var gU=w(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.KeyEncoding=wu.PresentationSubmissionLocation=void 0;var Wpe;(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.PRESENTATION=1]="PRESENTATION"})(Wpe=wu.PresentationSubmissionLocation||(wu.PresentationSubmissionLocation={}));var Jpe;(function(t){t.Jwk="Jwk",t.Base58="Base58",t.Hex="Hex",t.Multibase="Multibase"})(Jpe=wu.KeyEncoding||(wu.KeyEncoding={}))});var Sy=w(sl=>{"use strict";var Gpe=sl&&sl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zpe=sl&&sl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Gpe(e,t,r)};Object.defineProperty(sl,"__esModule",{value:!0});Zpe(gU(),sl)});var vU=w((o8e,aC)=>{"use strict";aC.exports=oC;aC.exports.default=oC;var xr={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},Xpe=Object.prototype.hasOwnProperty,sC={type:["number","string"]};function Fr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:sC.type},message:"must be number,string",schema:sC.type,parentSchema:sC,data:t};i===null?i=[a]:i.push(a),o++}return Fr.errors=i,o===0}function Tb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:xr.required,parentSchema:xr,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Xpe.call(xr.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:xr,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Fr(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Fr.errors:i.concat(Fr.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Fr(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Fr.errors:i.concat(Fr.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:xr.properties.enum.type,parentSchema:xr.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Fr(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Fr.errors:i.concat(Fr.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Fr(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Fr.errors:i.concat(Fr.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xr.properties.format.type,parentSchema:xr.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:xr.properties.maxLength.type,parentSchema:xr.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Fr(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Fr.errors:i.concat(Fr.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:xr.properties.minLength.type,parentSchema:xr.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Fr(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Fr.errors:i.concat(Fr.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:xr.properties.not.type,parentSchema:xr.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xr.properties.pattern.type,parentSchema:xr.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xr.properties.type.type,parentSchema:xr.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:xr.type,parentSchema:xr,data:t};i===null?i=[a]:i.push(a),o++}return Tb.errors=i,o===0}function oC(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return Tb(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?Tb.errors:i.concat(Tb.errors),o=i.length),oC.errors=i,o===0}});var bU=w((a8e,lC)=>{"use strict";lC.exports=cC;lC.exports.default=cC;var Mt={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},Ype=Object.prototype.hasOwnProperty,uC={type:["number","string"]};function kr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:uC.type},message:"must be number,string",schema:uC.type,parentSchema:uC,data:t};i===null?i=[a]:i.push(a),o++}return kr.errors=i,o===0}function Ib(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Mt.required,parentSchema:Mt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Ype.call(Mt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Mt,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(kr(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?kr.errors:i.concat(kr.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)kr(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?kr.errors:i.concat(kr.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Mt.properties.enum.type,parentSchema:Mt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(kr(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?kr.errors:i.concat(kr.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(kr(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?kr.errors:i.concat(kr.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.format.type,parentSchema:Mt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMaximum!==void 0){let a=t.formatExclusiveMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatExclusiveMaximum.type,parentSchema:Mt.properties.formatExclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMinimum!==void 0){let a=t.formatExclusiveMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatExclusiveMinimum.type,parentSchema:Mt.properties.formatExclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMaximum!==void 0){let a=t.formatMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatMaximum.type,parentSchema:Mt.properties.formatMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMinimum!==void 0){let a=t.formatMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatMinimum.type,parentSchema:Mt.properties.formatMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Mt.properties.maxLength.type,parentSchema:Mt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(kr(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?kr.errors:i.concat(kr.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Mt.properties.minLength.type,parentSchema:Mt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(kr(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?kr.errors:i.concat(kr.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Mt.properties.not.type,parentSchema:Mt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.pattern.type,parentSchema:Mt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.type.type,parentSchema:Mt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Mt.type,parentSchema:Mt,data:t};i===null?i=[a]:i.push(a),o++}return Ib.errors=i,o===0}function cC(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return Ib(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?Ib.errors:i.concat(Ib.errors),o=i.length),cC.errors=i,o===0}});var ds=w(Fb=>{"use strict";Object.defineProperty(Fb,"__esModule",{value:!0});Fb.ValidationBundler=void 0;var wU=Tr(),fC=class{constructor(e,r){this.parentTag=e,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(e){return new wU.Checked(this.getTag(),wU.Status.ERROR,e)}};Fb.ValidationBundler=fC});var pC=w(Ed=>{"use strict";var EU=Ed&&Ed.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ed,"__esModule",{value:!0});Ed.FieldsVB=void 0;var Qpe=Bi(),_U=da(),ehe=EU(vU()),the=EU(bU()),rhe=ds(),dC=class t extends rhe.ValidationBundler{constructor(e){super(e,"fields"),this.mustHaveValidJsonPathsMsg='field object "path" property must contain array of valid json paths',this.pathObjMustHaveValidJsonPathMsg='field object "path" property must contain valid json paths.',this.filterMustBeValidJsonSchemaMsg='field object "filter" property must be valid json schema',this.filterIsMustInPresenceOfPredicateMsg='field object must have a "filter" property if "predicate" is present',this.filterIsNotValidJsonSchemaDescriptorMsg='could not parse "filter" object as a valid json schema descriptor.',this.purposeShouldBeANonEmptyStringMsg="purpose should be a non empty string",this.shouldBeKnownOptionMsg="Unknown predicate property"}getValidations(e){let r=[];if(e)for(let n=0;n<e.length;n++)r=[...r,...this.getValidationsFor(e[n],n)];return r}getValidationsFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.shouldBeKnownOption(n?.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}mustHaveValidJsonPaths(){return e=>e.path!=null&&e.path.length>0&&this._validateJsonPaths(e.path)}_validateJsonPaths(e){let r=[];if(e.forEach(n=>{try{Qpe.JSONPath.parse(n)}catch{r.push(n)}}),r.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(r));return!0}filterMustBeValidJsonSchema(){return e=>this._validateFilter(e.filter)}_validateFilter(e){if(e==null)return!0;let r=!1;try{r=(0,the.default)(e),r||(r=(0,ehe.default)(e))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(e))}return r}filterIsMustInPresenceOfPredicate(){return e=>!(e.predicate!=null&&e.filter==null)}static optionalNonEmptyString(e){return e==null||e.length>0}static shouldBeKnownOption(e){return e==null||e==_U.Optionality.Required||e==_U.Optionality.Preferred}};Ed.FieldsVB=dC});var Rb=w(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});kb.ConstraintsVB=void 0;var ha=da(),nhe=pC(),ihe=ds(),hC=class t extends ihe.ValidationBundler{constructor(e){super(e,"constraints"),this.disclosureLimitShouldHaveKnownValueMsg="limit_disclosure should have known value",this.statusShouldHaveKnownValueMsg="Unknown status property",this.statusDirectiveShouldHaveKnownValueMsg="status directive should have known value",this.subjectIsIssuerShouldBeKnownValueMsg="subject_is_issuer should be known value",this.fieldIdIsMandatoryMsg="field_id property is mandatory",this.fieldIdMustBeArrayOfStringsMsg="field_id property must be an array of strings",this.fieldIdMustCorrespondToFieldIdMsg="field_id must correspond to a present field object id property",this.directivePropertyIsMandatoryMsg="directive property is mandatory",this.oneOfTheKnownDirectivePropertiesMandatoryMsg="directive property must be one of [required, preferred]"}getValidations(e){let r=[];return e&&(r=[{tag:this.getTag(),target:e,predicate:n=>t.disclosureLimitShouldHaveKnownValue(n.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.statusShouldHaveKnownValue(n.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:t.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.shouldBeKnownOption(n.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(e?.is_holder),...this.getSubjectsValidations(e?.same_subject),...this.getFieldsValidations(e)]),r}getFieldsValidations(e){var r;return!((r=e?.fields)===null||r===void 0)&&r.length?new nhe.FieldsVB(this.getTag()).getValidations(e.fields):[]}static disclosureLimitShouldHaveKnownValue(e){return!e||e===ha.Optionality.Preferred||e===ha.Optionality.Required}static statusShouldHaveKnownValue(e){return e==null||e.active!=null||e.revoked!=null||e.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return e=>{var r,n,s;return this.pdStatusShouldBeKnown((r=e?.statuses)===null||r===void 0?void 0:r.active)&&this.pdStatusShouldBeKnown((n=e?.statuses)===null||n===void 0?void 0:n.revoked)&&this.pdStatusShouldBeKnown((s=e?.statuses)===null||s===void 0?void 0:s.suspended)}}static pdStatusShouldBeKnown(e){return!e||e.directive===ha.Directives.Allowed||e.directive===ha.Directives.Disallowed||e.directive===ha.Directives.Required}static shouldBeKnownOption(e){return e?e.filter(r=>r.directive!==ha.Optionality.Preferred&&r.directive!==ha.Optionality.Required).length===0:!0}getSubjectsValidations(e){if(e){let r=[];for(let n=0;n<e.length;n++)r=[{tag:this.getMyTag(n),target:e[n],predicate:s=>Array.isArray(s.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>!!s.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.field_id.length===s.field_id.filter(i=>typeof i=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive===ha.Optionality.Preferred||s.directive===ha.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return r}return[]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}fieldIdInSubjectMustCorrespondToFieldId(e,r){if(r){for(let n of r)for(let s of n.field_id)if(!t.isValidFieldId(e,s))return!1}return!0}static isValidFieldId(e,r){return e?.fields?e.fields.map(n=>n.id).includes(r):!1}};kb.ConstraintsVB=hC});var mC=w($b=>{"use strict";Object.defineProperty($b,"__esModule",{value:!0});$b.InputDescriptorsV1VB=void 0;var Ay=Ti(),she=Rb(),ohe=ds(),yC=class extends ohe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string",this.shouldHaveValidSchemaURIMsg="schema should have valid URI"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>Ay.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Ay.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Ay.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}isValidSchema(){return e=>e.schema.filter(r=>this.isAValidURI(r.uri)&&(r.required==null||typeof r.required=="boolean")).length>0}isAValidURI(e){if(e){if(!Ay.ObjectValidationUtils.nonEmptyString(e))return!1}else return!1;if(e.startsWith("http://")||e.startsWith("https://"))try{new URL(e)}catch{return Ay.ObjectValidationUtils.isValidDIDURI(e)}return!0}constraintsValidations(e,r){return e.constraints?new she.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}};$b.InputDescriptorsV1VB=yC});var bC=w(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});Nb.InputDescriptorsV2VB=void 0;var gC=Ti(),ahe=Rb(),uhe=ds(),vC=class extends uhe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldNotHaveSchema(n),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>gC.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>gC.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>gC.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}constraintsValidations(e,r){return e.constraints?new ahe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}shouldNotHaveSchema(e){let r=!1;return e.forEach(n=>{n.schema&&(r=!0)}),!r}};Nb.InputDescriptorsV2VB=vC});var _C=w(Mb=>{"use strict";Object.defineProperty(Mb,"__esModule",{value:!0});Mb.JwtAlgos=void 0;var wC=class{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}};Mb.JwtAlgos=wC});var SC=w(jb=>{"use strict";Object.defineProperty(jb,"__esModule",{value:!0});jb.LdpTypes=void 0;var EC=class{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020"]}};jb.LdpTypes=EC});var Ub=w(qb=>{"use strict";Object.defineProperty(qb,"__esModule",{value:!0});qb.SubmissionRequirementVB=void 0;var che=ds(),AC=class t extends che.ValidationBundler{constructor(e){super(e,"submission_requirements"),this.ruleIsMandatoryMsg="rule is a mandatory field",this.needsOneFromOrFromNestedMsg="needs exactly one of from or from_nested",this.fromNestedShouldBeArrayMsg="The value of the from_nested property MUST be an array",this.isCountPositiveIntMsg="count must be a practical positive number",this.isMinPositiveIntMsg="min must be a practical positive number",this.isMaxPositiveIntMsg="max must be a practical positive number",this.ruleShouldBePickOrAllMsg="rule should be either pick or all"}getValidations(e){let r=[];if(e!=null&&e.length>0)for(let n=0;n<e.length;n++)r=[...r,...this.getMyValidations(n,e),...this.getSubValidations(n,e)];return r}getMyValidations(e,r){return[{tag:this.getMyTag(e),target:r[e],predicate:t.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}getSubValidations(e,r){let n=r[e].from_nested;return n!=null?new t(this.getFromNestedTag(e)).getValidations(n):[]}getFromNestedTag(e){return this.getMyTag(e)+".from_nested"}isCountPositiveInt(e){return e.rule!=="pick"||e.count==null||0<e.count}isMinPositiveInt(e){return e.rule!=="pick"||e.min==null||0<=e.min}isMaxPositiveInt(e){return e.rule!=="pick"||e.max==null||0<e.max}static ruleIsMandatory(e){return e.rule!=null}static needsOneFromOrFromNested(e){return e.from==null!=(e.from_nested==null)}static fromNestedShouldBeArray(e){return e.from_nested==null||Array.isArray(e.from_nested)}static ruleShouldBePickOrAll(e){return e.rule==="pick"||e.rule==="all"}};qb.SubmissionRequirementVB=AC});var AU=w(Sd=>{"use strict";var lhe=Sd&&Sd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sd,"__esModule",{value:!0});Sd.PresentationDefinitionV1VB=void 0;var fhe=_C(),dhe=SC(),phe=lhe(Kx()),SU=mC(),hhe=Ub(),yhe=ds(),xC=class t extends yhe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){return e.submission_requirements?[...this.myValidations(e),...new SU.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors),...new hhe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:[...this.myValidations(e),...new SU.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors)]}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:e,predicate:r=>t.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=fhe.JwtAlgos.getJwtAlgos(),s=dhe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,phe.default)({presentation_definition:e})}static shouldNotHaveFrameProperty(e){return!e.frame}};Sd.PresentationDefinitionV1VB=xC});var xU=w(Lb=>{"use strict";Object.defineProperty(Lb,"__esModule",{value:!0});Lb.FrameVB=void 0;var _u=Ti(),mhe=ds(),DC=class t extends mhe.ValidationBundler{constructor(e){super(e,"frame"),this.frameIsValidMsg="frame value is not valid"}getValidations(e){let r=[];return r=[...r,...this.getMyValidations(e)],r}getMyValidations(e){return[{tag:this.getMyTag(),target:e,predicate:t.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(e){if(!e||Array.isArray(e)||typeof e!="object")return!1;let r=e;if(r&&r["@id"]){for(let n of _u.ObjectUtils.asArray(e["@id"]))if(!(_u.ObjectUtils.isObject(n)||_u.ObjectUtils.isUrlAbsolute(n))||_u.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}if(r["@types"]){for(let n of _u.ObjectUtils.asArray(e["@types"]))if(!(_u.ObjectUtils.isObject(n)||_u.ObjectUtils.isUrlAbsolute(n))||_u.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}return!0}};Lb.FrameVB=DC});var CU=w(Ad=>{"use strict";var ghe=Ad&&Ad.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ad,"__esModule",{value:!0});Ad.PresentationDefinitionV2VB=void 0;var vhe=_C(),bhe=SC(),whe=ghe(Qx()),_he=xU(),DU=bC(),Ehe=Ub(),She=ds(),CC=class t extends She.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){let r=[];return e.submission_requirements?r=[...this.myValidations(e),...new DU.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors),...new Ehe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:r=[...this.myValidations(e),...new DU.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors)],e.frame&&r.push(...new _he.FrameVB(this.myTag).getValidations(e.frame)),r}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=vhe.JwtAlgos.getJwtAlgos(),s=bhe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&s.push(...a.from)});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,whe.default)({presentation_definition:e})}};Ad.PresentationDefinitionV2VB=CC});var OU=w(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0});Kb.PresentationSubmissionVB=void 0;var Ahe=Bi(),PU=Tr(),xhe=ds(),PC=class t extends xhe.ValidationBundler{constructor(e){super(e,"presentation_submission")}getValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.descriptorMapMustBePresent(r?.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:e,predicate:r=>t.idMustBeSameForEachLevelOfNesting(r?.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:e,predicate:r=>t.formatsShouldBeKnown(r?.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:e,predicate:r=>t.pathsShouldBeValidJsonPaths(r?.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(e){return e!=null&&e.length>0}static descriptorMapMustBePresent(e){return e!=null&&e.length>0}static idMustBeSameForEachLevelOfNesting(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=r&&t.isIdSameForEachLevelOfNesting(e[n],e[n].id);return r}static isIdSameForEachLevelOfNesting(e,r){let n=!0;return e!=null&&e.path_nested!=null&&(e.path_nested.id==r?n=n&&t.isIdSameForEachLevelOfNesting(e.path_nested,r):n=!1),n}static formatsShouldBeKnown(e){let r=!0;if(e!=null){let n=["jwt","jwt_vc","jwt_vp","ldp","ldp_vc","ldp_vp"];for(let s=0;s<e.length;s++)r=t.formatShouldBeKnown(e[s],n)}return r}static formatShouldBeKnown(e,r){let n=!0;return e!=null&&(n=r.includes(e.format)),e.path_nested!=null&&(n=n&&t.formatShouldBeKnown(e.path_nested,r)),n}static pathsShouldBeValidJsonPaths(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=t.pathShouldBeValid(e[n],[]);return r}static pathShouldBeValid(e,r){if(e!=null){try{Ahe.JSONPath.parse(e.path)}catch{r.push(e.path)}e.path_nested!=null&&t.pathShouldBeValid(e.path_nested,r)}if(r.length>0)throw new PU.Checked("",PU.Status.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}};Kb.PresentationSubmissionVB=PC});var BU=w(Tn=>{"use strict";var Dhe=Tn&&Tn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ya=Tn&&Tn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dhe(e,t,r)};Object.defineProperty(Tn,"__esModule",{value:!0});ya(pC(),Tn);ya(mC(),Tn);ya(bC(),Tn);ya(AU(),Tn);ya(CU(),Tn);ya(OU(),Tn);ya(Ub(),Tn);ya(ds(),Tn);ya(Rb(),Tn)});var TU=w(Vb=>{"use strict";Object.defineProperty(Vb,"__esModule",{value:!0});Vb.validate=void 0;var xd=Tr(),Che=t=>{let e=t.map(a=>s(a));function r(a){return new xd.Checked(a.tag,xd.Status.ERROR,a.message)}function n(a){return new xd.Checked(a,xd.Status.INFO,"ok")}function s(a){let u;try{a.predicate(a.target)?u=n(a.tag):u=r(a)}catch{u=r(a)}return u}let i=(a,u)=>(u.status!==xd.Status.INFO&&a.push(u),a),o=e.reduce(i,[]);return(0,xd.hasErrors)(o)?o:[n("root")]};Vb.validate=Che});var FU=w(IU=>{"use strict";Object.defineProperty(IU,"__esModule",{value:!0})});var kU=w(Hb=>{"use strict";Object.defineProperty(Hb,"__esModule",{value:!0});Hb.ValidationEngine=void 0;var Phe=BC(),OC=class{validate(e){let r=[];for(let n of e)r=r.concat(n.bundler.getValidations(n.target));return(0,Phe.validate)(r)}};Hb.ValidationEngine=OC});var BC=w(ma=>{"use strict";var Ohe=ma&&ma.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TC=ma&&ma.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ohe(e,t,r)};Object.defineProperty(ma,"__esModule",{value:!0});TC(TU(),ma);TC(FU(),ma);TC(kU(),ma)});var xy=w(Eu=>{"use strict";var Bhe=Eu&&Eu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),RU=Eu&&Eu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Bhe(e,t,r)};Object.defineProperty(Eu,"__esModule",{value:!0});RU(BU(),Eu);RU(BC(),Eu)});var zb=w(Dd=>{"use strict";var The=Dd&&Dd.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Dd,"__esModule",{value:!0});Dd.PEX=void 0;var $U=Tr(),Dy=Ey(),IC=Sy(),ps=Lc(),NU=Ti(),Cy=xy(),FC=class t{constructor(){this._evaluationClientWrapper=new Dy.EvaluationClientWrapper}evaluatePresentation(e,r,n){let s=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:n?.presentationSubmission!==void 0,i=ps.SSITypesBuilder.toInternalPresentationDefinition(e),o=JSON.parse(JSON.stringify(r)),a=ps.SSITypesBuilder.mapExternalVerifiablePresentationToWrappedVP(o),u=n?.presentationSubmission||a.presentation.presentation_submission;if(!u&&!s)throw Error("Either a presentation submission as part of the VP or provided separately was expected");let c=a.presentation.holder?[a.presentation.holder]:[],l=Object.assign(Object.assign({},n),{holderDIDs:c,presentationSubmission:u,generatePresentationSubmission:s}),f=this._evaluationClientWrapper.evaluate(i,a.vcs,l);return f.value&&f.value.descriptor_map.length&&new Dy.EvaluationClientWrapper().selectFrom(i,a.vcs,l).areRequiredCredentialsPresent!==$U.Status.ERROR&&(f.errors=[]),f}evaluateCredentials(e,r,n){let s=ps.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r);this._evaluationClientWrapper=new Dy.EvaluationClientWrapper;let i=ps.SSITypesBuilder.toInternalPresentationDefinition(e),o=this._evaluationClientWrapper.evaluate(i,s,n);if(o.value&&o.value.descriptor_map.length){let u=new Dy.EvaluationClientWrapper().selectFrom(i,s,n);o.areRequiredCredentialsPresent=u.areRequiredCredentialsPresent,o.errors=u.errors}else o.areRequiredCredentialsPresent=$U.Status.ERROR;return o}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r)),i=ps.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper=new Dy.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(i,ps.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationSubmissionFrom(e,r){let n=ps.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper.submissionFrom(n,ps.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r))}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:IC.PresentationSubmissionLocation.PRESENTATION,o=this.presentationSubmissionFrom(e,r);return{presentation:t.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===IC.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static constructPresentation(e,r){var n,s,i,o;let a=r?.holderDID,u=Array.isArray((n=r?.basePresentationPayload)===null||n===void 0?void 0:n.type)?((s=r?.basePresentationPayload)===null||s===void 0?void 0:s.type)||[]:!((i=r?.basePresentationPayload)===null||i===void 0)&&i.type?[r.basePresentationPayload.type]:[],c=!((o=r?.basePresentationPayload)===null||o===void 0)&&o["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return c.includes("https://www.w3.org/2018/credentials/v1")||c.push("https://www.w3.org/2018/credentials/v1"),u.includes("VerifiablePresentation")||u.push("VerifiablePresentation"),r?.presentationSubmission&&(u.includes("PresentationSubmission")||u.push("PresentationSubmission"),c.includes("https://identity.foundation/presentation-exchange/submission/v1")||c.push("https://identity.foundation/presentation-exchange/submission/v1")),Object.assign(Object.assign(Object.assign(Object.assign({},r?.basePresentationPayload),{"@context":c,type:u,holder:a}),!!r?.presentationSubmission&&{presentation_submission:r.presentationSubmission}),{verifiableCredential:Array.isArray(e)?e:[e]})}static validateDefinition(e){let r=(0,NU.definitionVersionDiscovery)(e);if(r.error)throw r.error;let n=[];return r.version===ps.PEVersion.v1?n.push({bundler:new Cy.PresentationDefinitionV1VB("root"),target:ps.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e)}):n.push({bundler:new Cy.PresentationDefinitionV2VB("root"),target:ps.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e)}),new Cy.ValidationEngine().validate(n)}static validateSubmission(e){return new Cy.ValidationEngine().validate([{bundler:new Cy.PresentationSubmissionVB("root"),target:e}])}verifiablePresentationFrom(e,r,n,s){var i;return The(this,void 0,void 0,function*(){let{holderDID:o,signatureOptions:a,proofOptions:u}=s,c=(i=s.presentationSubmissionLocation)!==null&&i!==void 0?i:IC.PresentationSubmissionLocation.PRESENTATION;function l(){let v=[];if(u?.typeSupportsSelectiveDisclosure){if(!u?.type)throw Error("Please provide a proof type if you enable selective disclosure");v=[u.type]}return v}let f=o?[o]:[],p=l(),d=this.evaluateCredentials(e,r,{holderDIDs:f,limitDisclosureSignatureSuites:p}),h=this.presentationFrom(e,d.verifiableCredential,Object.assign(Object.assign({},s),{presentationSubmissionLocation:c})),m=this.evaluatePresentation(e,h.presentation,{limitDisclosureSignatureSuites:p});if(!m.value)throw new Error("Could not get evaluation results from presentationResult");let g={type:u?.type,verificationMethod:a?.verificationMethod,created:u?.created?u.created:new Date().toISOString(),proofPurpose:u?.proofPurpose,proofValue:a?.proofValue,jws:a?.jws,challenge:u?.challenge,nonce:u?.nonce,domain:u?.domain},_={options:s,presentation:h.presentation,presentationDefinition:e,selectedCredentials:r,proof:g,presentationSubmission:m.value,evaluationResults:m};return{verifiablePresentation:yield n(_),presentationSubmissionLocation:c,presentationSubmission:m.value}})}static definitionVersionDiscovery(e){return(0,NU.definitionVersionDiscovery)(e)}};Dd.PEX=FC});var qU=w(Wb=>{"use strict";Object.defineProperty(Wb,"__esModule",{value:!0});Wb.PEXv1=void 0;var kC=zb(),Ihe=Ey(),MU=Sy(),ol=Lc(),jU=xy(),RC=class extends kC.PEX{constructor(){super()}evaluatePresentation(e,r,n){return ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r));return this._evaluationClientWrapper=new Ihe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),ol.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:MU.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),ol.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:kC.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===MU.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e);return new jU.ValidationEngine().validate([{bundler:new jU.PresentationDefinitionV1VB("root"),target:r}])}static validateSubmission(e){return kC.PEX.validateSubmission(e)}};Wb.PEXv1=RC});var KU=w(Jb=>{"use strict";Object.defineProperty(Jb,"__esModule",{value:!0});Jb.PEXv2=void 0;var $C=zb(),Fhe=Ey(),UU=Sy(),al=Lc(),LU=xy(),NC=class extends $C.PEX{constructor(){super()}evaluatePresentation(e,r,n){return al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){return this._evaluationClientWrapper=new Fhe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),al.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:UU.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),al.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:$C.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===UU.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e);return new LU.ValidationEngine().validate([{bundler:new LU.PresentationDefinitionV2VB("root"),target:r}])}static validateSubmission(e){return $C.PEX.validateSubmission(e)}};Jb.PEXv2=NC});var HU=w(ar=>{"use strict";var khe=ar&&ar.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rhe=ar&&ar.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&khe(e,t,r)};Object.defineProperty(ar,"__esModule",{value:!0});ar.PEXv2=ar.PEXv1=ar.PEX=ar.Status=ar.Checked=ar.PEVersion=ar.ValidationEngine=ar.HandlerCheckResult=void 0;var VU=Tr();Object.defineProperty(ar,"Checked",{enumerable:!0,get:function(){return VU.Checked}});Object.defineProperty(ar,"Status",{enumerable:!0,get:function(){return VU.Status}});var $he=zb();Object.defineProperty(ar,"PEX",{enumerable:!0,get:function(){return $he.PEX}});var Nhe=qU();Object.defineProperty(ar,"PEXv1",{enumerable:!0,get:function(){return Nhe.PEXv1}});var Mhe=KU();Object.defineProperty(ar,"PEXv2",{enumerable:!0,get:function(){return Mhe.PEXv2}});var jhe=Ey();Object.defineProperty(ar,"HandlerCheckResult",{enumerable:!0,get:function(){return jhe.HandlerCheckResult}});var qhe=Lc();Object.defineProperty(ar,"PEVersion",{enumerable:!0,get:function(){return qhe.PEVersion}});var Uhe=xy();Object.defineProperty(ar,"ValidationEngine",{enumerable:!0,get:function(){return Uhe.ValidationEngine}});Rhe(Sy(),ar)});var zU=w(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.PresentationSubmissionLocation=cr.HandlerCheckResult=cr.ValidationEngine=cr.PEVersion=cr.Checked=cr.Status=cr.KeyEncoding=cr.PEXv2=cr.PEXv1=cr.PEX=void 0;var lo=HU();Object.defineProperty(cr,"Checked",{enumerable:!0,get:function(){return lo.Checked}});Object.defineProperty(cr,"HandlerCheckResult",{enumerable:!0,get:function(){return lo.HandlerCheckResult}});Object.defineProperty(cr,"KeyEncoding",{enumerable:!0,get:function(){return lo.KeyEncoding}});Object.defineProperty(cr,"PEVersion",{enumerable:!0,get:function(){return lo.PEVersion}});Object.defineProperty(cr,"PEX",{enumerable:!0,get:function(){return lo.PEX}});Object.defineProperty(cr,"PEXv1",{enumerable:!0,get:function(){return lo.PEXv1}});Object.defineProperty(cr,"PEXv2",{enumerable:!0,get:function(){return lo.PEXv2}});Object.defineProperty(cr,"PresentationSubmissionLocation",{enumerable:!0,get:function(){return lo.PresentationSubmissionLocation}});Object.defineProperty(cr,"Status",{enumerable:!0,get:function(){return lo.Status}});Object.defineProperty(cr,"ValidationEngine",{enumerable:!0,get:function(){return lo.ValidationEngine}})});var j0e={};wo(j0e,{DEFAULT_STATUS_LIST_VC_CONTEXT:()=>c1,DEFAULT_VC_CONTEXT:()=>wa,DEFAULT_VC_TYPE:()=>_a,DEFAULT_VP_TYPE:()=>gl,Jwt:()=>ts,PresentationExchange:()=>Gb,StatusListCredential:()=>wP,StatusPurpose:()=>y7,VerifiableCredential:()=>vl,VerifiablePresentation:()=>vP,utils:()=>gP});var B7=Xn(m1(),1);var X0e=new Uint8Array(0);function BP(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Dl(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function I7(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var m=0,g=0,_=0,D=h.length;_!==D&&h[_]===0;)_++,m++;for(var v=(D-_)*l+1>>>0,A=new Uint8Array(v);_!==D;){for(var x=h[_],B=0,C=v-1;(x!==0||B<g)&&C!==-1;C--,B++)x+=256*A[C]>>>0,A[C]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");g=B,_++}for(var T=v-g;T!==v&&A[T]===0;)T++;for(var k=u.repeat(m);T<v;++T)k+=t.charAt(A[T]);return k}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var m=0;if(h[m]!==" "){for(var g=0,_=0;h[m]===u;)g++,m++;for(var D=(h.length-m)*c+1>>>0,v=new Uint8Array(D);h[m];){var A=r[h.charCodeAt(m)];if(A===255)return;for(var x=0,B=D-1;(A!==0||x<_)&&B!==-1;B--,x++)A+=a*v[B]>>>0,v[B]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");_=x,m++}if(h[m]!==" "){for(var C=D-_;C!==D&&v[C]===0;)C++;for(var T=new Uint8Array(g+(D-C)),k=g;C!==D;)T[k++]=v[C++];return T}}}function d(h){var m=p(h);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:d}}var F7=I7,k7=F7,TP=k7;var g1=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},v1=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return IP(this,e)}},b1=class{decoders;constructor(e){this.decoders=e}or(e){return IP(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function IP(t,e){return new b1({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var w1=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new g1(e,r,n),this.decoder=new v1(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function FP({name:t,prefix:e,encode:r,decode:n}){return new w1(t,e,r,n)}function _1({name:t,prefix:e,alphabet:r}){let{encode:n,decode:s}=TP(r,t);return FP({prefix:e,name:t,encode:n,decode:i=>Dl(s(i))})}function R7(t,e,r,n){let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let f=s[t[l]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|f,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o}function $7(t,e,r){let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o!==0&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function wn({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return FP({prefix:e,name:t,encode(s){return $7(s,n,r)},decode(s){return R7(s,n,r,t)}})}var qd=wn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nge=wn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ige=wn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sge=wn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oge=wn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),age=wn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),uge=wn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cge=wn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),E1=wn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Rn=_1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dge=_1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var yge=wn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mge=wn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),bs=wn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gge=wn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function kP(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function RP(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function S1(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Ud=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},$P=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}},tm=new TextEncoder,Fu=new TextDecoder,ln=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!RP(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Rn.baseDecode(this.data).buffer;case"Base64Url":return bs.baseDecode(this.data).buffer;case"BufferSource":{if(S1(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return kP(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Ud(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return E1.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Rn.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Rn.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return bs.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return bs.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=tm.encode(e);return bs.baseEncode(r)}case"String":{let e=tm.encode(this.data);return bs.baseEncode(e)}case"Uint8Array":return bs.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return Ud(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let u=[];try{for(var i=!0,o=$P(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;u.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=bs.baseDecode(this.data),r=Fu.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Fu.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Ud(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Fu.decode(this.data);case"Base64Url":{let e=bs.baseDecode(this.data);return Fu.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Fu.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return Ud(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=$P(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let c=s;typeof c=="string"?u+=c:u+=Fu.decode(c,{stream:!0})}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=Fu.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return E1.baseDecode(this.data);case"Base58Btc":return Rn.baseDecode(this.data);case"Base64Url":return bs.baseDecode(this.data);case"BufferSource":{let e=S1(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return tm.encode(e)}case"String":return tm.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Ud(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var _o={};wo(_o,{decode:()=>Cl,encodeTo:()=>ku,encodingLength:()=>Ru});var N7=jP,NP=128,M7=127,j7=~M7,q7=Math.pow(2,31);function jP(t,e,r){e=e||[],r=r||0;for(var n=r;t>=q7;)e[r++]=t&255|NP,t/=128;for(;t&j7;)e[r++]=t&255|NP,t>>>=7;return e[r]=t|0,jP.bytes=r-n+1,e}var U7=A1,L7=128,MP=127;function A1(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw A1.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&MP)<<s:(o&MP)*Math.pow(2,s),s+=7}while(o>=L7);return A1.bytes=i-n,r}var K7=Math.pow(2,7),V7=Math.pow(2,14),H7=Math.pow(2,21),z7=Math.pow(2,28),W7=Math.pow(2,35),J7=Math.pow(2,42),G7=Math.pow(2,49),Z7=Math.pow(2,56),X7=Math.pow(2,63),Y7=function(t){return t<K7?1:t<V7?2:t<H7?3:t<z7?4:t<W7?5:t<J7?6:t<G7?7:t<Z7?8:t<X7?9:10},Q7={encode:N7,decode:U7,encodingLength:Y7},eK=Q7,Ld=eK;function Cl(t,e=0){return[Ld.decode(t,e),Ld.decode.bytes]}function ku(t,e,r=0){return Ld.encode(t,e,r),e}function Ru(t){return Ld.encodingLength(t)}function x1(t,e){let r=e.byteLength,n=Ru(t),s=n+Ru(r),i=new Uint8Array(s+r);return ku(t,i,0),ku(r,i,n),i.set(e,s),new Pl(t,r,e,i)}function qP(t){let e=Dl(t),[r,n]=Cl(e),[s,i]=Cl(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Pl(r,s,o,e)}function UP(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&BP(t.bytes,r.bytes)}}var Pl=class{code;size;digest;bytes;constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};function LP(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return rK(r,C1(t),e??Rn.encoder);default:return nK(r,C1(t),e??qd.encoder)}}var KP=new WeakMap;function C1(t){let e=KP.get(t);if(e==null){let r=new Map;return KP.set(t,r),r}return e}var P1=class t{code;version;multihash;bytes;"/";constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Kd)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==iK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=x1(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&UP(e.multihash,n.multihash)}toString(e){return LP(this,e)}toJSON(){return{"/":LP(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new t(n,s,i,o??VP(n,s,i.bytes))}else if(r[sK]===!0){let{version:n,multihash:s,code:i}=r,o=qP(s);return t.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Kd)throw new Error(`Version 0 CID must use dag-pb (code: ${Kd}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=VP(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Kd,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=Dl(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Pl(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[f,p]=Cl(e.subarray(r));return r+=p,f},s=n(),i=Kd;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=tK(e,r),i=t.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return C1(i).set(n,e),i}};function tK(t,e){switch(t[0]){case"Q":{let r=e??Rn;return[Rn.prefix,r.decode(`${Rn.prefix}${t}`)]}case Rn.prefix:{let r=e??Rn;return[Rn.prefix,r.decode(t)]}case qd.prefix:{let r=e??qd;return[qd.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function rK(t,e,r){let{prefix:n}=r;if(n!==Rn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s}function nK(t,e,r){let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s}var Kd=112,iK=18;function VP(t,e,r){let n=Ru(t),s=n+Ru(e),i=new Uint8Array(s+r.byteLength);return ku(t,i,0),ku(e,i,n),i.set(r,s),i}var sK=Symbol.for("@ipld/js-cid/CID");var ws=class t{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=_o.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),_o.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=_o.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=_o.decode(r),i=t.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};ws.codeToName=new Map;ws.nameToCode=new Map;ws.registerCodec({code:237,name:"ed25519-pub"});ws.registerCodec({code:4864,name:"ed25519-priv"});ws.registerCodec({code:236,name:"x25519-pub"});ws.registerCodec({code:4866,name:"x25519-priv"});ws.registerCodec({code:231,name:"secp256k1-pub"});ws.registerCodec({code:4865,name:"secp256k1-priv"});var VV=Xn(Tw(),1);var UG=Xn(Ep(),1);var LG=Xn(Ep(),1);var KG=Xn(m1(),1);function VG(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var m=0,g=0,_=0,D=h.length;_!==D&&h[_]===0;)_++,m++;for(var v=(D-_)*l+1>>>0,A=new Uint8Array(v);_!==D;){for(var x=h[_],B=0,C=v-1;(x!==0||B<g)&&C!==-1;C--,B++)x+=256*A[C]>>>0,A[C]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");g=B,_++}for(var T=v-g;T!==v&&A[T]===0;)T++;for(var k=u.repeat(m);T<v;++T)k+=t.charAt(A[T]);return k}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var m=0;if(h[m]!==" "){for(var g=0,_=0;h[m]===u;)g++,m++;for(var D=(h.length-m)*c+1>>>0,v=new Uint8Array(D);h[m];){var A=r[h.charCodeAt(m)];if(A===255)return;for(var x=0,B=D-1;(A!==0||x<_)&&B!==-1;B--,x++)A+=a*v[B]>>>0,v[B]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");_=x,m++}if(h[m]!==" "){for(var C=D-_;C!==D&&v[C]===0;)C++;for(var T=new Uint8Array(g+(D-C)),k=g;C!==D;)T[k++]=v[C++];return T}}}function d(h){var m=p(h);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:d}}var HG=VG,zG=HG,o8=zG;var gbe=new Uint8Array(0);var a8=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Ql=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var K_=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},V_=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return u8(this,e)}},H_=class{constructor(e){this.decoders=e}or(e){return u8(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},u8=(t,e)=>new H_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),z_=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new K_(e,r,n),this.decoder=new V_(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},c8=({name:t,prefix:e,encode:r,decode:n})=>new z_(t,e,r,n),W_=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=o8(r,e);return c8({prefix:t,name:e,encode:n,decode:i=>Ql(s(i))})},JG=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let f=s[t[l]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|f,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},GG=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Sn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>c8({prefix:e,name:t,encode(s){return GG(s,n,r)},decode(s){return JG(s,n,r,t)}});var Sp=Sn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ebe=Sn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Sbe=Sn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Abe=Sn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xbe=Sn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dbe=Sn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cbe=Sn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pbe=Sn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),J_=Sn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Mn=W_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Tbe=W_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kbe=Sn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rbe=Sn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rs=Sn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$be=Sn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function l8(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function f8(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function lc(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Ap=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},d8=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}},c0=new TextEncoder,fc=new TextDecoder,X=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!f8(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Mn.baseDecode(this.data).buffer;case"Base64Url":return Rs.baseDecode(this.data).buffer;case"BufferSource":{if(lc(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return l8(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Ap(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return J_.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Mn.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Mn.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Rs.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return Rs.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=c0.encode(e);return Rs.baseEncode(r)}case"String":{let e=c0.encode(this.data);return Rs.baseEncode(e)}case"Uint8Array":return Rs.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return Ap(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u=[];try{for(var i=!0,o=d8(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;u.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=Rs.baseDecode(this.data),r=fc.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=fc.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Ap(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return fc.decode(this.data);case"Base64Url":{let e=Rs.baseDecode(this.data);return fc.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return fc.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return Ap(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=d8(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let c=s;typeof c=="string"?u+=c:u+=fc.decode(c,{stream:!0})}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=fc.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return J_.baseDecode(this.data);case"Base58Btc":return Mn.baseDecode(this.data);case"Base64Url":return Rs.baseDecode(this.data);case"BufferSource":{let e=lc(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return c0.encode(e)}case"String":return c0.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Ap(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var $o={};wo($o,{decode:()=>ef,encodeTo:()=>dc,encodingLength:()=>pc});var ZG=y8,p8=128,XG=127,YG=~XG,QG=Math.pow(2,31);function y8(t,e,r){e=e||[],r=r||0;for(var n=r;t>=QG;)e[r++]=t&255|p8,t/=128;for(;t&YG;)e[r++]=t&255|p8,t>>>=7;return e[r]=t|0,y8.bytes=r-n+1,e}var eZ=G_,tZ=128,h8=127;function G_(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw G_.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&h8)<<s:(o&h8)*Math.pow(2,s),s+=7}while(o>=tZ);return G_.bytes=i-n,r}var rZ=Math.pow(2,7),nZ=Math.pow(2,14),iZ=Math.pow(2,21),sZ=Math.pow(2,28),oZ=Math.pow(2,35),aZ=Math.pow(2,42),uZ=Math.pow(2,49),cZ=Math.pow(2,56),lZ=Math.pow(2,63),fZ=function(t){return t<rZ?1:t<nZ?2:t<iZ?3:t<sZ?4:t<oZ?5:t<aZ?6:t<uZ?7:t<cZ?8:t<lZ?9:10},dZ={encode:ZG,decode:eZ,encodingLength:fZ},pZ=dZ,xp=pZ;var ef=(t,e=0)=>[xp.decode(t,e),xp.decode.bytes],dc=(t,e,r=0)=>(xp.encode(t,e,r),e),pc=t=>xp.encodingLength(t);var Z_=(t,e)=>{let r=e.byteLength,n=pc(t),s=n+pc(r),i=new Uint8Array(s+r);return dc(t,i,0),dc(r,i,n),i.set(e,s),new tf(t,r,e,i)},m8=t=>{let e=Ql(t),[r,n]=ef(e),[s,i]=ef(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new tf(r,s,o,e)},g8=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&a8(t.bytes,r.bytes)}},tf=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var v8=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return yZ(r,Y_(t),e||Mn.encoder);default:return mZ(r,Y_(t),e||Sp.encoder)}};var b8=new WeakMap,Y_=t=>{let e=b8.get(t);if(e==null){let r=new Map;return b8.set(t,r),r}return e},Q_=class t{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Dp)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==gZ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Z_(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&g8(e.multihash,n.multihash)}toString(e){return v8(this,e)}toJSON(){return{"/":v8(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new t(n,s,i,o||w8(n,s,i.bytes))}else if(r[vZ]===!0){let{version:n,multihash:s,code:i}=r,o=m8(s);return t.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Dp)throw new Error(`Version 0 CID must use dag-pb (code: ${Dp}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=w8(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Dp,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=Ql(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new tf(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[f,p]=ef(e.subarray(r));return r+=p,f},s=n(),i=Dp;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=hZ(e,r),i=t.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Y_(i).set(n,e),i}},hZ=(t,e)=>{switch(t[0]){case"Q":{let r=e||Mn;return[Mn.prefix,r.decode(`${Mn.prefix}${t}`)]}case Mn.prefix:{let r=e||Mn;return[Mn.prefix,r.decode(t)]}case Sp.prefix:{let r=e||Sp;return[Sp.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},yZ=(t,e,r)=>{let{prefix:n}=r;if(n!==Mn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},mZ=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},Dp=112,gZ=18,w8=(t,e,r)=>{let n=pc(t),s=n+pc(e),i=new Uint8Array(s+r.byteLength);return dc(t,i,0),dc(e,i,n),i.set(r,s),i},vZ=Symbol.for("@ipld/js-cid/CID");var dn=class t{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=$o.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),$o.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=$o.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=$o.decode(r),i=t.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};dn.codeToName=new Map;dn.nameToCode=new Map;dn.registerCodec({code:237,name:"ed25519-pub"});dn.registerCodec({code:4864,name:"ed25519-priv"});dn.registerCodec({code:236,name:"x25519-pub"});dn.registerCodec({code:4866,name:"x25519-priv"});dn.registerCodec({code:231,name:"secp256k1-pub"});dn.registerCodec({code:4865,name:"secp256k1-priv"});function Cp(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&Cp(t[e])})}var wZ=Xn(E8(),1),hc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};var rf=class{constructor(){this.store=new Map}clear(){return hc(this,void 0,void 0,function*(){this.store.clear()})}close(){return hc(this,void 0,void 0,function*(){})}delete(e){return hc(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return hc(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return hc(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return hc(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return hc(this,void 0,void 0,function*(){this.store.set(e,r)})}};var _Z=Xn(Ep(),1);var EZ=Xn(Ep(),1);function SZ(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function eE(t,...e){if(!SZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function tE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function S8(t,e){eE(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var nf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var f0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Wi=(t,e)=>t<<32-e|t>>>e;var x1e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function AZ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rE(t){return typeof t=="string"&&(t=AZ(t)),eE(t),t}var l0=class{clone(){return this._cloneInto()}},D1e={}.toString;function A8(t){let e=n=>t().update(rE(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function x8(t=32){if(nf&&typeof nf.getRandomValues=="function")return nf.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function xZ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var D8=(t,e,r)=>t&e^~t&r,C8=(t,e,r)=>t&e^t&r^e&r,d0=class extends l0{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=f0(this.buffer)}update(e){tE(this);let{view:r,buffer:n,blockLen:s}=this;e=rE(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let u=f0(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tE(this),S8(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let f=o;f<s;f++)r[f]=0;xZ(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=f0(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,l[f],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var DZ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Na=new Uint32Array(64),nE=class extends d0{constructor(){super(64,32,8,!1),this.A=$a[0]|0,this.B=$a[1]|0,this.C=$a[2]|0,this.D=$a[3]|0,this.E=$a[4]|0,this.F=$a[5]|0,this.G=$a[6]|0,this.H=$a[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let f=0;f<16;f++,r+=4)Na[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let p=Na[f-15],d=Na[f-2],h=Wi(p,7)^Wi(p,18)^p>>>3,m=Wi(d,17)^Wi(d,19)^d>>>10;Na[f]=m+Na[f-7]+h+Na[f-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let f=0;f<64;f++){let p=Wi(a,6)^Wi(a,11)^Wi(a,25),d=l+p+D8(a,u,c)+DZ[f]+Na[f]|0,m=(Wi(n,2)^Wi(n,13)^Wi(n,22))+C8(n,s,i)|0;l=c,c=u,u=a,a=o+d|0,o=i,i=s,s=n,n=d+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,u,c,l)}roundClean(){Na.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ma=A8(()=>new nE);var CZ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},sf=class{static digest(e){return CZ(this,arguments,void 0,function*({data:r}){return Ma(r)})}};var $s=class{};var PZ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},p0=class extends $s{digest(e){return PZ(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield sf.digest({data:n})}})}};function P8(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function OZ(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function iE(t,...e){if(!OZ(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function O8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");P8(t.outputLen),P8(t.blockLen)}function of(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function B8(t,e){iE(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var af=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function T8(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var h0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ji=(t,e)=>t<<32-e|t>>>e,BZ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!BZ)throw new Error("Non little-endian hardware is not supported");function sE(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Pp(t){if(typeof t=="string"&&(t=sE(t)),!T8(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function y0(...t){let e=0;for(let n=0;n<t.length;n++){let s=t[n];if(!T8(s))throw new Error("Uint8Array expected");e+=s.length}let r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){let i=t[n];r.set(i,s),s+=i.length}return r}var uf=class{clone(){return this._cloneInto()}},K1e={}.toString;function m0(t){let e=n=>t().update(Pp(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function yc(t=32){if(af&&typeof af.getRandomValues=="function")return af.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function TZ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var cf=class extends uf{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=h0(this.buffer)}update(e){of(this);let{view:r,buffer:n,blockLen:s}=this;e=Pp(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let u=h0(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){of(this),B8(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let f=o;f<s;f++)r[f]=0;TZ(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=h0(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,l[f],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var IZ=(t,e,r)=>t&e^~t&r,FZ=(t,e,r)=>t&e^t&r^e&r,kZ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ja=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qa=new Uint32Array(64),oE=class extends cf{constructor(){super(64,32,8,!1),this.A=ja[0]|0,this.B=ja[1]|0,this.C=ja[2]|0,this.D=ja[3]|0,this.E=ja[4]|0,this.F=ja[5]|0,this.G=ja[6]|0,this.H=ja[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let f=0;f<16;f++,r+=4)qa[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let p=qa[f-15],d=qa[f-2],h=Ji(p,7)^Ji(p,18)^p>>>3,m=Ji(d,17)^Ji(d,19)^d>>>10;qa[f]=m+qa[f-7]+h+qa[f-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let f=0;f<64;f++){let p=Ji(a,6)^Ji(a,11)^Ji(a,25),d=l+p+IZ(a,u,c)+kZ[f]+qa[f]|0,m=(Ji(n,2)^Ji(n,13)^Ji(n,22))+FZ(n,s,i)|0;l=c,c=u,u=a,a=o+d|0,o=i,i=s,s=n,n=d+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,u,c,l)}roundClean(){qa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var vi=m0(()=>new oE);var v0={};wo(v0,{bitGet:()=>UZ,bitLen:()=>qZ,bitMask:()=>Op,bitSet:()=>LZ,bytesToHex:()=>Mo,bytesToNumberBE:()=>jo,bytesToNumberLE:()=>Zi,concatBytes:()=>Uo,createHmacDrbg:()=>cE,ensureBytes:()=>Ht,equalBytes:()=>MZ,hexToBytes:()=>mc,hexToNumber:()=>uE,isBytes:()=>Gi,numberToBytesBE:()=>_r,numberToBytesLE:()=>qo,numberToHexUnpadded:()=>R8,numberToVarBytesBE:()=>NZ,utf8ToBytes:()=>jZ,validateObject:()=>bi});var k8=BigInt(0),g0=BigInt(1),RZ=BigInt(2);function Gi(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var $Z=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Mo(t){if(!Gi(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=$Z[t[r]];return e}function R8(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function uE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var No={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function I8(t){if(t>=No._0&&t<=No._9)return t-No._0;if(t>=No._A&&t<=No._F)return t-(No._A-10);if(t>=No._a&&t<=No._f)return t-(No._a-10)}function mc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=I8(t.charCodeAt(i)),a=I8(t.charCodeAt(i+1));if(o===void 0||a===void 0){let u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function jo(t){return uE(Mo(t))}function Zi(t){if(!Gi(t))throw new Error("Uint8Array expected");return uE(Mo(Uint8Array.from(t).reverse()))}function _r(t,e){return mc(t.toString(16).padStart(e*2,"0"))}function qo(t,e){return _r(t,e).reverse()}function NZ(t){return mc(R8(t))}function Ht(t,e,r){let n;if(typeof e=="string")try{n=mc(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Gi(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function Uo(...t){let e=0;for(let s=0;s<t.length;s++){let i=t[s];if(!Gi(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return r}function MZ(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function jZ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function qZ(t){let e;for(e=0;t>k8;t>>=g0,e+=1);return e}function UZ(t,e){return t>>BigInt(e)&g0}var LZ=(t,e,r)=>t|(r?g0:k8)<<BigInt(e),Op=t=>(RZ<<BigInt(t-1))-g0,aE=t=>new Uint8Array(t),F8=t=>Uint8Array.from(t);function cE(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=aE(t),s=aE(t),i=0,o=()=>{n.fill(1),s.fill(0),i=0},a=(...f)=>r(s,n,...f),u=(f=aE())=>{s=a(F8([0]),f),n=a(),f.length!==0&&(s=a(F8([1]),f),n=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,p=[];for(;f<e;){n=a();let d=n.slice();p.push(d),f+=n.length}return Uo(...p)};return(f,p)=>{o(),u(f);let d;for(;!(d=p(c()));)u();return o(),d}}var KZ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Gi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function bi(t,e,r={}){let n=(s,i,o)=>{let a=KZ[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let u=t[s];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${i}`)};for(let[s,i]of Object.entries(e))n(s,i,!1);for(let[s,i]of Object.entries(r))n(s,i,!0);return t}var Cr=BigInt(0),Xt=BigInt(1),gc=BigInt(2),VZ=BigInt(3),lE=BigInt(4),$8=BigInt(5),N8=BigInt(8),HZ=BigInt(9),zZ=BigInt(16);function Dt(t,e){let r=t%e;return r>=Cr?r:e+r}function fE(t,e,r){if(r<=Cr||e<Cr)throw new Error("Expected power/modulo > 0");if(r===Xt)return Cr;let n=Xt;for(;e>Cr;)e&Xt&&(n=n*t%r),t=t*t%r,e>>=Xt;return n}function zt(t,e,r){let n=t;for(;e-- >Cr;)n*=n,n%=r;return n}function b0(t,e){if(t===Cr||e<=Cr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Dt(t,e),n=e,s=Cr,i=Xt,o=Xt,a=Cr;for(;r!==Cr;){let c=n/r,l=n%r,f=s-o*c,p=i-a*c;n=r,r=l,s=o,i=a,o=f,a=p}if(n!==Xt)throw new Error("invert: does not exist");return Dt(s,e)}function WZ(t){let e=(t-Xt)/gc,r,n,s;for(r=t-Xt,n=0;r%gc===Cr;r/=gc,n++);for(s=gc;s<t&&fE(s,e,t)!==t-Xt;s++);if(n===1){let o=(t+Xt)/lE;return function(u,c){let l=u.pow(c,o);if(!u.eql(u.sqr(l),c))throw new Error("Cannot find square root");return l}}let i=(r+Xt)/gc;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,s),r),f=a.pow(u,i),p=a.pow(u,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let d=1;for(let m=a.sqr(p);d<c&&!a.eql(m,a.ONE);d++)m=a.sqr(m);let h=a.pow(l,Xt<<BigInt(c-d-1));l=a.sqr(h),f=a.mul(f,h),p=a.mul(p,l),c=d}return f}}function JZ(t){if(t%lE===VZ){let e=(t+Xt)/lE;return function(n,s){let i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%N8===$8){let e=(t-$8)/N8;return function(n,s){let i=n.mul(s,gc),o=n.pow(i,e),a=n.mul(s,o),u=n.mul(n.mul(a,gc),o),c=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(c),s))throw new Error("Cannot find square root");return c}}return t%zZ,WZ(t)}var M8=(t,e)=>(Dt(t,e)&Xt)===Xt,GZ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dE(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=GZ.reduce((n,s)=>(n[s]="function",n),e);return bi(t,r)}function ZZ(t,e,r){if(r<Cr)throw new Error("Expected power > 0");if(r===Cr)return t.ONE;if(r===Xt)return e;let n=t.ONE,s=e;for(;r>Cr;)r&Xt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Xt;return n}function XZ(t,e){let r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function pE(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function lf(t,e,r=!1,n={}){if(t<=Cr)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:s,nByteLength:i}=pE(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=JZ(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Op(s),ZERO:Cr,ONE:Xt,create:u=>Dt(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Cr<=u&&u<t},is0:u=>u===Cr,isOdd:u=>(u&Xt)===Xt,neg:u=>Dt(-u,t),eql:(u,c)=>u===c,sqr:u=>Dt(u*u,t),add:(u,c)=>Dt(u+c,t),sub:(u,c)=>Dt(u-c,t),mul:(u,c)=>Dt(u*c,t),pow:(u,c)=>ZZ(a,u,c),div:(u,c)=>Dt(u*b0(c,t),t),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>b0(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>XZ(a,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>r?qo(u,i):_r(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return r?Zi(u):jo(u)}});return Object.freeze(a)}function j8(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function q8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function hE(t){let e=q8(t);return e+Math.ceil(e/2)}function U8(t,e,r=!1){let n=t.length,s=q8(e),i=hE(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let o=r?jo(t):Zi(t),a=Dt(o,e-Xt)+Xt;return r?qo(a,s):_r(a,s)}var QZ=BigInt(0),yE=BigInt(1);function w0(t,e){let r=(s,i)=>{let o=i.negate();return s?o:i},n=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>QZ;)i&yE&&(o=o.add(a)),a=a.double(),i>>=yE;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=n(i),u=[],c=s,l=c;for(let f=0;f<o;f++){l=c,u.push(l);for(let p=1;p<a;p++)l=l.add(c),u.push(l);c=l.double()}return u},wNAF(s,i,o){let{windows:a,windowSize:u}=n(s),c=t.ZERO,l=t.BASE,f=BigInt(2**s-1),p=2**s,d=BigInt(s);for(let h=0;h<a;h++){let m=h*u,g=Number(o&f);o>>=d,g>u&&(g-=p,o+=yE);let _=m,D=m+Math.abs(g)-1,v=h%2!==0,A=g<0;g===0?l=l.add(r(v,i[_])):c=c.add(r(A,i[D]))}return{p:c,f:l}},wNAFCached(s,i,o,a){let u=s._WINDOW_SIZE||1,c=i.get(s);return c||(c=this.precomputeWindow(s,u),u!==1&&i.set(s,a(c))),this.wNAF(u,c,o)}}}function Bp(t){return dE(t.Fp),bi(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...pE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function eX(t){let e=Bp(t);bi(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:tX,hexToBytes:rX}=v0,vc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=vc;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:tX(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=vc,r=typeof t=="string"?rX(t):t;if(!Gi(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=vc._parseInt(r.subarray(2)),{d:o,l:a}=vc._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){let e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{let l=c.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),u=r(o);return`30${r(o+i+4)}02${u}${s}02${a}${n}`}},Lo=BigInt(0),wi=BigInt(1),iwe=BigInt(2),L8=BigInt(3),swe=BigInt(4);function nX(t){let e=eX(t),{Fp:r}=e,n=e.toBytes||((h,m,g)=>{let _=m.toAffine();return Uo(Uint8Array.from([4]),r.toBytes(_.x),r.toBytes(_.y))}),s=e.fromBytes||(h=>{let m=h.subarray(1),g=r.fromBytes(m.subarray(0,r.BYTES)),_=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:g,y:_}});function i(h){let{a:m,b:g}=e,_=r.sqr(h),D=r.mul(_,h);return r.add(r.add(D,r.mul(h,m)),g)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(h){return typeof h=="bigint"&&Lo<h&&h<e.n}function a(h){if(!o(h))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(h){let{allowedPrivateKeyLengths:m,nByteLength:g,wrapPrivateKey:_,n:D}=e;if(m&&typeof h!="bigint"){if(Gi(h)&&(h=Mo(h)),typeof h!="string"||!m.includes(h.length))throw new Error("Invalid key");h=h.padStart(g*2,"0")}let v;try{v=typeof h=="bigint"?h:jo(Ht("private key",h,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof h}`)}return _&&(v=Dt(v,D)),a(v),v}let c=new Map;function l(h){if(!(h instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,g,_){if(this.px=m,this.py=g,this.pz=_,m==null||!r.isValid(m))throw new Error("x required");if(g==null||!r.isValid(g))throw new Error("y required");if(_==null||!r.isValid(_))throw new Error("z required")}static fromAffine(m){let{x:g,y:_}=m||{};if(!m||!r.isValid(g)||!r.isValid(_))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");let D=v=>r.eql(v,r.ZERO);return D(g)&&D(_)?f.ZERO:new f(g,_,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){let g=r.invertBatch(m.map(_=>_.pz));return m.map((_,D)=>_.toAffine(g[D])).map(f.fromAffine)}static fromHex(m){let g=f.fromAffine(s(Ht("pointHex",m)));return g.assertValidity(),g}static fromPrivateKey(m){return f.BASE.multiply(u(m))}_setWindowSize(m){this._WINDOW_SIZE=m,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:m,y:g}=this.toAffine();if(!r.isValid(m)||!r.isValid(g))throw new Error("bad point: x or y not FE");let _=r.sqr(g),D=i(m);if(!r.eql(_,D))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);let{px:g,py:_,pz:D}=this,{px:v,py:A,pz:x}=m,B=r.eql(r.mul(g,x),r.mul(v,D)),C=r.eql(r.mul(_,x),r.mul(A,D));return B&&C}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:m,b:g}=e,_=r.mul(g,L8),{px:D,py:v,pz:A}=this,x=r.ZERO,B=r.ZERO,C=r.ZERO,T=r.mul(D,D),k=r.mul(v,v),I=r.mul(A,A),$=r.mul(D,v);return $=r.add($,$),C=r.mul(D,A),C=r.add(C,C),x=r.mul(m,C),B=r.mul(_,I),B=r.add(x,B),x=r.sub(k,B),B=r.add(k,B),B=r.mul(x,B),x=r.mul($,x),C=r.mul(_,C),I=r.mul(m,I),$=r.sub(T,I),$=r.mul(m,$),$=r.add($,C),C=r.add(T,T),T=r.add(C,T),T=r.add(T,I),T=r.mul(T,$),B=r.add(B,T),I=r.mul(v,A),I=r.add(I,I),T=r.mul(I,$),x=r.sub(x,T),C=r.mul(I,k),C=r.add(C,C),C=r.add(C,C),new f(x,B,C)}add(m){l(m);let{px:g,py:_,pz:D}=this,{px:v,py:A,pz:x}=m,B=r.ZERO,C=r.ZERO,T=r.ZERO,k=e.a,I=r.mul(e.b,L8),$=r.mul(g,v),M=r.mul(_,A),Y=r.mul(D,x),ee=r.add(g,_),U=r.add(v,A);ee=r.mul(ee,U),U=r.add($,M),ee=r.sub(ee,U),U=r.add(g,D);let G=r.add(v,x);return U=r.mul(U,G),G=r.add($,Y),U=r.sub(U,G),G=r.add(_,D),B=r.add(A,x),G=r.mul(G,B),B=r.add(M,Y),G=r.sub(G,B),T=r.mul(k,U),B=r.mul(I,Y),T=r.add(B,T),B=r.sub(M,T),T=r.add(M,T),C=r.mul(B,T),M=r.add($,$),M=r.add(M,$),Y=r.mul(k,Y),U=r.mul(I,U),M=r.add(M,Y),Y=r.sub($,Y),Y=r.mul(k,Y),U=r.add(U,Y),$=r.mul(M,U),C=r.add(C,$),$=r.mul(G,U),B=r.mul(ee,B),B=r.sub(B,$),$=r.mul(ee,M),T=r.mul(G,T),T=r.add(T,$),new f(B,C,T)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return d.wNAFCached(this,c,m,g=>{let _=r.invertBatch(g.map(D=>D.pz));return g.map((D,v)=>D.toAffine(_[v])).map(f.fromAffine)})}multiplyUnsafe(m){let g=f.ZERO;if(m===Lo)return g;if(a(m),m===wi)return this;let{endo:_}=e;if(!_)return d.unsafeLadder(this,m);let{k1neg:D,k1:v,k2neg:A,k2:x}=_.splitScalar(m),B=g,C=g,T=this;for(;v>Lo||x>Lo;)v&wi&&(B=B.add(T)),x&wi&&(C=C.add(T)),T=T.double(),v>>=wi,x>>=wi;return D&&(B=B.negate()),A&&(C=C.negate()),C=new f(r.mul(C.px,_.beta),C.py,C.pz),B.add(C)}multiply(m){a(m);let g=m,_,D,{endo:v}=e;if(v){let{k1neg:A,k1:x,k2neg:B,k2:C}=v.splitScalar(g),{p:T,f:k}=this.wNAF(x),{p:I,f:$}=this.wNAF(C);T=d.constTimeNegate(A,T),I=d.constTimeNegate(B,I),I=new f(r.mul(I.px,v.beta),I.py,I.pz),_=T.add(I),D=k.add($)}else{let{p:A,f:x}=this.wNAF(g);_=A,D=x}return f.normalizeZ([_,D])[0]}multiplyAndAddUnsafe(m,g,_){let D=f.BASE,v=(x,B)=>B===Lo||B===wi||!x.equals(D)?x.multiplyUnsafe(B):x.multiply(B),A=v(this,g).add(v(m,_));return A.is0()?void 0:A}toAffine(m){let{px:g,py:_,pz:D}=this,v=this.is0();m==null&&(m=v?r.ONE:r.inv(D));let A=r.mul(g,m),x=r.mul(_,m),B=r.mul(D,m);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(B,r.ONE))throw new Error("invZ was invalid");return{x:A,y:x}}isTorsionFree(){let{h:m,isTorsionFree:g}=e;if(m===wi)return!0;if(g)return g(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:m,clearCofactor:g}=e;return m===wi?this:g?g(f,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),n(f,this,m)}toHex(m=!0){return Mo(this.toRawBytes(m))}}f.BASE=new f(e.Gx,e.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let p=e.nBitLength,d=w0(f,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:o}}function iX(t){let e=Bp(t);return bi(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function K8(t){let e=iX(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(U){return Lo<U&&U<r.ORDER}function a(U){return Dt(U,n)}function u(U){return b0(U,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:f,isWithinCurveOrder:p}=nX({...e,toBytes(U,G,te){let W=G.toAffine(),j=r.toBytes(W.x),q=Uo;return te?q(Uint8Array.from([G.hasEvenY()?2:3]),j):q(Uint8Array.from([4]),j,r.toBytes(W.y))},fromBytes(U){let G=U.length,te=U[0],W=U.subarray(1);if(G===s&&(te===2||te===3)){let j=jo(W);if(!o(j))throw new Error("Point is not on curve");let q=f(j),Q=r.sqrt(q),oe=(Q&wi)===wi;return(te&1)===1!==oe&&(Q=r.neg(Q)),{x:j,y:Q}}else if(G===i&&te===4){let j=r.fromBytes(W.subarray(0,r.BYTES)),q=r.fromBytes(W.subarray(r.BYTES,2*r.BYTES));return{x:j,y:q}}else throw new Error(`Point of length ${G} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),d=U=>Mo(_r(U,e.nByteLength));function h(U){let G=n>>wi;return U>G}function m(U){return h(U)?a(-U):U}let g=(U,G,te)=>jo(U.slice(G,te));class _{constructor(G,te,W){this.r=G,this.s=te,this.recovery=W,this.assertValidity()}static fromCompact(G){let te=e.nByteLength;return G=Ht("compactSignature",G,te*2),new _(g(G,0,te),g(G,te,2*te))}static fromDER(G){let{r:te,s:W}=vc.toSig(Ht("DER",G));return new _(te,W)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new _(this.r,this.s,G)}recoverPublicKey(G){let{r:te,s:W,recovery:j}=this,q=C(Ht("msgHash",G));if(j==null||![0,1,2,3].includes(j))throw new Error("recovery id invalid");let Q=j===2||j===3?te+e.n:te;if(Q>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let oe=j&1?"03":"02",pe=c.fromHex(oe+d(Q)),ae=u(Q),he=a(-q*ae),Ee=a(W*ae),Pe=c.BASE.multiplyAndAddUnsafe(pe,he,Ee);if(!Pe)throw new Error("point at infinify");return Pe.assertValidity(),Pe}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return mc(this.toDERHex())}toDERHex(){return vc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mc(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let D={isValidPrivateKey(U){try{return l(U),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let U=hE(e.n);return U8(e.randomBytes(U),e.n)},precompute(U=8,G=c.BASE){return G._setWindowSize(U),G.multiply(BigInt(3)),G}};function v(U,G=!0){return c.fromPrivateKey(U).toRawBytes(G)}function A(U){let G=Gi(U),te=typeof U=="string",W=(G||te)&&U.length;return G?W===s||W===i:te?W===2*s||W===2*i:U instanceof c}function x(U,G,te=!0){if(A(U))throw new Error("first arg must be private key");if(!A(G))throw new Error("second arg must be public key");return c.fromHex(G).multiply(l(U)).toRawBytes(te)}let B=e.bits2int||function(U){let G=jo(U),te=U.length*8-e.nBitLength;return te>0?G>>BigInt(te):G},C=e.bits2int_modN||function(U){return a(B(U))},T=Op(e.nBitLength);function k(U){if(typeof U!="bigint")throw new Error("bigint expected");if(!(Lo<=U&&U<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return _r(U,e.nByteLength)}function I(U,G,te=$){if(["recovered","canonical"].some(Je=>Je in te))throw new Error("sign() legacy options not supported");let{hash:W,randomBytes:j}=e,{lowS:q,prehash:Q,extraEntropy:oe}=te;q==null&&(q=!0),U=Ht("msgHash",U),Q&&(U=Ht("prehashed msgHash",W(U)));let pe=C(U),ae=l(G),he=[k(ae),k(pe)];if(oe!=null){let Je=oe===!0?j(r.BYTES):oe;he.push(Ht("extraEntropy",Je))}let Ee=Uo(...he),Pe=pe;function Fe(Je){let at=B(Je);if(!p(at))return;let ft=u(at),Ge=c.BASE.multiply(at).toAffine(),Vt=a(Ge.x);if(Vt===Lo)return;let At=a(ft*a(Pe+Vt*ae));if(At===Lo)return;let cn=(Ge.x===Vt?0:2)|Number(Ge.y&wi),lr=At;return q&&h(At)&&(lr=m(At),cn^=1),new _(Vt,lr,cn)}return{seed:Ee,k2sig:Fe}}let $={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function Y(U,G,te=$){let{seed:W,k2sig:j}=I(U,G,te),q=e;return cE(q.hash.outputLen,q.nByteLength,q.hmac)(W,j)}c.BASE._setWindowSize(8);function ee(U,G,te,W=M){let j=U;if(G=Ht("msgHash",G),te=Ht("publicKey",te),"strict"in W)throw new Error("options.strict was renamed to lowS");let{lowS:q,prehash:Q}=W,oe,pe;try{if(typeof j=="string"||Gi(j))try{oe=_.fromDER(j)}catch(Ge){if(!(Ge instanceof vc.Err))throw Ge;oe=_.fromCompact(j)}else if(typeof j=="object"&&typeof j.r=="bigint"&&typeof j.s=="bigint"){let{r:Ge,s:Vt}=j;oe=new _(Ge,Vt)}else throw new Error("PARSE");pe=c.fromHex(te)}catch(Ge){if(Ge.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&oe.hasHighS())return!1;Q&&(G=e.hash(G));let{r:ae,s:he}=oe,Ee=C(G),Pe=u(he),Fe=a(Ee*Pe),Je=a(ae*Pe),at=c.BASE.multiplyAndAddUnsafe(pe,Fe,Je)?.toAffine();return at?a(at.x)===ae:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:x,sign:Y,verify:ee,ProjectivePoint:c,Signature:_,utils:D}}var _0=class extends uf{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,O8(e);let n=Pp(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return of(this),this.iHash.update(e),this}digestInto(e){of(this),iE(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},mE=(t,e,r)=>new _0(t,e).update(r).digest();mE.create=(t,e)=>new _0(t,e);function sX(t){return{hash:t,hmac:(e,...r)=>mE(t,e,y0(...r)),randomBytes:yc}}function E0(t,e){let r=n=>K8({...t,...sX(n)});return Object.freeze({...r(e),create:r})}var z8=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),V8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),oX=BigInt(1),gE=BigInt(2),H8=(t,e)=>(t+e/gE)/e;function aX(t){let e=z8,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,l=c*c*t%e,f=zt(l,r,e)*l%e,p=zt(f,r,e)*l%e,d=zt(p,gE,e)*c%e,h=zt(d,s,e)*d%e,m=zt(h,i,e)*h%e,g=zt(m,a,e)*m%e,_=zt(g,u,e)*g%e,D=zt(_,a,e)*m%e,v=zt(D,r,e)*l%e,A=zt(v,o,e)*h%e,x=zt(A,n,e)*c%e,B=zt(x,gE,e);if(!vE.eql(vE.sqr(B),t))throw new Error("Cannot find square root");return B}var vE=lf(z8,void 0,void 0,{sqrt:aX}),qt=E0({a:BigInt(0),b:BigInt(7),Fp:vE,n:V8,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=V8,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-oX*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=H8(i*t,e),u=H8(-n*t,e),c=Dt(t-a*r-u*s,e),l=Dt(-a*n-u*i,e),f=c>o,p=l>o;if(f&&(c=e-c),p&&(l=e-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:c,k2neg:p,k2:l}}}},vi),gwe=BigInt(0);var vwe=qt.ProjectivePoint;function W8(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var uX=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},bE="urn:jwk:";function Rt(t){return uX(this,arguments,void 0,function*({jwk:e}){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);Cp(n);let s=W8(n),i=X.string(s).toUint8Array(),o=yield sf.digest({data:i});return X.uint8Array(o).toBase64Url()})}function Ns(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function ff(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Ua(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function Tp(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function J8(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var Wr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},cX=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},La=class t{static adjustSignatureToLowS(e){return Wr(this,arguments,void 0,function*({signature:r}){let n=qt.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return Wr(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:X.uint8Array(r).toBase64Url(),x:X.uint8Array(n.x).toBase64Url(),y:X.uint8Array(n.y).toBase64Url()};return s.kid=yield Rt({jwk:s}),s})}static bytesToPublicKey(e){return Wr(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:X.uint8Array(n.x).toBase64Url(),y:X.uint8Array(n.y).toBase64Url()};return s.kid=yield Rt({jwk:s}),s})}static compressPublicKey(e){return Wr(this,arguments,void 0,function*({publicKeyBytes:r}){return qt.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return Wr(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=yield t.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:X.uint8Array(s.x).toBase64Url(),y:X.uint8Array(s.y).toBase64Url()};return i.kid=yield Rt({jwk:i}),i})}static convertDerToCompactSignature(e){return Wr(this,arguments,void 0,function*({derSignature:r}){return qt.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return Wr(this,arguments,void 0,function*({publicKeyBytes:r}){return qt.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Wr(this,void 0,void 0,function*(){let e=qt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Rt({jwk:r}),r})}static getPublicKey(e){return Wr(this,arguments,void 0,function*({key:r}){var n;if(!(Ns(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:s}=r,i=cX(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield Rt({jwk:i})),i})}static privateKeyToBytes(e){return Wr(this,arguments,void 0,function*({privateKey:r}){if(!Ns(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return X.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Wr(this,arguments,void 0,function*({publicKey:r}){if(!(ff(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),s=X.base64Url(r.x).toUint8Array(),i=X.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return Wr(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let s=yield t.privateKeyToBytes({privateKey:r}),i=yield t.publicKeyToBytes({publicKey:n});return qt.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return Wr(this,arguments,void 0,function*({data:r,key:n}){let s=yield t.privateKeyToBytes({privateKey:n}),i=Ma(r);return qt.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return Wr(this,arguments,void 0,function*({privateKeyBytes:r}){return qt.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return Wr(this,arguments,void 0,function*({publicKeyBytes:r}){try{qt.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Wr(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r}),o=Ma(s);return qt.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return Wr(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=qt.getPublicKey(r));let n=qt.ProjectivePoint.fromHex(r),s=_r(n.x,32),i=_r(n.y,32);return{x:s,y:i}})}};var G8=lf(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),lX=G8.create(BigInt("-3")),fX=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),dX=E0({a:lX,b:fX,Fp:G8,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},vi),Kt=dX;var Jr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},pX=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Ka=class t{static adjustSignatureToLowS(e){return Jr(this,arguments,void 0,function*({signature:r}){let n=Kt.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return Jr(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:X.uint8Array(r).toBase64Url(),x:X.uint8Array(n.x).toBase64Url(),y:X.uint8Array(n.y).toBase64Url()};return s.kid=yield Rt({jwk:s}),s})}static bytesToPublicKey(e){return Jr(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:X.uint8Array(n.x).toBase64Url(),y:X.uint8Array(n.y).toBase64Url()};return s.kid=yield Rt({jwk:s}),s})}static compressPublicKey(e){return Jr(this,arguments,void 0,function*({publicKeyBytes:r}){return Kt.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return Jr(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=yield t.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:X.uint8Array(s.x).toBase64Url(),y:X.uint8Array(s.y).toBase64Url()};return i.kid=yield Rt({jwk:i}),i})}static convertDerToCompactSignature(e){return Jr(this,arguments,void 0,function*({derSignature:r}){return Kt.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return Jr(this,arguments,void 0,function*({publicKeyBytes:r}){return Kt.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Jr(this,void 0,void 0,function*(){let e=Kt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Rt({jwk:r}),r})}static getPublicKey(e){return Jr(this,arguments,void 0,function*({key:r}){var n;if(!(Ns(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:s}=r,i=pX(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield Rt({jwk:i})),i})}static privateKeyToBytes(e){return Jr(this,arguments,void 0,function*({privateKey:r}){if(!Ns(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return X.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Jr(this,arguments,void 0,function*({publicKey:r}){if(!(ff(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),s=X.base64Url(r.x).toUint8Array(),i=X.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return Jr(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let s=yield t.privateKeyToBytes({privateKey:r}),i=yield t.publicKeyToBytes({publicKey:n});return Kt.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return Jr(this,arguments,void 0,function*({data:r,key:n}){let s=yield t.privateKeyToBytes({privateKey:n}),i=Ma(r);return Kt.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return Jr(this,arguments,void 0,function*({privateKeyBytes:r}){return Kt.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return Jr(this,arguments,void 0,function*({publicKeyBytes:r}){try{Kt.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Jr(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r}),o=Ma(s);return Kt.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return Jr(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=Kt.getPublicKey(r));let n=Kt.ProjectivePoint.fromHex(r),s=_r(n.x,32),i=_r(n.y,32);return{x:s,y:i}})}};var Ip=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Fp=class extends $s{computePublicKey(e){return Ip(this,arguments,void 0,function*({key:r}){if(!Ns(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield La.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield Ka.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return Ip(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{let n=yield La.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{let n=yield Ka.generateKey();return n.alg="ES256",n}}})}getPublicKey(e){return Ip(this,arguments,void 0,function*({key:r}){if(!Ns(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield La.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield Ka.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return Ip(this,arguments,void 0,function*({key:r,data:n}){if(!Ns(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield La.sign({key:r,data:n});case"P-256":return yield Ka.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return Ip(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!ff(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield La.verify({key:r,signature:n,data:s});case"P-256":return yield Ka.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var S0=BigInt(4294967295),wE=BigInt(32);function Z8(t,e=!1){return e?{h:Number(t&S0),l:Number(t>>wE&S0)}:{h:Number(t>>wE&S0)|0,l:Number(t&S0)|0}}function hX(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:i,l:o}=Z8(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}var yX=(t,e)=>BigInt(t>>>0)<<wE|BigInt(e>>>0),mX=(t,e,r)=>t>>>r,gX=(t,e,r)=>t<<32-r|e>>>r,vX=(t,e,r)=>t>>>r|e<<32-r,bX=(t,e,r)=>t<<32-r|e>>>r,wX=(t,e,r)=>t<<64-r|e>>>r-32,_X=(t,e,r)=>t>>>r-32|e<<64-r,EX=(t,e)=>e,SX=(t,e)=>t,AX=(t,e,r)=>t<<r|e>>>32-r,xX=(t,e,r)=>e<<r|t>>>32-r,DX=(t,e,r)=>e<<r-32|t>>>64-r,CX=(t,e,r)=>t<<r-32|e>>>64-r;function PX(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var OX=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),BX=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,TX=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),IX=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,FX=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),kX=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0;var RX={fromBig:Z8,split:hX,toBig:yX,shrSH:mX,shrSL:gX,rotrSH:vX,rotrSL:bX,rotrBH:wX,rotrBL:_X,rotr32H:EX,rotr32L:SX,rotlSH:AX,rotlSL:xX,rotlBH:DX,rotlBL:CX,add:PX,add3L:OX,add3H:BX,add4L:TX,add4H:IX,add5H:kX,add5L:FX},He=RX;var[$X,NX]=He.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Va=new Uint32Array(80),Ha=new Uint32Array(80),_E=class extends cf{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:c,El:l,Fh:f,Fl:p,Gh:d,Gl:h,Hh:m,Hl:g}=this;return[e,r,n,s,i,o,a,u,c,l,f,p,d,h,m,g]}set(e,r,n,s,i,o,a,u,c,l,f,p,d,h,m,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=l|0,this.Fh=f|0,this.Fl=p|0,this.Gh=d|0,this.Gl=h|0,this.Hh=m|0,this.Hl=g|0}process(e,r){for(let v=0;v<16;v++,r+=4)Va[v]=e.getUint32(r),Ha[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){let A=Va[v-15]|0,x=Ha[v-15]|0,B=He.rotrSH(A,x,1)^He.rotrSH(A,x,8)^He.shrSH(A,x,7),C=He.rotrSL(A,x,1)^He.rotrSL(A,x,8)^He.shrSL(A,x,7),T=Va[v-2]|0,k=Ha[v-2]|0,I=He.rotrSH(T,k,19)^He.rotrBH(T,k,61)^He.shrSH(T,k,6),$=He.rotrSL(T,k,19)^He.rotrBL(T,k,61)^He.shrSL(T,k,6),M=He.add4L(C,$,Ha[v-7],Ha[v-16]),Y=He.add4H(M,B,I,Va[v-7],Va[v-16]);Va[v]=Y|0,Ha[v]=M|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:c,Dl:l,Eh:f,El:p,Fh:d,Fl:h,Gh:m,Gl:g,Hh:_,Hl:D}=this;for(let v=0;v<80;v++){let A=He.rotrSH(f,p,14)^He.rotrSH(f,p,18)^He.rotrBH(f,p,41),x=He.rotrSL(f,p,14)^He.rotrSL(f,p,18)^He.rotrBL(f,p,41),B=f&d^~f&m,C=p&h^~p&g,T=He.add5L(D,x,C,NX[v],Ha[v]),k=He.add5H(T,_,A,B,$X[v],Va[v]),I=T|0,$=He.rotrSH(n,s,28)^He.rotrBH(n,s,34)^He.rotrBH(n,s,39),M=He.rotrSL(n,s,28)^He.rotrBL(n,s,34)^He.rotrBL(n,s,39),Y=n&i^n&a^i&a,ee=s&o^s&u^o&u;_=m|0,D=g|0,m=d|0,g=h|0,d=f|0,h=p|0,{h:f,l:p}=He.add(c|0,l|0,k|0,I|0),c=a|0,l=u|0,a=i|0,u=o|0,i=n|0,o=s|0;let U=He.add3L(I,M,ee);n=He.add3H(U,k,$,Y),s=U|0}({h:n,l:s}=He.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=He.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=He.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l}=He.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:f,l:p}=He.add(this.Eh|0,this.El|0,f|0,p|0),{h:d,l:h}=He.add(this.Fh|0,this.Fl|0,d|0,h|0),{h:m,l:g}=He.add(this.Gh|0,this.Gl|0,m|0,g|0),{h:_,l:D}=He.add(this.Hh|0,this.Hl|0,_|0,D|0),this.set(n,s,i,o,a,u,c,l,f,p,d,h,m,g,_,D)}roundClean(){Va.fill(0),Ha.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var EE=m0(()=>new _E);var Xi=BigInt(0),ti=BigInt(1),A0=BigInt(2),MX=BigInt(8),jX={zip215:!0};function qX(t){let e=Bp(t);return bi(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function x0(t){let e=qX(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=e,c=A0<<BigInt(a*8)-ti,l=r.create,f=e.uvRatio||((W,j)=>{try{return{isValid:!0,value:r.sqrt(W*r.inv(j))}}catch{return{isValid:!1,value:Xi}}}),p=e.adjustScalarBytes||(W=>W),d=e.domain||((W,j,q)=>{if(j.length||q)throw new Error("Contexts/pre-hash are not supported");return W}),h=W=>typeof W=="bigint"&&Xi<W,m=(W,j)=>h(W)&&h(j)&&W<j,g=W=>W===Xi||m(W,c);function _(W,j){if(m(W,j))return W;throw new Error(`Expected valid scalar < ${j}, got ${typeof W} ${W}`)}function D(W){return W===Xi?W:_(W,n)}let v=new Map;function A(W){if(!(W instanceof x))throw new Error("ExtendedPoint expected")}class x{constructor(j,q,Q,oe){if(this.ex=j,this.ey=q,this.ez=Q,this.et=oe,!g(j))throw new Error("x required");if(!g(q))throw new Error("y required");if(!g(Q))throw new Error("z required");if(!g(oe))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(j){if(j instanceof x)throw new Error("extended point not allowed");let{x:q,y:Q}=j||{};if(!g(q)||!g(Q))throw new Error("invalid affine point");return new x(q,Q,ti,l(q*Q))}static normalizeZ(j){let q=r.invertBatch(j.map(Q=>Q.ez));return j.map((Q,oe)=>Q.toAffine(q[oe])).map(x.fromAffine)}_setWindowSize(j){this._WINDOW_SIZE=j,v.delete(this)}assertValidity(){let{a:j,d:q}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:Q,ey:oe,ez:pe,et:ae}=this,he=l(Q*Q),Ee=l(oe*oe),Pe=l(pe*pe),Fe=l(Pe*Pe),Je=l(he*j),at=l(Pe*l(Je+Ee)),ft=l(Fe+l(q*l(he*Ee)));if(at!==ft)throw new Error("bad point: equation left != right (1)");let Ge=l(Q*oe),Vt=l(pe*ae);if(Ge!==Vt)throw new Error("bad point: equation left != right (2)")}equals(j){A(j);let{ex:q,ey:Q,ez:oe}=this,{ex:pe,ey:ae,ez:he}=j,Ee=l(q*he),Pe=l(pe*oe),Fe=l(Q*he),Je=l(ae*oe);return Ee===Pe&&Fe===Je}is0(){return this.equals(x.ZERO)}negate(){return new x(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:j}=e,{ex:q,ey:Q,ez:oe}=this,pe=l(q*q),ae=l(Q*Q),he=l(A0*l(oe*oe)),Ee=l(j*pe),Pe=q+Q,Fe=l(l(Pe*Pe)-pe-ae),Je=Ee+ae,at=Je-he,ft=Ee-ae,Ge=l(Fe*at),Vt=l(Je*ft),At=l(Fe*ft),cn=l(at*Je);return new x(Ge,Vt,cn,At)}add(j){A(j);let{a:q,d:Q}=e,{ex:oe,ey:pe,ez:ae,et:he}=this,{ex:Ee,ey:Pe,ez:Fe,et:Je}=j;if(q===BigInt(-1)){let Ea=l((pe-oe)*(Pe+Ee)),dt=l((pe+oe)*(Pe-Ee)),tr=l(dt-Ea);if(tr===Xi)return this.double();let Be=l(ae*A0*Je),dr=l(he*A0*Fe),bt=dr+Be,ms=dt+Ea,Pu=dr-Be,kn=l(bt*tr),gs=l(ms*Pu),Ui=l(bt*Pu),ur=l(tr*ms);return new x(kn,gs,ur,Ui)}let at=l(oe*Ee),ft=l(pe*Pe),Ge=l(he*Q*Je),Vt=l(ae*Fe),At=l((oe+pe)*(Ee+Pe)-at-ft),cn=Vt-Ge,lr=Vt+Ge,ys=l(ft-q*at),qi=l(At*cn),mo=l(lr*ys),fr=l(At*ys),Fn=l(cn*lr);return new x(qi,mo,Fn,fr)}subtract(j){return this.add(j.negate())}wNAF(j){return T.wNAFCached(this,v,j,x.normalizeZ)}multiply(j){let{p:q,f:Q}=this.wNAF(_(j,n));return x.normalizeZ([q,Q])[0]}multiplyUnsafe(j){let q=D(j);return q===Xi?C:this.equals(C)||q===ti?this:this.equals(B)?this.wNAF(q).p:T.unsafeLadder(this,q)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return T.unsafeLadder(this,n).is0()}toAffine(j){let{ex:q,ey:Q,ez:oe}=this,pe=this.is0();j==null&&(j=pe?MX:r.inv(oe));let ae=l(q*j),he=l(Q*j),Ee=l(oe*j);if(pe)return{x:Xi,y:ti};if(Ee!==ti)throw new Error("invZ was invalid");return{x:ae,y:he}}clearCofactor(){let{h:j}=e;return j===ti?this:this.multiplyUnsafe(j)}static fromHex(j,q=!1){let{d:Q,a:oe}=e,pe=r.BYTES;j=Ht("pointHex",j,pe);let ae=j.slice(),he=j[pe-1];ae[pe-1]=he&-129;let Ee=Zi(ae);Ee===Xi||(q?_(Ee,c):_(Ee,r.ORDER));let Pe=l(Ee*Ee),Fe=l(Pe-ti),Je=l(Q*Pe-oe),{isValid:at,value:ft}=f(Fe,Je);if(!at)throw new Error("Point.fromHex: invalid y coordinate");let Ge=(ft&ti)===ti,Vt=(he&128)!==0;if(!q&&ft===Xi&&Vt)throw new Error("Point.fromHex: x=0 and x_0=1");return Vt!==Ge&&(ft=l(-ft)),x.fromAffine({x:ft,y:Ee})}static fromPrivateKey(j){return $(j).point}toRawBytes(){let{x:j,y:q}=this.toAffine(),Q=qo(q,r.BYTES);return Q[Q.length-1]|=j&ti?128:0,Q}toHex(){return Mo(this.toRawBytes())}}x.BASE=new x(e.Gx,e.Gy,ti,l(e.Gx*e.Gy)),x.ZERO=new x(Xi,ti,ti,Xi);let{BASE:B,ZERO:C}=x,T=w0(x,a*8);function k(W){return Dt(W,n)}function I(W){return k(Zi(W))}function $(W){let j=a;W=Ht("private key",W,j);let q=Ht("hashed private key",i(W),2*j),Q=p(q.slice(0,j)),oe=q.slice(j,2*j),pe=I(Q),ae=B.multiply(pe),he=ae.toRawBytes();return{head:Q,prefix:oe,scalar:pe,point:ae,pointBytes:he}}function M(W){return $(W).pointBytes}function Y(W=new Uint8Array,...j){let q=Uo(...j);return I(i(d(q,Ht("context",W),!!s)))}function ee(W,j,q={}){W=Ht("message",W),s&&(W=s(W));let{prefix:Q,scalar:oe,pointBytes:pe}=$(j),ae=Y(q.context,Q,W),he=B.multiply(ae).toRawBytes(),Ee=Y(q.context,he,pe,W),Pe=k(ae+Ee*oe);D(Pe);let Fe=Uo(he,qo(Pe,r.BYTES));return Ht("result",Fe,a*2)}let U=jX;function G(W,j,q,Q=U){let{context:oe,zip215:pe}=Q,ae=r.BYTES;W=Ht("signature",W,2*ae),j=Ht("message",j),s&&(j=s(j));let he=Zi(W.slice(ae,2*ae)),Ee,Pe,Fe;try{Ee=x.fromHex(q,pe),Pe=x.fromHex(W.slice(0,ae),pe),Fe=B.multiplyUnsafe(he)}catch{return!1}if(!pe&&Ee.isSmallOrder())return!1;let Je=Y(oe,Pe.toRawBytes(),Ee.toRawBytes(),j);return Pe.add(Ee.multiplyUnsafe(Je)).subtract(Fe).clearCofactor().equals(x.ZERO)}return B._setWindowSize(8),{CURVE:e,getPublicKey:M,sign:ee,verify:G,ExtendedPoint:x,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>o(r.BYTES),precompute(W=8,j=x.BASE){return j._setWindowSize(W),j.multiply(BigInt(3)),j}}}}var kp=BigInt(0),SE=BigInt(1);function UX(t){return bi(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function X8(t){let e=UX(t),{P:r}=e,n=v=>Dt(v,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(v=>v),u=e.powPminus2||(v=>fE(v,r-BigInt(2),r));function c(v,A,x){let B=n(v*(A-x));return A=n(A-B),x=n(x+B),[A,x]}function l(v){if(typeof v=="bigint"&&kp<=v&&v<r)return v;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let f=(e.a-BigInt(2))/BigInt(4);function p(v,A){let x=l(v),B=l(A),C=x,T=SE,k=kp,I=x,$=SE,M=kp,Y;for(let U=BigInt(s-1);U>=kp;U--){let G=B>>U&SE;M^=G,Y=c(M,T,I),T=Y[0],I=Y[1],Y=c(M,k,$),k=Y[0],$=Y[1],M=G;let te=T+k,W=n(te*te),j=T-k,q=n(j*j),Q=W-q,oe=I+$,pe=I-$,ae=n(pe*te),he=n(oe*j),Ee=ae+he,Pe=ae-he;I=n(Ee*Ee),$=n(C*n(Pe*Pe)),T=n(W*q),k=n(Q*(W+n(f*Q)))}Y=c(M,T,I),T=Y[0],I=Y[1],Y=c(M,k,$),k=Y[0],$=Y[1];let ee=u(k);return n(T*ee)}function d(v){return qo(n(v),i)}function h(v){let A=Ht("u coordinate",v,i);return o===32&&(A[31]&=127),Zi(A)}function m(v){let A=Ht("scalar",v),x=A.length;if(x!==i&&x!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${x}`);return Zi(a(A))}function g(v,A){let x=h(A),B=m(v),C=p(x,B);if(C===kp)throw new Error("Invalid private or public key received");return d(C)}let _=d(e.Gu);function D(v){return g(v,_)}return{scalarMult:g,scalarMultBase:D,getSharedSecret:(v,A)=>g(v,A),getPublicKey:v=>D(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:_}}var Rp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Y8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),c_e=BigInt(0),LX=BigInt(1),AE=BigInt(2),KX=BigInt(5),Q8=BigInt(10),VX=BigInt(20),HX=BigInt(40),e5=BigInt(80);function t5(t){let e=Rp,n=t*t%e*t%e,s=zt(n,AE,e)*n%e,i=zt(s,LX,e)*t%e,o=zt(i,KX,e)*i%e,a=zt(o,Q8,e)*o%e,u=zt(a,VX,e)*a%e,c=zt(u,HX,e)*u%e,l=zt(c,e5,e)*c%e,f=zt(l,e5,e)*c%e,p=zt(f,Q8,e)*o%e;return{pow_p_5_8:zt(p,AE,e)*t%e,b2:n}}function r5(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function zX(t,e){let r=Rp,n=Dt(e*e*e,r),s=Dt(n*n*e,r),i=t5(t*s).pow_p_5_8,o=Dt(t*n*i,r),a=Dt(e*o*o,r),u=o,c=Dt(o*Y8,r),l=a===t,f=a===Dt(-t,r),p=a===Dt(-t*Y8,r);return l&&(o=u),(f||p)&&(o=c),M8(o,r)&&(o=Dt(-o,r)),{isValid:l||f,value:o}}var _i=lf(Rp,void 0,!0),$p={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:_i,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:EE,randomBytes:yc,adjustScalarBytes:r5,uvRatio:zX},An=x0($p);function n5(t,e,r){if(e.length>255)throw new Error("Context is too big");return y0(sE("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var l_e=x0({...$p,domain:n5}),f_e=x0({...$p,domain:n5,prehash:EE}),Ko=X8({P:Rp,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=Rp,{pow_p_5_8:r,b2:n}=t5(t);return Dt(zt(r,BigInt(3),e)*n,e)},adjustScalarBytes:r5,randomBytes:yc});function D0(t){let{y:e}=An.ExtendedPoint.fromHex(t),r=BigInt(1);return _i.toBytes(_i.create((r+e)*_i.inv(r-e)))}function C0(t){let e=$p.hash(t.subarray(0,32));return $p.adjustScalarBytes(e).subarray(0,32)}var WX=(_i.ORDER+BigInt(3))/BigInt(8),d_e=_i.pow(AE,WX),p_e=_i.sqrt(_i.neg(_i.ONE)),h_e=(_i.ORDER-BigInt(5))/BigInt(8),y_e=BigInt(486662);var m_e=j8(_i,_i.neg(BigInt(486664)));var g_e=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),v_e=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),b_e=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),w_e=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var __e=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ei=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},JX=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},za=class t{static bytesToPrivateKey(e){return Ei(this,arguments,void 0,function*({privateKeyBytes:r}){let n=An.getPublicKey(r),s={crv:"Ed25519",d:X.uint8Array(r).toBase64Url(),kty:"OKP",x:X.uint8Array(n).toBase64Url()};return s.kid=yield Rt({jwk:s}),s})}static bytesToPublicKey(e){return Ei(this,arguments,void 0,function*({publicKeyBytes:r}){let n={kty:"OKP",crv:"Ed25519",x:X.uint8Array(r).toBase64Url()};return n.kid=yield Rt({jwk:n}),n})}static computePublicKey(e){return Ei(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=An.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:X.uint8Array(s).toBase64Url()};return i.kid=yield Rt({jwk:i}),i})}static convertPrivateKeyToX25519(e){return Ei(this,arguments,void 0,function*({privateKey:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=C0(n),i=Ko.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:X.uint8Array(s).toBase64Url(),x:X.uint8Array(i).toBase64Url()};return o.kid=yield Rt({jwk:o}),o})}static convertPublicKeyToX25519(e){return Ei(this,arguments,void 0,function*({publicKey:r}){let n=yield t.publicKeyToBytes({publicKey:r});if(!(yield t.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");let i=D0(n),o={kty:"OKP",crv:"X25519",x:X.uint8Array(i).toBase64Url()};return o.kid=yield Rt({jwk:o}),o})}static generateKey(){return Ei(this,void 0,void 0,function*(){let e=An.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Rt({jwk:r}),r})}static getPublicKey(e){return Ei(this,arguments,void 0,function*({key:r}){var n;if(!(Ua(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:s}=r,i=JX(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield Rt({jwk:i})),i})}static privateKeyToBytes(e){return Ei(this,arguments,void 0,function*({privateKey:r}){if(!Ua(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return X.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Ei(this,arguments,void 0,function*({publicKey:r}){if(!Tp(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return X.base64Url(r.x).toUint8Array()})}static sign(e){return Ei(this,arguments,void 0,function*({key:r,data:n}){let s=yield t.privateKeyToBytes({privateKey:r});return An.sign(n,s)})}static validatePublicKey(e){return Ei(this,arguments,void 0,function*({publicKeyBytes:r}){try{An.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Ei(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r});return An.verify(n,s,i)})}};var Np=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},P0=class extends $s{computePublicKey(e){return Np(this,arguments,void 0,function*({key:r}){if(!Ua(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield za.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return Np(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{let n=yield za.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(e){return Np(this,arguments,void 0,function*({key:r}){if(!Ua(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield za.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return Np(this,arguments,void 0,function*({key:r,data:n}){if(!Ua(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield za.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return Np(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!Tp(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield za.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var Vo=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},xE={Ed25519:{implementation:P0,names:["Ed25519"]},secp256k1:{implementation:Fp,names:["ES256K","secp256k1"]},secp256r1:{implementation:Fp,names:["ES256","secp256r1"]},"SHA-256":{implementation:p0,names:["SHA-256"]}},O0=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new rf}digest(e){return Vo(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(e){return Vo(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(e){return Vo(this,arguments,void 0,function*({algorithm:r}){let s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if(s?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let i=`${bE}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(e){return Vo(this,arguments,void 0,function*({key:r}){let n=yield Rt({jwk:r});return`${bE}${n}`})}getPublicKey(e){return Vo(this,arguments,void 0,function*({keyUri:r}){let n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(e){return Vo(this,arguments,void 0,function*({key:r}){var n;if(!J8(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield Rt({jwk:s}));let i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(e){return Vo(this,arguments,void 0,function*({keyUri:r,data:n}){let s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(e){return Vo(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:e}){var r;let n=(r=xE[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in xE){let i=xE[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(e){return Vo(this,arguments,void 0,function*({keyUri:r}){let n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};var df={};wo(df,{checkRequiredProperty:()=>GX,checkValidProperty:()=>ZX,getJoseSignatureAlgorithmFromPublicKey:()=>XX,isWebCryptoSupported:()=>YX,randomBytes:()=>QX,randomUuid:()=>eY});function GX(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function ZX(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function XX(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function YX(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function QX(t){return x8(t)}function eY(){return nf.randomUUID()}var tY=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Ho=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function i5(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var s5=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),rY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!rY)throw new Error("Non little-endian hardware is not supported");function B0(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function T0(t){if(typeof t=="string")t=B0(t);else if(i5(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var nY=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function o5(t,e){if(e!==void 0&&(typeof e!="object"||!nY(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function bc(t,e){if(!i5(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function a5(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var DE=(t,e)=>(Object.assign(e,t),e);function CE(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}function Mp(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function PE(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function iY(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function pf(t,...e){if(!iY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function OE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function u5(t,e){pf(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Gr=(t,e)=>t[e++]&255|(t[e++]&255)<<8,TE=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=T0(e),bc(e,32);let r=Gr(e,0),n=Gr(e,2),s=Gr(e,4),i=Gr(e,6),o=Gr(e,8),a=Gr(e,10),u=Gr(e,12),c=Gr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Gr(e,16+2*l)}process(e,r,n=!1){let s=n?0:2048,{h:i,r:o}=this,a=o[0],u=o[1],c=o[2],l=o[3],f=o[4],p=o[5],d=o[6],h=o[7],m=o[8],g=o[9],_=Gr(e,r+0),D=Gr(e,r+2),v=Gr(e,r+4),A=Gr(e,r+6),x=Gr(e,r+8),B=Gr(e,r+10),C=Gr(e,r+12),T=Gr(e,r+14),k=i[0]+(_&8191),I=i[1]+((_>>>13|D<<3)&8191),$=i[2]+((D>>>10|v<<6)&8191),M=i[3]+((v>>>7|A<<9)&8191),Y=i[4]+((A>>>4|x<<12)&8191),ee=i[5]+(x>>>1&8191),U=i[6]+((x>>>14|B<<2)&8191),G=i[7]+((B>>>11|C<<5)&8191),te=i[8]+((C>>>8|T<<8)&8191),W=i[9]+(T>>>5|s),j=0,q=j+k*a+I*(5*g)+$*(5*m)+M*(5*h)+Y*(5*d);j=q>>>13,q&=8191,q+=ee*(5*p)+U*(5*f)+G*(5*l)+te*(5*c)+W*(5*u),j+=q>>>13,q&=8191;let Q=j+k*u+I*a+$*(5*g)+M*(5*m)+Y*(5*h);j=Q>>>13,Q&=8191,Q+=ee*(5*d)+U*(5*p)+G*(5*f)+te*(5*l)+W*(5*c),j+=Q>>>13,Q&=8191;let oe=j+k*c+I*u+$*a+M*(5*g)+Y*(5*m);j=oe>>>13,oe&=8191,oe+=ee*(5*h)+U*(5*d)+G*(5*p)+te*(5*f)+W*(5*l),j+=oe>>>13,oe&=8191;let pe=j+k*l+I*c+$*u+M*a+Y*(5*g);j=pe>>>13,pe&=8191,pe+=ee*(5*m)+U*(5*h)+G*(5*d)+te*(5*p)+W*(5*f),j+=pe>>>13,pe&=8191;let ae=j+k*f+I*l+$*c+M*u+Y*a;j=ae>>>13,ae&=8191,ae+=ee*(5*g)+U*(5*m)+G*(5*h)+te*(5*d)+W*(5*p),j+=ae>>>13,ae&=8191;let he=j+k*p+I*f+$*l+M*c+Y*u;j=he>>>13,he&=8191,he+=ee*a+U*(5*g)+G*(5*m)+te*(5*h)+W*(5*d),j+=he>>>13,he&=8191;let Ee=j+k*d+I*p+$*f+M*l+Y*c;j=Ee>>>13,Ee&=8191,Ee+=ee*u+U*a+G*(5*g)+te*(5*m)+W*(5*h),j+=Ee>>>13,Ee&=8191;let Pe=j+k*h+I*d+$*p+M*f+Y*l;j=Pe>>>13,Pe&=8191,Pe+=ee*c+U*u+G*a+te*(5*g)+W*(5*m),j+=Pe>>>13,Pe&=8191;let Fe=j+k*m+I*h+$*d+M*p+Y*f;j=Fe>>>13,Fe&=8191,Fe+=ee*l+U*c+G*u+te*a+W*(5*g),j+=Fe>>>13,Fe&=8191;let Je=j+k*g+I*m+$*h+M*d+Y*p;j=Je>>>13,Je&=8191,Je+=ee*f+U*l+G*c+te*u+W*a,j+=Je>>>13,Je&=8191,j=(j<<2)+j|0,j=j+q|0,q=j&8191,j=j>>>13,Q+=j,i[0]=q,i[1]=Q,i[2]=oe,i[3]=pe,i[4]=ae,i[5]=he,i[6]=Ee,i[7]=Pe,i[8]=Fe,i[9]=Je}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){OE(this);let{buffer:r,blockLen:n}=this;e=T0(e);let s=e.length;for(let i=0;i<s;){let o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){OE(this),u5(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function sY(t){let e=(n,s)=>t(s).update(T0(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var c5=sY(t=>new TE(t));var oY=B0("expand 16-byte k"),aY=B0("expand 32-byte k"),uY=Ho(oY),cY=Ho(aY);function ye(t,e){return t<<e|t>>>32-e}function IE(t){return t.byteOffset%4===0}var I0=64,lY=16,f5=2**32-1,l5=new Uint32Array;function fY(t,e,r,n,s,i,o,a){let u=s.length,c=new Uint8Array(I0),l=Ho(c),f=IE(s)&&IE(i),p=f?Ho(s):l5,d=f?Ho(i):l5;for(let h=0;h<u;o++){if(t(e,r,n,l,o,a),o>=f5)throw new Error("arx: counter overflow");let m=Math.min(I0,u-h);if(f&&m===I0){let g=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let _=0,D;_<lY;_++)D=g+_,d[D]=p[D]^l[_];h+=I0;continue}for(let g=0,_;g<m;g++)_=h+g,i[_]=s[_]^c[g];h+=m}}function FE(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=o5({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Mp(s),Mp(o),PE(i),PE(r),(a,u,c,l,f=0)=>{pf(a),pf(u),pf(c);let p=c.length;if(l||(l=new Uint8Array(p)),pf(l),Mp(f),f<0||f>=f5)throw new Error("arx: counter overflow");if(l.length<p)throw new Error(`arx: output (${l.length}) is shorter than data (${p})`);let d=[],h=a.length,m,g;if(h===32)m=a.slice(),d.push(m),g=cY;else if(h===16&&r)m=new Uint8Array(32),m.set(a),m.set(a,16),g=uY,d.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${h}`);IE(u)||(u=u.slice(),d.push(u));let _=Ho(m);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(g,_,Ho(u.subarray(0,16)),_),u=u.subarray(16)}let D=16-s;if(D!==u.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){let A=new Uint8Array(12);A.set(u,i?0:12-u.length),u=A,d.push(u)}let v=Ho(u);for(fY(t,g,_,v,c,l,f,o);d.length>0;)d.pop().fill(0);return l}}function h5(t,e,r,n,s,i=20){let o=t[0],a=t[1],u=t[2],c=t[3],l=e[0],f=e[1],p=e[2],d=e[3],h=e[4],m=e[5],g=e[6],_=e[7],D=s,v=r[0],A=r[1],x=r[2],B=o,C=a,T=u,k=c,I=l,$=f,M=p,Y=d,ee=h,U=m,G=g,te=_,W=D,j=v,q=A,Q=x;for(let pe=0;pe<i;pe+=2)B=B+I|0,W=ye(W^B,16),ee=ee+W|0,I=ye(I^ee,12),B=B+I|0,W=ye(W^B,8),ee=ee+W|0,I=ye(I^ee,7),C=C+$|0,j=ye(j^C,16),U=U+j|0,$=ye($^U,12),C=C+$|0,j=ye(j^C,8),U=U+j|0,$=ye($^U,7),T=T+M|0,q=ye(q^T,16),G=G+q|0,M=ye(M^G,12),T=T+M|0,q=ye(q^T,8),G=G+q|0,M=ye(M^G,7),k=k+Y|0,Q=ye(Q^k,16),te=te+Q|0,Y=ye(Y^te,12),k=k+Y|0,Q=ye(Q^k,8),te=te+Q|0,Y=ye(Y^te,7),B=B+$|0,Q=ye(Q^B,16),G=G+Q|0,$=ye($^G,12),B=B+$|0,Q=ye(Q^B,8),G=G+Q|0,$=ye($^G,7),C=C+M|0,W=ye(W^C,16),te=te+W|0,M=ye(M^te,12),C=C+M|0,W=ye(W^C,8),te=te+W|0,M=ye(M^te,7),T=T+Y|0,j=ye(j^T,16),ee=ee+j|0,Y=ye(Y^ee,12),T=T+Y|0,j=ye(j^T,8),ee=ee+j|0,Y=ye(Y^ee,7),k=k+I|0,q=ye(q^k,16),U=U+q|0,I=ye(I^U,12),k=k+I|0,q=ye(q^k,8),U=U+q|0,I=ye(I^U,7);let oe=0;n[oe++]=o+B|0,n[oe++]=a+C|0,n[oe++]=u+T|0,n[oe++]=c+k|0,n[oe++]=l+I|0,n[oe++]=f+$|0,n[oe++]=p+M|0,n[oe++]=d+Y|0,n[oe++]=h+ee|0,n[oe++]=m+U|0,n[oe++]=g+G|0,n[oe++]=_+te|0,n[oe++]=D+W|0,n[oe++]=v+j|0,n[oe++]=A+q|0,n[oe++]=x+Q|0}function dY(t,e,r,n){let s=t[0],i=t[1],o=t[2],a=t[3],u=e[0],c=e[1],l=e[2],f=e[3],p=e[4],d=e[5],h=e[6],m=e[7],g=r[0],_=r[1],D=r[2],v=r[3];for(let x=0;x<20;x+=2)s=s+u|0,g=ye(g^s,16),p=p+g|0,u=ye(u^p,12),s=s+u|0,g=ye(g^s,8),p=p+g|0,u=ye(u^p,7),i=i+c|0,_=ye(_^i,16),d=d+_|0,c=ye(c^d,12),i=i+c|0,_=ye(_^i,8),d=d+_|0,c=ye(c^d,7),o=o+l|0,D=ye(D^o,16),h=h+D|0,l=ye(l^h,12),o=o+l|0,D=ye(D^o,8),h=h+D|0,l=ye(l^h,7),a=a+f|0,v=ye(v^a,16),m=m+v|0,f=ye(f^m,12),a=a+f|0,v=ye(v^a,8),m=m+v|0,f=ye(f^m,7),s=s+c|0,v=ye(v^s,16),h=h+v|0,c=ye(c^h,12),s=s+c|0,v=ye(v^s,8),h=h+v|0,c=ye(c^h,7),i=i+l|0,g=ye(g^i,16),m=m+g|0,l=ye(l^m,12),i=i+l|0,g=ye(g^i,8),m=m+g|0,l=ye(l^m,7),o=o+f|0,_=ye(_^o,16),p=p+_|0,f=ye(f^p,12),o=o+f|0,_=ye(_^o,8),p=p+_|0,f=ye(f^p,7),a=a+u|0,D=ye(D^a,16),d=d+D|0,u=ye(u^d,12),a=a+u|0,D=ye(D^a,8),d=d+D|0,u=ye(u^d,7);let A=0;n[A++]=s,n[A++]=i,n[A++]=o,n[A++]=a,n[A++]=g,n[A++]=_,n[A++]=D,n[A++]=v}var pY=FE(h5,{counterRight:!1,counterLength:4,allowShortKeys:!1}),kE=FE(h5,{counterRight:!1,counterLength:8,extendNonceFn:dY,allowShortKeys:!1});var hY=new Uint8Array(16),d5=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(hY.subarray(r))},yY=new Uint8Array(32);function p5(t,e,r,n,s){let i=t(e,r,yY),o=c5.create(i);s&&d5(o,s),d5(o,n);let a=new Uint8Array(16),u=s5(a);CE(u,0,BigInt(s?s.length:0),!0),CE(u,8,BigInt(n.length),!0),o.update(a);let c=o.digest();return i.fill(0),c}var y5=t=>(e,r,n)=>(bc(e,32),bc(r),{encrypt:(i,o)=>{let a=i.length,u=a+16;o?bc(o,u):o=new Uint8Array(u),t(e,r,i,o,1);let c=p5(t,e,r,o.subarray(0,-16),n);return o.set(c,a),o},decrypt:(i,o)=>{let a=i.length,u=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");o?bc(o,u):o=new Uint8Array(u);let c=i.subarray(0,-16),l=i.subarray(-16),f=p5(t,e,r,c,n);if(!a5(l,f))throw new Error("invalid tag");return t(e,r,c,o,1),o}}),AEe=DE({blockSize:64,nonceLength:12,tagLength:16},y5(pY)),m5=DE({blockSize:64,nonceLength:24,tagLength:16},y5(kE));var _c;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(_c||(_c={}));var sr={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};var tt=class t{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;let r=t.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){let c={},l=o.slice(1).split("&");for(let f of l){let[p,d]=f.split("=");c[p]=d}u.params=c}return u}};tt.METHOD_PATTERN="([a-z0-9]+)";tt.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";tt.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${tt.PCT_ENCODED_PATTERN})`;tt.METHOD_ID_PATTERN=`((?:${tt.ID_CHAR_PATTERN}*:)*(${tt.ID_CHAR_PATTERN}+))`;tt.PATH_PATTERN="(/[^#?]*)?";tt.QUERY_PATTERN="([?][^#]*)?";tt.FRAGMENT_PATTERN="(#.*)?";tt.DID_URI_PATTERN=new RegExp(`^did:(?<method>${tt.METHOD_PATTERN}):(?<id>${tt.METHOD_ID_PATTERN})(?<path>${tt.PATH_PATTERN})(?<query>${tt.QUERY_PATTERN})(?<fragment>${tt.FRAGMENT_PATTERN})$`);var we=class t extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}},me;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(me||(me={}));var mY=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},hf=class{static digest({data:e}){return mY(this,void 0,void 0,function*(){return vi(e)})}};var Ms=class{};var gY=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},F0=class extends Ms{digest({algorithm:e,data:r}){return gY(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield hf.digest({data:r})}})}};function g5(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var vY=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},RE="urn:jwk:";function Le({jwk:t}){return vY(this,void 0,void 0,function*(){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);Cp(r);let n=g5(r),s=X.string(n).toUint8Array(),i=yield hf.digest({data:s});return X.uint8Array(i).toBase64Url()})}function js(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function yf(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function qs(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function mf(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function v5(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var Zr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},bY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},$r=class t{static adjustSignatureToLowS({signature:e}){return Zr(this,void 0,void 0,function*(){let r=qt.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return Zr(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:X.uint8Array(e).toBase64Url(),x:X.uint8Array(r.x).toBase64Url(),y:X.uint8Array(r.y).toBase64Url()};return n.kid=yield Le({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Zr(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:X.uint8Array(r.x).toBase64Url(),y:X.uint8Array(r.y).toBase64Url()};return n.kid=yield Le({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return Zr(this,void 0,void 0,function*(){return qt.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return Zr(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:X.uint8Array(n.x).toBase64Url(),y:X.uint8Array(n.y).toBase64Url()};return s.kid=yield Le({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return Zr(this,void 0,void 0,function*(){return qt.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return Zr(this,void 0,void 0,function*(){return qt.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return Zr(this,void 0,void 0,function*(){let e=qt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Le({jwk:r}),r})}static getPublicKey({key:e}){var r;return Zr(this,void 0,void 0,function*(){if(!(js(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:n}=e,s=bY(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Le({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Zr(this,void 0,void 0,function*(){if(!js(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return X.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Zr(this,void 0,void 0,function*(){if(!(yf(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=X.base64Url(e.x).toUint8Array(),s=X.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Zr(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return qt.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return Zr(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),s=vi(e);return qt.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return Zr(this,void 0,void 0,function*(){return qt.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return Zr(this,void 0,void 0,function*(){try{qt.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Zr(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e}),i=vi(n);return qt.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return Zr(this,void 0,void 0,function*(){e.byteLength===32&&(e=qt.getPublicKey(e));let r=qt.ProjectivePoint.fromHex(e),n=_r(r.x,32),s=_r(r.y,32);return{x:n,y:s}})}};var Xr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},wY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Yr=class t{static adjustSignatureToLowS({signature:e}){return Xr(this,void 0,void 0,function*(){let r=Kt.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return Xr(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:X.uint8Array(e).toBase64Url(),x:X.uint8Array(r.x).toBase64Url(),y:X.uint8Array(r.y).toBase64Url()};return n.kid=yield Le({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Xr(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:X.uint8Array(r.x).toBase64Url(),y:X.uint8Array(r.y).toBase64Url()};return n.kid=yield Le({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return Xr(this,void 0,void 0,function*(){return Kt.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return Xr(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:X.uint8Array(n.x).toBase64Url(),y:X.uint8Array(n.y).toBase64Url()};return s.kid=yield Le({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return Xr(this,void 0,void 0,function*(){return Kt.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return Xr(this,void 0,void 0,function*(){return Kt.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return Xr(this,void 0,void 0,function*(){let e=Kt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Le({jwk:r}),r})}static getPublicKey({key:e}){var r;return Xr(this,void 0,void 0,function*(){if(!(js(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:n}=e,s=wY(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Le({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Xr(this,void 0,void 0,function*(){if(!js(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return X.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Xr(this,void 0,void 0,function*(){if(!(yf(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=X.base64Url(e.x).toUint8Array(),s=X.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Xr(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return Kt.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return Xr(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),s=vi(e);return Kt.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return Xr(this,void 0,void 0,function*(){return Kt.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return Xr(this,void 0,void 0,function*(){try{Kt.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Xr(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e}),i=vi(n);return Kt.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return Xr(this,void 0,void 0,function*(){e.byteLength===32&&(e=Kt.getPublicKey(e));let r=Kt.ProjectivePoint.fromHex(e),n=_r(r.x,32),s=_r(r.y,32);return{x:n,y:s}})}};var jp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},qp=class extends Ms{computePublicKey({key:e}){return jp(this,void 0,void 0,function*(){if(!js(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield $r.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield Yr.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return jp(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{let r=yield $r.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=yield Yr.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return jp(this,void 0,void 0,function*(){if(!js(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield $r.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield Yr.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return jp(this,void 0,void 0,function*(){if(!js(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield $r.sign({key:e,data:r});case"P-256":return yield Yr.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return jp(this,void 0,void 0,function*(){if(!yf(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield $r.verify({key:e,signature:r,data:n});case"P-256":return yield Yr.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var Si=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},_Y=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Pr=class t{static bytesToPrivateKey({privateKeyBytes:e}){return Si(this,void 0,void 0,function*(){let r=An.getPublicKey(e),n={crv:"Ed25519",d:X.uint8Array(e).toBase64Url(),kty:"OKP",x:X.uint8Array(r).toBase64Url()};return n.kid=yield Le({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Si(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"Ed25519",x:X.uint8Array(e).toBase64Url()};return r.kid=yield Le({jwk:r}),r})}static computePublicKey({key:e}){return Si(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=An.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:X.uint8Array(n).toBase64Url()};return s.kid=yield Le({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:e}){return Si(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=C0(r),s=Ko.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:X.uint8Array(n).toBase64Url(),x:X.uint8Array(s).toBase64Url()};return i.kid=yield Le({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:e}){return Si(this,void 0,void 0,function*(){let r=yield t.publicKeyToBytes({publicKey:e});if(!(yield t.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");let s=D0(r),i={kty:"OKP",crv:"X25519",x:X.uint8Array(s).toBase64Url()};return i.kid=yield Le({jwk:i}),i})}static generateKey(){return Si(this,void 0,void 0,function*(){let e=An.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Le({jwk:r}),r})}static getPublicKey({key:e}){var r;return Si(this,void 0,void 0,function*(){if(!(qs(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:n}=e,s=_Y(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Le({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Si(this,void 0,void 0,function*(){if(!qs(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return X.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Si(this,void 0,void 0,function*(){if(!mf(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return X.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return Si(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:e});return An.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return Si(this,void 0,void 0,function*(){try{An.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Si(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e});return An.verify(r,n,s)})}};var Up=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},k0=class extends Ms{computePublicKey({key:e}){return Up(this,void 0,void 0,function*(){if(!qs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Pr.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Up(this,void 0,void 0,function*(){switch(e){case"Ed25519":{let r=yield Pr.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return Up(this,void 0,void 0,function*(){if(!qs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Pr.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Up(this,void 0,void 0,function*(){if(!qs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Pr.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Up(this,void 0,void 0,function*(){if(!mf(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Pr.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var zo=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},$E={Ed25519:{implementation:k0,names:["Ed25519"]},secp256k1:{implementation:qp,names:["ES256K","secp256k1"]},secp256r1:{implementation:qp,names:["ES256","secp256r1"]},"SHA-256":{implementation:F0,names:["SHA-256"]}},pn=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new rf}digest({algorithm:e,data:r}){return zo(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return zo(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return zo(this,void 0,void 0,function*(){let n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let s=`${RE}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:e}){return zo(this,void 0,void 0,function*(){let r=yield Le({jwk:e});return`${RE}${r}`})}getPublicKey({keyUri:e}){return zo(this,void 0,void 0,function*(){let r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return zo(this,void 0,void 0,function*(){if(!v5(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield Le({jwk:n}));let s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:e,data:r}){return zo(this,void 0,void 0,function*(){let n=yield this.getPrivateKey({keyUri:e}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return zo(this,void 0,void 0,function*(){let s=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:s}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;let n=(r=$E[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in $E){let i=$E[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return zo(this,void 0,void 0,function*(){let r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};var R0={};wo(R0,{checkRequiredProperty:()=>EY,checkValidProperty:()=>SY,getJoseSignatureAlgorithmFromPublicKey:()=>AY,isWebCryptoSupported:()=>xY,randomBytes:()=>DY,randomUuid:()=>CY});function EY(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function SY(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function AY(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function xY(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function DY(t){return yc(t)}function CY(){return af.randomUUID()}var Wa=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},PY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},gf=class t{static bytesToPrivateKey({privateKeyBytes:e}){return Wa(this,void 0,void 0,function*(){let r=Ko.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:X.uint8Array(e).toBase64Url(),x:X.uint8Array(r).toBase64Url()};return n.kid=yield Le({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Wa(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"X25519",x:X.uint8Array(e).toBase64Url()};return r.kid=yield Le({jwk:r}),r})}static computePublicKey({key:e}){return Wa(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Ko.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:X.uint8Array(n).toBase64Url()};return s.kid=yield Le({jwk:s}),s})}static generateKey(){return Wa(this,void 0,void 0,function*(){let e=Ko.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Le({jwk:r}),r})}static getPublicKey({key:e}){var r;return Wa(this,void 0,void 0,function*(){if(!(qs(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:n}=e,s=PY(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Le({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Wa(this,void 0,void 0,function*(){if(!qs(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return X.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Wa(this,void 0,void 0,function*(){if(!mf(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return X.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Wa(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return Ko.getSharedSecret(n,s)})}};var j0={};wo(j0,{extractDidFragment:()=>jn,getServices:()=>BY,getVerificationMethodByKey:()=>TY,getVerificationMethodTypes:()=>ME,getVerificationMethods:()=>Lp,getVerificationRelationshipsById:()=>jE,isDidService:()=>b5,isDidVerificationMethod:()=>$0,isDwnDidService:()=>IY,keyBytesToMultibaseId:()=>N0,multibaseIdToKeyBytes:()=>M0});var OY=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};function jn(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function BY({didDocument:t,id:e,type:r}){var n,s;return(s=(n=t?.service)===null||n===void 0?void 0:n.filter(i=>!(e&&i.id!==e||r&&i.type!==r)))!==null&&s!==void 0?s:[]}function TY(t){return OY(this,arguments,void 0,function*({didDocument:e,publicKeyJwk:r,publicKeyMultibase:n}){let s=Lp({didDocument:e});for(let i of s)if(r&&i.publicKeyJwk){if((yield Le({jwk:r}))===(yield Le({jwk:i.publicKeyJwk})))return i}else if(n&&i.publicKeyMultibase&&n===i.publicKeyMultibase)return i;return null})}function Lp({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter($0))!==null&&r!==void 0?r:[]),Object.keys(_c).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter($0))!==null&&o!==void 0?o:[])}),n}function ME({didDocument:t}){let r=Lp({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function jE({didDocument:t,methodId:e}){let r=[];return Object.keys(_c).forEach(n=>{if(Array.isArray(t[n])){let s=t[n],i=jn(e);s.some(a=>{let u=jn(a)===i,c=$0(a)&&jn(a.id)===i;return u||c})&&r.push(n)}}),r}function b5(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function IY(t){if(!b5(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function $0(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function N0({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=dn.addPrefix({code:e,data:t,name:r}),s=X.uint8Array(n).toBase58Btc();return X.base58Btc(s).toMultibase()}function M0({multibaseKeyId:t}){try{let e=X.multibase(t).toBase58Btc(),r=X.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=dn.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new we(me.InvalidDid,`Invalid multibase identifier: ${t}`)}}var Kp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},qn=class t{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return Kp(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){return Kp(this,void 0,void 0,function*(){var r;let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var c,l;return jn(u.id)===((c=jn(e?.methodId))!==null&&c!==void 0?c:jn((l=this.document.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(n&&n.publicKeyJwk))throw new we(me.InternalError,"A verification method intended for signing could not be determined from the DID Document");let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:R0.getJoseSignatureAlgorithmFromPublicKey(i),keyId:n.id,sign(u){return Kp(this,arguments,void 0,function*({data:c}){return yield o.sign({data:c,keyUri:s})})},verify(u){return Kp(this,arguments,void 0,function*({data:c,signature:l}){return yield o.verify({data:c,key:i,signature:l})})}}})}static import(e){return Kp(this,arguments,void 0,function*({portableDid:r,keyManager:n=new pn}){var s;let i=Lp({didDocument:r.document});if(i.length===0)throw new we(me.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);let u=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:u})}return new t({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};var qE="0123456789abcdef",_5=[],w5=[];for(let t=0;t<256;t++)_5[t]=qE[t>>4&15]+qE[t&15],t<16&&(t<10?w5[48+t]=t:w5[87+t]=t);var UE=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=_5[t[n++]];return r};var E5=(t,e=0)=>{let r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}let n=new Uint8Array(e),s=e,i=r;for(;i--;)s-=t[i].length,n.set(t[i],s);return n};var S5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",FY=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Vp=0;Vp<S5.length;Vp++)FY[S5.charCodeAt(Vp)]=Vp;var Vp;var kY=new TextDecoder,LE=(t,e)=>e?new TextDecoder(e).decode(t):kY.decode(t),RY=new TextEncoder,Ai=t=>RY.encode(t);var A5=typeof window<"u"?window:self,x5=A5.crypto||A5.msCrypto||{},vxe=x5.subtle||x5.webkitSubtle;function vf(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function q0(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function Ct(t,e,r){let n=[],s=null;return Ct._encode(n,t),s=E5(n),Ct.bytes=s.length,ArrayBuffer.isView(e)?(e.set(s,r),e):s}Ct.bytes=-1;Ct._floatConversionDetected=!1;Ct._encode=function(t,e){if(e!=null)switch(q0(e)){case"object":Ct.dict(t,e);break;case"map":Ct.dictMap(t,e);break;case"array":Ct.list(t,e);break;case"set":Ct.listSet(t,e);break;case"string":Ct.string(t,e);break;case"number":Ct.number(t,e);break;case"boolean":Ct.number(t,e);break;case"arraybufferview":Ct.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":Ct.buffer(t,new Uint8Array(e));break}};var U0=new Uint8Array([101]),D5=new Uint8Array([100]),C5=new Uint8Array([108]);Ct.buffer=function(t,e){t.push(Ai(e.length+":"),e)};Ct.string=function(t,e){t.push(Ai(Ai(e).byteLength+":"+e))};Ct.number=function(t,e){if(Number.isInteger(e))return t.push(Ai("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,s=e%r<<0,i=n*r+s;t.push(Ai("i"+i+"e")),i!==e&&!Ct._floatConversionDetected&&(Ct._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};Ct.dict=function(t,e){t.push(D5);let r=0,n,s=Object.keys(e).sort(),i=s.length;for(;r<i;r++)n=s[r],e[n]!=null&&(Ct.string(t,n),Ct._encode(t,e[n]));t.push(U0)};Ct.dictMap=function(t,e){t.push(D5);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?Ct._encode(t,n):Ct.string(t,String(n)),Ct._encode(t,e.get(n)));t.push(U0)};Ct.list=function(t,e){let r=0,n=e.length;for(t.push(C5);r<n;r++)e[r]!=null&&Ct._encode(t,e[r]);t.push(U0)};Ct.listSet=function(t,e){t.push(C5);for(let r of e)r!=null&&Ct._encode(t,r);t.push(U0)};var P5=Ct;var $Y=105,NY=58,MY=100,jY=108,KE=101;function O5(t,e,r){let n=0,s=1;for(let i=e;i<r;i++){let o=t[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===e&&o===43)){if(i===e&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function ke(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),ke.position=0,ke.encoding=n||null,ke.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):Ai(t),ke.bytes=ke.data.length,ke.next())}ke.bytes=0;ke.position=0;ke.data=null;ke.encoding=null;ke.next=function(){switch(ke.data[ke.position]){case MY:return ke.dictionary();case jY:return ke.list();case $Y:return ke.integer();default:return ke.buffer()}};ke.find=function(t){let e=ke.position,r=ke.data.length,n=ke.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};ke.dictionary=function(){ke.position++;let t={};for(;ke.data[ke.position]!==KE;){let e=ke.buffer(),r=LE(e);r.includes("\uFFFD")&&(r=UE(e)),t[r]=ke.next()}return ke.position++,t};ke.list=function(){ke.position++;let t=[];for(;ke.data[ke.position]!==KE;)t.push(ke.next());return ke.position++,t};ke.integer=function(){let t=ke.find(KE),e=O5(ke.data,ke.position+1,t);return ke.position+=t+1-ke.position,e};ke.buffer=function(){let t=ke.find(NY),e=O5(ke.data,ke.position,t),r=++t+e;return ke.position=r,ke.encoding?LE(ke.data.slice(t,r)):ke.data.slice(t,r)};var B5=ke;function qY(t){let e=2;for(let r of t)e+=L0(r);return e}function UY(t){let e=2;for(let[r,n]of t){let s=Ai(r).byteLength;e+=vf(s)+1+s,e+=L0(n)}return e}function LY(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let s=Ai(r[n]).byteLength;e+=vf(s)+1+s,e+=L0(t[r[n]])}return e}function KY(t){let e=Ai(t).byteLength;return vf(e)+1+e}function VY(t){let e=t.byteLength-t.byteOffset;return vf(e)+1+e}function L0(t){if(t==null)return 0;let r=q0(t);switch(r){case"arraybufferview":return VY(t);case"string":return KY(t);case"array":case"set":return qY(t);case"number":return 1+vf(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return LY(t);case"map":return UY(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var VE=L0;var HY=VE,HE={encode:P5,decode:B5,byteLength:VE,encodingLength:HY};var zY=/^(\d{1,3}\.){3,3}\d{1,3}$/;var WY=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var Yi={name:"v4",size:4,isFormat:t=>zY.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,s=0;for(let i=0;i<n;){let o=t.charCodeAt(i++);o===46?(e[r++]=s,s=0):s=s*10+(o-48)}return e[r]=s,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},Wo={name:"v6",size:16,isFormat:t=>t.length>0&&WY.test(t),encode(t,e,r){r=~~r;let n=r+16,s=-1,i=0,o=0,a=!0,u=!1;e=e||new Uint8Array(r+16);for(let c=0;c<t.length;c++){let l=t.charCodeAt(c);l===58?(a?s!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(s=r):(u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2),i=0,o=0),a=!0,u=!1):l===46?(r<n&&(e[r]=o),r++,o=0,i=0,a=!1,u=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:(l-=48,o=o*10+l),i=(i<<4)+l)}if(a===!1)u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2);else if(s===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let c=Math.min(r-1,n-1);c>=s+2;c--)e[c]=e[c-2];e[s]=0,e[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)e[--n]=r<n&&r>s?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function T5(t){if(Yi.isFormat(t))return Yi.size;if(Wo.isFormat(t))return Wo.size;throw Error(`Invalid ip address: ${t}`)}function I5(t){return T5(t)===Yi.size?1:2}function F5(t,e,r){r=~~r;let n=T5(t);return typeof e=="function"&&(e=e(r+n)),n===Yi.size?Yi.encode(t,e,r):Wo.encode(t,e,r)}function k5(t,e,r){if(e=~~e,r=r||t.length-e,r===Yi.size)return Yi.decode(t,e,r);if(r===Wo.size)return Wo.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${Yi.size} for v4 or ${Wo.size} for v6.`)}function Hp(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function bf(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function R5(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function $5(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function zE(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function WE(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function N5(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function JE(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}function GE(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s<=127)e+=1;else if(s<=2047)e+=2;else if((s&63488)!==55296)e+=3;else{let i=n+1;i===r||s>=56320||(t.charCodeAt(i)&64512)!==56320?e+=3:(n=i,e+=4)}}return e}function wf(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(GE(t)+r));let s=r;for(let i=0;i<n;i+=1){let o=t.charCodeAt(i);if(o<=127)e[s++]=o;else if(o<=2047)e[s++]=192|(o&1984)>>6,e[s++]=128|o&63;else if((o&63488)!==55296)e[s++]=224|(o&61440)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63;else{let a=i+1;if(a===n||o>=56320)e[s++]=239,e[s++]=191,e[s++]=189;else{let u=t.charCodeAt(a);(u&64512)!==56320?(e[s++]=239,e[s++]=191,e[s++]=189):(i=a,o=65536|(o&1023)<<10|u&1023,e[s++]=240|(o&1835008)>>18,e[s++]=128|(o&258048)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63)}}}return wf.bytes=s-r,e}wf.bytes=0;function _f(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let s=e;s<r;){let i=t[s++],o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|t[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(t[s++]&63)<<12|(t[s++]&63)<<6|t[s++]&63)-65536;let a=55296|o>>10&1023;n+=String.fromCharCode(a),o=56320|o&1023}else o=(i&15)<<12|(t[s++]&63)<<6|t[s++]&63;n+=String.fromCharCode(o)}return _f.bytes=r-e,n}_f.bytes=0;var Ja=t=>t instanceof Uint8Array;function Jo(t){return typeof t=="string"?GE(t):t.byteLength}function K0(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):wf(t)}function V0(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return wf(e,t,r),wf.bytes}var zp={},M5=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let s=n.toString(16),i=s.toUpperCase(),o=t<<4|n,a=`${e}${s}`;M5[o]=a,zp[a]=o,zp[`${r}${s}`]=o,zp[`${e}${i}`]=o,zp[`${r}${i}`]=o}}function j5(t,e,r){let n="";for(let s=e;s<r;){let i=t[s++];n+=M5[i]}return n}function ZE(t){return t.length>>>1}function q5(t,e,r,n){let s=0;for(;r<n;){let i=e.substr(s,2),o=zp[i];if(o===void 0)return;t[r++]=o,s+=2}return t}var tQ=Math.pow(2,24),rQ=Math.pow(2,16),nQ=Math.pow(2,8),Us=(t,e)=>t[e]*tQ+t[e+1]*rQ+t[e+2]*nQ+t[e+3],ze=(t,e)=>t[e]<<8|t[e+1],Ls=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),Oe=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Un(t,e,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=e.length||n>=s?0:iQ(t,e,r,n,s)}function iQ(t,e,r,n,s){s-n>e.length-r&&(s=n+e.length-r);let i=s-n,o=t.length-n;return i>o&&(i=o),(n!==0||s<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,i)),e.set(t,r),i}var oQ=0,U5=32768,YE=32768,aQ=~YE,K5=32768,uQ=~K5;function Ut({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var ve=Ut({encode(t,e,r){e||(e=new Uint8Array(ve.encodingLength(t))),r||(r=0);let n=r,s=t.replace(/^\.|\.$/gm,"");if(s.length){let i=s.split(".");for(let o=0;o<i.length;o++){let a=V0(e,i[o],r+1);e[r]=a,r+=a+1}}return e[r++]=0,ve.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,s=0,i=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let u=ze(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(_f(t,e,e+a)),e+=a,i+=o?0:a}}return ve.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:Jo(t.replace(/^\.|\.$/gm,""))+2}}),Or=Ut({encode(t,e,r){e||(e=new Uint8Array(Or.encodingLength(t))),r||(r=0);let n=V0(e,t,r+1);return e[r]=n,Or.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=_f(t,e+1,e+1+r);return Or.decode.bytes=r+1,n},encodingLength(t){return Jo(t)+1}}),Ef=Ut({bytes:12,encode(t,e,r){e||(e=new Uint8Array(Ef.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,s=t.type==="response"?U5:oQ;return Oe(e,t.id||0,r),Oe(e,n|s,r+2),Oe(e,t.questions.length,r+4),Oe(e,t.answers.length,r+6),Oe(e,t.authorities.length,r+8),Oe(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=ze(t,e+2);return{id:ze(t,e),type:r&U5?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:$5(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:R5(r&15),questions:new Array(ze(t,e+4)),answers:new Array(ze(t,e+6)),authorities:new Array(ze(t,e+8)),additionals:new Array(ze(t,e+10))}},encodingLength(){return 12}}),z0=Ut({encode(t,e,r){e||(e=new Uint8Array(z0.encodingLength(t))),r||(r=0);let n=t.length;return Oe(e,n,r),Un(t,e,r+2,0,n),z0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=ze(t,e),n=t.slice(e+2,e+2+r);return z0.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),W0=Ut({encode(t,e,r){return e||(e=new Uint8Array(W0.encodingLength(t))),r||(r=0),ve.encode(t,e,r+2),Oe(e,ve.encode.bytes,r),W0.encode.bytes=ve.encode.bytes+2,e},decode(t,e){e||(e=0);let r=ze(t,e),n=ve.decode(t,e+2);return W0.decode.bytes=r+2,n},encodingLength(t){return ve.encodingLength(t)+2}}),J0=Ut({encode(t,e,r){e||(e=new Uint8Array(J0.encodingLength(t))),r||(r=0);let n=r;return r+=2,ve.encode(t.mname,e,r),r+=ve.encode.bytes,ve.encode(t.rname,e,r),r+=ve.encode.bytes,Ls(e,t.serial||0,r),r+=4,Ls(e,t.refresh||0,r),r+=4,Ls(e,t.retry||0,r),r+=4,Ls(e,t.expire||0,r),r+=4,Ls(e,t.minimum||0,r),r+=4,Oe(e,r-n-2,n),J0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=ve.decode(t,e),e+=ve.decode.bytes,n.rname=ve.decode(t,e),e+=ve.decode.bytes,n.serial=Us(t,e),e+=4,n.refresh=Us(t,e),e+=4,n.retry=Us(t,e),e+=4,n.expire=Us(t,e),e+=4,n.minimum=Us(t,e),e+=4,J0.decode.bytes=e-r,n},encodingLength(t){return 22+ve.encodingLength(t.mname)+ve.encodingLength(t.rname)}}),G0=Ut({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(typeof t[s]=="string"&&(t[s]=K0(t[s])),!Ja(t[s]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(G0.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(s){e[r++]=s.length,Un(s,e,r,0,s.length),r+=s.length}),Oe(e,r-n-2,n),G0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=ze(t,e);e+=2;let s=[];for(;n>0;){let i=t[e++];if(--n,n<i)throw new Error("Buffer overflow");s.push(t.slice(e,e+i)),e+=i,n-=i}return G0.decode.bytes=e-r,s},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=Jo(r)+1:e+=r.length+1}),e}}),Z0=Ut({encode(t,e,r){e||(e=new Uint8Array(Z0.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=K0(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let s=t.length;return Un(t,e,r,0,s),r+=s,Oe(e,r-n-2,n),Z0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=ze(t,e);e+=2;let s=t.slice(e,e+n);return e+=n,Z0.decode.bytes=e-r,s},encodingLength(t){return t?(Ja(t)?t.length:Jo(t))+2:2}}),X0=Ut({encode(t,e,r){e||(e=new Uint8Array(X0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Or.encode(t.cpu,e,r),r+=Or.encode.bytes,Or.encode(t.os,e,r),r+=Or.encode.bytes,Oe(e,r-n-2,n),X0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=Or.decode(t,e),e+=Or.decode.bytes,n.os=Or.decode(t,e),e+=Or.decode.bytes,X0.decode.bytes=e-r,n},encodingLength(t){return Or.encodingLength(t.cpu)+Or.encodingLength(t.os)+2}}),xf=Ut({encode(t,e,r){return e||(e=new Uint8Array(xf.encodingLength(t))),r||(r=0),ve.encode(t,e,r+2),Oe(e,ve.encode.bytes,r),xf.encode.bytes=ve.encode.bytes+2,e},decode(t,e){e||(e=0);let r=ve.decode(t,e+2);return xf.decode.bytes=ve.decode.bytes+2,r},encodingLength(t){return ve.encodingLength(t)+2}}),Y0=Ut({encode(t,e,r){e||(e=new Uint8Array(Y0.encodingLength(t))),r||(r=0),Oe(e,t.priority||0,r+2),Oe(e,t.weight||0,r+4),Oe(e,t.port||0,r+6),ve.encode(t.target,e,r+8);let n=ve.encode.bytes+6;return Oe(e,n,r),Y0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=ze(t,e),n={};return n.priority=ze(t,e+2),n.weight=ze(t,e+4),n.port=ze(t,e+6),n.target=ve.decode(t,e+8),Y0.decode.bytes=r+2,n},encodingLength(t){return 8+ve.encodingLength(t.target)}}),Ga=Ut({encode(t,e,r){let n=Ga.encodingLength(t);return e||(e=new Uint8Array(Ga.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=Ga.ISSUER_CRITICAL),Oe(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,Or.encode(t.tag,e,r),r+=Or.encode.bytes,V0(e,t.value,r),r+=Jo(t.value),Ga.encode.bytes=n,e},decode(t,e){e||(e=0);let r=ze(t,e);e+=2;let n=e,s={};return s.flags=t[e],e+=1,s.tag=Or.decode(t,e),e+=Or.decode.bytes,s.value=_f(t,e,n+r),s.issuerCritical=!!(s.flags&Ga.ISSUER_CRITICAL),Ga.decode.bytes=r+2,s},encodingLength(t){return Or.encodingLength(t.tag)+Or.encodingLength(t.value)+2}});Ga.ISSUER_CRITICAL=128;var Q0=Ut({encode(t,e,r){e||(e=new Uint8Array(Q0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Oe(e,t.preference||0,r),r+=2,ve.encode(t.exchange,e,r),r+=ve.encode.bytes,Oe(e,r-n-2,n),Q0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=ze(t,e),e+=2,n.exchange=ve.decode(t,e),e+=ve.decode.bytes,Q0.decode.bytes=e-r,n},encodingLength(t){return 4+ve.encodingLength(t.exchange)}}),V5=Ut({encode(t,e,r){return e||(e=new Uint8Array(V5.encodingLength(t))),r||(r=0),Oe(e,4,r),r+=2,Yi.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,Yi.decode(t,e)},bytes:6}),eg=Ut({encode(t,e,r){return e||(e=new Uint8Array(eg.encodingLength(t))),r||(r=0),Oe(e,16,r),r+=2,Wo.encode(t,e,r),eg.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=Wo.decode(t,e);return eg.decode.bytes=18,r},bytes:18}),L5=t=>new Uint8Array(t),Go=Ut({encode(t,e,r){e||(e=new Uint8Array(Go.encodingLength(t))),r||(r=0);let n=r,s=JE(t.code);if(Oe(e,s,r),r+=2,t.data)Oe(e,t.data.length,r),r+=2,Un(t.data,e,r),r+=t.data.length;else switch(s){case 8:{let i=t.sourcePrefixLength||0,o=t.family||I5(t.ip,L5),a=F5(t.ip,L5),u=Math.ceil(i/8);Oe(e,u+4,r),r+=2,Oe(e,o,r),r+=2,e[r++]=i,e[r++]=t.scopePrefixLength||0,Un(a,e,r,0,u),r+=u}break;case 11:t.timeout?(Oe(e,2,r),r+=2,Oe(e,t.timeout,r),r+=2):(Oe(e,0,r),r+=2);break;case 12:{let i=t.length||0;Oe(e,i,r),r+=2,e.fill(0,r,r+i),r+=i}break;case 14:{let i=t.tags.length*2;Oe(e,i,r),r+=2;for(let o of t.tags)Oe(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return Go.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=ze(t,e),r.type=N5(r.code),e+=2;let n=ze(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=ze(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let s=new Uint8Array(r.family===1?4:16);Un(t,s,0,e,e+n-4),r.ip=k5(s)}break;case 11:n>0&&(r.timeout=ze(t,e),e+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(ze(t,e)),e+=2}return Go.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(JE(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),Za=Ut({encode(t,e,r){e||(e=new Uint8Array(Za.encodingLength(t))),r||(r=0);let n=r,s=Af(t,Go);return Oe(e,s,r),r=Yp(t,Go,e,r+2),Za.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],s=ze(t,e);e+=2;let i=0;for(;s>0;)n[i++]=Go.decode(t,e),e+=Go.decode.bytes,s-=Go.decode.bytes;return Za.decode.bytes=e-r,n},encodingLength(t){return 2+Af(t||[],Go)}}),Ks=Ut({encode(t,e,r){e||(e=new Uint8Array(Ks.encodingLength(t))),r||(r=0);let n=r,s=t.key;if(!Ja(s))throw new Error("Key must be a Buffer");return r+=2,Oe(e,t.flags,r),r+=2,e[r]=Ks.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Un(s,e,r,0,s.length),r+=s.length,Ks.encode.bytes=r-n,Oe(e,Ks.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=ze(t,e);if(e+=2,n.flags=ze(t,e),e+=2,t[e]!==Ks.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+s+2),e+=n.key.length,Ks.decode.bytes=e-r,n},encodingLength(t){return 6+Jo(t.key)}});Ks.PROTOCOL_DNSSEC=3;Ks.ZONE_KEY=128;Ks.SECURE_ENTRYPOINT=32768;var Wp=Ut({encode(t,e,r){e||(e=new Uint8Array(Wp.encodingLength(t))),r||(r=0);let n=r,s=t.signature;if(!Ja(s))throw new Error("Signature must be a Buffer");return r+=2,Oe(e,bf(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,Ls(e,t.originalTTL,r),r+=4,Ls(e,t.expiration,r),r+=4,Ls(e,t.inception,r),r+=4,Oe(e,t.keyTag,r),r+=2,ve.encode(t.signersName,e,r),r+=ve.encode.bytes,Un(s,e,r,0,s.length),r+=s.length,Wp.encode.bytes=r-n,Oe(e,Wp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=ze(t,e);return e+=2,n.typeCovered=Hp(ze(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=Us(t,e),e+=4,n.expiration=Us(t,e),e+=4,n.inception=Us(t,e),e+=4,n.keyTag=ze(t,e),e+=2,n.signersName=ve.decode(t,e),e+=ve.decode.bytes,n.signature=t.slice(e,r+s+2),e+=n.signature.length,Wp.decode.bytes=e-r,n},encodingLength(t){return 20+ve.encodingLength(t.signersName)+Jo(t.signature)}}),Jp=Ut({encode(t,e,r){e||(e=new Uint8Array(Jp.encodingLength(t))),r||(r=0);let n=r;return r+=2,ve.encode(t.mbox||".",e,r),r+=ve.encode.bytes,ve.encode(t.txt||".",e,r),r+=ve.encode.bytes,Jp.encode.bytes=r-n,Oe(e,Jp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=ve.decode(t,e)||".",e+=ve.decode.bytes,n.txt=ve.decode(t,e)||".",e+=ve.decode.bytes,Jp.decode.bytes=e-r,n},encodingLength(t){return 2+ve.encodingLength(t.mbox||".")+ve.encodingLength(t.txt||".")}}),ri=Ut({encode(t,e,r){e||(e=new Uint8Array(ri.encodingLength(t))),r||(r=0);let n=r,s=[];for(let i=0;i<t.length;i++){let o=bf(t[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){let o=K0(s[i]);e[r]=i,r+=1,e[r]=o.length,r+=1,Un(o,e,r,0,o.length),r+=o.length}return ri.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,s=[];for(;e-n<r;){let i=t[e];e+=1;let o=t[e];e+=1;for(let a=0;a<o;a++){let u=t[e+a];for(let c=0;c<8;c++)if(u&1<<7-c){let l=Hp(i<<8|a<<3|c);s.push(l)}}e+=o}return ri.decode.bytes=e-n,s},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let s=bf(t[n]);e[s>>8]=Math.max(e[s>>8]||0,s&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),Gp=Ut({encode(t,e,r){e||(e=new Uint8Array(Gp.encodingLength(t))),r||(r=0);let n=r;return r+=2,ve.encode(t.nextDomain,e,r),r+=ve.encode.bytes,ri.encode(t.rrtypes,e,r),r+=ri.encode.bytes,Gp.encode.bytes=r-n,Oe(e,Gp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=ze(t,e);return e+=2,n.nextDomain=ve.decode(t,e),e+=ve.decode.bytes,n.rrtypes=ri.decode(t,e,s-(e-r)),e+=ri.decode.bytes,Gp.decode.bytes=e-r,n},encodingLength(t){return 2+ve.encodingLength(t.nextDomain)+ri.encodingLength(t.rrtypes)}}),Zp=Ut({encode(t,e,r){e||(e=new Uint8Array(Zp.encodingLength(t))),r||(r=0);let n=r,s=t.salt;if(!Ja(s))throw new Error("salt must be a Buffer");let i=t.nextDomain;if(!Ja(i))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,Oe(e,t.iterations,r),r+=2,e[r]=s.length,r+=1,Un(s,e,r,0,s.length),r+=s.length,e[r]=i.length,r+=1,Un(i,e,r,0,i.length),r+=i.length,ri.encode(t.rrtypes,e,r),r+=ri.encode.bytes,Zp.encode.bytes=r-n,Oe(e,Zp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=ze(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=ze(t,e),e+=2;let i=t[e];e+=1,n.salt=t.slice(e,e+i),e+=i;let o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=ri.decode(t,e,s-(e-r)),e+=ri.decode.bytes,Zp.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+ri.encodingLength(t.rrtypes)}}),Xp=Ut({encode(t,e,r){e||(e=new Uint8Array(Xp.encodingLength(t))),r||(r=0);let n=r,s=t.digest;if(!Ja(s))throw new Error("Digest must be a Buffer");return r+=2,Oe(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Un(s,e,r,0,s.length),r+=s.length,Xp.encode.bytes=r-n,Oe(e,Xp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=ze(t,e);return e+=2,n.keyTag=ze(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+s+2),e+=n.digest.length,Xp.decode.bytes=e-r,n},encodingLength(t){return 6+Jo(t.digest)}}),Sf=Ut({encode(t,e,r){e||(e=new Uint8Array(Sf.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let s=ZE(t.fingerprint),i=QE(t.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${s} != ${i}`);return q5(e,t.fingerprint,r,r+=s),Sf.encode.bytes=r-n,Oe(e,Sf.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let s=QE(n.hash);return n.fingerprint=j5(t,e,e+s),e+=s,Sf.decode.bytes=e-r,n},encodingLength(t){return 4+ZE(t.fingerprint)}});function QE(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}Sf.getFingerprintLengthForHashType=QE;function XE(t){switch(t.toUpperCase()){case"A":return V5;case"PTR":return xf;case"CNAME":return xf;case"DNAME":return xf;case"TXT":return G0;case"NULL":return Z0;case"AAAA":return eg;case"SRV":return Y0;case"HINFO":return X0;case"CAA":return Ga;case"NS":return W0;case"SOA":return J0;case"MX":return Q0;case"OPT":return Za;case"DNSKEY":return Ks;case"RRSIG":return Wp;case"RP":return Jp;case"NSEC":return Gp;case"NSEC3":return Zp;case"SSHFP":return Sf;case"DS":return Xp}return z0}var xi=Ut({encode(t,e,r){e||(e=new Uint8Array(xi.encodingLength(t))),r||(r=0);let n=r;if(ve.encode(t.name,e,r),r+=ve.encode.bytes,Oe(e,bf(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");Oe(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,Oe(e,t.flags||0,r+6),r+=8,Za.encode(t.options||[],e,r),r+=Za.encode.bytes}else{let s=WE(t.class===void 0?"IN":t.class);t.flush&&(s|=YE),Oe(e,s,r+2),Ls(e,t.ttl||0,r+4),r+=8;let i=XE(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return xi.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=ve.decode(t,e),e+=ve.decode.bytes,r.type=Hp(ze(t,e)),r.type==="OPT")r.udpPayloadSize=ze(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=ze(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=Za.decode(t,e+8),e+=8+Za.decode.bytes;else{let s=ze(t,e+2);r.ttl=Us(t,e+4),r.class=zE(s&aQ),r.flush=!!(s&YE);let i=XE(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return xi.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return ve.encodingLength(t.name)+8+XE(t.type).encodingLength(e)}}),Df=Ut({encode(t,e,r){e||(e=new Uint8Array(Df.encodingLength(t))),r||(r=0);let n=r;return ve.encode(t.name,e,r),r+=ve.encode.bytes,Oe(e,bf(t.type),r),r+=2,Oe(e,WE(t.class===void 0?"IN":t.class),r),r+=2,Df.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=ve.decode(t,e),e+=ve.decode.bytes,n.type=Hp(ze(t,e)),e+=2,n.class=zE(ze(t,e)),e+=2,!!(n.class&K5)&&(n.class&=uQ),Df.decode.bytes=e-r,n},encodingLength(t){return ve.encodingLength(t.name)+4}});var H5=1024;var Qr={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(cQ(t))),r||(r=0);let s=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),Ef.encode(t,e,r),r+=Ef.encode.bytes,r=Yp(t.questions,Df,e,r),r=Yp(t.answers,xi,e,r),r=Yp(t.authorities,xi,e,r),r=Yp(t.additionals,xi,e,r),Qr.encode.bytes=r-s,n&&Qp.bytes!==e.length?e.slice(0,Qp.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=Ef.decode(t,e);return e+=Ef.decode.bytes,e=H0(n.questions,Df,t,e),e=H0(n.answers,xi,t,e),e=H0(n.authorities,xi,t,e),e=H0(n.additionals,xi,t,e),Qr.decode.bytes=e-r,n},encodingLength:function(t){return Ef.encodingLength(t)+Af(t.questions||[],Df)+Af(t.answers||[],xi)+Af(t.authorities||[],xi)+Af(t.additionals||[],xi)}};Qr.encode.bytes=0;Qr.decode.bytes=0;function tg(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var rg={encode:function(t,e,r){return e=Qr.encode(tg(t,"query"),e,r),rg.encode.bytes=Qr.encode.bytes,e},decode:function(t,e){let r=Qr.decode(t,e);return rg.decode.bytes=Qr.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Qr.encodingLength(tg(t,"query"))}};rg.encode.bytes=0;rg.decode.bytes=0;var ng={encode:function(t,e,r){return e=Qr.encode(tg(t,"response"),e,r),ng.encode.bytes=Qr.encode.bytes,e},decode:function(t,e){let r=Qr.decode(t,e);return ng.decode.bytes=Qr.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Qr.encodingLength(tg(t,"response"))}};ng.encode.bytes=0;ng.decode.bytes=0;var Qp=Qr.encode,ig=Qr.decode,cQ=Qr.encodingLength;function z5(t){let e=Qp(t),r=new Uint8Array(2+e.byteLength);return Oe(r,e.byteLength),Un(e,r,2,0,e.length),z5.bytes=r.byteLength,r}z5.bytes=0;function W5(t){let e=ze(t,0);if(t.byteLength<e+2)return null;let r=ig(t.slice(2));return W5.bytes=ig.bytes,r}W5.bytes=0;function Af(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function Yp(t,e,r,n){for(let s=0;s<t.length;s++)e.encode(t[s],r,n),n+=e.encode.bytes;return n}function H0(t,e,r,n){for(let s=0;s<t.length;s++)t[s]=e.decode(r,n),n+=e.decode.bytes;return n}var J5=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Di=class{static getSigningMethod(e){return J5(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return J5(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var Mr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},G5=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Z5="https://diddht.tbddev.org",lQ=0,Xa=7200,sg=";",xn=",",eS;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(eS||(eS={}));var Dn;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(Dn||(Dn={}));var tS;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(tS||(tS={}));var Y5={Ed25519:Dn.Ed25519,ES256K:Dn.secp256k1,ES256:Dn.secp256r1,"P-256":Dn.secp256r1,secp256k1:Dn.secp256k1,secp256r1:Dn.secp256r1,X25519:Dn.X25519},X5={[Dn.Ed25519]:"EdDSA",[Dn.secp256k1]:"ES256K",[Dn.secp256r1]:"ES256",[Dn.X25519]:"ECDH-ES+A256KW"},Ec=class t extends Di{static create(){return Mr(this,arguments,void 0,function*({keyManager:e=new pn,options:r={}}={}){var n,s,i,o,a,u,c,l,f,p,d;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(x=>!(x.algorithm in Y5)))throw new Error("One or more verification method algorithms are not supported");let h=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(x=>"id"in x).map(x=>x.id);if(h&&h.length!==new Set(h).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(x=>!x.id||!x.type||!x.serviceEndpoint))throw new Error("One or more services are missing required properties");let m=yield e.generateKey({algorithm:"Ed25519"}),g=yield e.getPublicKey({keyUri:m}),_=yield Nr.identityKeyToIdentifier({identityKey:g}),D=Object.assign(Object.assign({id:_},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),v=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];v?.some(x=>{var B;return((B=x.id)===null||B===void 0?void 0:B.split("#").pop())==="0"})||v.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let x of v){let B=x.id&&x.id.split("#").pop()==="0"?m:yield e.generateKey({algorithm:x.algorithm}),C=yield e.getPublicKey({keyUri:B}),T=(u=(a=x.id)!==null&&a!==void 0?a:C.kid)!==null&&u!==void 0?u:yield Le({jwk:C});T=`${_}#${jn(T)}`,(c=D.verificationMethod)!==null&&c!==void 0||(D.verificationMethod=[]),D.verificationMethod.push({id:T,type:"JsonWebKey",controller:(l=x.controller)!==null&&l!==void 0?l:_,publicKeyJwk:C});for(let k of(f=x.purposes)!==null&&f!==void 0?f:[])D[k]||(D[k]=[]),D[k].push(T)}(p=r.services)===null||p===void 0||p.forEach(x=>{var B;(B=D.service)!==null&&B!==void 0||(D.service=[]),x.id=`${_}#${x.id.split("#").pop()}`,D.service.push(x)});let A=new qn({uri:_,document:D,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((d=r.publish)!==null&&d!==void 0)||d){let x=yield t.publish({did:A,gatewayUri:r.gatewayUri});A.metadata=x.didDocumentMetadata}return A})}static import(e){return Mr(this,arguments,void 0,function*({portableDid:r,keyManager:n=new pn}){var s;let i=tt.parse(r.uri);if(i?.method!==t.methodName)throw new we(me.MethodNotSupported,"Method not supported");let o=yield qn.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var u;return((u=a.id)===null||u===void 0?void 0:u.split("#").pop())==="0"})))throw new we(me.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(e){return Mr(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;let i=tt.parse(r.id);if(i&&i.method!==this.methodName)throw new we(me.MethodNotSupported,`Method not supported: ${i.method}`);let o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u,c;return jn(a.id)===((u=jn(n))!==null&&u!==void 0?u:jn((c=r.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(o&&o.publicKeyJwk))throw new we(me.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(e){return Mr(this,arguments,void 0,function*({did:r,gatewayUri:n=Z5}){return yield og.put({did:r,gatewayUri:n})})}static resolve(e){return Mr(this,arguments,void 0,function*(r,n={}){var s;let i=(s=n?.gatewayUri)!==null&&s!==void 0?s:Z5;try{yield Nr.identifierToIdentityKey({didUri:r});let{didDocument:o,didDocumentMetadata:a}=yield og.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},sr),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof we))throw new Error(o);return Object.assign(Object.assign({},sr),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}};Ec.methodName="dht";var og=class t{static get(e){return Mr(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){let s=Nr.identifierToIdentityKeyBytes({didUri:r}),i=yield t.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield Nr.parseBep44GetMessage({bep44Message:i}),a=yield t.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(e){return Mr(this,arguments,void 0,function*({did:r,gatewayUri:n}){let s=yield t.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield Nr.createBep44PutMessage({dnsPacket:s,publicKeyBytes:Nr.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield t.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return Mr(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){let s=X.uint8Array(n).toBase32Z(),i=new URL(s,r).href,o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new we(me.NotFound,`Pkarr record not found for: ${s}`)}catch(c){throw c instanceof we?c:new we(me.InternalError,`Failed to fetch Pkarr record: ${c.message}`)}let a=yield o.arrayBuffer();if(!a)throw new we(me.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new we(me.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new we(me.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return Mr(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){let s=X.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(u){throw new we(me.InternalError,`Failed to put Pkarr record for identifier ${s}: ${u.message}`)}return a.ok})}static fromDnsPacket(e){return Mr(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;let a={id:r},u={published:!0},c=new Map;for(let l of(s=n?.answers)!==null&&s!==void 0?s:[]){if(l.type!=="TXT")continue;let f=l.name.split(".")[0].substring(1);switch(!0){case f.startsWith("aka"):{let p=Nr.parseTxtDataToString(l.data);a.alsoKnownAs=p.split(xn);break}case f.startsWith("cnt"):{let p=Nr.parseTxtDataToString(l.data);a.controller=p.includes(xn)?p.split(xn):p;break}case f.startsWith("k"):{let{id:p,t:d,k:h,c:m,a:g}=Nr.parseTxtDataToObject(l.data),_=X.base64Url(h).toUint8Array(),D=Dn[Number(d)],v=yield Nr.keyConverter(D).bytesToPublicKey({publicKeyBytes:_});v.alg=g||X5[Number(d)];let A=f==="k0"?"0":p!==void 0?p:yield Le({jwk:v});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);let x=`${r}#${A}`;a.verificationMethod.push({id:x,type:"JsonWebKey",controller:m??r,publicKeyJwk:v}),c.set(f,x);break}case f.startsWith("s"):{let p=Nr.parseTxtDataToObject(l.data),{id:d,t:h,se:m}=p,g=G5(p,["id","t","se"]),_=m.includes(xn)?m.split(xn):[m],D=Object.fromEntries(Object.entries(g).map(([v,A])=>[v,A.includes(xn)?A.split(xn):A]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},D),{id:`${r}#${d}`,type:h,serviceEndpoint:_}));break}case f.startsWith("typ"):{let{id:p}=Nr.parseTxtDataToObject(l.data);u.types=p.split(xn).map(d=>Number(d));break}case f.startsWith("did"):{let p=D=>D.split(xn).map(v=>c.get(v)).filter(v=>typeof v=="string"),{auth:d,asm:h,del:m,inv:g,agm:_}=Nr.parseTxtDataToObject(l.data);d&&(a.authentication=p(d)),h&&(a.assertionMethod=p(h)),m&&(a.capabilityDelegation=p(m)),g&&(a.capabilityInvocation=p(g)),_&&(a.keyAgreement=p(_));break}}}return{didDocument:a,didDocumentMetadata:u,didResolutionMetadata:{}}})}static toDnsPacket(e){return Mr(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,u,c,l;let f=[],p=[],d=new Map,h=[],m=[];if(i!==void 0){let{signature:D,previousDid:v}=i;yield Nr.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),f.push({type:"TXT",name:"_prv._did.",ttl:Xa,data:`id=${v};s=${D}`})}if(r.alsoKnownAs&&f.push({type:"TXT",name:"_aka._did.",ttl:Xa,data:r.alsoKnownAs.join(xn)}),r.controller){let D=Array.isArray(r.controller)?r.controller.join(xn):r.controller;f.push({type:"TXT",name:"_cnt._did.",ttl:Xa,data:D})}for(let[D,v]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){let A=`k${D}`;m.push(A);let x=v.id.split("#").pop();d.set(x,A);let B=v.publicKeyJwk;if(!(B?.crv&&B.crv in Y5))throw new we(me.InvalidPublicKeyType,`Verification method '${v.id}' contains an unsupported key type: ${(u=B?.crv)!==null&&u!==void 0?u:"undefined"}`);let C=Dn[B.crv],T=yield Nr.keyConverter(B.crv).publicKeyToBytes({publicKey:B}),k=X.uint8Array(T).toBase64Url(),I=[`t=${C}`,`k=${k}`];x!=="0"&&(yield Le({jwk:B}))!==x&&I.unshift(`id=${x}`),B.alg!==X5[C]&&I.push(`a=${B.alg}`),v.controller!==r.id&&I.push(`c=${v.controller}`),f.push({type:"TXT",name:`_${A}._did.`,ttl:Xa,data:I.join(sg)})}(c=r.service)===null||c===void 0||c.forEach((D,v)=>{let A=`s${v}`;h.push(A);let{id:x,type:B,serviceEndpoint:C}=D,T=G5(D,["id","type","serviceEndpoint"]);x=jn(x),C=Array.isArray(C)?C.join(","):C;let I=Object.entries(Object.assign({id:x,t:B,se:C},T)).map(([M,Y])=>`${M}=${Y}`).join(sg),$=Nr.chunkDataIfNeeded(I);f.push({type:"TXT",name:`_${A}._did.`,ttl:Xa,data:$})});let g=[`v=${lQ}`];if(m.length&&g.push(`vm=${m.join(xn)}`),Object.keys(_c).forEach(D=>{var v;let A=(v=r[D])===null||v===void 0?void 0:v.map(x=>d.get(x.split("#").pop()));if(A){let x=tS[D];g.push(`${x}=${A.join(xn)}`)}}),h.length&&g.push(`svc=${h.join(xn)}`),!((l=n.types)===null||l===void 0)&&l.length){let v=n.types.map(A=>typeof A=="string"?eS[A]:A);f.push({type:"TXT",name:"_typ._did.",ttl:Xa,data:`id=${v.join(xn)}`})}f.push({type:"TXT",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Xa,data:g.join(sg)});for(let D of s||[])p.push({type:"NS",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Xa,data:D+"."});return{id:0,type:"response",flags:H5,answers:[...f,...p]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},Nr=class t{static createBep44PutMessage(e){return Mr(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){let i=Math.ceil(Date.now()/1e3),o=Qp(r),a=HE.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new we(me.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);let u=yield s.sign({data:a});return{k:n,seq:i,sig:u,v:o}})}static identifierToIdentityKey(e){return Mr(this,arguments,void 0,function*({didUri:r}){let n=t.identifierToIdentityKeyBytes({didUri:r});return yield Pr.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){let r=tt.parse(e);if(!r)throw new we(me.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Ec.methodName)throw new we(me.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=X.base32Z(r.id).toUint8Array()}catch{throw new we(me.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new we(me.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return Mr(this,arguments,void 0,function*({identityKey:r}){let n=yield Pr.publicKeyToBytes({publicKey:r}),s=X.uint8Array(n).toBase32Z();return`did:${Ec.methodName}:${s}`})}static keyConverter(e){let n={Ed25519:Pr,"P-256":{publicKeyToBytes:s=>Mr(this,[s],void 0,function*({publicKey:i}){let o=yield Yr.publicKeyToBytes({publicKey:i});return yield Yr.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Yr.bytesToPublicKey,privateKeyToBytes:Yr.privateKeyToBytes,bytesToPrivateKey:Yr.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>Mr(this,[s],void 0,function*({publicKey:i}){let o=yield $r.publicKeyToBytes({publicKey:i});return yield $r.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:$r.bytesToPublicKey,privateKeyToBytes:$r.privateKeyToBytes,bytesToPrivateKey:$r.bytesToPrivateKey},X25519:gf}[e];if(!n)throw new we(me.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return Mr(this,arguments,void 0,function*({bep44Message:r}){let n=yield Pr.bytesToPublicKey({publicKeyBytes:r.k}),s=HE.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Pr.verify({key:n,signature:r.sig,data:s})))throw new we(me.InvalidSignature,"Invalid signature for DHT BEP44 message");return ig(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(sg).reduce((r,n)=>{let[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return X.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new we(me.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return Mr(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){let s=yield t.identifierToIdentityKey({didUri:n.previousDid}),i=t.identifierToIdentityKeyBytes({didUri:r}),o=X.base64Url(n.signature).toUint8Array();if(!(yield Pr.verify({key:s,data:i,signature:o})))throw new we(me.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;let r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};var Wt={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};var $t=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var Yxe=new Uint8Array(0);var rS=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var nS=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},iS=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Q5(this,e)}},sS=class{constructor(e){this.decoders=e}or(e){return Q5(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Q5=(t,e)=>new sS({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),oS=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new nS(e,r,n),this.decoder=new iS(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},fQ=({name:t,prefix:e,encode:r,decode:n})=>new oS(t,e,r,n);var dQ=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let f=s[t[l]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|f,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},pQ=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},eh=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>fQ({prefix:e,name:t,encode(s){return pQ(s,n,r)},decode(s){return dQ(s,n,r,t)}});var s2e=eh({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),o2e=eh({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),th=eh({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a2e=eh({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ln=class t{static encode(e){return th.baseEncode(e)}static decodeAsBytes(e,r){if(!t.isBase64UrlString(e))throw new $t(Wt.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return th.baseDecode(e)}static decodeAsString(e,r){let n=t.decodeAsBytes(e,r);return t.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var c6=Xn(aS(),1);var uS;(function(t){t.Public="public",t.Private="private"})(uS||(uS={}));var ni=uS;var Br=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===ni.Private&&n.add("d");for(let s in e)if(!n.has(s))throw new $t(Wt.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(e.crv!=="secp256k1")throw new $t(Wt.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new $t(Wt.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new $t(Wt.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new $t(Wt.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===ni.Private&&(e.d===void 0||e.d.length!==43))throw new $t(Wt.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new $t(Wt.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!Ln.isBase64UrlString(e))throw new $t(Wt.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new $t(Wt.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};var rh=class{};rh.hashAlgorithmInMultihashCode=18;rh.maxCanonicalizedDeltaSizeInBytes=1e3;var Cn=rh;var n6=Xn(r6(),1);var Qi=class t{static canonicalizeAsBytes(e){let r=t.removeAllUndefinedProperties(e),n=n6.default(r);return Ln.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?t.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};var hQ=o6,i6=128,yQ=127,mQ=~yQ,gQ=Math.pow(2,31);function o6(t,e,r){e=e||[],r=r||0;for(var n=r;t>=gQ;)e[r++]=t&255|i6,t/=128;for(;t&mQ;)e[r++]=t&255|i6,t>>>=7;return e[r]=t|0,o6.bytes=r-n+1,e}var vQ=cS,bQ=128,s6=127;function cS(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw cS.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&s6)<<s:(o&s6)*Math.pow(2,s),s+=7}while(o>=bQ);return cS.bytes=i-n,r}var wQ=Math.pow(2,7),_Q=Math.pow(2,14),EQ=Math.pow(2,21),SQ=Math.pow(2,28),AQ=Math.pow(2,35),xQ=Math.pow(2,42),DQ=Math.pow(2,49),CQ=Math.pow(2,56),PQ=Math.pow(2,63),OQ=function(t){return t<wQ?1:t<_Q?2:t<EQ?3:t<SQ?4:t<AQ?5:t<xQ?6:t<DQ?7:t<CQ?8:t<PQ?9:10},BQ={encode:hQ,decode:vQ,encodingLength:OQ},TQ=BQ,nh=TQ;var lS=(t,e=0)=>[nh.decode(t,e),nh.decode.bytes],fS=(t,e,r=0)=>(nh.encode(t,e,r),e),dS=t=>nh.encodingLength(t);var pS=(t,e)=>{let r=e.byteLength,n=dS(t),s=n+dS(r),i=new Uint8Array(s+r);return fS(t,i,0),fS(r,i,n),i.set(e,s),new ug(t,r,e,i)},a6=t=>{let e=rS(t),[r,n]=lS(e),[s,i]=lS(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new ug(r,s,o,e)};var ug=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var yS=({name:t,code:e,encode:r})=>new hS(t,e,r),hS=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?pS(this.code,r):r.then(n=>pS(this.code,n))}else throw Error("Unknown type, must be binary type")}};var u6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),cg=yS({name:"sha2-256",code:18,encode:u6("SHA-256")}),O2e=yS({name:"sha2-512",code:19,encode:u6("SHA-512")});var ih=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},jr=class t{static hash(e,r){return ih(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield cg.digest(e)).bytes;break;default:throw new $t(Wt.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(e,r){return ih(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield cg.encode(e);break;default:throw new $t(Wt.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return ih(this,void 0,void 0,function*(){let n=Qi.canonicalizeAsBytes(e);return yield t.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return ih(this,void 0,void 0,function*(){let n=Qi.canonicalizeAsBytes(e),s=yield t.hashAsNonMultihashBytes(n,r);return yield t.hashThenEncode(s,r)})}static hashThenEncode(e,r){return ih(this,void 0,void 0,function*(){let n=yield t.hash(e,r);return Ln.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,s=Ln.decodeAsBytes(e,r);try{n=a6(s)}catch{throw new $t(Wt.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let i=Cn.hashAlgorithmInMultihashCode;if(i!==n.code)throw new $t(Wt.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}};var mS;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(mS||(mS={}));var sh=mS;var gS;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(gS||(gS={}));var Sc=gS;var lg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Ya=class t{static createCreateRequest(e){return lg(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,s=e.document.publicKeys,i=e.document.services;Br.validateEs256kOperationKey(r,ni.Public),Br.validateEs256kOperationKey(n,ni.Public),t.validateDidDocumentKeys(s),t.validateServices(i);let o=Cn.hashAlgorithmInMultihashCode,a=[{action:Sc.Replace,document:e.document}],u={updateCommitment:yield jr.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};t.validateDeltaSize(u);let l={deltaHash:yield jr.canonicalizeThenHashThenEncode(u,o),recoveryCommitment:yield jr.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:sh.Create,suffixData:l,delta:u}})}static createDeactivateRequest(e){return lg(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),Br.validateEs256kOperationKey(e.recoveryPublicKey,ni.Public);let r=Cn.hashAlgorithmInMultihashCode,n=yield jr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},i=yield e.signer.sign({alg:"ES256K"},s);return{type:sh.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(e){return lg(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),Br.validateEs256kOperationKey(e.recoveryPublicKey,ni.Public),Br.validateEs256kOperationKey(e.nextRecoveryPublicKey,ni.Public),Br.validateEs256kOperationKey(e.nextUpdatePublicKey,ni.Public),t.validateDidDocumentKeys(e.document.publicKeys),t.validateServices(e.document.services);let r=Cn.hashAlgorithmInMultihashCode,n=yield jr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s=[{action:Sc.Replace,document:e.document}],i=yield jr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield jr.canonicalizeThenHashThenEncode(o,r),c={recoveryCommitment:yield jr.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},l=yield e.signer.sign({alg:"ES256K"},c);return{type:sh.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:l}})}static createUpdateRequest(e){return lg(this,void 0,void 0,function*(){if(t.validateDidSuffix(e.didSuffix),Br.validateEs256kOperationKey(e.updatePublicKey,ni.Public),Br.validateEs256kOperationKey(e.nextUpdatePublicKey,ni.Public),t.validateServices(e.servicesToAdd),t.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let h of e.idsOfServicesToRemove)Br.validateId(h);if(e.idsOfPublicKeysToRemove!==void 0)for(let h of e.idsOfPublicKeysToRemove)Br.validateId(h);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let h={action:Sc.AddServices,services:n};r.push(h)}let s=e.idsOfServicesToRemove;if(s!==void 0&&s.length>0){let h={action:Sc.RemoveServices,ids:s};r.push(h)}let i=e.publicKeysToAdd;if(i!==void 0&&i.length>0){let h={action:Sc.AddPublicKeys,publicKeys:i};r.push(h)}let o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){let h={action:Sc.RemovePublicKeys,ids:o};r.push(h)}let a=Cn.hashAlgorithmInMultihashCode,u=yield jr.canonicalizeThenHashThenEncode(e.updatePublicKey,a),c=yield jr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),l={patches:r,updateCommitment:c},f=yield jr.canonicalizeThenHashThenEncode(l,a),p={updateKey:e.updatePublicKey,deltaHash:f},d=yield e.signer.sign({alg:"ES256K"},p);return{type:sh.Update,didSuffix:e.didSuffix,revealValue:u,delta:l,signedData:d}})}static validateDidSuffix(e){jr.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new $t(Wt.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(Br.validateId(n.id),r.has(n.id))throw new $t(Wt.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),Br.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(t.validateService(n),r.has(n.id))throw new $t(Wt.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){Br.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new $t(Wt.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new $t(Wt.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&c6.parse(e.serviceEndpoint).error!==void 0)throw new $t(Wt.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=Qi.canonicalizeAsBytes(e);if(r.length>Cn.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${Cn.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new $t(Wt.DeltaExceedsMaximumSize,n)}}};var l6=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Cf=class t{static createLongFormDid(e){return l6(this,void 0,void 0,function*(){let r=yield Ya.createCreateRequest(e),n=yield t.computeDidUniqueSuffix(r.suffixData),s;Cn.network===void 0||Cn.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${Cn.network}:${n}`;let i={suffixData:r.suffixData,delta:r.delta},o=Qi.canonicalizeAsBytes(i),a=Ln.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(e){return l6(this,void 0,void 0,function*(){let r=Qi.canonicalizeAsBytes(e),n=yield jr.hash(r,Cn.hashAlgorithmInMultihashCode);return Ln.encode(n)})}};var en=2n**255n-19n,dg=2n**252n+27742317777372353535851937790883648493n,bS=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,wS=0x6666666666666666666666666666666666666666666666666666666666666658n,fg={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:en,n:dg,h:8,Gx:bS,Gy:wS},Kn=(t="")=>{throw new Error(t)},m6=t=>typeof t=="string",_S=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?Kn("Uint8Array expected"):t,Pf=t=>new Uint8Array(t),kQ=(t,e)=>_S(m6(t)?SS(t):Pf(t),e),Ie=(t,e=en)=>{let r=t%e;return r>=0n?r:e+r},f6=t=>t instanceof Qa?t:Kn("Point expected"),d6,Qa=class t{constructor(e,r,n,s){this.ex=e,this.ey=r,this.ez=n,this.et=s}static fromAffine(e){return new t(e.x,e.y,1n,Ie(e.x*e.y))}static fromHex(e,r=!0){let{d:n}=fg;e=kQ(e,32);let s=e.slice();s[31]=e[31]&-129;let i=$Q(s);i===0n||(r&&!(0n<i&&i<en)&&Kn("bad y coord 1"),!r&&!(0n<i&&i<2n**256n)&&Kn("bad y coord 2"));let o=Ie(i*i),a=Ie(o-1n),u=Ie(n*o+1n),{isValid:c,value:l}=MQ(a,u);c||Kn("bad y coordinate 3");let f=(l&1n)===1n;return(e[31]&128)!==0!==f&&(l=Ie(-l)),new t(l,i,1n,Ie(l*i))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){let{ex:r,ey:n,ez:s}=this,{ex:i,ey:o,ez:a}=f6(e),u=Ie(r*a),c=Ie(i*s),l=Ie(n*a),f=Ie(o*s);return u===c&&l===f}is0(){return this.equals(pg)}negate(){return new t(Ie(-this.ex),this.ey,this.ez,Ie(-this.et))}double(){let{ex:e,ey:r,ez:n}=this,{a:s}=fg,i=Ie(e*e),o=Ie(r*r),a=Ie(2n*Ie(n*n)),u=Ie(s*i),c=e+r,l=Ie(Ie(c*c)-i-o),f=u+o,p=f-a,d=u-o,h=Ie(l*p),m=Ie(f*d),g=Ie(l*d),_=Ie(p*f);return new t(h,m,_,g)}add(e){let{ex:r,ey:n,ez:s,et:i}=this,{ex:o,ey:a,ez:u,et:c}=f6(e),{a:l,d:f}=fg,p=Ie(r*o),d=Ie(n*a),h=Ie(i*f*c),m=Ie(s*u),g=Ie((r+n)*(o+a)-p-d),_=Ie(m-h),D=Ie(m+h),v=Ie(d-l*p),A=Ie(g*_),x=Ie(D*v),B=Ie(g*v),C=Ie(_*D);return new t(A,x,C,B)}mul(e,r=!0){if(e===0n)return r===!0?Kn("cannot multiply by 0"):pg;if(typeof e=="bigint"&&0n<e&&e<dg||Kn("invalid scalar, must be < L"),!r&&this.is0()||e===1n)return this;if(this.equals(hg))return qQ(e).p;let n=pg,s=hg;for(let i=this;e>0n;i=i.double(),e>>=1n)e&1n?n=n.add(i):r&&(s=s.add(i));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(fg.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(dg/2n,!1).double();return dg%2n&&(e=e.add(this)),e.is0()}toAffine(){let{ex:e,ey:r,ez:n}=this;if(this.is0())return{x:0n,y:0n};let s=v6(n);return Ie(n*s)!==1n&&Kn("invalid inverse"),{x:Ie(e*s),y:Ie(r*s)}}toRawBytes(){let{x:e,y:r}=this.toAffine(),n=RQ(r);return n[31]|=e&1n?128:0,n}toHex(){return ES(this.toRawBytes())}};Qa.BASE=new Qa(bS,wS,1n,Ie(bS*wS));Qa.ZERO=new Qa(0n,1n,1n,0n);var{BASE:hg,ZERO:pg}=Qa,g6=(t,e)=>t.toString(16).padStart(e,"0"),ES=t=>Array.from(t).map(e=>g6(e,2)).join(""),SS=t=>{let e=t.length;(!m6(t)||e%2)&&Kn("hex invalid 1");let r=Pf(e/2);for(let n=0;n<r.length;n++){let s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);(Number.isNaN(o)||o<0)&&Kn("hex invalid 2"),r[n]=o}return r},RQ=t=>SS(g6(t,32*2)).reverse(),$Q=t=>BigInt("0x"+ES(Pf(_S(t)).reverse())),p6=(...t)=>{let e=Pf(t.reduce((n,s)=>n+_S(s).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},v6=(t,e=en)=>{(t===0n||e<=0n)&&Kn("no inverse n="+t+" mod="+e);let r=Ie(t,e),n=e,s=0n,i=1n,o=1n,a=0n;for(;r!==0n;){let u=n/r,c=n%r,l=s-o*u,f=i-a*u;n=r,r=c,s=o,i=a,o=l,a=f}return n===1n?Ie(s,e):Kn("no inverse")},Vs=(t,e)=>{let r=t;for(;e-- >0n;)r*=r,r%=en;return r},NQ=t=>{let r=t*t%en*t%en,n=Vs(r,2n)*r%en,s=Vs(n,1n)*t%en,i=Vs(s,5n)*s%en,o=Vs(i,10n)*i%en,a=Vs(o,20n)*o%en,u=Vs(a,40n)*a%en,c=Vs(u,80n)*u%en,l=Vs(c,80n)*u%en,f=Vs(l,10n)*i%en;return{pow_p_5_8:Vs(f,2n)*t%en,b2:r}},h6=19681161376707505956807079304988542015446066515923890162744021073123829784752n,MQ=(t,e)=>{let r=Ie(e*e*e),n=Ie(r*r*e),s=NQ(t*n).pow_p_5_8,i=Ie(t*r*s),o=Ie(e*i*i),a=i,u=Ie(i*h6),c=o===t,l=o===Ie(-t),f=o===Ie(-t*h6);return c&&(i=a),(l||f)&&(i=u),(Ie(i)&1n)===1n&&(i=Ie(-i)),{isValid:c||l,value:i}};var vS;var y6=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,b6={bytesToHex:ES,hexToBytes:SS,concatBytes:p6,mod:Ie,invert:v6,randomBytes:t=>{let e=y6();return e||Kn("crypto.getRandomValues must be defined"),e.getRandomValues(Pf(t))},sha512Async:async(...t)=>{let e=y6();e||Kn("crypto.subtle or etc.sha512Async must be defined");let r=p6(...t);return Pf(await e.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(b6,{sha512Sync:{configurable:!1,get(){return vS},set(t){vS||(vS=t)}}});var Ac=8,jQ=()=>{let t=[],e=256/Ac+1,r=hg,n=r;for(let s=0;s<e;s++){n=r,t.push(n);for(let i=1;i<2**(Ac-1);i++)n=n.add(r),t.push(n);r=n.double()}return t},qQ=t=>{let e=d6||(d6=jQ()),r=(l,f)=>{let p=f.negate();return l?p:f},n=pg,s=hg,i=1+256/Ac,o=2**(Ac-1),a=BigInt(2**Ac-1),u=2**Ac,c=BigInt(Ac);for(let l=0;l<i;l++){let f=l*o,p=Number(t&a);t>>=c,p>o&&(p-=u,t+=1n);let d=f,h=f+Math.abs(p)-1,m=l%2!==0,g=p<0;p===0?s=s.add(r(m,e[d])):n=n.add(r(g,e[h]))}return{p:n,f:s}};var xS=2n**256n,Dc=xS-0x1000003d1n,DS=xS-0x14551231950b75fc4402da1732fc9bebfn,C6=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,P6=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,O6={p:Dc,n:DS,a:0n,b:7n,Gx:C6,Gy:P6},Of=32,w6=t=>Se(Se(t*t)*t+O6.b),qr=(t="")=>{throw new Error(t)},gg=t=>typeof t=="bigint",B6=t=>typeof t=="string",AS=t=>gg(t)&&0n<t&&t<Dc,T6=t=>gg(t)&&0n<t&&t<DS,I6=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?qr("Uint8Array expected"):t,ah=t=>new Uint8Array(t),CS=(t,e)=>I6(B6(t)?vg(t):ah(t),e),Se=(t,e=Dc)=>{let r=t%e;return r>=0n?r:e+r},_6=t=>t instanceof Zo?t:qr("Point expected"),E6,Zo=class t{constructor(e,r,n){this.px=e,this.py=r,this.pz=n}static fromAffine(e){return new t(e.x,e.y,1n)}static fromHex(e){e=CS(e);let r,n=e[0],s=e.subarray(1),i=S6(s,0,Of),o=e.length;if(o===33&&[2,3].includes(n)){AS(i)||qr("Point hex invalid: x not FE");let a=LQ(w6(i)),u=(a&1n)===1n;(n&1)===1!==u&&(a=Se(-a)),r=new t(i,a,1n)}return o===65&&n===4&&(r=new t(i,S6(s,Of,2*Of),1n)),r?r.ok():qr("Point is not on curve")}static fromPrivateKey(e){return oh.mul(KQ(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){let{px:r,py:n,pz:s}=this,{px:i,py:o,pz:a}=_6(e),u=Se(r*a),c=Se(i*s),l=Se(n*a),f=Se(o*s);return u===c&&l===f}negate(){return new t(this.px,Se(-this.py),this.pz)}double(){return this.add(this)}add(e){let{px:r,py:n,pz:s}=this,{px:i,py:o,pz:a}=_6(e),{a:u,b:c}=O6,l=0n,f=0n,p=0n,d=Se(c*3n),h=Se(r*i),m=Se(n*o),g=Se(s*a),_=Se(r+n),D=Se(i+o);_=Se(_*D),D=Se(h+m),_=Se(_-D),D=Se(r+s);let v=Se(i+a);return D=Se(D*v),v=Se(h+g),D=Se(D-v),v=Se(n+s),l=Se(o+a),v=Se(v*l),l=Se(m+g),v=Se(v-l),p=Se(u*D),l=Se(d*g),p=Se(l+p),l=Se(m-p),p=Se(m+p),f=Se(l*p),m=Se(h+h),m=Se(m+h),g=Se(u*g),D=Se(d*D),m=Se(m+g),g=Se(h-g),g=Se(u*g),D=Se(D+g),h=Se(m*D),f=Se(f+h),h=Se(v*D),l=Se(_*l),l=Se(l-h),h=Se(_*m),p=Se(v*p),p=Se(p+h),new t(l,f,p)}mul(e,r=!0){if(!r&&e===0n)return yg;if(T6(e)||qr("invalid scalar"),this.equals(oh))return zQ(e).p;let n=yg,s=oh;for(let i=this;e>0n;i=i.double(),e>>=1n)e&1n?n=n.add(i):r&&(s=s.add(i));return n}mulAddQUns(e,r,n){return this.mul(r,!1).add(e.mul(n,!1)).ok()}toAffine(){let{px:e,py:r,pz:n}=this;if(this.equals(yg))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};let s=k6(n);return Se(n*s)!==1n&&qr("invalid inverse"),{x:Se(e*s),y:Se(r*s)}}assertValidity(){let{x:e,y:r}=this.aff();return(!AS(e)||!AS(r))&&qr("Point invalid: x or y"),Se(r*r)===w6(e)?this:qr("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){let{x:r,y:n}=this.aff();return(e?(n&1n)===0n?"02":"03":"04")+A6(r)+(e?"":A6(n))}toRawBytes(e=!0){return vg(this.toHex(e))}};Zo.BASE=new Zo(C6,P6,1n);Zo.ZERO=new Zo(0n,1n,0n);var{BASE:oh,ZERO:yg}=Zo,F6=(t,e)=>t.toString(16).padStart(e,"0"),PS=t=>Array.from(t).map(e=>F6(e,2)).join(""),vg=t=>{let e=t.length;(!B6(t)||e%2)&&qr("hex invalid 1");let r=ah(e/2);for(let n=0;n<r.length;n++){let s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);(Number.isNaN(o)||o<0)&&qr("hex invalid 2"),r[n]=o}return r},bg=t=>BigInt("0x"+(PS(t)||"0")),S6=(t,e,r)=>bg(t.slice(e,r)),OS=t=>gg(t)&&t>=0n&&t<xS?vg(F6(t,2*Of)):qr("bigint expected"),A6=t=>PS(OS(t)),x6=(...t)=>{let e=ah(t.reduce((n,s)=>n+I6(s).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},k6=(t,e=Dc)=>{(t===0n||e<=0n)&&qr("no inverse n="+t+" mod="+e);let r=Se(t,e),n=e,s=0n,i=1n,o=1n,a=0n;for(;r!==0n;){let u=n/r,c=n%r,l=s-o*u,f=i-a*u;n=r,r=c,s=o,i=a,o=l,a=f}return n===1n?Se(s,e):qr("no inverse")},LQ=t=>{let e=1n;for(let r=t,n=(Dc+1n)/4n;n>0n;n>>=1n)n&1n&&(e=e*r%Dc),r=r*r%Dc;return Se(e*e)===t?e:qr("sqrt invalid")},KQ=t=>(gg(t)||(t=bg(CS(t,Of))),T6(t)?t:qr("private key out of range"));var D6=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,mg;function VQ(t){t=CS(t);let e=Of+8;(t.length<e||t.length>1024)&&qr("expected proper params");let r=Se(bg(t),DS-1n)+1n;return OS(r)}var R6={hexToBytes:vg,bytesToHex:PS,concatBytes:x6,bytesToNumberBE:bg,numberToBytesBE:OS,mod:Se,invert:k6,hmacSha256Async:async(t,...e)=>{let r=D6();if(!r)return qr("etc.hmacSha256Async not set");let n=r.subtle,s=await n.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return ah(await n.sign("HMAC",s,x6(...e)))},hmacSha256Sync:mg,hashToPrivateKey:VQ,randomBytes:t=>{let e=D6();return e||qr("crypto.getRandomValues must be defined"),e.getRandomValues(ah(t))}};Object.defineProperties(R6,{hmacSha256Sync:{configurable:!1,get(){return mg},set(t){mg||(mg=t)}}});var xc=8,HQ=()=>{let t=[],e=256/xc+1,r=oh,n=r;for(let s=0;s<e;s++){n=r,t.push(n);for(let i=1;i<2**(xc-1);i++)n=n.add(r),t.push(n);r=n.double()}return t},zQ=t=>{let e=E6||(E6=HQ()),r=(l,f)=>{let p=f.negate();return l?p:f},n=yg,s=oh,i=1+256/xc,o=2**(xc-1),a=BigInt(2**xc-1),u=2**xc,c=BigInt(xc);for(let l=0;l<i;l++){let f=l*o,p=Number(t&a);t>>=c,p>o&&(p-=u,t+=1n);let d=f,h=f+Math.abs(p)-1,m=l%2!==0,g=p<0;p===0?s=s.add(r(m,e[d])):n=n.add(r(g,e[h]))}return{p:n,f:s}};var N6;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(N6||(N6={}));var M6;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(M6||(M6={}));var eu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Hs;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Hs||(Hs={}));var WQ={Ed25519:Hs.Ed25519,ES256K:Hs.secp256k1,ES256:Hs.secp256r1,"P-256":Hs.secp256r1,secp256k1:Hs.secp256k1,secp256r1:Hs.secp256r1},j6="https://ion.tbd.engineering",uh=class t extends Di{static create(){return eu(this,arguments,void 0,function*({keyManager:e=new pn,options:r={}}={}){var n,s,i,o,a,u,c;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(x=>!(x.algorithm in WQ)))throw new Error("One or more verification method algorithms are not supported");let l=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(x=>"id"in x).map(x=>x.id);if(l&&l.length!==new Set(l).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(x=>!x.id||!x.type||!x.serviceEndpoint))throw new Error("One or more services are missing required properties");let f={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},p=[];for(let x of(o=r.verificationMethods)!==null&&o!==void 0?o:[f]){let B=yield e.generateKey({algorithm:x.algorithm}),C=yield e.getPublicKey({keyUri:B});p.push({id:x.id,publicKeyJwk:C,purposes:(a=x.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let d=yield e.generateKey({algorithm:Hs.secp256k1}),h=yield e.getPublicKey({keyUri:d}),m=yield e.generateKey({algorithm:Hs.secp256k1}),g=yield e.getPublicKey({keyUri:m}),_=yield Cc.computeLongFormDidUri({recoveryKey:h,updateKey:g,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:p}),{didDocument:D,didResolutionMetadata:v}=yield t.resolve(_,{gatewayUri:r.gatewayUri});if(D===null)throw new Error(`Unable to resolve DID during creation: ${v?.error}`);let A=new qn({uri:_,document:D,metadata:{published:!1,canonicalId:_.split(":",3).join(":"),recoveryKey:h,updateKey:g},keyManager:e});if(!((c=r.publish)!==null&&c!==void 0)||c){let x=yield t.publish({did:A,gatewayUri:r.gatewayUri});A.metadata=x.didDocumentMetadata}return A})}static getSigningMethod(e){return eu(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;let i=tt.parse(r.id);if(i&&i.method!==this.methodName)throw new we(me.MethodNotSupported,`Method not supported: ${i.method}`);let o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u;return a.id===(n??((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(o&&o.publicKeyJwk))throw new we(me.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return eu(this,arguments,void 0,function*({portableDid:r,keyManager:n=new pn}){let s=tt.parse(r.uri);if(s?.method!==t.methodName)throw new we(me.MethodNotSupported,"Method not supported");return yield qn.import({portableDid:r,keyManager:n})})}static publish(e){return eu(this,arguments,void 0,function*({did:r,gatewayUri:n=j6}){var s,i,o;let a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(l=>({id:l.id,publicKeyJwk:l.publicKeyJwk,purposes:jE({didDocument:r.document,methodId:l.id})})))!==null&&i!==void 0?i:[],u=yield Cc.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),c=yield Cc.constructCreateRequest({ionDocument:u,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{let l=Cc.appendPathToUrl({baseUrl:n,path:"/operations"}),f=yield fetch(l,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:f.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:me.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return eu(this,arguments,void 0,function*(r,n={}){var s,i;let o=tt.parse(r);if(!o)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==t.methodName)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"methodNotSupported"}});let a=(s=n?.gatewayUri)!==null&&s!==void 0?s:j6;try{let u=Cc.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),c=yield fetch(u);if(!c.ok)throw new we(me.NotFound,`Unable to find DID document for: ${r}`);let{didDocument:l,didDocumentMetadata:f}=yield c.json();return Object.assign(Object.assign(Object.assign({},sr),l&&{didDocument:l}),{didDocumentMetadata:Object.assign({published:(i=f?.method)===null||i===void 0?void 0:i.published},f)})}catch(u){if(!(u instanceof we))throw new Error(u);return Object.assign(Object.assign({},sr),{didResolutionMetadata:Object.assign({error:u.code},u.message&&{errorMessage:u.message})})}})}};uh.methodName="ion";var Cc=class t{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return eu(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){let o=yield t.createIonDocument({services:s,verificationMethods:i}),a=t.normalizeJwk(r),u=t.normalizeJwk(n);return yield Cf.createLongFormDid({document:o,recoveryKey:a,updateKey:u})})}static constructCreateRequest(e){return eu(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield Ya.createCreateRequest({document:r,recoveryKey:t.normalizeJwk(n),updateKey:t.normalizeJwk(s)})})}static createIonDocument(e){return eu(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;let o=[];for(let c of n){let l=(i=(s=c.id)!==null&&s!==void 0?s:c.publicKeyJwk.kid)!==null&&i!==void 0?i:yield Le({jwk:c.publicKeyJwk});l=`${l.split("#").pop()}`;let f={id:l,publicKeyJwk:t.normalizeJwk(c.publicKeyJwk),purposes:c.purposes,type:"JsonWebKey2020"};o.push(f)}let a=r.map(c=>Object.assign(Object.assign({},c),{id:`${c.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var wg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ch=class t extends Di{static create(){return wg(this,arguments,void 0,function*({keyManager:e=new pn,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=X.object(c).toBase64Url(),f=`did:${t.methodName}:${l}`,d=(yield t.resolve(f)).didDocument;return new qn({uri:f,document:d,metadata:{},keyManager:e})})}static getSigningMethod(e){return wg(this,arguments,void 0,function*({didDocument:r}){var n;let s=tt.parse(r.id);if(s&&s.method!==this.methodName)throw new we(me.MethodNotSupported,`Method not supported: ${s.method}`);let[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new we(me.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(e){return wg(this,arguments,void 0,function*({portableDid:r,keyManager:n=new pn}){let s=tt.parse(r.uri);if(s?.method!==t.methodName)throw new we(me.MethodNotSupported,"Method not supported");let i=yield qn.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new we(me.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return wg(this,void 0,void 0,function*(){let n=tt.parse(e),s;try{s=X.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"methodNotSupported"}});let i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},sr),{didDocument:i})})}};ch.methodName="jwk";var es=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Xo;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Xo||(Xo={}));var BS={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},JQ={Ed25519:Xo.Ed25519,ES256K:Xo.secp256k1,ES256:Xo.secp256r1,"P-256":Xo.secp256r1,secp256k1:Xo.secp256k1,secp256r1:Xo.secp256r1,X25519:Xo.X25519},lh=class t extends Di{static create(){return es(this,arguments,void 0,function*({keyManager:e=new pn,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=yield Vn.publicKeyToMultibaseId({publicKey:c}),f=`did:${t.methodName}:${l}`,d=(yield t.resolve(f,r)).didDocument;return new qn({uri:f,document:d,metadata:{},keyManager:e})})}static getSigningMethod(e){return es(this,arguments,void 0,function*({didDocument:r}){var n;let s=tt.parse(r.id);if(s&&s.method!==this.methodName)throw new we(me.MethodNotSupported,`Method not supported: ${s.method}`);let[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new we(me.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return es(this,arguments,void 0,function*({portableDid:r,keyManager:n=new pn}){let s=tt.parse(r.uri);if(s?.method!==t.methodName)throw new we(me.MethodNotSupported,"Method not supported");let i=yield qn.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new we(me.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return es(this,void 0,void 0,function*(){try{let n=yield t.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},sr),{didDocument:n})}catch(n){if(!(n instanceof we))throw new Error(n);return Object.assign(Object.assign({},sr),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return es(this,arguments,void 0,function*({didUri:r,options:n={}}){let{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,u={id:""},c=tt.parse(r);if(!c)throw new we(me.InvalidDid,`Invalid DID URI: ${r}`);let l=c.id;if(c.method!==t.methodName)throw new we(me.MethodNotSupported,`Method not supported: ${c.method}`);if(!t.validateIdentifier(c))throw new we(me.InvalidDid,`Invalid DID URI: ${r}`);let f=yield t.createSignatureMethod({didUri:r,multibaseValue:l,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(u.id=c.uri,u.verificationMethod=[f],u.authentication=[f.id],u.assertionMethod=[f.id],u.capabilityInvocation=[f.id],u.capabilityDelegation=[f.id],i===!0){let h=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",m=yield this.createEncryptionMethod({didUri:r,multibaseValue:l,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:h}});u.verificationMethod.push(m),u.keyAgreement=[m.id]}let p=[s];return ME({didDocument:u}).forEach(h=>{let m=BS[h];p.push(m)}),u["@context"]=p,u})}static createEncryptionMethod(e){return es(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:c}=yield t.deriveEncryptionKey({multibaseValue:n}),l=u.byteLength,f=Vn.MULTICODEC_PUBLIC_KEY_LENGTH[c];if(l!==f)throw new we(me.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${f}`);let p=N0({keyBytes:u,multicodecCode:c});a.id=`${r}#${p}`;try{new URL(a.id)}catch{throw new we(me.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in BS))throw new we(me.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new we(me.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=p),o==="JsonWebKey2020"){let{crv:h}=yield Vn.multicodecToJwk({code:c});a.publicKeyJwk=yield Vn.keyConverter(h).bytesToPublicKey({publicKeyBytes:u})}return a})}static createSignatureMethod(e){return es(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:c,multicodecName:l}=M0({multibaseKeyId:n}),f=u.byteLength,p=Vn.MULTICODEC_PUBLIC_KEY_LENGTH[c];if(f!==p)throw new we(me.InvalidPublicKeyLength,`Expected ${f} bytes. Actual: ${p}`);let d=!1;switch(l){case"secp256k1-pub":d=yield $r.validatePublicKey({publicKeyBytes:u});break;case"ed25519-pub":d=yield Pr.validatePublicKey({publicKeyBytes:u});break;case"x25519-pub":d=!0;break}if(!d)throw new we(me.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new we(me.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in BS))throw new we(me.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new we(me.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){let{crv:m}=yield Vn.multicodecToJwk({code:c});a.publicKeyJwk=yield Vn.keyConverter(m).bytesToPublicKey({publicKeyBytes:u})}return a})}static deriveEncryptionKey(e){return es(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:s,multicodecCode:i}=M0({multibaseKeyId:r});if(i===237){let o=yield Vn.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Pr.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield Vn.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){let{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&lc(n)==="String"&&n.startsWith("z")}};lh.methodName="key";var Vn=class t{static jwkToMulticodec(e){return es(this,arguments,void 0,function*({jwk:r}){let n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));let s=n.join(":"),i=t.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:dn.getCodeFromName({name:i}),name:i}})}static keyCompressor(e){let n={"P-256":Yr.compressPublicKey,secp256k1:$r.compressPublicKey}[e];if(!n)throw new we(me.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:Pr,"P-256":Yr,secp256k1:$r,X25519:gf}[e];if(!n)throw new we(me.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return es(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?dn.getNameFromCode({code:r}):n;let s=n,i=t.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(e){return es(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r?.crv&&r.crv in JQ))throw new we(me.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r?.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield t.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield t.keyCompressor(r.crv)({publicKeyBytes:s}));let{name:i}=yield t.jwkToMulticodec({jwk:r});return N0({keyBytes:s,multicodecName:i})})}};Vn.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Vn.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Vn.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var GQ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},fh=class t extends Di{static resolve(e,r){return GQ(this,void 0,void 0,function*(){let n=tt.parse(e);if(!n)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);let i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{let o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");let a=yield o.json();return Object.assign(Object.assign({},sr),{didDocument:a})}catch{return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"notFound"}})}})}};fh.methodName="web";var tee=Xn(U6(),1),ree=Xn(Tw(),1);var L6={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var K6=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Eg=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||L6;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return K6(this,void 0,void 0,function*(){let n=tt.parse(e);if(!n)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:me.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:me.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let i=yield this.cache.get(n.uri);if(i)return i;{let o=yield s.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(e,r){return K6(this,void 0,void 0,function*(){let n=tt.parse(e);if(!n)return{dereferencingMetadata:{error:me.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};let{service:a=[],verificationMethod:u=[]}=s,c=new Set([e,n.fragment,`#${n.fragment}`]),l;for(let f of u)if(c.has(f.id)){l=f;break}for(let f of a)if(c.has(f.id)){l=f;break}return l?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:l,contentMetadata:i}:{dereferencingMetadata:{error:me.NotFound},contentStream:null,contentMetadata:{}}})}};var nee=new O0,dh=class dh{static async sign(e){let{signerDid:r,payload:n}=e,s=await r.getSigner(),i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);let o={typ:"JWT",alg:s.algorithm,kid:i},a=ln.object(o).toBase64Url(),u=ln.object(n).toBase64Url(),c=`${a}.${u}`,l=ln.string(c).toUint8Array(),f=await s.sign({data:l}),p=ln.uint8Array(f).toBase64Url();return`${c}.${p}`}static async verify(e){let{decoded:r,encoded:n}=dh.parse({jwt:e.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");let s=await dh.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);let i=s.contentStream;if(!i||!j0.isDidVerificationMethod(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");let o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");let a=`${n.header}.${n.payload}`,u=ln.string(a).toUint8Array(),c=ln.base64Url(n.signature).toUint8Array();if(!await nee.verify({key:o,signature:c,data:u}))throw new Error("Signature verification failed: Integrity mismatch");return r}static parse(e){let r=e.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);let[n,s,i]=r,o,a;try{o=ln.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.typ||o.typ!=="JWT")throw new Error("Verification failed: Expected JWT header to contain typ property set to JWT");if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=ln.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}};dh.didResolver=new Eg({didResolvers:[Ec,uh,lh,ch,fh]});var ts=dh;var ul=Xn(zU(),1),Gb=class{static selectCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.selectFrom(r,e);return n.errors?.length!==0?[]:Array.from(new Set(n.verifiableCredential??[]))}static satisfiesPresentationDefinition({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.evaluateCredentials(r,e);if(n.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(n.warnings)),n.areRequiredCredentialsPresent.toString()!=="info"||n.errors?.length){let s="Failed to create Verifiable Presentation JWT due to: ";throw n.areRequiredCredentialsPresent&&(s+="Required Credentials Not Present: "+JSON.stringify(n.areRequiredCredentialsPresent)),n.errors?.length&&(s+="Errors: "+JSON.stringify(n.errors)),new Error(s)}}static createPresentationFromCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=ul.PEX.validateDefinition(r);WU(n);let s=this.pex.evaluateCredentials(r,e);if(s.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(s.warnings)),s.areRequiredCredentialsPresent.toString()!=="info"||s.errors?.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw s.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(s.areRequiredCredentialsPresent)),s.errors?.length&&(a+="Errors: "+JSON.stringify(s.errors)),new Error(a)}let i=this.pex.presentationFrom(r,e),o=ul.PEX.validateSubmission(i.presentationSubmission);return WU(o),i}static validateDefinition({presentationDefinition:e}){return ul.PEX.validateDefinition(e)}static validateSubmission({presentationSubmission:e}){return ul.PEX.validateSubmission(e)}static evaluatePresentation({presentationDefinition:e,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(e,r)}static resetPex(){this.pex=new ul.PEX}};Gb.pex=new ul.PEX;function WU(t){let e="Failed to pass validation check due to: ";if(Array.isArray(t)){if(!t.every(r=>r.status==="info"))throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}else if(t.status!=="info")throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}function Id(t){let e=t.length;for(;--e>=0;)t[e]=0}var Lhe=0,IL=1,Khe=2,Vhe=3,Hhe=258,aP=29,Ly=256,ky=Ly+1+aP,Od=30,uP=19,FL=2*ky+1,cl=15,MC=16,zhe=7,cP=256,kL=16,RL=17,$L=18,YC=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),t1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Whe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),NL=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jhe=512,va=new Array((ky+2)*2);Id(va);var Ty=new Array(Od*2);Id(Ty);var Ry=new Array(Jhe);Id(Ry);var $y=new Array(Hhe-Vhe+1);Id($y);var lP=new Array(aP);Id(lP);var r1=new Array(Od);Id(r1);function jC(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}var ML,jL,qL;function qC(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}var UL=t=>t<256?Ry[t]:Ry[256+(t>>>7)],Ny=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},Jn=(t,e,r)=>{t.bi_valid>MC-r?(t.bi_buf|=e<<t.bi_valid&65535,Ny(t,t.bi_buf),t.bi_buf=e>>MC-t.bi_valid,t.bi_valid+=r-MC):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},po=(t,e,r)=>{Jn(t,r[e*2],r[e*2+1])},LL=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},Ghe=t=>{t.bi_valid===16?(Ny(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Zhe=(t,e)=>{let r=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,u=e.stat_desc.max_length,c,l,f,p,d,h,m=0;for(p=0;p<=cl;p++)t.bl_count[p]=0;for(r[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<FL;c++)l=t.heap[c],p=r[r[l*2+1]*2+1]+1,p>u&&(p=u,m++),r[l*2+1]=p,!(l>n)&&(t.bl_count[p]++,d=0,l>=a&&(d=o[l-a]),h=r[l*2],t.opt_len+=h*(p+d),i&&(t.static_len+=h*(s[l*2+1]+d)));if(m!==0){do{for(p=u-1;t.bl_count[p]===0;)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[u]--,m-=2}while(m>0);for(p=u;p!==0;p--)for(l=t.bl_count[p];l!==0;)f=t.heap[--c],!(f>n)&&(r[f*2+1]!==p&&(t.opt_len+=(p-r[f*2+1])*r[f*2],r[f*2+1]=p),l--)}},KL=(t,e,r)=>{let n=new Array(cl+1),s=0,i,o;for(i=1;i<=cl;i++)s=s+r[i-1]<<1,n[i]=s;for(o=0;o<=e;o++){let a=t[o*2+1];a!==0&&(t[o*2]=LL(n[a]++,a))}},Xhe=()=>{let t,e,r,n,s,i=new Array(cl+1);for(r=0,n=0;n<aP-1;n++)for(lP[n]=r,t=0;t<1<<YC[n];t++)$y[r++]=n;for($y[r-1]=n,s=0,n=0;n<16;n++)for(r1[n]=s,t=0;t<1<<t1[n];t++)Ry[s++]=n;for(s>>=7;n<Od;n++)for(r1[n]=s<<7,t=0;t<1<<t1[n]-7;t++)Ry[256+s++]=n;for(e=0;e<=cl;e++)i[e]=0;for(t=0;t<=143;)va[t*2+1]=8,t++,i[8]++;for(;t<=255;)va[t*2+1]=9,t++,i[9]++;for(;t<=279;)va[t*2+1]=7,t++,i[7]++;for(;t<=287;)va[t*2+1]=8,t++,i[8]++;for(KL(va,ky+1,i),t=0;t<Od;t++)Ty[t*2+1]=5,Ty[t*2]=LL(t,5);ML=new jC(va,YC,Ly+1,ky,cl),jL=new jC(Ty,t1,0,Od,cl),qL=new jC(new Array(0),Whe,0,uP,zhe)},VL=t=>{let e;for(e=0;e<ky;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Od;e++)t.dyn_dtree[e*2]=0;for(e=0;e<uP;e++)t.bl_tree[e*2]=0;t.dyn_ltree[cP*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},HL=t=>{t.bi_valid>8?Ny(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},JU=(t,e,r,n)=>{let s=e*2,i=r*2;return t[s]<t[i]||t[s]===t[i]&&n[e]<=n[r]},UC=(t,e,r)=>{let n=t.heap[r],s=r<<1;for(;s<=t.heap_len&&(s<t.heap_len&&JU(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!JU(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n},GU=(t,e,r)=>{let n,s,i=0,o,a;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+i++]&255,n+=(t.pending_buf[t.sym_buf+i++]&255)<<8,s=t.pending_buf[t.sym_buf+i++],n===0?po(t,s,e):(o=$y[s],po(t,o+Ly+1,e),a=YC[o],a!==0&&(s-=lP[o],Jn(t,s,a)),n--,o=UL(n),po(t,o,r),a=t1[o],a!==0&&(n-=r1[o],Jn(t,n,a)));while(i<t.sym_next);po(t,cP,e)},QC=(t,e)=>{let r=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems,o,a,u=-1,c;for(t.heap_len=0,t.heap_max=FL,o=0;o<i;o++)r[o*2]!==0?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,r[c*2]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=n[c*2+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)UC(t,r,o);c=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],UC(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[c*2]=r[o*2]+r[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=c,t.heap[1]=c++,UC(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Zhe(t,e),KL(r,u,t.bl_count)},ZU=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,u=7,c=4;for(o===0&&(u=138,c=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=e[(n+1)*2+1],!(++a<u&&i===o)&&(a<c?t.bl_tree[i*2]+=a:i!==0?(i!==s&&t.bl_tree[i*2]++,t.bl_tree[kL*2]++):a<=10?t.bl_tree[RL*2]++:t.bl_tree[$L*2]++,a=0,s=i,o===0?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))},XU=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,u=7,c=4;for(o===0&&(u=138,c=3),n=0;n<=r;n++)if(i=o,o=e[(n+1)*2+1],!(++a<u&&i===o)){if(a<c)do po(t,i,t.bl_tree);while(--a!==0);else i!==0?(i!==s&&(po(t,i,t.bl_tree),a--),po(t,kL,t.bl_tree),Jn(t,a-3,2)):a<=10?(po(t,RL,t.bl_tree),Jn(t,a-3,3)):(po(t,$L,t.bl_tree),Jn(t,a-11,7));a=0,s=i,o===0?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}},Yhe=t=>{let e;for(ZU(t,t.dyn_ltree,t.l_desc.max_code),ZU(t,t.dyn_dtree,t.d_desc.max_code),QC(t,t.bl_desc),e=uP-1;e>=3&&t.bl_tree[NL[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},Qhe=(t,e,r,n)=>{let s;for(Jn(t,e-257,5),Jn(t,r-1,5),Jn(t,n-4,4),s=0;s<n;s++)Jn(t,t.bl_tree[NL[s]*2+1],3);XU(t,t.dyn_ltree,e-1),XU(t,t.dyn_dtree,r-1)},eye=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return 0;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return 1;for(r=32;r<Ly;r++)if(t.dyn_ltree[r*2]!==0)return 1;return 0},YU=!1,tye=t=>{YU||(Xhe(),YU=!0),t.l_desc=new qC(t.dyn_ltree,ML),t.d_desc=new qC(t.dyn_dtree,jL),t.bl_desc=new qC(t.bl_tree,qL),t.bi_buf=0,t.bi_valid=0,VL(t)},zL=(t,e,r,n)=>{Jn(t,(Lhe<<1)+(n?1:0),3),HL(t),Ny(t,r),Ny(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},rye=t=>{Jn(t,IL<<1,3),po(t,cP,va),Ghe(t)},nye=(t,e,r,n)=>{let s,i,o=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=eye(t)),QC(t,t.l_desc),QC(t,t.d_desc),o=Yhe(t),s=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=s&&(s=i)):s=i=r+5,r+4<=s&&e!==-1?zL(t,e,r,n):t.strategy===4||i===s?(Jn(t,(IL<<1)+(n?1:0),3),GU(t,va,Ty)):(Jn(t,(Khe<<1)+(n?1:0),3),Qhe(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),GU(t,t.dyn_ltree,t.dyn_dtree)),VL(t),n&&HL(t)},iye=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[($y[r]+Ly+1)*2]++,t.dyn_dtree[UL(e)*2]++),t.sym_next===t.sym_end),sye=tye,oye=zL,aye=nye,uye=iye,cye=rye,lye={_tr_init:sye,_tr_stored_block:oye,_tr_flush_block:aye,_tr_tally:uye,_tr_align:cye},fye=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+e[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0},My=fye,dye=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},pye=new Uint32Array(dye()),hye=(t,e,r,n)=>{let s=pye,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1},Hr=hye,dl={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yl={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:yye,_tr_stored_block:eP,_tr_flush_block:mye,_tr_tally:xu,_tr_align:gye}=lye,{Z_NO_FLUSH:Du,Z_PARTIAL_FLUSH:vye,Z_FULL_FLUSH:bye,Z_FINISH:Mi,Z_BLOCK:QU,Z_OK:un,Z_STREAM_END:eL,Z_STREAM_ERROR:ho,Z_DATA_ERROR:wye,Z_BUF_ERROR:LC,Z_DEFAULT_COMPRESSION:_ye,Z_FILTERED:Eye,Z_HUFFMAN_ONLY:Zb,Z_RLE:Sye,Z_FIXED:Aye,Z_DEFAULT_STRATEGY:xye,Z_UNKNOWN:Dye,Z_DEFLATED:s1}=yl,Cye=9,Pye=15,Oye=8,Bye=29,Tye=256,tP=Tye+1+Bye,Iye=30,Fye=19,kye=2*tP+1,Rye=15,yt=3,Au=258,yo=Au+yt+1,$ye=32,Bd=42,fP=57,rP=69,nP=73,iP=91,sP=103,ll=113,Oy=666,In=1,Fd=2,pl=3,kd=4,Nye=3,fl=(t,e)=>(t.msg=dl[e],e),tL=t=>t*2-(t>4?9:0),Su=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Mye=t=>{let e,r,n,s=t.w_size;e=t.hash_size,n=e;do r=t.head[--n],t.head[n]=r>=s?r-s:0;while(--e);e=s,n=e;do r=t.prev[--n],t.prev[n]=r>=s?r-s:0;while(--e)},jye=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,Cu=jye,ui=t=>{let e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},ci=(t,e)=>{mye(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ui(t.strm)},Pt=(t,e)=>{t.pending_buf[t.pending++]=e},Py=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},oP=(t,e,r,n)=>{let s=t.avail_in;return s>n&&(s=n),s===0?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),r),t.state.wrap===1?t.adler=My(t.adler,e,s,r):t.state.wrap===2&&(t.adler=Hr(t.adler,e,s,r)),t.next_in+=s,t.total_in+=s,s)},WL=(t,e)=>{let r=t.max_chain_length,n=t.strstart,s,i,o=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-yo?t.strstart-(t.w_size-yo):0,c=t.window,l=t.w_mask,f=t.prev,p=t.strstart+Au,d=c[n+o-1],h=c[n+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(s=e,!(c[s+o]!==h||c[s+o-1]!==d||c[s]!==c[n]||c[++s]!==c[n+1])){n+=2,s++;do;while(c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&n<p);if(i=Au-(p-n),n=p-Au,i>o){if(t.match_start=e,o=i,i>=a)break;d=c[n+o-1],h=c[n+o]}}while((e=f[e&l])>u&&--r!==0);return o<=t.lookahead?o:t.lookahead},Td=t=>{let e=t.w_size,r,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-yo)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Mye(t),n+=e),t.strm.avail_in===0)break;if(r=oP(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=yt)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Cu(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Cu(t,t.ins_h,t.window[s+yt-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<yt)););}while(t.lookahead<yo&&t.strm.avail_in!==0)},JL=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,s,i,o=0,a=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,s=t.strstart-t.block_start,n>s+t.strm.avail_in&&(n=s+t.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&e!==Mi||e===Du||n!==s+t.strm.avail_in)))break;o=e===Mi&&n===s+t.strm.avail_in?1:0,eP(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,ui(t.strm),s&&(s>n&&(s=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+s),t.strm.next_out),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s,t.block_start+=s,n-=s),n&&(oP(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(o===0);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?kd:e!==Du&&e!==Mi&&t.strm.avail_in===0&&t.strstart===t.block_start?Fd:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(oP(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,r=i>t.w_size?t.w_size:i,s=t.strstart-t.block_start,(s>=r||(s||e===Mi)&&e!==Du&&t.strm.avail_in===0&&s<=i)&&(n=s>i?i:s,o=e===Mi&&t.strm.avail_in===0&&n===s?1:0,eP(t,t.block_start,n,o),t.block_start+=n,ui(t.strm)),o?pl:In)},KC=(t,e)=>{let r,n;for(;;){if(t.lookahead<yo){if(Td(t),t.lookahead<yo&&e===Du)return In;if(t.lookahead===0)break}if(r=0,t.lookahead>=yt&&(t.ins_h=Cu(t,t.ins_h,t.window[t.strstart+yt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-yo&&(t.match_length=WL(t,r)),t.match_length>=yt)if(n=xu(t,t.strstart-t.match_start,t.match_length-yt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=yt){t.match_length--;do t.strstart++,t.ins_h=Cu(t,t.ins_h,t.window[t.strstart+yt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Cu(t,t.ins_h,t.window[t.strstart+1]);else n=xu(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(ci(t,!1),t.strm.avail_out===0))return In}return t.insert=t.strstart<yt-1?t.strstart:yt-1,e===Mi?(ci(t,!0),t.strm.avail_out===0?pl:kd):t.sym_next&&(ci(t,!1),t.strm.avail_out===0)?In:Fd},Cd=(t,e)=>{let r,n,s;for(;;){if(t.lookahead<yo){if(Td(t),t.lookahead<yo&&e===Du)return In;if(t.lookahead===0)break}if(r=0,t.lookahead>=yt&&(t.ins_h=Cu(t,t.ins_h,t.window[t.strstart+yt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=yt-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-yo&&(t.match_length=WL(t,r),t.match_length<=5&&(t.strategy===Eye||t.match_length===yt&&t.strstart-t.match_start>4096)&&(t.match_length=yt-1)),t.prev_length>=yt&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-yt,n=xu(t,t.strstart-1-t.prev_match,t.prev_length-yt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=Cu(t,t.ins_h,t.window[t.strstart+yt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=yt-1,t.strstart++,n&&(ci(t,!1),t.strm.avail_out===0))return In}else if(t.match_available){if(n=xu(t,0,t.window[t.strstart-1]),n&&ci(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return In}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=xu(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<yt-1?t.strstart:yt-1,e===Mi?(ci(t,!0),t.strm.avail_out===0?pl:kd):t.sym_next&&(ci(t,!1),t.strm.avail_out===0)?In:Fd},qye=(t,e)=>{let r,n,s,i,o=t.window;for(;;){if(t.lookahead<=Au){if(Td(t),t.lookahead<=Au&&e===Du)return In;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=yt&&t.strstart>0&&(s=t.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){i=t.strstart+Au;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<i);t.match_length=Au-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=yt?(r=xu(t,1,t.match_length-yt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=xu(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(ci(t,!1),t.strm.avail_out===0))return In}return t.insert=0,e===Mi?(ci(t,!0),t.strm.avail_out===0?pl:kd):t.sym_next&&(ci(t,!1),t.strm.avail_out===0)?In:Fd},Uye=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(Td(t),t.lookahead===0)){if(e===Du)return In;break}if(t.match_length=0,r=xu(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(ci(t,!1),t.strm.avail_out===0))return In}return t.insert=0,e===Mi?(ci(t,!0),t.strm.avail_out===0?pl:kd):t.sym_next&&(ci(t,!1),t.strm.avail_out===0)?In:Fd};function fo(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s}var By=[new fo(0,0,0,0,JL),new fo(4,4,8,4,KC),new fo(4,5,16,8,KC),new fo(4,6,32,32,KC),new fo(4,4,16,16,Cd),new fo(8,16,32,32,Cd),new fo(8,16,128,128,Cd),new fo(8,32,128,256,Cd),new fo(32,128,258,1024,Cd),new fo(32,258,258,4096,Cd)],Lye=t=>{t.window_size=2*t.w_size,Su(t.head),t.max_lazy_match=By[t.level].max_lazy,t.good_match=By[t.level].good_length,t.nice_match=By[t.level].nice_length,t.max_chain_length=By[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=yt-1,t.match_available=0,t.ins_h=0};function Kye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=s1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(kye*2),this.dyn_dtree=new Uint16Array((2*Iye+1)*2),this.bl_tree=new Uint16Array((2*Fye+1)*2),Su(this.dyn_ltree),Su(this.dyn_dtree),Su(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Rye+1),this.heap=new Uint16Array(2*tP+1),Su(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*tP+1),Su(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ky=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.status!==Bd&&e.status!==fP&&e.status!==rP&&e.status!==nP&&e.status!==iP&&e.status!==sP&&e.status!==ll&&e.status!==Oy?1:0},GL=t=>{if(Ky(t))return fl(t,ho);t.total_in=t.total_out=0,t.data_type=Dye;let e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?fP:e.wrap?Bd:ll,t.adler=e.wrap===2?0:1,e.last_flush=-2,yye(e),un},ZL=t=>{let e=GL(t);return e===un&&Lye(t.state),e},Vye=(t,e)=>Ky(t)||t.state.wrap!==2?ho:(t.state.gzhead=e,un),XL=(t,e,r,n,s,i)=>{if(!t)return ho;let o=1;if(e===_ye&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>Cye||r!==s1||n<8||n>15||e<0||e>9||i<0||i>Aye||n===8&&o!==1)return fl(t,ho);n===8&&(n=9);let a=new Kye;return t.state=a,a.strm=t,a.status=Bd,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+yt-1)/yt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=i,a.method=r,ZL(t)},Hye=(t,e)=>XL(t,e,s1,Pye,Oye,xye),zye=(t,e)=>{if(Ky(t)||e>QU||e<0)return t?fl(t,ho):ho;let r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===Oy&&e!==Mi)return fl(t,t.avail_out===0?LC:ho);let n=r.last_flush;if(r.last_flush=e,r.pending!==0){if(ui(t),t.avail_out===0)return r.last_flush=-1,un}else if(t.avail_in===0&&tL(e)<=tL(n)&&e!==Mi)return fl(t,LC);if(r.status===Oy&&t.avail_in!==0)return fl(t,LC);if(r.status===Bd&&r.wrap===0&&(r.status=ll),r.status===Bd){let s=s1+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=Zb||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,s|=i<<6,r.strstart!==0&&(s|=$ye),s+=31-s%31,Py(r,s),r.strstart!==0&&(Py(r,t.adler>>>16),Py(r,t.adler&65535)),t.adler=1,r.status=ll,ui(t),r.pending!==0)return r.last_flush=-1,un}if(r.status===fP){if(t.adler=0,Pt(r,31),Pt(r,139),Pt(r,8),r.gzhead)Pt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Pt(r,r.gzhead.time&255),Pt(r,r.gzhead.time>>8&255),Pt(r,r.gzhead.time>>16&255),Pt(r,r.gzhead.time>>24&255),Pt(r,r.level===9?2:r.strategy>=Zb||r.level<2?4:0),Pt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Pt(r,r.gzhead.extra.length&255),Pt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Hr(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=rP;else if(Pt(r,0),Pt(r,0),Pt(r,0),Pt(r,0),Pt(r,0),Pt(r,r.level===9?2:r.strategy>=Zb||r.level<2?4:0),Pt(r,Nye),r.status=ll,ui(t),r.pending!==0)return r.last_flush=-1,un}if(r.status===rP){if(r.gzhead.extra){let s=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex+=a,ui(t),r.pending!==0)return r.last_flush=-1,un;s=0,i-=a}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=nP}if(r.status===nP){if(r.gzhead.name){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),ui(t),r.pending!==0)return r.last_flush=-1,un;s=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,Pt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=iP}if(r.status===iP){if(r.gzhead.comment){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),ui(t),r.pending!==0)return r.last_flush=-1,un;s=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,Pt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s))}r.status=sP}if(r.status===sP){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(ui(t),r.pending!==0))return r.last_flush=-1,un;Pt(r,t.adler&255),Pt(r,t.adler>>8&255),t.adler=0}if(r.status=ll,ui(t),r.pending!==0)return r.last_flush=-1,un}if(t.avail_in!==0||r.lookahead!==0||e!==Du&&r.status!==Oy){let s=r.level===0?JL(r,e):r.strategy===Zb?Uye(r,e):r.strategy===Sye?qye(r,e):By[r.level].func(r,e);if((s===pl||s===kd)&&(r.status=Oy),s===In||s===pl)return t.avail_out===0&&(r.last_flush=-1),un;if(s===Fd&&(e===vye?gye(r):e!==QU&&(eP(r,0,0,!1),e===bye&&(Su(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ui(t),t.avail_out===0))return r.last_flush=-1,un}return e!==Mi?un:r.wrap<=0?eL:(r.wrap===2?(Pt(r,t.adler&255),Pt(r,t.adler>>8&255),Pt(r,t.adler>>16&255),Pt(r,t.adler>>24&255),Pt(r,t.total_in&255),Pt(r,t.total_in>>8&255),Pt(r,t.total_in>>16&255),Pt(r,t.total_in>>24&255)):(Py(r,t.adler>>>16),Py(r,t.adler&65535)),ui(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?un:eL)},Wye=t=>{if(Ky(t))return ho;let e=t.state.status;return t.state=null,e===ll?fl(t,wye):un},Jye=(t,e)=>{let r=e.length;if(Ky(t))return ho;let n=t.state,s=n.wrap;if(s===2||s===1&&n.status!==Bd||n.lookahead)return ho;if(s===1&&(t.adler=My(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){s===0&&(Su(n.head),n.strstart=0,n.block_start=0,n.insert=0);let u=new Uint8Array(n.w_size);u.set(e.subarray(r-n.w_size,r),0),e=u,r=n.w_size}let i=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Td(n);n.lookahead>=yt;){let u=n.strstart,c=n.lookahead-(yt-1);do n.ins_h=Cu(n,n.ins_h,n.window[u+yt-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++;while(--c);n.strstart=u,n.lookahead=yt-1,Td(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=yt-1,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=i,n.wrap=s,un},Gye=Hye,Zye=XL,Xye=ZL,Yye=GL,Qye=Vye,eme=zye,tme=Wye,rme=Jye,nme="pako deflate (from Nodeca project)",Iy={deflateInit:Gye,deflateInit2:Zye,deflateReset:Xye,deflateResetKeep:Yye,deflateSetHeader:Qye,deflate:eme,deflateEnd:tme,deflateSetDictionary:rme,deflateInfo:nme},ime=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),sme=function(t){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)ime(r,n)&&(t[n]=r[n])}}return t},ome=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;let r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let o=t[n];r.set(o,s),s+=o.length}return r},o1={assign:sme,flattenChunks:ome},YL=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{YL=!1}var jy=new Uint8Array(256);for(let t=0;t<256;t++)jy[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;jy[254]=jy[254]=1;var ame=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,o=t.length,a=0;for(s=0;s<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),i=0,s=0;i<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e},ume=(t,e)=>{if(e<65534&&t.subarray&&YL)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r},cme=(t,e)=>{let r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s,i=new Array(r*2);for(s=0,n=0;n<r;){let o=t[n++];if(o<128){i[s++]=o;continue}let a=jy[o];if(a>4){i[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|t[n++]&63,a--;if(a>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return ume(i,s)},lme=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+jy[t[r]]>e?r:e},qy={string2buf:ame,buf2string:cme,utf8border:lme};function fme(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var QL=fme,e7=Object.prototype.toString,{Z_NO_FLUSH:dme,Z_SYNC_FLUSH:pme,Z_FULL_FLUSH:hme,Z_FINISH:yme,Z_OK:n1,Z_STREAM_END:mme,Z_DEFAULT_COMPRESSION:gme,Z_DEFAULT_STRATEGY:vme,Z_DEFLATED:bme}=yl;function Vy(t){this.options=o1.assign({level:gme,method:bme,chunkSize:16384,windowBits:15,memLevel:8,strategy:vme},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new QL,this.strm.avail_out=0;let r=Iy.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==n1)throw new Error(dl[r]);if(e.header&&Iy.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=qy.string2buf(e.dictionary):e7.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Iy.deflateSetDictionary(this.strm,n),r!==n1)throw new Error(dl[r]);this._dict_set=!0}}Vy.prototype.push=function(t,e){let r=this.strm,n=this.options.chunkSize,s,i;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?yme:dme,typeof t=="string"?r.input=qy.string2buf(t):e7.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===pme||i===hme)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(s=Iy.deflate(r,i),s===mme)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=Iy.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===n1;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};Vy.prototype.onData=function(t){this.chunks.push(t)};Vy.prototype.onEnd=function(t){t===n1&&(this.result=o1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function dP(t,e){let r=new Vy(e);if(r.push(t,!0),r.err)throw r.msg||dl[r.err];return r.result}function wme(t,e){return e=e||{},e.raw=!0,dP(t,e)}function _me(t,e){return e=e||{},e.gzip=!0,dP(t,e)}var Eme=Vy,Sme=dP,Ame=wme,xme=_me,Dme=yl,Cme={Deflate:Eme,deflate:Sme,deflateRaw:Ame,gzip:xme,constants:Dme},Xb=16209,Pme=16191,Ome=function(e,r){let n,s,i,o,a,u,c,l,f,p,d,h,m,g,_,D,v,A,x,B,C,T,k,I,$=e.state;n=e.next_in,k=e.input,s=n+(e.avail_in-5),i=e.next_out,I=e.output,o=i-(r-e.avail_out),a=i+(e.avail_out-257),u=$.dmax,c=$.wsize,l=$.whave,f=$.wnext,p=$.window,d=$.hold,h=$.bits,m=$.lencode,g=$.distcode,_=(1<<$.lenbits)-1,D=(1<<$.distbits)-1;e:do{h<15&&(d+=k[n++]<<h,h+=8,d+=k[n++]<<h,h+=8),v=m[d&_];t:for(;;){if(A=v>>>24,d>>>=A,h-=A,A=v>>>16&255,A===0)I[i++]=v&65535;else if(A&16){x=v&65535,A&=15,A&&(h<A&&(d+=k[n++]<<h,h+=8),x+=d&(1<<A)-1,d>>>=A,h-=A),h<15&&(d+=k[n++]<<h,h+=8,d+=k[n++]<<h,h+=8),v=g[d&D];r:for(;;){if(A=v>>>24,d>>>=A,h-=A,A=v>>>16&255,A&16){if(B=v&65535,A&=15,h<A&&(d+=k[n++]<<h,h+=8,h<A&&(d+=k[n++]<<h,h+=8)),B+=d&(1<<A)-1,B>u){e.msg="invalid distance too far back",$.mode=Xb;break e}if(d>>>=A,h-=A,A=i-o,B>A){if(A=B-A,A>l&&$.sane){e.msg="invalid distance too far back",$.mode=Xb;break e}if(C=0,T=p,f===0){if(C+=c-A,A<x){x-=A;do I[i++]=p[C++];while(--A);C=i-B,T=I}}else if(f<A){if(C+=c+f-A,A-=f,A<x){x-=A;do I[i++]=p[C++];while(--A);if(C=0,f<x){A=f,x-=A;do I[i++]=p[C++];while(--A);C=i-B,T=I}}}else if(C+=f-A,A<x){x-=A;do I[i++]=p[C++];while(--A);C=i-B,T=I}for(;x>2;)I[i++]=T[C++],I[i++]=T[C++],I[i++]=T[C++],x-=3;x&&(I[i++]=T[C++],x>1&&(I[i++]=T[C++]))}else{C=i-B;do I[i++]=I[C++],I[i++]=I[C++],I[i++]=I[C++],x-=3;while(x>2);x&&(I[i++]=I[C++],x>1&&(I[i++]=I[C++]))}}else if(A&64){e.msg="invalid distance code",$.mode=Xb;break e}else{v=g[(v&65535)+(d&(1<<A)-1)];continue r}break}}else if(A&64)if(A&32){$.mode=Pme;break e}else{e.msg="invalid literal/length code",$.mode=Xb;break e}else{v=m[(v&65535)+(d&(1<<A)-1)];continue t}break}}while(n<s&&i<a);x=h>>3,n-=x,h-=x<<3,d&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<a?257+(a-i):257-(i-a),$.hold=d,$.bits=h},Pd=15,rL=852,nL=592,iL=0,VC=1,sL=2,Bme=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Tme=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ime=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Fme=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),kme=(t,e,r,n,s,i,o,a)=>{let u=a.bits,c=0,l=0,f=0,p=0,d=0,h=0,m=0,g=0,_=0,D=0,v,A,x,B,C,T=null,k,I=new Uint16Array(Pd+1),$=new Uint16Array(Pd+1),M=null,Y,ee,U;for(c=0;c<=Pd;c++)I[c]=0;for(l=0;l<n;l++)I[e[r+l]]++;for(d=u,p=Pd;p>=1&&I[p]===0;p--);if(d>p&&(d=p),p===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,a.bits=1,0;for(f=1;f<p&&I[f]===0;f++);for(d<f&&(d=f),g=1,c=1;c<=Pd;c++)if(g<<=1,g-=I[c],g<0)return-1;if(g>0&&(t===iL||p!==1))return-1;for($[1]=0,c=1;c<Pd;c++)$[c+1]=$[c]+I[c];for(l=0;l<n;l++)e[r+l]!==0&&(o[$[e[r+l]]++]=l);if(t===iL?(T=M=o,k=20):t===VC?(T=Bme,M=Tme,k=257):(T=Ime,M=Fme,k=0),D=0,l=0,c=f,C=i,h=d,m=0,x=-1,_=1<<d,B=_-1,t===VC&&_>rL||t===sL&&_>nL)return 1;for(;;){Y=c-m,o[l]+1<k?(ee=0,U=o[l]):o[l]>=k?(ee=M[o[l]-k],U=T[o[l]-k]):(ee=96,U=0),v=1<<c-m,A=1<<h,f=A;do A-=v,s[C+(D>>m)+A]=Y<<24|ee<<16|U|0;while(A!==0);for(v=1<<c-1;D&v;)v>>=1;if(v!==0?(D&=v-1,D+=v):D=0,l++,--I[c]===0){if(c===p)break;c=e[r+o[l]]}if(c>d&&(D&B)!==x){for(m===0&&(m=d),C+=f,h=c-m,g=1<<h;h+m<p&&(g-=I[h+m],!(g<=0));)h++,g<<=1;if(_+=1<<h,t===VC&&_>rL||t===sL&&_>nL)return 1;x=D&B,s[x]=d<<24|h<<16|C-i|0}}return D!==0&&(s[C+D]=c-m<<24|64<<16|0),a.bits=d,0},Fy=kme,Rme=0,t7=1,r7=2,{Z_FINISH:oL,Z_BLOCK:$me,Z_TREES:Yb,Z_OK:hl,Z_STREAM_END:Nme,Z_NEED_DICT:Mme,Z_STREAM_ERROR:ji,Z_DATA_ERROR:n7,Z_MEM_ERROR:i7,Z_BUF_ERROR:jme,Z_DEFLATED:aL}=yl,a1=16180,uL=16181,cL=16182,lL=16183,fL=16184,dL=16185,pL=16186,hL=16187,yL=16188,mL=16189,i1=16190,ga=16191,HC=16192,gL=16193,zC=16194,vL=16195,bL=16196,wL=16197,_L=16198,Qb=16199,e1=16200,EL=16201,SL=16202,AL=16203,xL=16204,DL=16205,WC=16206,CL=16207,PL=16208,er=16209,s7=16210,o7=16211,qme=852,Ume=592,Lme=15,Kme=Lme,OL=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Vme(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ml=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.mode<a1||e.mode>o7?1:0},a7=t=>{if(ml(t))return ji;let e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=a1,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(qme),e.distcode=e.distdyn=new Int32Array(Ume),e.sane=1,e.back=-1,hl},u7=t=>{if(ml(t))return ji;let e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,a7(t)},c7=(t,e)=>{let r;if(ml(t))return ji;let n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ji:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,u7(t))},l7=(t,e)=>{if(!t)return ji;let r=new Vme;t.state=r,r.strm=t,r.window=null,r.mode=a1;let n=c7(t,e);return n!==hl&&(t.state=null),n},Hme=t=>l7(t,Kme),BL=!0,JC,GC,zme=t=>{if(BL){JC=new Int32Array(512),GC=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Fy(t7,t.lens,0,288,JC,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Fy(r7,t.lens,0,32,GC,0,t.work,{bits:5}),BL=!1}t.lencode=JC,t.lenbits=9,t.distcode=GC,t.distbits=5},f7=(t,e,r,n)=>{let s,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Wme=(t,e)=>{let r,n,s,i,o,a,u,c,l,f,p,d,h,m,g=0,_,D,v,A,x,B,C,T,k=new Uint8Array(4),I,$,M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ml(t)||!t.output||!t.input&&t.avail_in!==0)return ji;r=t.state,r.mode===ga&&(r.mode=HC),o=t.next_out,s=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,l=r.bits,f=a,p=u,T=hl;e:for(;;)switch(r.mode){case a1:if(r.wrap===0){r.mode=HC;break}for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,k[0]=c&255,k[1]=c>>>8&255,r.check=Hr(r.check,k,2,0),c=0,l=0,r.mode=uL;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=er;break}if((c&15)!==aL){t.msg="unknown compression method",r.mode=er;break}if(c>>>=4,l-=4,C=(c&15)+8,r.wbits===0&&(r.wbits=C),C>15||C>r.wbits){t.msg="invalid window size",r.mode=er;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?mL:ga,c=0,l=0;break;case uL:for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.flags=c,(r.flags&255)!==aL){t.msg="unknown compression method",r.mode=er;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=er;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,r.check=Hr(r.check,k,2,0)),c=0,l=0,r.mode=cL;case cL:for(;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,r.check=Hr(r.check,k,4,0)),c=0,l=0,r.mode=lL;case lL:for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,r.check=Hr(r.check,k,2,0)),c=0,l=0,r.mode=fL;case fL:if(r.flags&1024){for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,r.check=Hr(r.check,k,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=dL;case dL:if(r.flags&1024&&(d=r.length,d>a&&(d=a),d&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+d),C)),r.flags&512&&r.wrap&4&&(r.check=Hr(r.check,n,d,i)),a-=d,i+=d,r.length-=d),r.length))break e;r.length=0,r.mode=pL;case pL:if(r.flags&2048){if(a===0)break e;d=0;do C=n[i+d++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&d<a);if(r.flags&512&&r.wrap&4&&(r.check=Hr(r.check,n,d,i)),a-=d,i+=d,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=hL;case hL:if(r.flags&4096){if(a===0)break e;d=0;do C=n[i+d++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&d<a);if(r.flags&512&&r.wrap&4&&(r.check=Hr(r.check,n,d,i)),a-=d,i+=d,C)break e}else r.head&&(r.head.comment=null);r.mode=yL;case yL:if(r.flags&512){for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=er;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ga;break;case mL:for(;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}t.adler=r.check=OL(c),c=0,l=0,r.mode=i1;case i1:if(r.havedict===0)return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,Mme;t.adler=r.check=1,r.mode=ga;case ga:if(e===$me||e===Yb)break e;case HC:if(r.last){c>>>=l&7,l-=l&7,r.mode=WC;break}for(;l<3;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}switch(r.last=c&1,c>>>=1,l-=1,c&3){case 0:r.mode=gL;break;case 1:if(zme(r),r.mode=Qb,e===Yb){c>>>=2,l-=2;break e}break;case 2:r.mode=bL;break;case 3:t.msg="invalid block type",r.mode=er}c>>>=2,l-=2;break;case gL:for(c>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=er;break}if(r.length=c&65535,c=0,l=0,r.mode=zC,e===Yb)break e;case zC:r.mode=vL;case vL:if(d=r.length,d){if(d>a&&(d=a),d>u&&(d=u),d===0)break e;s.set(n.subarray(i,i+d),o),a-=d,i+=d,u-=d,o+=d,r.length-=d;break}r.mode=ga;break;case bL:for(;l<14;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.nlen=(c&31)+257,c>>>=5,l-=5,r.ndist=(c&31)+1,c>>>=5,l-=5,r.ncode=(c&15)+4,c>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=er;break}r.have=0,r.mode=wL;case wL:for(;r.have<r.ncode;){for(;l<3;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.lens[M[r.have++]]=c&7,c>>>=3,l-=3}for(;r.have<19;)r.lens[M[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},T=Fy(Rme,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,T){t.msg="invalid code lengths set",r.mode=er;break}r.have=0,r.mode=_L;case _L:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[c&(1<<r.lenbits)-1],_=g>>>24,D=g>>>16&255,v=g&65535,!(_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(v<16)c>>>=_,l-=_,r.lens[r.have++]=v;else{if(v===16){for($=_+2;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(c>>>=_,l-=_,r.have===0){t.msg="invalid bit length repeat",r.mode=er;break}C=r.lens[r.have-1],d=3+(c&3),c>>>=2,l-=2}else if(v===17){for($=_+3;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=_,l-=_,C=0,d=3+(c&7),c>>>=3,l-=3}else{for($=_+7;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=_,l-=_,C=0,d=11+(c&127),c>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=er;break}for(;d--;)r.lens[r.have++]=C}}if(r.mode===er)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=er;break}if(r.lenbits=9,I={bits:r.lenbits},T=Fy(t7,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,T){t.msg="invalid literal/lengths set",r.mode=er;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},T=Fy(r7,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,T){t.msg="invalid distances set",r.mode=er;break}if(r.mode=Qb,e===Yb)break e;case Qb:r.mode=e1;case e1:if(a>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,Ome(t,p),o=t.next_out,s=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,l=r.bits,r.mode===ga&&(r.back=-1);break}for(r.back=0;g=r.lencode[c&(1<<r.lenbits)-1],_=g>>>24,D=g>>>16&255,v=g&65535,!(_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(D&&!(D&240)){for(A=_,x=D,B=v;g=r.lencode[B+((c&(1<<A+x)-1)>>A)],_=g>>>24,D=g>>>16&255,v=g&65535,!(A+_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=A,l-=A,r.back+=A}if(c>>>=_,l-=_,r.back+=_,r.length=v,D===0){r.mode=DL;break}if(D&32){r.back=-1,r.mode=ga;break}if(D&64){t.msg="invalid literal/length code",r.mode=er;break}r.extra=D&15,r.mode=EL;case EL:if(r.extra){for($=r.extra;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=SL;case SL:for(;g=r.distcode[c&(1<<r.distbits)-1],_=g>>>24,D=g>>>16&255,v=g&65535,!(_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(!(D&240)){for(A=_,x=D,B=v;g=r.distcode[B+((c&(1<<A+x)-1)>>A)],_=g>>>24,D=g>>>16&255,v=g&65535,!(A+_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=A,l-=A,r.back+=A}if(c>>>=_,l-=_,r.back+=_,D&64){t.msg="invalid distance code",r.mode=er;break}r.offset=v,r.extra=D&15,r.mode=AL;case AL:if(r.extra){for($=r.extra;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=er;break}r.mode=xL;case xL:if(u===0)break e;if(d=p-u,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=er;break}d>r.wnext?(d-=r.wnext,h=r.wsize-d):h=r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=s,h=o-r.offset,d=r.length;d>u&&(d=u),u-=d,r.length-=d;do s[o++]=m[h++];while(--d);r.length===0&&(r.mode=e1);break;case DL:if(u===0)break e;s[o++]=r.length,u--,r.mode=e1;break;case WC:if(r.wrap){for(;l<32;){if(a===0)break e;a--,c|=n[i++]<<l,l+=8}if(p-=u,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Hr(r.check,s,p,o-p):My(r.check,s,p,o-p)),p=u,r.wrap&4&&(r.flags?c:OL(c))!==r.check){t.msg="incorrect data check",r.mode=er;break}c=0,l=0}r.mode=CL;case CL:if(r.wrap&&r.flags){for(;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=er;break}c=0,l=0}r.mode=PL;case PL:T=Nme;break e;case er:T=n7;break e;case s7:return i7;case o7:default:return ji}return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,(r.wsize||p!==t.avail_out&&r.mode<er&&(r.mode<WC||e!==oL))&&f7(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Hr(r.check,s,p,t.next_out-p):My(r.check,s,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ga?128:0)+(r.mode===Qb||r.mode===zC?256:0),(f===0&&p===0||e===oL)&&T===hl&&(T=jme),T},Jme=t=>{if(ml(t))return ji;let e=t.state;return e.window&&(e.window=null),t.state=null,hl},Gme=(t,e)=>{if(ml(t))return ji;let r=t.state;return r.wrap&2?(r.head=e,e.done=!1,hl):ji},Zme=(t,e)=>{let r=e.length,n,s,i;return ml(t)||(n=t.state,n.wrap!==0&&n.mode!==i1)?ji:n.mode===i1&&(s=1,s=My(s,e,r,0),s!==n.check)?n7:(i=f7(t,e,r,r),i?(n.mode=s7,i7):(n.havedict=1,hl))},Xme=u7,Yme=c7,Qme=a7,e0e=Hme,t0e=l7,r0e=Wme,n0e=Jme,i0e=Gme,s0e=Zme,o0e="pako inflate (from Nodeca project)",ba={inflateReset:Xme,inflateReset2:Yme,inflateResetKeep:Qme,inflateInit:e0e,inflateInit2:t0e,inflate:r0e,inflateEnd:n0e,inflateGetHeader:i0e,inflateSetDictionary:s0e,inflateInfo:o0e};function a0e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var u0e=a0e,d7=Object.prototype.toString,{Z_NO_FLUSH:c0e,Z_FINISH:l0e,Z_OK:Uy,Z_STREAM_END:ZC,Z_NEED_DICT:XC,Z_STREAM_ERROR:f0e,Z_DATA_ERROR:TL,Z_MEM_ERROR:d0e}=yl;function Hy(t){this.options=o1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new QL,this.strm.avail_out=0;let r=ba.inflateInit2(this.strm,e.windowBits);if(r!==Uy)throw new Error(dl[r]);if(this.header=new u0e,ba.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=qy.string2buf(e.dictionary):d7.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=ba.inflateSetDictionary(this.strm,e.dictionary),r!==Uy)))throw new Error(dl[r])}Hy.prototype.push=function(t,e){let r=this.strm,n=this.options.chunkSize,s=this.options.dictionary,i,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?l0e:c0e,d7.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=ba.inflate(r,o),i===XC&&s&&(i=ba.inflateSetDictionary(r,s),i===Uy?i=ba.inflate(r,o):i===TL&&(i=XC));r.avail_in>0&&i===ZC&&r.state.wrap>0&&t[r.next_in]!==0;)ba.inflateReset(r),i=ba.inflate(r,o);switch(i){case f0e:case TL:case XC:case d0e:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||i===ZC))if(this.options.to==="string"){let u=qy.utf8border(r.output,r.next_out),c=r.next_out-u,l=qy.buf2string(r.output,u);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(u,u+c),0),this.onData(l)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Uy&&a===0)){if(i===ZC)return i=ba.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Hy.prototype.onData=function(t){this.chunks.push(t)};Hy.prototype.onEnd=function(t){t===Uy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function pP(t,e){let r=new Hy(e);if(r.push(t),r.err)throw r.msg||dl[r.err];return r.result}function p0e(t,e){return e=e||{},e.raw=!0,pP(t,e)}var h0e=Hy,y0e=pP,m0e=p0e,g0e=pP,v0e=yl,b0e={Inflate:h0e,inflate:y0e,inflateRaw:m0e,ungzip:g0e,constants:v0e},{Deflate:w0e,deflate:_0e,deflateRaw:E0e,gzip:S0e}=Cme,{Inflate:A0e,inflate:x0e,inflateRaw:D0e,ungzip:C0e}=b0e,P0e=w0e,O0e=_0e,B0e=E0e,T0e=S0e,I0e=A0e,F0e=x0e,k0e=D0e,R0e=C0e,$0e=yl,hP={Deflate:P0e,deflate:O0e,deflateRaw:B0e,gzip:T0e,Inflate:I0e,inflate:F0e,inflateRaw:k0e,ungzip:R0e,constants:$0e};var gP={};wo(gP,{getCurrentXmlSchema112Timestamp:()=>zy,getFutureXmlSchema112Timestamp:()=>N0e,getXmlSchema112Timestamp:()=>u1,isValidRFC3339Timestamp:()=>mP,isValidXmlSchema112Timestamp:()=>yP});function zy(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function u1(t){return new Date(t*1e3).toISOString().replace(/\.\d{3}/,"")}function N0e(t){return new Date(Date.now()+t*1e3).toISOString().replace(/\.\d+Z$/,"Z")}function yP(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}function mP(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}var gl="VerifiablePresentation",vP=class t{constructor(e){this.vpDataModel=e}get type(){return this.vpDataModel.type[this.vpDataModel.type.length-1]}get holder(){return this.vpDataModel.holder.toString()}get verifiableCredential(){return this.vpDataModel.verifiableCredential}async sign(e){return await ts.sign({signerDid:e.did,payload:{vp:this.vpDataModel,iss:e.did.uri,sub:e.did.uri,jti:this.vpDataModel.id,iat:Math.floor(Date.now()/1e3)}})}toString(){return JSON.stringify(this.vpDataModel)}static async create(e){let{type:r,holder:n,vcJwts:s,additionalData:i}=e;if(i&&typeof JSON.parse(JSON.stringify(i))!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n)throw new Error("Holder must be defined");if(typeof n!="string")throw new Error("Holder must be of type string");let o={"@context":[wa],type:Array.isArray(r)?[gl,...r]:r?[gl,r]:[gl],id:`urn:uuid:${df.randomUuid()}`,holder:n,verifiableCredential:s,...i};return p7(o),new t(o)}static async verify({vpJwt:e}){let{payload:r}=await ts.verify({jwt:e}),n=r.vp;if(!n)throw new Error("vp property missing.");p7(n);for(let s of n.verifiableCredential)await vl.verify({vcJwt:s});return{issuer:r.iss,subject:r.sub,vp:r.vp}}static parseJwt({vpJwt:e}){let n=ts.parse({jwt:e}).decoded.payload.vp;if(!n)throw Error("Jwt payload missing vp property");return new t(n)}};function p7(t){hs.validateContext(t["@context"]),hs.validateVpType(t.type)}var hs=class{static validateCredentialPayload(e){this.validateContext(e.vcDataModel["@context"]),this.validateVcType(e.type),this.validateCredentialSubject(e.vcDataModel.credentialSubject),e.vcDataModel.issuanceDate&&this.validateTimestamp(e.vcDataModel.issuanceDate),e.vcDataModel.expirationDate&&this.validateTimestamp(e.vcDataModel.expirationDate)}static validateContext(e){let r=this.asArray(e);if(r.length<1||r.indexOf(wa)===-1)throw new Error(`@context is missing default context "${wa}"`)}static validateVcType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(_a)===-1)throw new Error(`type is missing default "${_a}"`)}static validateVpType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(gl)===-1)throw new Error(`type is missing default "${gl}"`)}static validateCredentialSubject(e){if(Object.keys(e).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(e){if(!yP(e)&&!mP(e))throw new Error("timestamp is not valid xml schema 112 timestamp")}static asArray(e){return Array.isArray(e)?e:[e]}};var wa="https://www.w3.org/2018/credentials/v1",_a="VerifiableCredential",vl=class t{constructor(e){this.vcDataModel=e}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}async sign(e){return await ts.sign({signerDid:e.did,payload:{vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:e.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3),...this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)}}})}toString(){return JSON.stringify(this.vcDataModel)}static async create(e){let{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,credentialStatus:u,credentialSchema:c,evidence:l}=e,f=JSON.parse(JSON.stringify(i));if(typeof f!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");let p={id:s,...f},d=[wa];u!==null&&d.push(c1);let h={"@context":d,type:Array.isArray(r)?[_a,...r]:r?[_a,r]:[_a],id:`urn:uuid:${df.randomUuid()}`,issuer:n,issuanceDate:o||zy(),credentialSubject:p,...a&&{expirationDate:a},...u&&{credentialStatus:u},...c&&{credentialSchema:c},...l&&{evidence:l}};return bP(h),new t(h)}static async verify({vcJwt:e}){let{payload:r}=await ts.verify({jwt:e}),{exp:n,iss:s,nbf:i,jti:o,sub:a,vc:u}=r;if(!u)throw new Error("vc property missing.");let c=r.vc;if(n&&c.expirationDate&&n!==Math.floor(new Date(c.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(n&&(c.expirationDate=u1(n)),!s)throw new Error("Verification failed: iss claim is required");if(s!==c.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(i&&i>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(i&&c.issuanceDate&&i!==Math.floor(new Date(c.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(i&&(c.issuanceDate=u1(i)),a&&!Array.isArray(c.credentialSubject)&&a!==c.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(a&&!Array.isArray(c.credentialSubject)&&(c.credentialSubject.id=a),o&&o!==c.id)throw new Error("Verification failed: jti claim does not match id");return o&&(c.id=o),bP(c),{issuer:r.iss,subject:r.sub,vc:c}}static parseJwt({vcJwt:e}){let n=ts.parse({jwt:e}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return bP(n),new t(n)}};function bP(t){hs.validateContext(t["@context"]),hs.validateVcType(t.type),hs.validateCredentialSubject(t.credentialSubject),t.issuanceDate&&hs.validateTimestamp(t.issuanceDate),t.expirationDate&&hs.validateTimestamp(t.expirationDate)}var c1="https://w3id.org/vc/status-list/2021/v1",M0e="StatusList2021Credential",y7=(r=>(r.revocation="revocation",r.suspension="suspension",r))(y7||{}),h7=16*1024*8,wP=class{static create(e){let{statusListCredentialId:r,issuer:n,statusPurpose:s,credentialsToDisable:i}=e,o=this.validateStatusListEntryIndexesAreAllUnique(s,i),a=this.generateBitString(o),u={id:r,type:"StatusList2021",statusPurpose:s,encodedList:a},c={"@context":[wa,c1],type:[_a,M0e],id:r,issuer:n,issuanceDate:zy(),credentialSubject:u};return new vl(c)}static validateCredentialInStatusList(e,r){let n=e.vcDataModel.credentialStatus,s=r.vcDataModel.credentialSubject,i=s.statusPurpose,o=s.encodedList;if(!n.statusPurpose)throw new Error("status purpose in the credential to validate is undefined");if(!i)throw new Error("status purpose in the status list credential is undefined");if(n.statusPurpose!==i)throw new Error("status purposes do not match between the credentials");if(!o)throw new Error("compressed bitstring is null or empty");return this.getBit(o,parseInt(n.statusListIndex))}static validateStatusListEntryIndexesAreAllUnique(e,r){let n=new Set;for(let s of r){if(!s.vcDataModel.credentialStatus)throw new Error("no credential status found in credential");let i=s.vcDataModel.credentialStatus;if(i.statusPurpose!==e)throw new Error("status purpose mismatch");if(n.has(i.statusListIndex))throw new Error(`duplicate entry found with index: ${i.statusListIndex}`);if(parseInt(i.statusListIndex)<0)throw new Error("status list index cannot be negative");if(parseInt(i.statusListIndex)>=h7)throw new Error("status list index is larger than the bitset size");n.add(i.statusListIndex)}return Array.from(n).map(s=>parseInt(s))}static generateBitString(e){let r=new Uint8Array(h7/8);e.forEach(i=>{let o=Math.floor(i/8),a=i%8;r[o]=r[o]|1<<7-a});let n=hP.gzip(r);return ln.uint8Array(n).toBase64Url()}static getBit(e,r){let n=ln.base64Url(e).toUint8Array(),s=hP.inflate(n),i=Math.floor(r/8),o=r%8;return(s[i]>>7-o&1)===1}};return PP(j0e);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)

@noble/ed25519/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=browser.js.map
